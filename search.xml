<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>index</title>
    <url>/POST/index.html</url>
    <content><![CDATA[<p>å¾…æ•´ç†çš„æ–‡ç« </p>
]]></content>
      <categories>
        <category>POST</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/index.html</url>
    <content><![CDATA[<h1 id="ğŸ¯ï¸-Goals"><a class="header-anchor" href="#ğŸ¯ï¸-Goals"></a>ğŸ¯ï¸ Goals</h1>
<p>ğŸ‘‰ï¸ ä»–å±±ä¹‹çŸ³ï¼Œå¯ä»¥æ”»ç‰ã€‚<br>
å­¦ä¹ å€Ÿé‰´å…¶ä»–äººæˆ–è€…å…¬å¸çš„åšæ³•ï¼Œä½“ä¼šbest/bad practicelã€‚</p>
]]></content>
      <categories>
        <category>ä»–å±±ä¹‹çŸ³</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/index.html</url>
    <content><![CDATA[<h1 id="å“ˆå“ˆå“ˆ"><a class="header-anchor" href="#å“ˆå“ˆå“ˆ"></a>å“ˆå“ˆå“ˆ</h1>
<p>ğŸ‘‰ï¸ æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p>
<p>ğŸ“‡ ä½“ç³»åŒ–çš„çŸ¥è¯†ï¼Œéœ€è¦ä¸€æ­¥ä¸€ä¸ªè„šå°åœ°è¾“å…¥ï¼Œ</p>
<p>ğŸ‘£ ä¹Ÿéœ€è¦å¾ªåºæ¸è¿›åœ°æ¶ˆåŒ–ã€‚</p>
]]></content>
      <categories>
        <category>æœèŠ±å¤•æ‹¾</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>emojiå¤§å…¨</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/emoji%E5%A4%A7%E5%85%A8.html</url>
    <content><![CDATA[<h1 id="People"><a class="header-anchor" href="#People"></a>People</h1>
<table>
<thead>
<tr>
<th>ğŸ˜„ <code>:smile:</code></th>
<th>ğŸ˜† <code>:laughing:</code></th>
<th>ğŸ˜« <code>:tired_face:</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ˜Š <code>:blush:</code></td>
<td>ğŸ˜ƒ <code>:smiley:</code></td>
<td>â˜ºï¸ <code>:relaxed:</code></td>
</tr>
<tr>
<td>ğŸ˜ <code>:smirk:</code></td>
<td>ğŸ˜ <code>:heart_eyes:</code></td>
<td>ğŸ˜˜ <code>:kissing_heart:</code></td>
</tr>
<tr>
<td>ğŸ˜š <code>:kissing_closed_eyes:</code></td>
<td>ğŸ˜³ <code>:flushed:</code></td>
<td>ğŸ˜Œ <code>:relieved:</code></td>
</tr>
<tr>
<td>ğŸ˜† <code>:satisfied:</code></td>
<td>ğŸ˜ <code>:grin:</code></td>
<td>ğŸ˜‰ <code>:wink:</code></td>
</tr>
<tr>
<td>ğŸ˜œ <code>:stuck_out_tongue_winking_eye:</code></td>
<td>ğŸ˜ <code>:stuck_out_tongue_closed_eyes:</code></td>
<td>ğŸ˜€ <code>:grinning:</code></td>
</tr>
<tr>
<td>ğŸ˜— <code>:kissing:</code></td>
<td>ğŸ˜™ <code>:kissing_smiling_eyes:</code></td>
<td>ğŸ˜› <code>:stuck_out_tongue:</code></td>
</tr>
<tr>
<td>ğŸ˜´ <code>:sleeping:</code></td>
<td>ğŸ˜Ÿ <code>:worried:</code></td>
<td>ğŸ˜¦ <code>:frowning:</code></td>
</tr>
<tr>
<td>ğŸ˜§ <code>:anguished:</code></td>
<td>ğŸ˜® <code>:open_mouth:</code></td>
<td>ğŸ˜¬ <code>:grimacing:</code></td>
</tr>
<tr>
<td>ğŸ˜• <code>:confused:</code></td>
<td>ğŸ˜¯ <code>:hushed:</code></td>
<td>ğŸ˜‘ <code>:expressionless:</code></td>
</tr>
<tr>
<td>ğŸ˜’ <code>:unamused:</code></td>
<td>ğŸ˜… <code>:sweat_smile:</code></td>
<td>ğŸ˜“ <code>:sweat:</code></td>
</tr>
<tr>
<td>ğŸ˜¥ <code>:disappointed_relieved:</code></td>
<td>ğŸ˜© <code>:weary:</code></td>
<td>ğŸ˜” <code>:pensive:</code></td>
</tr>
<tr>
<td>ğŸ˜ <code>:disappointed:</code></td>
<td>ğŸ˜– <code>:confounded:</code></td>
<td>ğŸ˜¨ <code>:fearful:</code></td>
</tr>
<tr>
<td>ğŸ˜° <code>:cold_sweat:</code></td>
<td>ğŸ˜£ <code>:persevere:</code></td>
<td>ğŸ˜¢ <code>:cry:</code></td>
</tr>
<tr>
<td>ğŸ˜­ <code>:sob:</code></td>
<td>ğŸ˜‚ <code>:joy:</code></td>
<td>ğŸ˜² <code>:astonished:</code></td>
</tr>
<tr>
<td>ğŸ˜± <code>:scream:</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ğŸ˜  <code>:angry:</code></td>
<td>ğŸ˜¡ <code>:rage:</code></td>
<td>ğŸ˜¤ <code>:triumph:</code></td>
</tr>
<tr>
<td>ğŸ˜ª <code>:sleepy:</code></td>
<td>ğŸ˜‹ <code>:yum:</code></td>
<td>ğŸ˜· <code>:mask:</code></td>
</tr>
<tr>
<td>ğŸ˜ <code>:sunglasses:</code></td>
<td>ğŸ˜µ <code>:dizzy_face:</code></td>
<td>ğŸ‘¿ <code>:imp:</code></td>
</tr>
<tr>
<td>ğŸ˜ˆ <code>:smiling_imp:</code></td>
<td>ğŸ˜ <code>:neutral_face:</code></td>
<td>ğŸ˜¶ <code>:no_mouth:</code></td>
</tr>
<tr>
<td>ğŸ˜‡ <code>:innocent:</code></td>
<td>ğŸ‘½ <code>:alien:</code></td>
<td>ğŸ’› <code>:yellow_heart:</code></td>
</tr>
<tr>
<td>ğŸ’™ <code>:blue_heart:</code></td>
<td>ğŸ’œ <code>:purple_heart:</code></td>
<td>â¤ï¸ <code>:heart:</code></td>
</tr>
<tr>
<td>ğŸ’š <code>:green_heart:</code></td>
<td>ğŸ’” <code>:broken_heart:</code></td>
<td>ğŸ’“ <code>:heartbeat:</code></td>
</tr>
<tr>
<td>ğŸ’— <code>:heartpulse:</code></td>
<td>ğŸ’• <code>:two_hearts:</code></td>
<td>ğŸ’ <code>:revolving_hearts:</code></td>
</tr>
<tr>
<td>ğŸ’˜ <code>:cupid:</code></td>
<td>ğŸ’– <code>:sparkling_heart:</code></td>
<td>âœ¨ <code>:sparkles:</code></td>
</tr>
<tr>
<td>â­ï¸ <code>:star:</code></td>
<td>ğŸŒŸ <code>:star2:</code></td>
<td>ğŸ’« <code>:dizzy:</code></td>
</tr>
<tr>
<td>ğŸ’¥ <code>:boom:</code></td>
<td>ğŸ’¥ <code>:collision:</code></td>
<td>ğŸ’¢ <code>:anger:</code></td>
</tr>
<tr>
<td>â—ï¸ <code>:exclamation:</code></td>
<td>â“ <code>:question:</code></td>
<td>â• <code>:grey_exclamation:</code></td>
</tr>
<tr>
<td>â” <code>:grey_question:</code></td>
<td>ğŸ’¤ <code>:zzz:</code></td>
<td>ğŸ’¨ <code>:dash:</code></td>
</tr>
<tr>
<td>ğŸ’¦ <code>:sweat_drops:</code></td>
<td>ğŸ¶ <code>:notes:</code></td>
<td>ğŸµ <code>:musical_note:</code></td>
</tr>
<tr>
<td>ğŸ”¥ <code>:fire:</code></td>
<td>ğŸ’© <code>:hankey:</code></td>
<td>ğŸ’© <code>:poop:</code></td>
</tr>
<tr>
<td>ğŸ’© <code>:shit:</code></td>
<td>ğŸ‘ <code>:+1:</code></td>
<td>ğŸ‘ <code>:thumbsup:</code></td>
</tr>
<tr>
<td>ğŸ‘ <code>:-1:</code></td>
<td>ğŸ‘ <code>:thumbsdown:</code></td>
<td>ğŸ‘Œ <code>:ok_hand:</code></td>
</tr>
<tr>
<td>ğŸ‘Š <code>:punch:</code></td>
<td>ğŸ‘Š <code>:facepunch:</code></td>
<td>âœŠ <code>:fist:</code></td>
</tr>
<tr>
<td>âœŒï¸ <code>:v:</code></td>
<td>ğŸ‘‹ <code>:wave:</code></td>
<td>âœ‹ <code>:hand:</code></td>
</tr>
<tr>
<td>âœ‹ <code>:raised_hand:</code></td>
<td>ğŸ‘ <code>:open_hands:</code></td>
<td>â˜ï¸ <code>:point_up:</code></td>
</tr>
<tr>
<td>ğŸ‘‡ <code>:point_down:</code></td>
<td>ğŸ‘ˆ <code>:point_left:</code></td>
<td>ğŸ‘‰ <code>:point_right:</code></td>
</tr>
<tr>
<td>ğŸ™Œ <code>:raised_hands:</code></td>
<td>ğŸ™ <code>:pray:</code></td>
<td>ğŸ‘† <code>:point_up_2:</code></td>
</tr>
<tr>
<td>ğŸ‘ <code>:clap:</code></td>
<td>ğŸ’ª <code>:muscle:</code></td>
<td>ğŸ¤˜ <code>:metal:</code></td>
</tr>
<tr>
<td>ğŸ–• <code>:fu:</code></td>
<td>ğŸš¶ <code>:walking:</code></td>
<td>ğŸƒ <code>:runner:</code></td>
</tr>
<tr>
<td>ğŸƒ <code>:running:</code></td>
<td>ğŸ‘« <code>:couple:</code></td>
<td>ğŸ‘ª <code>:family:</code></td>
</tr>
<tr>
<td>ğŸ‘¬ <code>:two_men_holding_hands:</code></td>
<td>ğŸ‘­ <code>:two_women_holding_hands:</code></td>
<td>ğŸ’ƒ <code>:dancer:</code></td>
</tr>
<tr>
<td>ğŸ‘¯ <code>:dancers:</code></td>
<td>ğŸ™† <code>:ok_woman:</code></td>
<td>ğŸ™… <code>:no_good:</code></td>
</tr>
<tr>
<td>ğŸ’ <code>:information_desk_person:</code></td>
<td>ğŸ™‹ <code>:raising_hand:</code></td>
<td>ğŸ‘° <code>:bride_with_veil:</code></td>
</tr>
<tr>
<td>ğŸ™ <code>:person_with_pouting_face:</code></td>
<td>ğŸ™ <code>:person_frowning:</code></td>
<td>ğŸ™‡ <code>:bow:</code></td>
</tr>
<tr>
<td>ğŸ’ <code>:couplekiss:</code></td>
<td>ğŸ’‘ <code>:couple_with_heart:</code></td>
<td>ğŸ’† <code>:massage:</code></td>
</tr>
<tr>
<td>ğŸ’‡ <code>:haircut:</code></td>
<td>ğŸ’… <code>:nail_care:</code></td>
<td>ğŸ‘¦ <code>:boy:</code></td>
</tr>
<tr>
<td>ğŸ‘§ <code>:girl:</code></td>
<td>ğŸ‘© <code>:woman:</code></td>
<td>ğŸ‘¨ <code>:man:</code></td>
</tr>
<tr>
<td>ğŸ‘¶ <code>:baby:</code></td>
<td>ğŸ‘µ <code>:older_woman:</code></td>
<td>ğŸ‘´ <code>:older_man:</code></td>
</tr>
<tr>
<td>ğŸ‘± <code>:person_with_blond_hair:</code></td>
<td>ğŸ‘² <code>:man_with_gua_pi_mao:</code></td>
<td>ğŸ‘³ <code>:man_with_turban:</code></td>
</tr>
<tr>
<td>ğŸ‘· <code>:construction_worker:</code></td>
<td>ğŸ‘® <code>:cop:</code></td>
<td>ğŸ‘¼ <code>:angel:</code></td>
</tr>
<tr>
<td>ğŸ‘¸ <code>:princess:</code></td>
<td>ğŸ˜º <code>:smiley_cat:</code></td>
<td>ğŸ˜¸ <code>:smile_cat:</code></td>
</tr>
<tr>
<td>ğŸ˜» <code>:heart_eyes_cat:</code></td>
<td>ğŸ˜½ <code>:kissing_cat:</code></td>
<td>ğŸ˜¼ <code>:smirk_cat:</code></td>
</tr>
<tr>
<td>ğŸ™€ <code>:scream_cat:</code></td>
<td>ğŸ˜¿ <code>:crying_cat_face:</code></td>
<td>ğŸ˜¹ <code>:joy_cat:</code></td>
</tr>
<tr>
<td>ğŸ˜¾ <code>:pouting_cat:</code></td>
<td>ğŸ‘¹ <code>:japanese_ogre:</code></td>
<td>ğŸ‘º <code>:japanese_goblin:</code></td>
</tr>
<tr>
<td>ğŸ™ˆ <code>:see_no_evil:</code></td>
<td>ğŸ™‰ <code>:hear_no_evil:</code></td>
<td>ğŸ™Š <code>:speak_no_evil:</code></td>
</tr>
<tr>
<td>ğŸ’‚ <code>:guardsman:</code></td>
<td>ğŸ’€ <code>:skull:</code></td>
<td>ğŸ¾ <code>:feet:</code></td>
</tr>
<tr>
<td>ğŸ‘„ <code>:lips:</code></td>
<td>ğŸ’‹ <code>:kiss:</code></td>
<td>ğŸ’§ <code>:droplet:</code></td>
</tr>
<tr>
<td>ğŸ‘‚ <code>:ear:</code></td>
<td>ğŸ‘€ <code>:eyes:</code></td>
<td>ğŸ‘ƒ <code>:nose:</code></td>
</tr>
<tr>
<td>ğŸ‘… <code>:tongue:</code></td>
<td>ğŸ’Œ <code>:love_letter:</code></td>
<td>ğŸ‘¤ <code>:bust_in_silhouette:</code></td>
</tr>
<tr>
<td>ğŸ‘¥ <code>:busts_in_silhouette:</code></td>
<td>ğŸ’¬ <code>:speech_balloon:</code></td>
<td>ğŸ’­ <code>:thought_balloon:</code></td>
</tr>
</tbody>
</table>
<h1 id="Nature"><a class="header-anchor" href="#Nature"></a>Nature</h1>
<table>
<thead>
<tr>
<th>â˜€ï¸ <code>:sunny:</code></th>
<th>â˜”ï¸ <code>:umbrella:</code></th>
<th>â˜ï¸ <code>:cloud:</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>â„ï¸ <code>:snowflake:</code></td>
<td>â›„ï¸ <code>:snowman:</code></td>
<td>âš¡ï¸ <code>:zap:</code></td>
</tr>
<tr>
<td>ğŸŒ€ <code>:cyclone:</code></td>
<td>ğŸŒ <code>:foggy:</code></td>
<td>ğŸŒŠ <code>:ocean:</code></td>
</tr>
<tr>
<td>ğŸ± <code>:cat:</code></td>
<td>ğŸ¶ <code>:dog:</code></td>
<td>ğŸ­ <code>:mouse:</code></td>
</tr>
<tr>
<td>ğŸ¹ <code>:hamster:</code></td>
<td>ğŸ° <code>:rabbit:</code></td>
<td>ğŸº <code>:wolf:</code></td>
</tr>
<tr>
<td>ğŸ¸ <code>:frog:</code></td>
<td>ğŸ¯ <code>:tiger:</code></td>
<td>ğŸ¨ <code>:koala:</code></td>
</tr>
<tr>
<td>ğŸ» <code>:bear:</code></td>
<td>ğŸ· <code>:pig:</code></td>
<td>ğŸ½ <code>:pig_nose:</code></td>
</tr>
<tr>
<td>ğŸ® <code>:cow:</code></td>
<td>ğŸ— <code>:boar:</code></td>
<td>ğŸµ <code>:monkey_face:</code></td>
</tr>
<tr>
<td>ğŸ’ <code>:monkey:</code></td>
<td>ğŸ´ <code>:horse:</code></td>
<td>ğŸ <code>:racehorse:</code></td>
</tr>
<tr>
<td>ğŸ« <code>:camel:</code></td>
<td>ğŸ‘ <code>:sheep:</code></td>
<td>ğŸ˜ <code>:elephant:</code></td>
</tr>
<tr>
<td>ğŸ¼ <code>:panda_face:</code></td>
<td>ğŸ <code>:snake:</code></td>
<td>ğŸ¦ <code>:bird:</code></td>
</tr>
<tr>
<td>ğŸ¤ <code>:baby_chick:</code></td>
<td>ğŸ¥ <code>:hatched_chick:</code></td>
<td>ğŸ£ <code>:hatching_chick:</code></td>
</tr>
<tr>
<td>ğŸ” <code>:chicken:</code></td>
<td>ğŸ§ <code>:penguin:</code></td>
<td>ğŸ¢ <code>:turtle:</code></td>
</tr>
<tr>
<td>ğŸ› <code>:bug:</code></td>
<td>ğŸ <code>:honeybee:</code></td>
<td>ğŸœ <code>:ant:</code></td>
</tr>
<tr>
<td>ğŸ <code>:beetle:</code></td>
<td>ğŸŒ <code>:snail:</code></td>
<td>ğŸ™ <code>:octopus:</code></td>
</tr>
<tr>
<td>ğŸ  <code>:tropical_fish:</code></td>
<td>ğŸŸ <code>:fish:</code></td>
<td>ğŸ³ <code>:whale:</code></td>
</tr>
<tr>
<td>ğŸ‹ <code>:whale2:</code></td>
<td>ğŸ¬ <code>:dolphin:</code></td>
<td>ğŸ„ <code>:cow2:</code></td>
</tr>
<tr>
<td>ğŸ <code>:ram:</code></td>
<td>ğŸ€ <code>:rat:</code></td>
<td>ğŸƒ <code>:water_buffalo:</code></td>
</tr>
<tr>
<td>ğŸ… <code>:tiger2:</code></td>
<td>ğŸ‡ <code>:rabbit2:</code></td>
<td>ğŸ‰ <code>:dragon:</code></td>
</tr>
<tr>
<td>ğŸ <code>:goat:</code></td>
<td>ğŸ“ <code>:rooster:</code></td>
<td>ğŸ• <code>:dog2:</code></td>
</tr>
<tr>
<td>ğŸ– <code>:pig2:</code></td>
<td>ğŸ <code>:mouse2:</code></td>
<td>ğŸ‚ <code>:ox:</code></td>
</tr>
<tr>
<td>ğŸ² <code>:dragon_face:</code></td>
<td>ğŸ¡ <code>:blowfish:</code></td>
<td>ğŸŠ <code>:crocodile:</code></td>
</tr>
<tr>
<td>ğŸª <code>:dromedary_camel:</code></td>
<td>ğŸ† <code>:leopard:</code></td>
<td>ğŸˆ <code>:cat2:</code></td>
</tr>
<tr>
<td>ğŸ© <code>:poodle:</code></td>
<td>ğŸ¾ <code>:paw_prints:</code></td>
<td>ğŸ’ <code>:bouquet:</code></td>
</tr>
<tr>
<td>ğŸŒ¸ <code>:cherry_blossom:</code></td>
<td>ğŸŒ· <code>:tulip:</code></td>
<td>ğŸ€ <code>:four_leaf_clover:</code></td>
</tr>
<tr>
<td>ğŸŒ¹ <code>:rose:</code></td>
<td>ğŸŒ» <code>:sunflower:</code></td>
<td>ğŸŒº <code>:hibiscus:</code></td>
</tr>
<tr>
<td>ğŸ <code>:maple_leaf:</code></td>
<td>ğŸƒ <code>:leaves:</code></td>
<td>ğŸ‚ <code>:fallen_leaf:</code></td>
</tr>
<tr>
<td>ğŸŒ¿ <code>:herb:</code></td>
<td>ğŸ„ <code>:mushroom:</code></td>
<td>ğŸŒµ <code>:cactus:</code></td>
</tr>
<tr>
<td>ğŸŒ´ <code>:palm_tree:</code></td>
<td>ğŸŒ² <code>:evergreen_tree:</code></td>
<td>ğŸŒ³ <code>:deciduous_tree:</code></td>
</tr>
<tr>
<td>ğŸŒ° <code>:chestnut:</code></td>
<td>ğŸŒ± <code>:seedling:</code></td>
<td>ğŸŒ¼ <code>:blossom:</code></td>
</tr>
<tr>
<td>ğŸŒ¾ <code>:ear_of_rice:</code></td>
<td>ğŸš <code>:shell:</code></td>
<td>ğŸŒ <code>:globe_with_meridians:</code></td>
</tr>
<tr>
<td>ğŸŒ <code>:sun_with_face:</code></td>
<td>ğŸŒ <code>:full_moon_with_face:</code></td>
<td>ğŸŒš <code>:new_moon_with_face:</code></td>
</tr>
<tr>
<td>ğŸŒ‘ <code>:new_moon:</code></td>
<td>ğŸŒ’ <code>:waxing_crescent_moon:</code></td>
<td>ğŸŒ“ <code>:first_quarter_moon:</code></td>
</tr>
<tr>
<td>ğŸŒ” <code>:waxing_gibbous_moon:</code></td>
<td>ğŸŒ• <code>:full_moon:</code></td>
<td>ğŸŒ– <code>:waning_gibbous_moon:</code></td>
</tr>
<tr>
<td>ğŸŒ— <code>:last_quarter_moon:</code></td>
<td>ğŸŒ˜ <code>:waning_crescent_moon:</code></td>
<td>ğŸŒœ <code>:last_quarter_moon_with_face:</code></td>
</tr>
<tr>
<td>ğŸŒ› <code>:first_quarter_moon_with_face:</code></td>
<td>ğŸŒ” <code>:moon:</code></td>
<td>ğŸŒ <code>:earth_africa:</code></td>
</tr>
<tr>
<td>ğŸŒ <code>:earth_americas:</code></td>
<td>ğŸŒ <code>:earth_asia:</code></td>
<td>ğŸŒ‹ <code>:volcano:</code></td>
</tr>
<tr>
<td>ğŸŒŒ <code>:milky_way:</code></td>
<td>â›…ï¸ <code>:partly_sunny:</code></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Object"><a class="header-anchor" href="#Object"></a>Object</h1>
<table>
<thead>
<tr>
<th>ğŸ <code>:bamboo:</code></th>
<th>ğŸ’ <code>:gift_heart:</code></th>
<th>ğŸ <code>:dolls:</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ’ <code>:school_satchel:</code></td>
<td>ğŸ“ <code>:mortar_board:</code></td>
<td>ğŸ <code>:flags:</code></td>
</tr>
<tr>
<td>ğŸ† <code>:fireworks:</code></td>
<td>ğŸ‡ <code>:sparkler:</code></td>
<td>ğŸ <code>:wind_chime:</code></td>
</tr>
<tr>
<td>ğŸ‘ <code>:rice_scene:</code></td>
<td>ğŸƒ <code>:jack_o_lantern:</code></td>
<td>ğŸ‘» <code>:ghost:</code></td>
</tr>
<tr>
<td>ğŸ… <code>:santa:</code></td>
<td>ğŸ„ <code>:christmas_tree:</code></td>
<td>ğŸ <code>:gift:</code></td>
</tr>
<tr>
<td>ğŸ”” <code>:bell:</code></td>
<td>ğŸ”• <code>:no_bell:</code></td>
<td>ğŸ‹ <code>:tanabata_tree:</code></td>
</tr>
<tr>
<td>ğŸ‰ <code>:tada:</code></td>
<td>ğŸŠ <code>:confetti_ball:</code></td>
<td>ğŸˆ <code>:balloon:</code></td>
</tr>
<tr>
<td>ğŸ”® <code>:crystal_ball:</code></td>
<td>ğŸ’¿ <code>:cd:</code></td>
<td>ğŸ“€ <code>:dvd:</code></td>
</tr>
<tr>
<td>ğŸ’¾ <code>:floppy_disk:</code></td>
<td>ğŸ“· <code>:camera:</code></td>
<td>ğŸ“¹ <code>:video_camera:</code></td>
</tr>
<tr>
<td>ğŸ¥ <code>:movie_camera:</code></td>
<td>ğŸ’» <code>:computer:</code></td>
<td>ğŸ“º <code>:tv:</code></td>
</tr>
<tr>
<td>ğŸ“± <code>:iphone:</code></td>
<td>â˜ï¸ <code>:phone:</code></td>
<td>â˜ï¸ <code>:telephone:</code></td>
</tr>
<tr>
<td>ğŸ“ <code>:telephone_receiver:</code></td>
<td>ğŸ“Ÿ <code>:pager:</code></td>
<td>ğŸ“  <code>:fax:</code></td>
</tr>
<tr>
<td>ğŸ’½ <code>:minidisc:</code></td>
<td>ğŸ“¼ <code>:vhs:</code></td>
<td>ğŸ”‰ <code>:sound:</code></td>
</tr>
<tr>
<td>ğŸ”ˆ <code>:speaker:</code></td>
<td>ğŸ”‡ <code>:mute:</code></td>
<td>ğŸ“¢ <code>:loudspeaker:</code></td>
</tr>
<tr>
<td>ğŸ“£ <code>:mega:</code></td>
<td>âŒ›ï¸ <code>:hourglass:</code></td>
<td>â³ <code>:hourglass_flowing_sand:</code></td>
</tr>
<tr>
<td>â° <code>:alarm_clock:</code></td>
<td>âŒšï¸ <code>:watch:</code></td>
<td>ğŸ“» <code>:radio:</code></td>
</tr>
<tr>
<td>ğŸ“¡ <code>:satellite:</code></td>
<td>â¿ <code>:loop:</code></td>
<td>ğŸ” <code>:mag:</code></td>
</tr>
<tr>
<td>ğŸ” <code>:mag_right:</code></td>
<td>ğŸ”“ <code>:unlock:</code></td>
<td>ğŸ”’ <code>:lock:</code></td>
</tr>
<tr>
<td>ğŸ” <code>:lock_with_ink_pen:</code></td>
<td>ğŸ” <code>:closed_lock_with_key:</code></td>
<td>ğŸ”‘ <code>:key:</code></td>
</tr>
<tr>
<td>ğŸ’¡ <code>:bulb:</code></td>
<td>ğŸ”¦ <code>:flashlight:</code></td>
<td>ğŸ”† <code>:high_brightness:</code></td>
</tr>
<tr>
<td>ğŸ”… <code>:low_brightness:</code></td>
<td>ğŸ”Œ <code>:electric_plug:</code></td>
<td>ğŸ”‹ <code>:battery:</code></td>
</tr>
<tr>
<td>ğŸ“² <code>:calling:</code></td>
<td>âœ‰ï¸ <code>:email:</code></td>
<td>ğŸ“« <code>:mailbox:</code></td>
</tr>
<tr>
<td>ğŸ“® <code>:postbox:</code></td>
<td>ğŸ›€ <code>:bath:</code></td>
<td>ğŸ› <code>:bathtub:</code></td>
</tr>
<tr>
<td>ğŸš¿ <code>:shower:</code></td>
<td>ğŸš½ <code>:toilet:</code></td>
<td>ğŸ”§ <code>:wrench:</code></td>
</tr>
<tr>
<td>ğŸ”© <code>:nut_and_bolt:</code></td>
<td>ğŸ”¨ <code>:hammer:</code></td>
<td>ğŸ’º <code>:seat:</code></td>
</tr>
<tr>
<td>ğŸ’° <code>:moneybag:</code></td>
<td>ğŸ’´ <code>:yen:</code></td>
<td>ğŸ’µ <code>:dollar:</code></td>
</tr>
<tr>
<td>ğŸ’· <code>:pound:</code></td>
<td>ğŸ’¶ <code>:euro:</code></td>
<td>ğŸ’³ <code>:credit_card:</code></td>
</tr>
<tr>
<td>ğŸ’¸ <code>:money_with_wings:</code></td>
<td>ğŸ“§ <code>:e-mail:</code></td>
<td>ğŸ“¥ <code>:inbox_tray:</code></td>
</tr>
<tr>
<td>ğŸ“¤ <code>:outbox_tray:</code></td>
<td>âœ‰ï¸ <code>:envelope:</code></td>
<td>ğŸ“¨ <code>:incoming_envelope:</code></td>
</tr>
<tr>
<td>ğŸ“¯ <code>:postal_horn:</code></td>
<td>ğŸ“ª <code>:mailbox_closed:</code></td>
<td>ğŸ“¬ <code>:mailbox_with_mail:</code></td>
</tr>
<tr>
<td>ğŸ“­ <code>:mailbox_with_no_mail:</code></td>
<td>ğŸšª <code>:door:</code></td>
<td>ğŸš¬ <code>:smoking:</code></td>
</tr>
<tr>
<td>ğŸ’£ <code>:bomb:</code></td>
<td>ğŸ”« <code>:gun:</code></td>
<td>ğŸ”ª <code>:hocho:</code></td>
</tr>
<tr>
<td>ğŸ’Š <code>:pill:</code></td>
<td>ğŸ’‰ <code>:syringe:</code></td>
<td>ğŸ“„ <code>:page_facing_up:</code></td>
</tr>
<tr>
<td>ğŸ“ƒ <code>:page_with_curl:</code></td>
<td>ğŸ“‘ <code>:bookmark_tabs:</code></td>
<td>ğŸ“Š <code>:bar_chart:</code></td>
</tr>
<tr>
<td>ğŸ“ˆ <code>:chart_with_upwards_trend:</code></td>
<td>ğŸ“‰ <code>:chart_with_downwards_trend:</code></td>
<td>ğŸ“œ <code>:scroll:</code></td>
</tr>
<tr>
<td>ğŸ“‹ <code>:clipboard:</code></td>
<td>ğŸ“† <code>:calendar:</code></td>
<td>ğŸ“… <code>:date:</code></td>
</tr>
<tr>
<td>ğŸ“‡ <code>:card_index:</code></td>
<td>ğŸ“ <code>:file_folder:</code></td>
<td>ğŸ“‚ <code>:open_file_folder:</code></td>
</tr>
<tr>
<td>âœ‚ï¸ <code>:scissors:</code></td>
<td>ğŸ“Œ <code>:pushpin:</code></td>
<td>ğŸ“ <code>:paperclip:</code></td>
</tr>
<tr>
<td>âœ’ï¸ <code>:black_nib:</code></td>
<td>âœï¸ <code>:pencil2:</code></td>
<td>ğŸ“ <code>:straight_ruler:</code></td>
</tr>
<tr>
<td>ğŸ“ <code>:triangular_ruler:</code></td>
<td>ğŸ“• <code>:closed_book:</code></td>
<td>ğŸ“— <code>:green_book:</code></td>
</tr>
<tr>
<td>ğŸ“˜ <code>:blue_book:</code></td>
<td>ğŸ“™ <code>:orange_book:</code></td>
<td>ğŸ““ <code>:notebook:</code></td>
</tr>
<tr>
<td>ğŸ“” <code>:notebook_with_decorative_cover:</code></td>
<td>ğŸ“’ <code>:ledger:</code></td>
<td>ğŸ“š <code>:books:</code></td>
</tr>
<tr>
<td>ğŸ”– <code>:bookmark:</code></td>
<td>ğŸ“› <code>:name_badge:</code></td>
<td>ğŸ”¬ <code>:microscope:</code></td>
</tr>
<tr>
<td>ğŸ”­ <code>:telescope:</code></td>
<td>ğŸ“° <code>:newspaper:</code></td>
<td>ğŸˆ <code>:football:</code></td>
</tr>
<tr>
<td>ğŸ€ <code>:basketball:</code></td>
<td>âš½ï¸ <code>:soccer:</code></td>
<td>âš¾ï¸ <code>:baseball:</code></td>
</tr>
<tr>
<td>ğŸ¾ <code>:tennis:</code></td>
<td>ğŸ± <code>:8ball:</code></td>
<td>ğŸ‰ <code>:rugby_football:</code></td>
</tr>
<tr>
<td>ğŸ³ <code>:bowling:</code></td>
<td>â›³ï¸ <code>:golf:</code></td>
<td>ğŸšµ <code>:mountain_bicyclist:</code></td>
</tr>
<tr>
<td>ğŸš´ <code>:bicyclist:</code></td>
<td>ğŸ‡ <code>:horse_racing:</code></td>
<td>ğŸ‚ <code>:snowboarder:</code></td>
</tr>
<tr>
<td>ğŸŠ <code>:swimmer:</code></td>
<td>ğŸ„ <code>:surfer:</code></td>
<td>ğŸ¿ <code>:ski:</code></td>
</tr>
<tr>
<td>â™ ï¸ <code>:spades:</code></td>
<td>â™¥ï¸ <code>:hearts:</code></td>
<td>â™£ï¸ <code>:clubs:</code></td>
</tr>
<tr>
<td>â™¦ï¸ <code>:diamonds:</code></td>
<td>ğŸ’ <code>:gem:</code></td>
<td>ğŸ’ <code>:ring:</code></td>
</tr>
<tr>
<td>ğŸ† <code>:trophy:</code></td>
<td>ğŸ¼ <code>:musical_score:</code></td>
<td>ğŸ¹ <code>:musical_keyboard:</code></td>
</tr>
<tr>
<td>ğŸ» <code>:violin:</code></td>
<td>ğŸ‘¾ <code>:space_invader:</code></td>
<td>ğŸ® <code>:video_game:</code></td>
</tr>
<tr>
<td>ğŸƒ <code>:black_joker:</code></td>
<td>ğŸ´ <code>:flower_playing_cards:</code></td>
<td>ğŸ² <code>:game_die:</code></td>
</tr>
<tr>
<td>ğŸ¯ <code>:dart:</code></td>
<td>ğŸ€„ï¸ <code>:mahjong:</code></td>
<td>ğŸ¬ <code>:clapper:</code></td>
</tr>
<tr>
<td>ğŸ“ <code>:memo:</code></td>
<td>ğŸ“ <code>:pencil:</code></td>
<td>ğŸ“– <code>:book:</code></td>
</tr>
<tr>
<td>ğŸ¨ <code>:art:</code></td>
<td>ğŸ¤ <code>:microphone:</code></td>
<td>ğŸ§ <code>:headphones:</code></td>
</tr>
<tr>
<td>ğŸº <code>:trumpet:</code></td>
<td>ğŸ· <code>:saxophone:</code></td>
<td>ğŸ¸ <code>:guitar:</code></td>
</tr>
<tr>
<td>ğŸ‘ <code>:shoe:</code></td>
<td>ğŸ‘¡ <code>:sandal:</code></td>
<td>ğŸ‘  <code>:high_heel:</code></td>
</tr>
<tr>
<td>ğŸ’„ <code>:lipstick:</code></td>
<td>ğŸ‘¢ <code>:boot:</code></td>
<td>ğŸ‘• <code>:shirt:</code></td>
</tr>
<tr>
<td>ğŸ‘• <code>:tshirt:</code></td>
<td>ğŸ‘” <code>:necktie:</code></td>
<td>ğŸ‘š <code>:womans_clothes:</code></td>
</tr>
<tr>
<td>ğŸ‘— <code>:dress:</code></td>
<td>ğŸ½ <code>:running_shirt_with_sash:</code></td>
<td>ğŸ‘– <code>:jeans:</code></td>
</tr>
<tr>
<td>ğŸ‘˜ <code>:kimono:</code></td>
<td>ğŸ‘™ <code>:bikini:</code></td>
<td>ğŸ€ <code>:ribbon:</code></td>
</tr>
<tr>
<td>ğŸ© <code>:tophat:</code></td>
<td>ğŸ‘‘ <code>:crown:</code></td>
<td>ğŸ‘’ <code>:womans_hat:</code></td>
</tr>
<tr>
<td>ğŸ‘ <code>:mans_shoe:</code></td>
<td>ğŸŒ‚ <code>:closed_umbrella:</code></td>
<td>ğŸ’¼ <code>:briefcase:</code></td>
</tr>
<tr>
<td>ğŸ‘œ <code>:handbag:</code></td>
<td>ğŸ‘ <code>:pouch:</code></td>
<td>ğŸ‘› <code>:purse:</code></td>
</tr>
<tr>
<td>ğŸ‘“ <code>:eyeglasses:</code></td>
<td>ğŸ£ <code>:fishing_pole_and_fish:</code></td>
<td>â˜•ï¸ <code>:coffee:</code></td>
</tr>
<tr>
<td>ğŸµ <code>:tea:</code></td>
<td>ğŸ¶ <code>:sake:</code></td>
<td>ğŸ¼ <code>:baby_bottle:</code></td>
</tr>
<tr>
<td>ğŸº <code>:beer:</code></td>
<td>ğŸ» <code>:beers:</code></td>
<td>ğŸ¸ <code>:cocktail:</code></td>
</tr>
<tr>
<td>ğŸ¹ <code>:tropical_drink:</code></td>
<td>ğŸ· <code>:wine_glass:</code></td>
<td>ğŸ´ <code>:fork_and_knife:</code></td>
</tr>
<tr>
<td>ğŸ• <code>:pizza:</code></td>
<td>ğŸ” <code>:hamburger:</code></td>
<td>ğŸŸ <code>:fries:</code></td>
</tr>
<tr>
<td>ğŸ— <code>:poultry_leg:</code></td>
<td>ğŸ– <code>:meat_on_bone:</code></td>
<td>ğŸ <code>:spaghetti:</code></td>
</tr>
<tr>
<td>ğŸ› <code>:curry:</code></td>
<td>ğŸ¤ <code>:fried_shrimp:</code></td>
<td>ğŸ± <code>:bento:</code></td>
</tr>
<tr>
<td>ğŸ£ <code>:sushi:</code></td>
<td>ğŸ¥ <code>:fish_cake:</code></td>
<td>ğŸ™ <code>:rice_ball:</code></td>
</tr>
<tr>
<td>ğŸ˜ <code>:rice_cracker:</code></td>
<td>ğŸš <code>:rice:</code></td>
<td>ğŸœ <code>:ramen:</code></td>
</tr>
<tr>
<td>ğŸ² <code>:stew:</code></td>
<td>ğŸ¢ <code>:oden:</code></td>
<td>ğŸ¡ <code>:dango:</code></td>
</tr>
<tr>
<td>ğŸ¥š <code>:egg:</code></td>
<td>ğŸ <code>:bread:</code></td>
<td>ğŸ© <code>:doughnut:</code></td>
</tr>
<tr>
<td>ğŸ® <code>:custard:</code></td>
<td>ğŸ¦ <code>:icecream:</code></td>
<td>ğŸ¨ <code>:ice_cream:</code></td>
</tr>
<tr>
<td>ğŸ§ <code>:shaved_ice:</code></td>
<td>ğŸ‚ <code>:birthday:</code></td>
<td>ğŸ° <code>:cake:</code></td>
</tr>
<tr>
<td>ğŸª <code>:cookie:</code></td>
<td>ğŸ« <code>:chocolate_bar:</code></td>
<td>ğŸ¬ <code>:candy:</code></td>
</tr>
<tr>
<td>ğŸ­ <code>:lollipop:</code></td>
<td>ğŸ¯ <code>:honey_pot:</code></td>
<td>ğŸ <code>:apple:</code></td>
</tr>
<tr>
<td>ğŸ <code>:green_apple:</code></td>
<td>ğŸŠ <code>:tangerine:</code></td>
<td>ğŸ‹ <code>:lemon:</code></td>
</tr>
<tr>
<td>ğŸ’ <code>:cherries:</code></td>
<td>ğŸ‡ <code>:grapes:</code></td>
<td>ğŸ‰ <code>:watermelon:</code></td>
</tr>
<tr>
<td>ğŸ“ <code>:strawberry:</code></td>
<td>ğŸ‘ <code>:peach:</code></td>
<td>ğŸˆ <code>:melon:</code></td>
</tr>
<tr>
<td>ğŸŒ <code>:banana:</code></td>
<td>ğŸ <code>:pear:</code></td>
<td>ğŸ <code>:pineapple:</code></td>
</tr>
<tr>
<td>ğŸ  <code>:sweet_potato:</code></td>
<td>ğŸ† <code>:eggplant:</code></td>
<td>ğŸ… <code>:tomato:</code></td>
</tr>
<tr>
<td>ğŸŒ½ <code>:corn:</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Places"><a class="header-anchor" href="#Places"></a>Places</h1>
<table>
<thead>
<tr>
<th>ğŸ  <code>:house:</code></th>
<th>ğŸ¡ <code>:house_with_garden:</code></th>
<th>ğŸ« <code>:school:</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ¢ <code>:office:</code></td>
<td>ğŸ£ <code>:post_office:</code></td>
<td>ğŸ¥ <code>:hospital:</code></td>
</tr>
<tr>
<td>ğŸ¦ <code>:bank:</code></td>
<td>ğŸª <code>:convenience_store:</code></td>
<td>ğŸ© <code>:love_hotel:</code></td>
</tr>
<tr>
<td>ğŸ¨ <code>:hotel:</code></td>
<td>ğŸ’’ <code>:wedding:</code></td>
<td>â›ªï¸ <code>:church:</code></td>
</tr>
<tr>
<td>ğŸ¬ <code>:department_store:</code></td>
<td>ğŸ¤ <code>:european_post_office:</code></td>
<td>ğŸŒ‡ <code>:city_sunrise:</code></td>
</tr>
<tr>
<td>ğŸŒ† <code>:city_sunset:</code></td>
<td>ğŸ¯ <code>:japanese_castle:</code></td>
<td>ğŸ° <code>:european_castle:</code></td>
</tr>
<tr>
<td>â›ºï¸ <code>:tent:</code></td>
<td>ğŸ­ <code>:factory:</code></td>
<td>ğŸ—¼ <code>:tokyo_tower:</code></td>
</tr>
<tr>
<td>ğŸ—¾ <code>:japan:</code></td>
<td>ğŸ—» <code>:mount_fuji:</code></td>
<td>ğŸŒ„ <code>:sunrise_over_mountains:</code></td>
</tr>
<tr>
<td>ğŸŒ… <code>:sunrise:</code></td>
<td>ğŸŒ  <code>:stars:</code></td>
<td>ğŸ—½ <code>:statue_of_liberty:</code></td>
</tr>
<tr>
<td>ğŸŒ‰ <code>:bridge_at_night:</code></td>
<td>ğŸ  <code>:carousel_horse:</code></td>
<td>ğŸŒˆ <code>:rainbow:</code></td>
</tr>
<tr>
<td>ğŸ¡ <code>:ferris_wheel:</code></td>
<td>â›²ï¸ <code>:fountain:</code></td>
<td>ğŸ¢ <code>:roller_coaster:</code></td>
</tr>
<tr>
<td>ğŸš¢ <code>:ship:</code></td>
<td>ğŸš¤ <code>:speedboat:</code></td>
<td>â›µï¸ <code>:boat:</code></td>
</tr>
<tr>
<td>â›µï¸ <code>:sailboat:</code></td>
<td>ğŸš£ <code>:rowboat:</code></td>
<td>âš“ï¸ <code>:anchor:</code></td>
</tr>
<tr>
<td>ğŸš€ <code>:rocket:</code></td>
<td>âœˆï¸ <code>:airplane:</code></td>
<td>ğŸš <code>:helicopter:</code></td>
</tr>
<tr>
<td>ğŸš‚ <code>:steam_locomotive:</code></td>
<td>ğŸšŠ <code>:tram:</code></td>
<td>ğŸš <code>:mountain_railway:</code></td>
</tr>
<tr>
<td>ğŸš² <code>:bike:</code></td>
<td>ğŸš¡ <code>:aerial_tramway:</code></td>
<td>ğŸšŸ <code>:suspension_railway:</code></td>
</tr>
<tr>
<td>ğŸš  <code>:mountain_cableway:</code></td>
<td>ğŸšœ <code>:tractor:</code></td>
<td>ğŸš™ <code>:blue_car:</code></td>
</tr>
<tr>
<td>ğŸš˜ <code>:oncoming_automobile:</code></td>
<td>ğŸš— <code>:car:</code></td>
<td>ğŸš— <code>:red_car:</code></td>
</tr>
<tr>
<td>ğŸš• <code>:taxi:</code></td>
<td>ğŸš– <code>:oncoming_taxi:</code></td>
<td>ğŸš› <code>:articulated_lorry:</code></td>
</tr>
<tr>
<td>ğŸšŒ <code>:bus:</code></td>
<td>ğŸš <code>:oncoming_bus:</code></td>
<td>ğŸš¨ <code>:rotating_light:</code></td>
</tr>
<tr>
<td>ğŸš“ <code>:police_car:</code></td>
<td>ğŸš” <code>:oncoming_police_car:</code></td>
<td>ğŸš’ <code>:fire_engine:</code></td>
</tr>
<tr>
<td>ğŸš‘ <code>:ambulance:</code></td>
<td>ğŸš <code>:minibus:</code></td>
<td>ğŸšš <code>:truck:</code></td>
</tr>
<tr>
<td>ğŸš‹ <code>:train:</code></td>
<td>ğŸš‰ <code>:station:</code></td>
<td>ğŸš† <code>:train2:</code></td>
</tr>
<tr>
<td>ğŸš… <code>:bullettrain_front:</code></td>
<td>ğŸš„ <code>:bullettrain_side:</code></td>
<td>ğŸšˆ <code>:light_rail:</code></td>
</tr>
<tr>
<td>ğŸš <code>:monorail:</code></td>
<td>ğŸšƒ <code>:railway_car:</code></td>
<td>ğŸš <code>:trolleybus:</code></td>
</tr>
<tr>
<td>ğŸ« <code>:ticket:</code></td>
<td>â›½ï¸ <code>:fuelpump:</code></td>
<td>ğŸš¦ <code>:vertical_traffic_light:</code></td>
</tr>
<tr>
<td>ğŸš¥ <code>:traffic_light:</code></td>
<td>âš ï¸ <code>:warning:</code></td>
<td>ğŸš§ <code>:construction:</code></td>
</tr>
<tr>
<td>ğŸ”° <code>:beginner:</code></td>
<td>ğŸ§ <code>:atm:</code></td>
<td>ğŸ° <code>:slot_machine:</code></td>
</tr>
<tr>
<td>ğŸš <code>:busstop:</code></td>
<td>ğŸ’ˆ <code>:barber:</code></td>
<td>â™¨ï¸ <code>:hotsprings:</code></td>
</tr>
<tr>
<td>ğŸ <code>:checkered_flag:</code></td>
<td>ğŸŒ <code>:crossed_flags:</code></td>
<td>ğŸ® <code>:izakaya_lantern:</code></td>
</tr>
<tr>
<td>ğŸ—¿ <code>:moyai:</code></td>
<td>ğŸª <code>:circus_tent:</code></td>
<td>ğŸ­ <code>:performing_arts:</code></td>
</tr>
<tr>
<td>ğŸ“ <code>:round_pushpin:</code></td>
<td>ğŸš© <code>:triangular_flag_on_post:</code></td>
<td>ğŸ‡¯ğŸ‡µ <code>:jp:</code></td>
</tr>
<tr>
<td>ğŸ‡°ğŸ‡· <code>:kr:</code></td>
<td>ğŸ‡¨ğŸ‡³ <code>:cn:</code></td>
<td>ğŸ‡ºğŸ‡¸ <code>:us:</code></td>
</tr>
<tr>
<td>ğŸ‡«ğŸ‡· <code>:fr:</code></td>
<td>ğŸ‡ªğŸ‡¸ <code>:es:</code></td>
<td>ğŸ‡®ğŸ‡¹ <code>:it:</code></td>
</tr>
<tr>
<td>ğŸ‡·ğŸ‡º <code>:ru:</code></td>
<td>ğŸ‡¬ğŸ‡§ <code>:gb:</code></td>
<td>ğŸ‡¬ğŸ‡§ <code>:uk:</code></td>
</tr>
<tr>
<td>ğŸ‡©ğŸ‡ª <code>:de:</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Symbols"><a class="header-anchor" href="#Symbols"></a>Symbols</h1>
<table>
<thead>
<tr>
<th>1ï¸âƒ£ <code>:one:</code></th>
<th>2ï¸âƒ£ <code>:two:</code></th>
<th>3ï¸âƒ£ <code>:three:</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>4ï¸âƒ£ <code>:four:</code></td>
<td>5ï¸âƒ£ <code>:five:</code></td>
<td>6ï¸âƒ£ <code>:six:</code></td>
</tr>
<tr>
<td>7ï¸âƒ£ <code>:seven:</code></td>
<td>8ï¸âƒ£ <code>:eight:</code></td>
<td>9ï¸âƒ£ <code>:nine:</code></td>
</tr>
<tr>
<td>ğŸ”Ÿ <code>:keycap_ten:</code></td>
<td>ğŸ”¢ <code>:1234:</code></td>
<td>0ï¸âƒ£ <code>:zero:</code></td>
</tr>
<tr>
<td>#ï¸âƒ£ <code>:hash:</code></td>
<td>ğŸ”£ <code>:symbols:</code></td>
<td>â—€ï¸ <code>:arrow_backward:</code></td>
</tr>
<tr>
<td>â¬‡ï¸ <code>:arrow_down:</code></td>
<td>â–¶ï¸ <code>:arrow_forward:</code></td>
<td>â¬…ï¸ <code>:arrow_left:</code></td>
</tr>
<tr>
<td>ğŸ”  <code>:capital_abcd:</code></td>
<td>ğŸ”¡ <code>:abcd:</code></td>
<td>ğŸ”¤ <code>:abc:</code></td>
</tr>
<tr>
<td>â†™ï¸ <code>:arrow_lower_left:</code></td>
<td>â†˜ï¸ <code>:arrow_lower_right:</code></td>
<td>â¡ï¸ <code>:arrow_right:</code></td>
</tr>
<tr>
<td>â¬†ï¸ <code>:arrow_up:</code></td>
<td>â†–ï¸ <code>:arrow_upper_left:</code></td>
<td>â†—ï¸ <code>:arrow_upper_right:</code></td>
</tr>
<tr>
<td>â¬ <code>:arrow_double_down:</code></td>
<td>â« <code>:arrow_double_up:</code></td>
<td>ğŸ”½ <code>:arrow_down_small:</code></td>
</tr>
<tr>
<td>â¤µï¸ <code>:arrow_heading_down:</code></td>
<td>â¤´ï¸ <code>:arrow_heading_up:</code></td>
<td>â†©ï¸<code>:leftwards_arrow_with_hook:</code></td>
</tr>
<tr>
<td>â†ªï¸ <code>:arrow_right_hook:</code></td>
<td>â†”ï¸ <code>:left_right_arrow:</code></td>
<td>â†•ï¸ <code>:arrow_up_down:</code></td>
</tr>
<tr>
<td>ğŸ”¼ <code>:arrow_up_small:</code></td>
<td>ğŸ”ƒ <code>:arrows_clockwise:</code></td>
<td>ğŸ”„ <code>:arrows_counterclockwise:</code></td>
</tr>
<tr>
<td>âª <code>:rewind:</code></td>
<td>â© <code>:fast_forward:</code></td>
<td>â„¹ï¸ <code>:information_source:</code></td>
</tr>
<tr>
<td>ğŸ†— <code>:ok:</code></td>
<td>ğŸ”€ <code>:twisted_rightwards_arrows:</code></td>
<td>ğŸ” <code>:repeat:</code></td>
</tr>
<tr>
<td>ğŸ”‚ <code>:repeat_one:</code></td>
<td>ğŸ†• <code>:new:</code></td>
<td>ğŸ” <code>:top:</code></td>
</tr>
<tr>
<td>ğŸ†™ <code>:up:</code></td>
<td>ğŸ†’ <code>:cool:</code></td>
<td>ğŸ†“ <code>:free:</code></td>
</tr>
<tr>
<td>ğŸ†– <code>:ng:</code></td>
<td>ğŸ¦ <code>:cinema:</code></td>
<td>ğŸˆ <code>:koko:</code></td>
</tr>
<tr>
<td>ğŸ“¶ <code>:signal_strength:</code></td>
<td>ğŸˆ¹ <code>:u5272:</code></td>
<td>ğŸˆ´ <code>:u5408:</code></td>
</tr>
<tr>
<td>ğŸˆº <code>:u55b6:</code></td>
<td>ğŸˆ¯ï¸ <code>:u6307:</code></td>
<td>ğŸˆ·ï¸ <code>:u6708:</code></td>
</tr>
<tr>
<td>ğŸˆ¶ <code>:u6709:</code></td>
<td>ğŸˆµ <code>:u6e80:</code></td>
<td>ğŸˆšï¸ <code>:u7121:</code></td>
</tr>
<tr>
<td>ğŸˆ¸ <code>:u7533:</code></td>
<td>ğŸˆ³ <code>:u7a7a:</code></td>
<td>ğŸˆ² <code>:u7981:</code></td>
</tr>
<tr>
<td>ğŸˆ‚ï¸ <code>:sa:</code></td>
<td>ğŸš» <code>:restroom:</code></td>
<td>ğŸš¹ <code>:mens:</code></td>
</tr>
<tr>
<td>ğŸšº <code>:womens:</code></td>
<td>ğŸš¼ <code>:baby_symbol:</code></td>
<td>ğŸš­ <code>:no_smoking:</code></td>
</tr>
<tr>
<td>ğŸ…¿ï¸ <code>:parking:</code></td>
<td>â™¿ï¸ <code>:wheelchair:</code></td>
<td>ğŸš‡ <code>:metro:</code></td>
</tr>
<tr>
<td>ğŸ›„ <code>:baggage_claim:</code></td>
<td>ğŸ‰‘ <code>:accept:</code></td>
<td>ğŸš¾ <code>:wc:</code></td>
</tr>
<tr>
<td>ğŸš° <code>:potable_water:</code></td>
<td>ğŸš® <code>:put_litter_in_its_place:</code></td>
<td>ãŠ™ï¸ <code>:secret:</code></td>
</tr>
<tr>
<td>ãŠ—ï¸ <code>:congratulations:</code></td>
<td>â“‚ï¸ <code>:m:</code></td>
<td>ğŸ›‚ <code>:passport_control:</code></td>
</tr>
<tr>
<td>ğŸ›… <code>:left_luggage:</code></td>
<td>ğŸ›ƒ <code>:customs:</code></td>
<td>ğŸ‰ <code>:ideograph_advantage:</code></td>
</tr>
<tr>
<td>ğŸ†‘ <code>:cl:</code></td>
<td>ğŸ†˜ <code>:sos:</code></td>
<td>ğŸ†” <code>:id:</code></td>
</tr>
<tr>
<td>ğŸš« <code>:no_entry_sign:</code></td>
<td>ğŸ” <code>:underage:</code></td>
<td>ğŸ“µ <code>:no_mobile_phones:</code></td>
</tr>
<tr>
<td>ğŸš¯ <code>:do_not_litter:</code></td>
<td>ğŸš± <code>:non-potable_water:</code></td>
<td>ğŸš³ <code>:no_bicycles:</code></td>
</tr>
<tr>
<td>ğŸš· <code>:no_pedestrians:</code></td>
<td>ğŸš¸ <code>:children_crossing:</code></td>
<td>â›”ï¸ <code>:no_entry:</code></td>
</tr>
<tr>
<td>âœ³ï¸ <code>:eight_spoked_asterisk:</code></td>
<td>âœ´ï¸ <code>:eight_pointed_black_star:</code></td>
<td>ğŸ’Ÿ <code>:heart_decoration:</code></td>
</tr>
<tr>
<td>ğŸ†š <code>:vs:</code></td>
<td>ğŸ“³ <code>:vibration_mode:</code></td>
<td>ğŸ“´ <code>:mobile_phone_off:</code></td>
</tr>
<tr>
<td>ğŸ’¹ <code>:chart:</code></td>
<td>ğŸ’± <code>:currency_exchange:</code></td>
<td>â™ˆï¸ <code>:aries:</code></td>
</tr>
<tr>
<td>â™‰ï¸ <code>:taurus:</code></td>
<td>â™Šï¸ <code>:gemini:</code></td>
<td>â™‹ï¸ <code>:cancer:</code></td>
</tr>
<tr>
<td>â™Œï¸ <code>:leo:</code></td>
<td>â™ï¸ <code>:virgo:</code></td>
<td>â™ï¸ <code>:libra:</code></td>
</tr>
<tr>
<td>â™ï¸ <code>:scorpius:</code></td>
<td>â™ï¸ <code>:sagittarius:</code></td>
<td>â™‘ï¸ <code>:capricorn:</code></td>
</tr>
<tr>
<td>â™’ï¸ <code>:aquarius:</code></td>
<td>â™“ï¸ <code>:pisces:</code></td>
<td>â› <code>:ophiuchus:</code></td>
</tr>
<tr>
<td>ğŸ”¯ <code>:six_pointed_star:</code></td>
<td>â<code>:negative_squared_cross_mark:</code></td>
<td>ğŸ…°ï¸ <code>:a:</code></td>
</tr>
<tr>
<td>ğŸ…±ï¸ <code>:b:</code></td>
<td>ğŸ† <code>:ab:</code></td>
<td>ğŸ…¾ï¸ <code>:o2:</code></td>
</tr>
<tr>
<td>ğŸ’ <code>:diamond_shape_with_a_dot_inside:</code></td>
<td>â™»ï¸ <code>:recycle:</code></td>
<td>ğŸ”š <code>:end:</code></td>
</tr>
<tr>
<td>ğŸ”› <code>:on:</code></td>
<td>ğŸ”œ <code>:soon:</code></td>
<td>ğŸ• <code>:clock1:</code></td>
</tr>
<tr>
<td>ğŸ•œ <code>:clock130:</code></td>
<td>ğŸ•™ <code>:clock10:</code></td>
<td>ğŸ•¥ <code>:clock1030:</code></td>
</tr>
<tr>
<td>ğŸ•š <code>:clock11:</code></td>
<td>ğŸ•¦ <code>:clock1130:</code></td>
<td>ğŸ•› <code>:clock12:</code></td>
</tr>
<tr>
<td>ğŸ•§ <code>:clock1230:</code></td>
<td>ğŸ•‘ <code>:clock2:</code></td>
<td>ğŸ• <code>:clock230:</code></td>
</tr>
<tr>
<td>ğŸ•’ <code>:clock3:</code></td>
<td>ğŸ• <code>:clock330:</code></td>
<td>ğŸ•“ <code>:clock4:</code></td>
</tr>
<tr>
<td>ğŸ•Ÿ <code>:clock430:</code></td>
<td>ğŸ•” <code>:clock5:</code></td>
<td>ğŸ•  <code>:clock530:</code></td>
</tr>
<tr>
<td>ğŸ•• <code>:clock6:</code></td>
<td>ğŸ•¡ <code>:clock630:</code></td>
<td>ğŸ•– <code>:clock7:</code></td>
</tr>
<tr>
<td>ğŸ•¢ <code>:clock730:</code></td>
<td>ğŸ•— <code>:clock8:</code></td>
<td>ğŸ•£ <code>:clock830:</code></td>
</tr>
<tr>
<td>ğŸ•˜ <code>:clock9:</code></td>
<td>ğŸ•¤ <code>:clock930:</code></td>
<td>ğŸ’² <code>:heavy_dollar_sign:</code></td>
</tr>
<tr>
<td>Â©ï¸ <code>:copyright:</code></td>
<td>Â®ï¸ <code>:registered:</code></td>
<td>â„¢ï¸ <code>:tm:</code></td>
</tr>
<tr>
<td>âŒ <code>:x:</code></td>
<td>â—ï¸ <code>:heavy_exclamation_mark:</code></td>
<td>â€¼ï¸ <code>:bangbang:</code></td>
</tr>
<tr>
<td>â‰ï¸ <code>:interrobang:</code></td>
<td>â­•ï¸ <code>:o:</code></td>
<td>âœ–ï¸ <code>:heavy_multiplication_x:</code></td>
</tr>
<tr>
<td>â• <code>:heavy_plus_sign:</code></td>
<td>â– <code>:heavy_minus_sign:</code></td>
<td>â— <code>:heavy_division_sign:</code></td>
</tr>
<tr>
<td>ğŸ’® <code>:white_flower:</code></td>
<td>ğŸ’¯ <code>:100:</code></td>
<td>âœ”ï¸ <code>:heavy_check_mark:</code></td>
</tr>
<tr>
<td>â˜‘ï¸ <code>:ballot_box_with_check:</code></td>
<td>ğŸ”˜ <code>:radio_button:</code></td>
<td>ğŸ”— <code>:link:</code></td>
</tr>
<tr>
<td>â° <code>:curly_loop:</code></td>
<td>ã€°ï¸ <code>:wavy_dash:</code></td>
<td>ã€½ï¸ <code>:part_alternation_mark:</code></td>
</tr>
<tr>
<td>ğŸ”± <code>:trident:</code></td>
<td>:black_square: <code>:black_square:</code></td>
<td>:white_square: <code>:white_square:</code></td>
</tr>
<tr>
<td>âœ… <code>:white_check_mark:</code></td>
<td>ğŸ”² <code>:black_square_button:</code></td>
<td>ğŸ”³ <code>:white_square_button:</code></td>
</tr>
<tr>
<td>âš«ï¸ <code>:black_circle:</code></td>
<td>âšªï¸ <code>:white_circle:</code></td>
<td>ğŸ”´ <code>:red_circle:</code></td>
</tr>
<tr>
<td>ğŸ”µ <code>:large_blue_circle:</code></td>
<td>ğŸ”· <code>:large_blue_diamond:</code></td>
<td>ğŸ”¶ <code>:large_orange_diamond:</code></td>
</tr>
<tr>
<td>ğŸ”¹ <code>:small_blue_diamond:</code></td>
<td>ğŸ”¸ <code>:small_orange_diamond:</code></td>
<td>ğŸ”º <code>:small_red_triangle:</code></td>
</tr>
<tr>
<td>ğŸ”» <code>:small_red_triangle_down:</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/index.html</url>
    <content><![CDATA[<p>ğŸ˜š</p>
]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/index.html</url>
    <content><![CDATA[<h1 id="å“ˆå“ˆå“ˆ"><a class="header-anchor" href="#å“ˆå“ˆå“ˆ"></a>å“ˆå“ˆå“ˆ</h1>
<p>ğŸ‘‰ï¸ æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p>
<p>ğŸ“‡ ä½“ç³»åŒ–çš„çŸ¥è¯†ï¼Œéœ€è¦ä¸€æ­¥ä¸€ä¸ªè„šå°åœ°è¾“å…¥ï¼Œ</p>
<p>ğŸ‘£ ä¹Ÿéœ€è¦å¾ªåºæ¸è¿›åœ°æ¶ˆåŒ–ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/index.html</url>
    <content><![CDATA[<h1 id="å“ˆå“ˆå“ˆ"><a class="header-anchor" href="#å“ˆå“ˆå“ˆ"></a>å“ˆå“ˆå“ˆ</h1>
<p>ğŸ¯ï¸ Goals</p>
<p>ğŸ‘‰ï¸</p>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>index</title>
    <url>/POST/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA/index.html</url>
    <content><![CDATA[<p>æ·±å…¥javaè™šæ‹Ÿæœº</p>
]]></content>
      <categories>
        <category>POST</category>
        <category>æ·±å…¥ç†è§£JAVAè™šæ‹Ÿæœº</category>
      </categories>
      <tags>
        <tag>Tag</tag>
      </tags>
  </entry>
  <entry>
    <title>ğŸ“–åç«¯å­¦ä¹ è®¡åˆ’ - :cyclone:  ä¹¦ç±æ¨è</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92.html</url>
    <content><![CDATA[<h1 id="ğŸŒ€-ä¹¦ç±æ¨è"><a class="header-anchor" href="#ğŸŒ€-ä¹¦ç±æ¨è"></a>ğŸŒ€ ä¹¦ç±æ¨è</h1>
<p>ğŸ“šâœ¨ğŸï¸ğŸ“–ğŸ‘‰ğŸ¤“â¤ï¸ğŸ¤£</p>
<p>ğŸˆ‚ï¸</p>
<p>ğŸ·ï¸ğŸ”–ğŸ—ï¸ğŸ“°ğŸ“‘ğŸ“šğŸ—‚ï¸ğŸ“‚ğŸ“ğŸ’¼ğŸ—’ï¸ğŸ“ğŸ“…ğŸ“†ğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ–‡ï¸âŒ›âŒšâ°â±ï¸â²ï¸ğŸ•°ï¸</p>
<p>ğŸ—‚ï¸ğŸ“‚ğŸ“ğŸ—“ï¸ğŸ“†ğŸ“ğŸ“’</p>
<p>ğŸ—ï¸ğŸ”‘ğŸ¹ğŸ“»ğŸ”’ğŸ”“ğŸ”ğŸ”âš’ï¸ğŸª¨ğŸ§±ğŸ”©ğŸª›ğŸ”§ğŸ› ï¸ğŸªµğŸ›–âš™ï¸ğŸ—œï¸ğŸ›¢ï¸âš—ï¸ğŸ’‰ğŸ©»ğŸ©ºğŸ§¬ğŸ§«ğŸ§ªğŸ©¸ğŸ©¹ğŸ©¼ğŸ’ŠğŸ”¬ğŸ”­ğŸ§°ğŸªâ›“ï¸ğŸ”—ğŸ“¿âš–ï¸ğŸ§²ğŸªœğŸ¦¯ğŸ›¡ï¸ğŸªšğŸ¹â™¥ï¸ğŸ²ğŸ–ï¸ğŸ†ğŸ®ğŸ•¹ï¸ğŸ°ğŸ¥‰ğŸ¥‡ğŸ¥ˆğŸ””ğŸ‘ŸğŸ‘—âš™ï¸ğŸ”ğŸ”âœ’ï¸ğŸ–‹ï¸ğŸ–Šï¸ğŸ–Œï¸ğŸ–ï¸ğŸ“ğŸª¥ğŸš¿ğŸª ğŸªğŸª’</p>
<p>ğŸ§ğŸ›ï¸ğŸšï¸ğŸ“¯ğŸ¥ğŸ™ï¸ğŸ¤ğŸª˜ğŸ“´ğŸ“³ğŸ“²â™€ï¸âš§ï¸â™‚ï¸ğŸš¬ğŸªªğŸ”‹ğŸª«ğŸ”ŒğŸ’»ğŸ–¥ï¸ğŸª§âŒ¨ï¸ğŸ–±ï¸ğŸ–²ï¸ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ§®ğŸ¬ğŸ“½ï¸ğŸ¥ğŸ“¡ğŸ“ºğŸ“·ğŸ“¸ğŸ“¹ğŸ“¼ğŸ’´ğŸ’µğŸª™ğŸ’°ğŸ’³âœ‰ï¸ğŸ“§ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ†˜â­•â›”ğŸš«ğŸ”‡ğŸ”•â—â•â“â”â€¼ï¸ğŸ’¯â‰ï¸ğŸ”…ğŸ”†ğŸ”±âšœï¸âœ…â•â–âœ–ï¸â—ğŸŸ°â„¢ï¸Â®ï¸Â©ï¸ğŸ”˜ğŸ”´ğŸŸ âš«ğŸŸ¤ğŸŸ£ğŸ”µğŸŸ¢ğŸŸ¡âšªğŸŸ¥ğŸŸ§ğŸŸ¨ğŸŸ©ğŸŸ¦â—»ï¸â—¼ï¸â¬œâ¬›ğŸŸ«ğŸŸªâ—¾â—½â–ªï¸â–«ï¸ğŸ”¶ğŸ”²ğŸ—¨ï¸ğŸ‘ï¸â€ğŸ—¨ï¸</p>
<p>ğŸ’«</p>
<p>ğŸ¯ï¸</p>
<p>ğŸ› ï¸</p>
<p>ğŸ“‘</p>
<p>ğŸ’»</p>
<p>ğŸ§‘â€ğŸ’»</p>
<p>è¿™æ˜¯ä¸€å¥è¯<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="è¿™æ˜¯å¯¹åº”çš„è„šæ³¨">[1]</span></a></sup></p>
<p>è¿™æ˜¯ä¸€å¥è¯2<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="è¿™æ˜¯å¯¹åº”222çš„è„šæ³¨">[2]</span></a></sup></p>
<ul class="contains-task-list">
<li class="task-list-item">
<p><input class="task-list-item-checkbox" disabled="" type="checkbox"> a</p>
</li>
<li class="task-list-item">
<p><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> b</p>
</li>
<li class="task-list-item">
<p><input class="task-list-item-checkbox" disabled="" type="checkbox"> c</p>
</li>
<li>
<p>å¦‚ä½•ç¿»ç›˜ï¼Ÿ</p>
<ul>
<li>åšå®¢ï¼Œè®°å½•å­¦ä¹ çš„çŸ¥è¯†ç‚¹ã€‚</li>
<li>githubå¼€æºé¡¹ç›®ï¼Œç›®å‰ä¸ç°å®ã€‚</li>
</ul>
</li>
<li>
<p>è®¸ä»¤æ³¢ã€Šæ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹•ã€‹</p>
<ul>
<li>æˆ‘ä¸ªäººè§‰å¾—è¿™æ˜¯ä¸€æœ¬æ°´ä¹¦ï¼Œèµ°é©¬è§‚èŠ±ã€‚ä½†æ˜¯ä¹Ÿå€¼å¾—è‰è‰è¿‡ä¸€éï¼Œå› ä¸ºæ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹å±•å¼€ã€‚</li>
</ul>
</li>
<li>
<p>å§œæ‰¿å°§ã€ŠMySQLæŠ€æœ¯å†…å¹•-InnoDBå­˜å‚¨å¼•æ“ã€‹</p>
<ul>
<li>ç»å…¸è€ä¹¦ï¼ŒçŸ¥è¯†ç‚¹æ•£ä¹±ï¼Œéœ€è¦è‡ªå·±æ•´ç†æˆçŸ¥è¯†å¡ç‰‡ï¼Œç¼•å‡ºæ€è·¯ã€‚</li>
<li>ä¹¦ä¸Šå¯¹æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½è§£é‡Šçš„åŸå› å’Œç›®çš„ï¼Œé€»è¾‘æ˜¯æ¸…æ™°çš„</li>
</ul>
</li>
<li>
<p>æ˜é‡‘å°å†Œä¸Šã€Šä»æ ¹ä¸Šç†è§£MySQLã€‹</p>
<ul>
<li>éå¸¸æ¨èï¼Œä¸é€‚åˆç¢ç‰‡åŒ–é˜…è¯»ï¼Œéœ€è¦å¤§æ®µå¤§æ®µçš„è¿ç»­æ—¶é—´ç»†è¯»ç†è§£ï¼Œå»ºè®®å‘¨æœ«è¿è‚ä¸¤å¤©ï¼Œæ¯å¤©10å°æ—¶ã€‚</li>
<li>è¿™æœ¬ä¹¦éå¸¸ç»†ï¼Œæ²¡å¿…è¦åˆ»æ„è®°ä¸€äº›ç»“æ„å’Œæ•°å­—ã€‚ç†è§£å°±å¤Ÿäº†</li>
<li>å¯ä»¥å…³æ³¨ä½œè€…çš„å·¥ä½œå·ï¼Œä¸Šé¢æœ‰è¡¥å……æ–‡ç« å¯ä»¥çœ‹</li>
<li>è¯»å®Œèƒ½å½»åº•æŒæ¡MySQLåŸç†çš„åŸºç¡€</li>
</ul>
</li>
<li>
<p>ã€Šé«˜æ€§èƒ½MySQLã€‹ï¼Œã€Šé«˜å¯ç”¨MySQLã€‹</p>
<ul>
<li>ç®€å•çœ‹çœ‹å³å¯ï¼Œä¸»è¦æ˜¯æ‹“å±•å¹¿åº¦</li>
</ul>
</li>
<li>
<p>å‘¨å¿—æ˜-ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</p>
<ul>
<li>JVMå…¶å®å¾ˆå¤æ‚ï¼Œè¿™æœ¬ä¹¦ä»…ä»…æ˜¯å…¥é—¨çº§åˆ«çš„ä¹¦ï¼Œä½†æ˜¯é€šè¯»å°±å¯ä»¥åº”å¯¹å¤§éƒ¨åˆ†é¢è¯•å’Œå·¥ä½œåœºæ™¯</li>
<li>JVMå·¥å…·ä¸Šå¯ä»¥è¯•ä¸€è¯•jprofileï¼Œå›¾å½¢åŒ–å¾ˆç›´è§‚</li>
<li>Arthaså¿…é¡»ä¼š</li>
<li>ä¹¦ä¸­â€œé«˜æ•ˆå¹¶å‘â€è¿™å—å†…å®¹ï¼Œå¯ä»¥ç»“åˆæ–¹è…¾é£çš„ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹çœ‹ï¼Œ</li>
</ul>
</li>
<li>
<p>é»„å¥å®-ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹</p>
<ul>
<li>å®é™…ä¸Šè¿™æœ¬ä¹¦ä¸å€¼å¾—æ¨èï¼Œé‡Œé¢æœ‰cè¯­è¨€æºç ï¼ŒåŸºäºredis2.9ï¼ŒçŸ¥è¯†æ—§ã€‚</li>
<li>ä½†æ˜¯ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç»“æ„çš„åº•å±‚å®ç°å†™çš„ä¸é”™ï¼Œéœ€è¦è‡ªè¡Œæ•´ç†ä¸‹æ¥ï¼ˆåˆ«å»ç½‘ä¸ŠæŠ„ï¼Œç½‘ä¸Šçš„æœ‰é—®é¢˜ï¼‰</li>
<li>å°±æ²¡å‘ç°å…³äºRedisçš„å¥½ä¹¦ï¼Œå¼ºçƒˆå»ºè®®ç›´æ¥å®˜ç½‘æ–‡æ¡£</li>
</ul>
</li>
<li>
<p>MyBatis-å®˜ç½‘</p>
<ul>
<li>æ²¡è§‰å¾—æœ‰ä»€ä¹ˆä¹¦å¥½çš„ï¼Œæ¨èå®˜ç½‘ä¸Šå­¦ä¹ </li>
</ul>
</li>
<li>
<p>ã€Šæ·±å…¥ç†è§£Kafka:æ ¸å¿ƒè®¾è®¡ä¸å®è·µåŸç†ã€‹</p>
<ul>
<li>æŒºä¸é”™çš„ä¹¦ï¼ŒåŸç†å’Œè§£é‡Šå¾ˆå…¨é¢äº†ï¼Œå°±æ˜¯åºŸè¯è´¼å¤šçœ‹å¾—éš¾å—</li>
</ul>
</li>
<li>
<p>è®¾è®¡æ¨¡å¼çš„ä¸¤ä»½èµ„æ–™</p>
<ul>
<li>æ¯”è¾ƒç†è®ºåŒ–çš„<a href="https://refactoringguru.cn/design-patterns/catalog">https://refactoringguru.cn/design-patterns/catalog</a></li>
<li>æ¥åœ°æ°”çš„ï¼šå°å‚…å“¥(å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ)ã€Šé‡å­¦Javaè®¾è®¡æ¨¡å¼ã€‹ PDFï¼Œç›´æ¥æ‰¾æˆ‘è¦</li>
<li>ã€ŠHeadFirstè®¾è®¡æ¨¡å¼ã€‹é‚£æœ¬ä¹¦åºŸè¯å¤ªå¤šï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œä¸ªäººä¸æ¨èã€‚</li>
</ul>
</li>
<li>
<p>ã€Šå›¾è§£TCPã€‹ï¼Œã€Šå›¾è§£HTTPã€‹</p>
<ul>
<li>ç®€å•è¿‡è¿‡å°±å¥½ï¼ŒæŸ¥ç¼ºè¡¥æ¼ã€‚å…¶å®ä¹¦ä¸Šæœ‰æŒºå¤šä¸ä¸¥è°¨ï¼Œä¸æ˜ç¡®çš„åœ°æ–¹ï¼ˆç›¸å¯¹æ•™æï¼‰ã€‚</li>
<li>å¦‚æœå¯ä»¥çœ‹å›æ•™æçš„è¯ï¼Œè¿˜æ˜¯çœ‹çœ‹æ•™æã€‚å¦‚æœä¸æ˜¯è®¡ç®—æœºä¸“ä¸šï¼Œçœ‹è°¢å¸Œä»çš„å°±å¤Ÿäº†ï¼ŒKuroseçš„é‚£æœ¬å¤ªæ·±äº†ï¼Œæ²¡å¿…è¦ã€‚</li>
</ul>
</li>
<li>
<p>ã€ŠNettyå®æˆ˜ã€‹</p>
<ul>
<li>ç”¨è¿‡Nettyæˆ–è®¸æƒ³å­¦Nettyï¼Œè¿™æœ¬ä¹¦è·Ÿç€åšå°±ç®—<strong>å…¥é—¨</strong>äº†ã€‚</li>
</ul>
</li>
<li>
<p>å¹¶å‘ç¼–ç¨‹ç±»</p>
<ul>
<li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹å¤ªæ·±ï¼ˆä¸€æ˜¯æŠ½è±¡äºŒæ˜¯ç¿»è¯‘ï¼‰ï¼Œä½†æ˜¯æƒå¨ã€‚æ²¡å¿…è¦é€šè¯»ï¼Œçœ‹ç€ç›®å½•æ‰¾è‡ªå·±æ„Ÿå…´è¶£çš„å³å¯ã€‚</li>
<li>æ–¹è…¾é£çš„ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ç»“åˆç€æ•²ï¼Œæ•²å®Œå°±è¾¾æ ‡äº†ã€‚</li>
<li>è‘›ä¸€æ˜çš„ã€Šå®æˆ˜Javaé«˜å¹¶å‘ç¨‹åºè®¾è®¡ã€‹ï¼Œè¿™æœ¬ä¹¦æ˜¯æ°´ä¹¦ï¼Œå¾ˆæµ…ï¼Œä½†æ˜¯æœ‰é…å¥—è§†é¢‘æ•™ç¨‹ï¼Œå¯¹ç€æ•²å¾ˆæœ‰æ•ˆæœã€‚æ•™ç¨‹ç›´æ¥æ‰¾æˆ‘è¦ã€‚</li>
</ul>
</li>
<li>
<p>Springè¿™äº›å°±ä¸æ¨èä¹¦äº†ï¼Œæ—¶æ•ˆæ€§ä¸é«˜</p>
<ul>
<li>Springæ€æƒ³å°±æ˜¯å·¥å‚æ¨¡å¼ï¼ˆå®¹å™¨ï¼‰ï¼Œå¯¹Springçš„åŸºæœ¬æ¦‚æ‹¬å°±æ˜¯ä¾èµ–æ³¨å…¥ä¸AOPã€‚</li>
<li>é…ç½®ï¼ˆxml/javaConfigå£°æ˜ï¼‰åˆ°Beançš„è¿‡ç¨‹ï¼ˆResource-BeanDefinition-å®ä¾‹åŒ–-åˆå§‹åŒ–-é”€æ¯ï¼‰ï¼Œä¸ªäººè®¤ä¸ºSpringçš„DIä¸AOPæ€æƒ³çš„å®ç°å°±åœ¨BeanPostProcessor</li>
</ul>
</li>
<li>
<p>ã€Šå›¾è§£Javaå¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼ã€‹</p>
<ul>
<li>éƒ½æ˜¯äº›å¹¶å‘ç¼–ç¨‹çš„åº”ç”¨ï¼Œè¿™é‡Œé¢çš„æ¨¡å¼åœ¨æ¡†æ¶è®¾è®¡å±‚é¢éƒ½æœ‰ä½“ç°ã€‚</li>
<li>å¯ä»¥å¯¹ç€å°†è¿™äº›æ¨¡å¼å®ç°ä¸€éï¼Œéå¸¸æœ‰å¸®åŠ©</li>
</ul>
</li>
<li>
<p>ã€Šå›¾è§£ç½‘ç»œ-å°æ—codingã€‹</p>
<ul>
<li>ä½œè€…æœ‰ç‚¹åŠŸåº•çš„ï¼Œå°±å½“ä¼˜è´¨åšæ–‡çœ‹å§ã€‚PDFç›´æ¥æ‰¾æˆ‘è¦</li>
</ul>
</li>
</ul>
<p>çŸ¥è¯†æ¿å—</p>
<p>è®¡ç®—æœºåŸºç¡€ï¼Œæ“ä½œç³»ç»Ÿ</p>
<ul>
<li>ç¡¬ä»¶åŸºæœ¬çŸ¥è¯†ï¼šCPUï¼Œç¼“å­˜ï¼Œå†…å­˜ï¼Œç¡¬ç›˜ï¼ŒDMA</li>
<li>çº¿ç¨‹è°ƒåº¦ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·æ€å†…æ ¸æ€</li>
<li>LInuxå‘½ä»¤ï¼Œtop, grep, sort, find, tail, sed</li>
<li>ä¹¦ï¼š</li>
</ul>
<p>ç½‘ç»œçŸ¥è¯†</p>
<ul>
<li>7å±‚4å±‚ï¼Œ</li>
<li>tcp udp ip</li>
<li>httpï¼Œhttps(SSL TLS)</li>
<li>ä¹¦ï¼š
<ul>
<li>ã€Šå›¾è§£TCPã€‹ï¼Œã€Šå›¾è§£HTTPã€‹è¿‡ä¸€ä¸‹å°±å¥½</li>
</ul>
</li>
</ul>
<p>æ•°æ®åº“MySQLä¸ºä¾‹</p>
<ul>
<li>æ€»ä½“æ¶æ„</li>
<li>ç´¢å¼•çš„ç»“æ„å’ŒåŸç†, æ•°æ®é¡µï¼Œbufferpoolç­‰ç­‰</li>
<li>æ‰§è¡Œè®¡åˆ’ä¸ä¼˜åŒ–
<ul>
<li>ç´¢å¼•ä¸‹æ¨ï¼Œjoinï¼Œ</li>
</ul>
</li>
<li>ä¸åŒç»´åº¦çš„é”ã€‚è¡¨é”è¡Œé”ï¼Œæ„å‘é”ï¼Œgap-lock next-key-lockç­‰ç­‰</li>
<li>å››ä¸ªå¹¶å‘é—®é¢˜ä¸éš”ç¦»çº§åˆ«</li>
<li>redo log,undo logï¼ŒMVVCï¼ŒReadView</li>
<li>binlogä¸ä¸»ä»ï¼Œcanalï¼Œè¯»å†™åˆ†ç¦»ï¼ˆmycatä¸­é—´ä»¶ï¼‰ï¼Œå¤šå†™MGR(äº†è§£)
<ul>
<li>è¿™é‡Œä¸Šå‡åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿå±‚é¢è§†è§’</li>
</ul>
</li>
<li>information_schemaæ¶æ„ã€‚é‡Œé¢çš„ç³»ç»Ÿè¡¨ï¼Œä»¥åŠå„ç§é…ç½®é¡¹</li>
<li>åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ä¸å°†ä¼šé¢ä¸´çš„é—®é¢˜ï¼ˆå¼Šç«¯ï¼‰ï¼Œ Sharding-JDBC(Sharding-Sphere), mycat</li>
<li>ä¹¦
<ul>
<li>InnoDBå­˜å‚¨å¼•æ“
<ul>
<li>è€ä¹¦ï¼ŒçŸ¥è¯†ç‚¹æ•£ä¹±ï¼Œéœ€è¦è‡ªè¡Œæ•´ç†</li>
</ul>
</li>
<li>é«˜æ€§èƒ½MySQL
<ul>
<li>æ¯”è¾ƒæµ…ï¼Œä½†æ˜¯çŸ¥è¯†ç»“æ„æ¸…æ™°ï¼Œç®€å•è¿‡ä¸€è¿‡å°±å¥½</li>
</ul>
</li>
<li>é«˜å¯ç”¨MySQL
<ul>
<li>æˆ‘æ²¡çœ‹è¿‡ï¼Œç›´è§‚ä¸Šæ„Ÿè§‰äº†è§£ä¸€ä¸‹å°±å¥½äº†</li>
</ul>
</li>
<li>å®˜ç½‘reference
<ul>
<li>å¯ä»¥å‘ç°å¾ˆå¤šæ—¥å¸¸å·¥ä½œä¸­å‘çš„åŸå› </li>
</ul>
</li>
<li>æ˜é‡‘å°å†Œã€Šä»æ ¹ä¸Šç†è§£MySQLã€‹
<ul>
<li>è¿™æœ¬ä¹¦å¾ˆä»”ç»†ï¼Œé€‚åˆæ·±åº¦ç†è§£ï¼Œéœ€è¦å¤§æ®µçš„è¿ç»­æ—¶é—´ç ”è¯»ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç¼“å­˜Redis</p>
<ul>
<li>æ•°æ®ç»“æ„ä»¥åŠå¯¹åº”åŸç†
<ul>
<li>æ‰¾åšå®¢æ€•æ˜¯æ‰¾ä¸å…¨ã€‚å¯ä»¥é€šè¿‡ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹è‡ªè¡Œæ•´ç†ï¼Œä½†è¿™æœ¬ä¹¦æµ…ï¼Œå¾ˆå¤šçŸ¥è¯†ç‚¹è½åäº†ï¼ˆåŸºäº2.9çš„ï¼‰</li>
</ul>
</li>
<li>é…ç½®æ–‡ä»¶ä¸€ä¸ªä¸ªé…ç½®é¡¹çœ‹</li>
<li>åº”ç”¨åœºæ™¯
<ul>
<li>ç¼“å­˜ï¼Œå„ç§rediså‘½ä»¤ä¸Šçš„å‘</li>
<li>ç”¨äºåˆ†å¸ƒå¼é”çš„ä¼˜åŠ¿åŠ£åŠ¿ï¼ŒRedLockï¼ˆè¿›é˜¶ï¼‰</li>
<li>é™æµï¼ˆå°‘ï¼‰</li>
</ul>
</li>
<li>jedisï¼Œlettuce, redisson</li>
<li>çƒ­ç‚¹æ•°æ®ï¼Œæ…¢æŸ¥è¯¢ï¼Œexpired</li>
<li>redisçš„ä½¿ç”¨è§„èŒƒ</li>
<li>ç¼“å­˜çš„å‡»ç©¿ç©¿é€é›ªå´©ï¼Œä¸æ•°æ®åº“ä¸€è‡´æ€§(åŒå†™ä¸€è‡´æ€§)é—®é¢˜
<ul>
<li>é¦–å…ˆè¦æ˜ç¡®ï¼Œç¼“å­˜çš„ç›®çš„ã€‚å®ƒçš„åº”ç”¨åœºæ™¯å°±ä¸€å®šæ˜¯å†™å°‘è¯»å¤šï¼Œä»¥æ­¤ä¸ºå‡ºå‘ç‚¹æ€è€ƒä¸Šè¿°é—®é¢˜å³å¯ã€‚</li>
<li>æ²¡ç»å†å°±è®°å…«è‚¡æ–‡ï¼Œæœ‰ç»å†å°±èƒ½çµæ´»å¤„ç†</li>
<li>ä»€ä¹ˆå»¶è¿ŸåŒåˆ ä¹Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªè„‘ç˜«å‘æ˜å‡ºæ¥çš„</li>
</ul>
</li>
<li>ä¸»ä»ï¼Œå¤‡ä»½ï¼ŒæŒä¹…åŒ–ï¼Œclusterã€‚
<ul>
<li>åˆ†ç‰‡ï¼Œhashtagï¼Œä¸€è‡´æ€§é—®é¢˜ï¼Œgossipåè®®ç­‰ç­‰ è¿™ç§ä¹Ÿä¸Šå‡åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„é—®é¢˜äº†ã€‚</li>
</ul>
</li>
<li>ä¹¦
<ul>
<li>RedisçŸ¥è¯†åªæ¨èå®˜ç½‘ï¼Œæˆ‘æ²¡æ‰¾åˆ°å…¶å®ƒå¥½çš„èµ„æ–™ã€‚è‹±æ–‡ä¸å¥½åªèƒ½ç¡¬å•ƒæ²¡åŠæ³•ã€‚</li>
<li>åƒåœ¾é¿å‘ï¼šæ˜é‡‘ä¸Šè€é’±çš„Redisï¼Œåˆ«æµªè´¹é’±</li>
</ul>
</li>
</ul>
<p>è®¾è®¡æ¨¡å¼</p>
<ul>
<li>ç†è§£è¿‡ä¸€éå°±è¡Œï¼Œåˆ«é’»ç‰›è§’å°–ï¼Œä¸ªäººè®¤ä¸ºè®¾è®¡æ¨¡å¼æ˜¯ä¸Šå±‚è®¾è®¡å±‚æ€è€ƒçš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ç¼–ç å±‚å»è€ƒè™‘ï¼Œè§†è§’æ”¾é«˜ã€‚</li>
<li>å®é™…ä¸Šç»å¤§éƒ¨åˆ†äººéƒ½æ˜¯crud, if elseã€‚</li>
<li>ä¹¦ï¼š
<ul>
<li>æ¯”è¾ƒç†è®ºåŒ–çš„<a href="https://refactoringguru.cn/design-patterns/catalog">https://refactoringguru.cn/design-patterns/catalog</a></li>
<li>æ¥åœ°æ°”çš„ï¼šå°å‚…å“¥(å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ)ã€Šé‡å­¦Javaè®¾è®¡æ¨¡å¼ã€‹ PDFï¼Œç›´æ¥æ‰¾æˆ‘è¦</li>
</ul>
</li>
</ul>
<p>åˆ†å¸ƒå¼æ¶æ„</p>
<ul>
<li>dubbo SOAæ¶æ„</li>
<li>SpringCloudå¾®æœåŠ¡å„ç§ç»„ä»¶ä¸ä½œç”¨ï¼ˆç†”æ–­ï¼Œé™æµï¼Œç½‘å…³ï¼Œé…ç½®ï¼Œæ€»çº¿ï¼Œé™çº§ï¼‰</li>
<li>å…¶å®è¿™éƒ¨åˆ†çŸ¥è¯†ï¼Œé¡¹ç›®ä½“é‡ä¸Šä¸å»è¿™äº›ç»„ä»¶å¾ˆéš¾æ·±åˆ»ç†è§£ï¼ŒçŸ¥é“å®ƒä»¬åœ¨å¾®æœåŠ¡ä¸­ä½œç”¨å³å¯</li>
<li>zookeeperåŠå…¶å®¢æˆ·ç«¯curatorï¼Œä¸€äº›åè°ƒåº”ç”¨åœºæ™¯çš„å®ç°ï¼ˆé€‰ä¸»ï¼Œåˆ†å¸ƒå¼é”ï¼Œwatchæœºåˆ¶ï¼‰</li>
<li>åˆ†å¸ƒå¼IDï¼Œ</li>
</ul>
<p>JavaåŸºç¡€</p>
<ul>
<li>JDKä¸ŠStringï¼ŒMap, Collectionï¼ŒJUCï¼ˆAQS,Lock,AtomicXxx, çº¿ç¨‹æ± â€¦ï¼‰</li>
<li>AQS=state+ç­‰å¾…é˜Ÿåˆ—</li>
</ul>
<p>æ¶ˆæ¯ä¸­é—´ä»¶</p>
<ul>
<li>åº”ç”¨åœºæ™¯ï¼ŒåŠ¨æ‰‹è¯•ä¸€è¯•</li>
<li>Kafka, RocketMQ. ä¸‹é¢kafkaä¸ºä¾‹</li>
<li>Topic, å‰¯æœ¬replicaï¼Œpartitionï¼Œleader, ISR,OSRï¼Œé«˜æ°´ä½ä½æ°´ä½ï¼Œsegment file, rebalance</li>
<li>æ¶ˆæ¯ä¸¢å¤±ï¼Œé‡å¤ï¼Œæœ‰åºï¼Œå¹‚ç­‰å¤„ç†
<ul>
<li>producerå¦‚ä½•ä¿è¯ï¼Œbrokerå¦‚ä½•ä¿è¯ï¼Œconsumerå¦‚ä½•å¤„ç†å¯ä»¥ä¿è¯ã€‚consumerä¸groupçš„é¡ºåºï¼Œoffset,</li>
</ul>
</li>
<li>ä¹¦
<ul>
<li>ã€Šæ·±å…¥ç†è§£Kafka:æ ¸å¿ƒè®¾è®¡ä¸å®è·µåŸç†ã€‹
<ul>
<li>æŒºä¸é”™çš„ä¹¦ï¼ŒåŸç†å¾ˆå…¨é¢äº†ï¼Œå°±æ˜¯åºŸè¯è´¼å¤šçœ‹å¾—éš¾å—ï¼Œå‡‘å­—æ•°éª—ç¨¿é…¬</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åˆ†å¸ƒå¼äº‹åŠ¡</p>
<ul>
<li>å…ˆæä¸ªseataå®è·µä¸€ä¸‹</li>
<li>åŸç†å±‚é¢å¤§è‡´æœä¸€æœå°±æœ‰äº†ï¼ŒçœŸè¦ç†è§£å¾—çœ‹å¾ˆå¤šï¼ˆå…±è¯†é—®é¢˜å‡ºå‘ï¼ŒPaxosï¼Œåˆ°ACIDï¼Œå†åˆ°BASE, 2PCï¼ŒTCCï¼‰</li>
<li>2PCï¼ˆåŸºæœ¬åŸç†ï¼‰ TCCï¼ˆæŸ”æ€§ï¼Œä¾èµ–ä¸šåŠ¡ç¼–ç ï¼Œå¹‚ç­‰ï¼‰</li>
<li>Sageæ–¹æ¡ˆ</li>
</ul>
<p>JVM</p>
<ul>
<li>ç›´æ¥çœ‹ä¹¦å§ï¼Œå¿«é€Ÿè¿‡å³å¯é—®ä¸äº†å¤šæ·±ã€‚ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</li>
<li>åŸºæœ¬ä¸Šå°±æ˜¯å†…å­˜ç»“æ„ï¼ŒJavaå†…å­˜æ¨¡å‹ï¼Œç±»åŠ è½½ï¼Œclassloaderï¼ŒSPIï¼Œå¸¸ç”¨å·¥å…·</li>
<li>CMSï¼ˆåœ¨JDK9ä¹‹ååºŸå¼ƒï¼‰ï¼ŒG1åŸºæœ¬æ¦‚å¿µå’ŒåŸç†</li>
<li>ä¸€èˆ¬çš„æ’æŸ¥æ–¹å¼jstack, jmap, jprofile,jvisualvmç­‰ç­‰</li>
<li>é˜¿é‡ŒArthasï¼ŒåŸºæœ¬å°±ç”¨ä¸¤ä¸ªå‘½ä»¤watch trace</li>
</ul>
<p>Netty</p>
<ul>
<li>æ²¡ç”¨è¿‡å°±ç®—äº†</li>
<li>Reactoræ¨¡å‹ä¸­ä¸»ä»Reactorçš„å˜ä½“(å»æ‰çº¿ç¨‹æ± çš„å˜ä½“)</li>
<li>äº‹ä»¶å¾ªç¯EventLoopï¼ŒChannelï¼ŒChannelPipelineï¼ŒInbound/Outbound</li>
<li>å®ç°åˆ†ç‰‡æ‹·è´</li>
<li>ç²˜åŒ…æ‹†åŒ…çš„å››ç§æ–¹æ¡ˆã€‚</li>
<li>å®ç°é•¿è¿æ¥ï¼Œå¿ƒè·³ï¼Œæ–­çº¿é‡è¿</li>
</ul>
<p>Springï¼ŒSpringMVCï¼ŒSpringBoot</p>
<ul>
<li>Springæ€æƒ³å°±æ˜¯å·¥å‚æ¨¡å¼ï¼ˆå®¹å™¨ï¼‰ã€‚åŸºæœ¬æ¦‚æ‹¬å°±æ˜¯ä¾èµ–æ³¨å…¥ä¸AOPã€‚</li>
<li>å¸¸ç”¨æ³¨è§£</li>
<li>é…ç½®ï¼ˆxml/javaConfigå£°æ˜ï¼‰åˆ°Beançš„è¿‡ç¨‹ï¼ˆResource-BeanDefinition-å®ä¾‹åŒ–-åˆå§‹åŒ–-é”€æ¯ï¼‰ï¼Œä¸ªäººè®¤ä¸ºSpringçš„DIä¸AOPæ€æƒ³çš„å®ç°å°±åœ¨BeanPostProcessor</li>
<li>å®¹å™¨refreshè¿‡ç¨‹ï¼Œå¾ªç¯ä¾èµ–</li>
<li>SpringMVCæºç å¯ä»¥çœ‹çœ‹ï¼ŒæŒºä¸é”™çš„</li>
<li>SpringBootçš„spring.factoriesï¼ˆçœ‹çœ‹starteråŒ…é‡Œ/META-INF/spring.factoriesï¼‰</li>
</ul>
<p>MyBatis</p>
<ul>
<li>å¤ªç®€å•äº†ï¼Œå®˜ç½‘è·Ÿç€å†™ä¸€è½®å°±å¥½äº†</li>
<li>xmlæ–¹å¼é…ç½®ï¼Œconfigæ–¹å¼é…ç½®</li>
<li>xmlæ–¹å¼å£°æ˜sqlï¼Œæ³¨è§£æ–¹å¼å£°æ˜sql</li>
<li>æ¡†æ¶åŸç†æ–¹é¢ç½‘ä¸Šéƒ½æœ‰ï¼Œä¹Ÿæ¯”è¾ƒç®€å•</li>
<li>å¯ä»¥çœ‹çœ‹æºç ï¼Œå†™å¾—è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</li>
</ul>
<p>Dubbo</p>
<ul>
<li>ç”¨çš„å°‘ï¼Œæ´»è·ƒåº¦ä¹Ÿä¸å¤ªè¡Œäº†ã€‚</li>
<li>å®˜ç½‘çœ‹ä¸€çœ‹ï¼Œæœä¸€æœé¢è¯•é¢˜å°±å¥½</li>
<li>ä¸»è¦æ˜¯å„ä¸ªåè®®çš„ç‰¹ç‚¹ã€‚å› ä¸ºDubboæœ¬èº«å°±æ˜¯RMIçš„è§£å†³æ–¹æ¡ˆï¼Œä¼ è¾“åè®®ï¼Œè§£å‹ç¼©ï¼Œç¼–ç ç­‰ç­‰æ˜¯å®ç°ä¸Šå…³é”®ç‚¹</li>
</ul>
<pre><code class=" mermaid">flowchart TD
A[start] --&gt; B&#123;It&#x27;s TURE?&#125;
B --Yes--&gt; C[OK]
c --&gt; D[Rethink]
D --&gt; B
B ----&gt; |No| E[End]
</code></pre>
<section class="footnotes"><h1>ğŸ“šReference</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>è¿™æ˜¯å¯¹åº”çš„è„šæ³¨
<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>è¿™æ˜¯å¯¹åº”222çš„è„šæ³¨
<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
      <tags>
        <tag>Tag</tag>
        <tag>Tag2</tag>
      </tags>
  </entry>
  <entry>
    <title>éå¸¸è¯¦ç»†çš„Dockerå­¦ä¹ ç¬”è®°</title>
    <url>/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/detail_docker_study_note.html</url>
    <content><![CDATA[<h1 id="ä¸€ã€Docker-ç®€ä»‹"><a class="header-anchor" href="#ä¸€ã€Docker-ç®€ä»‹"></a>ä¸€ã€Docker ç®€ä»‹</h1>
<p>Docker ä¸¤ä¸ªä¸»è¦éƒ¨ä»¶ï¼š</p>
<ul>
<li>Docker: å¼€æºçš„å®¹å™¨è™šæ‹ŸåŒ–å¹³å°</li>
<li>Docker Hub: ç”¨äºåˆ†äº«ã€ç®¡ç† Docker å®¹å™¨çš„ Docker SaaS å¹³å° â€“Â <a href="https://registry.hub.docker.com/search?q=library">Docker Hub</a></li>
</ul>
<p>Docker ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ (C/S) æ¶æ„æ¨¡å¼ã€‚Docker å®¢æˆ·ç«¯ä¼šä¸ Docker å®ˆæŠ¤è¿›ç¨‹è¿›è¡Œé€šä¿¡ã€‚Docker å®ˆæŠ¤è¿›ç¨‹ä¼šå¤„ç†å¤æ‚ç¹é‡çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å»ºç«‹ã€è¿è¡Œã€å‘å¸ƒä½ çš„ Docker å®¹å™¨ã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹å¯ä»¥è¿è¡Œåœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Docker å®¢æˆ·ç«¯å»è¿æ¥ä¸€ä¸ªè¿œç¨‹çš„ Docker å®ˆæŠ¤è¿›ç¨‹ã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹ä¹‹é—´é€šè¿‡ socket æˆ–è€… RESTful API è¿›è¡Œé€šä¿¡ã€‚</p>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091033_189.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<h2 id="1-1-Docker-å®ˆæŠ¤è¿›ç¨‹"><a class="header-anchor" href="#1-1-Docker-å®ˆæŠ¤è¿›ç¨‹"></a>1.1 Docker å®ˆæŠ¤è¿›ç¨‹</h2>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸€å°ä¸»æœºä¸Šã€‚ç”¨æˆ·å¹¶ä¸ç›´æ¥å’Œå®ˆæŠ¤è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ Docker å®¢æˆ·ç«¯é—´æ¥å’Œå…¶é€šä¿¡ã€‚</p>
<h2 id="1-2-Docker-å®¢æˆ·ç«¯"><a class="header-anchor" href="#1-2-Docker-å®¢æˆ·ç«¯"></a>1.2 Docker å®¢æˆ·ç«¯</h2>
<p>Docker å®¢æˆ·ç«¯ï¼Œå®é™…ä¸Šæ˜¯ docker çš„äºŒè¿›åˆ¶ç¨‹åºï¼Œæ˜¯ä¸»è¦çš„ç”¨æˆ·ä¸ Docker äº¤äº’æ–¹å¼ã€‚å®ƒæ¥æ”¶ç”¨æˆ·æŒ‡ä»¤å¹¶ä¸”ä¸èƒŒåçš„ Docker å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œå¦‚æ­¤æ¥å›å¾€å¤ã€‚</p>
<h2 id="1-3-Docker-å†…éƒ¨"><a class="header-anchor" href="#1-3-Docker-å†…éƒ¨"></a>1.3 Docker å†…éƒ¨</h2>
<p>è¦ç†è§£ Docker å†…éƒ¨æ„å»ºï¼Œéœ€è¦ç†è§£ä»¥ä¸‹ä¸‰ç§éƒ¨ä»¶ï¼š</p>
<ul>
<li>Docker é•œåƒ - Docker images</li>
<li>Docker ä»“åº“ - Docker registeries</li>
<li>Docker å®¹å™¨ - Docker containers</li>
</ul>
<h3 id="Docker-é•œåƒ"><a class="header-anchor" href="#Docker-é•œåƒ"></a>Docker é•œåƒ</h3>
<p>Docker é•œåƒæ˜¯ Docker å®¹å™¨è¿è¡Œæ—¶çš„åªè¯»æ¨¡æ¿ï¼Œæ¯ä¸€ä¸ªé•œåƒç”±ä¸€ç³»åˆ—çš„å±‚ (layers) ç»„æˆã€‚Docker ä½¿ç”¨ UnionFS æ¥å°†è¿™äº›å±‚è”åˆåˆ°å•ç‹¬çš„é•œåƒä¸­ã€‚UnionFS å…è®¸ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹(ç§°ä¹‹ä¸ºåˆ†æ”¯)è¢«é€æ˜è¦†ç›–ï¼Œå½¢æˆä¸€ä¸ªå•ç‹¬è¿è´¯çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ­£å› ä¸ºæœ‰äº†è¿™äº›å±‚çš„å­˜åœ¨ï¼ŒDocker æ˜¯å¦‚æ­¤çš„è½»é‡ã€‚å½“ä½ æ”¹å˜äº†ä¸€ä¸ª Docker é•œåƒï¼Œæ¯”å¦‚å‡çº§åˆ°æŸä¸ªç¨‹åºåˆ°æ–°çš„ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ–°çš„å±‚ä¼šè¢«åˆ›å»ºã€‚å› æ­¤ï¼Œä¸ç”¨æ›¿æ¢æ•´ä¸ªåŸå…ˆçš„é•œåƒæˆ–è€…é‡æ–°å»ºç«‹(åœ¨ä½¿ç”¨è™šæ‹Ÿæœºçš„æ—¶å€™ä½ å¯èƒ½ä¼šè¿™ä¹ˆåš)ï¼Œåªæ˜¯ä¸€ä¸ªæ–° çš„å±‚è¢«æ·»åŠ æˆ–å‡çº§äº†ã€‚ç°åœ¨ä½ ä¸ç”¨é‡æ–°å‘å¸ƒæ•´ä¸ªé•œåƒï¼Œåªéœ€è¦å‡çº§ï¼Œå±‚ä½¿å¾—åˆ†å‘ Docker é•œåƒå˜å¾—ç®€å•å’Œå¿«é€Ÿã€‚</p>
<h3 id="Docker-ä»“åº“"><a class="header-anchor" href="#Docker-ä»“åº“"></a>Docker ä»“åº“</h3>
<p>Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚åŒæ ·çš„ï¼ŒDocker ä»“åº“ä¹Ÿæœ‰å…¬æœ‰å’Œç§æœ‰çš„æ¦‚å¿µã€‚å…¬æœ‰çš„ Docker ä»“åº“åå­—æ˜¯ Docker Hubã€‚Docker Hub æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨ã€‚è¿™äº›é•œåƒå¯ä»¥æ˜¯è‡ªå·±åˆ›å»ºï¼Œæˆ–è€…åœ¨åˆ«äººçš„é•œåƒåŸºç¡€ä¸Šåˆ›å»ºã€‚Docker ä»“åº“æ˜¯ Docker çš„åˆ†å‘éƒ¨åˆ†ã€‚</p>
<h3 id="Docker-å®¹å™¨"><a class="header-anchor" href="#Docker-å®¹å™¨"></a>Docker å®¹å™¨</h3>
<p>Docker å®¹å™¨å’Œæ–‡ä»¶å¤¹å¾ˆç±»ä¼¼ï¼Œä¸€ä¸ªDockerå®¹å™¨åŒ…å«äº†æ‰€æœ‰çš„æŸä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„ç¯å¢ƒã€‚æ¯ä¸€ä¸ª Docker å®¹å™¨éƒ½æ˜¯ä» Docker é•œåƒåˆ›å»ºçš„ã€‚Docker å®¹å™¨å¯ä»¥è¿è¡Œã€å¼€å§‹ã€åœæ­¢ã€ç§»åŠ¨å’Œåˆ é™¤ã€‚æ¯ä¸€ä¸ª Docker å®¹å™¨éƒ½æ˜¯ç‹¬ç«‹å’Œå®‰å…¨çš„åº”ç”¨å¹³å°ï¼ŒDocker å®¹å™¨æ˜¯ Docker çš„è¿è¡Œéƒ¨åˆ†ã€‚</p>
<h2 id="1-4-libcontainer"><a class="header-anchor" href="#1-4-libcontainer"></a>1.4 libcontainer</h2>
<p>Docker ä» 0.9 ç‰ˆæœ¬å¼€å§‹ä½¿ç”¨ libcontainer æ›¿ä»£ lxcï¼Œlibcontainer å’Œ Linux ç³»ç»Ÿçš„äº¤äº’å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091034_223.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<ul>
<li>å›¾ç‰‡æ¥æº:Â <a href="http://blog.docker.com/2014/03/docker-0-9-introducing-execution-drivers-and-libcontainer/">Docker 0.9: introducing execution drivers and libcontainer</a></li>
</ul>
<h2 id="1-5-å‘½åç©ºé—´ã€ŒNamespacesã€"><a class="header-anchor" href="#1-5-å‘½åç©ºé—´ã€ŒNamespacesã€"></a>1.5 å‘½åç©ºé—´ã€ŒNamespacesã€</h2>
<h3 id="pid-namespace"><a class="header-anchor" href="#pid-namespace"></a>pid namespace</h3>
<p>ä¸åŒç”¨æˆ·çš„è¿›ç¨‹å°±æ˜¯é€šè¿‡ pid namespace éš”ç¦»å¼€çš„ï¼Œä¸”ä¸åŒ namespace ä¸­å¯ä»¥æœ‰ç›¸åŒ PIDã€‚å…·æœ‰ä»¥ä¸‹ç‰¹å¾:</p>
<ul>
<li>æ¯ä¸ª namespace ä¸­çš„ pid æ˜¯æœ‰è‡ªå·±çš„ pid=1 çš„è¿›ç¨‹(ç±»ä¼¼ /sbin/init è¿›ç¨‹)</li>
<li>æ¯ä¸ª namespace ä¸­çš„è¿›ç¨‹åªèƒ½å½±å“è‡ªå·±çš„åŒä¸€ä¸ª namespace æˆ–å­ namespace ä¸­çš„è¿›ç¨‹</li>
<li>å› ä¸º /proc åŒ…å«æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œå› æ­¤åœ¨ container ä¸­çš„ pseudo-filesystem çš„ /proc ç›®å½•åªèƒ½çœ‹åˆ°è‡ªå·± namespace ä¸­çš„è¿›ç¨‹</li>
<li>å› ä¸º namespace å…è®¸åµŒå¥—ï¼Œçˆ¶ namespace å¯ä»¥å½±å“å­ namespace çš„è¿›ç¨‹ï¼Œæ‰€ä»¥å­ namespace çš„è¿›ç¨‹å¯ä»¥åœ¨çˆ¶ namespace ä¸­çœ‹åˆ°ï¼Œä½†æ˜¯å…·æœ‰ä¸åŒçš„ pid</li>
</ul>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2014/01/05/introduction-to-linux-namespaces-part-3-pid/">Introduction to Linux namespaces â€“ Part 3: PID</a></p>
<h3 id="mnt-namespace"><a class="header-anchor" href="#mnt-namespace"></a>mnt namespace</h3>
<p>ç±»ä¼¼ chrootï¼Œå°†ä¸€ä¸ªè¿›ç¨‹æ”¾åˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®å½•æ‰§è¡Œã€‚mnt namespace å…è®¸ä¸åŒ namespace çš„è¿›ç¨‹çœ‹åˆ°çš„æ–‡ä»¶ç»“æ„ä¸åŒï¼Œè¿™æ ·æ¯ä¸ª namespace ä¸­çš„è¿›ç¨‹æ‰€çœ‹åˆ°çš„æ–‡ä»¶ç›®å½•å°±è¢«éš”ç¦»å¼€äº†ã€‚åŒ chroot ä¸åŒï¼Œæ¯ä¸ª namespace ä¸­çš„ container åœ¨ /proc/mounts çš„ä¿¡æ¯åªåŒ…å«æ‰€åœ¨ namespace çš„ mount pointã€‚</p>
<h3 id="net-namespace"><a class="header-anchor" href="#net-namespace"></a>net namespace</h3>
<p>ç½‘ç»œéš”ç¦»æ˜¯é€šè¿‡ net namespace å®ç°çš„ï¼Œ æ¯ä¸ª net namespace æœ‰ç‹¬ç«‹çš„ network devices, IP addresses, IP routing tables, /proc/net ç›®å½•ã€‚è¿™æ ·æ¯ä¸ª container çš„ç½‘ç»œå°±èƒ½éš”ç¦»å¼€æ¥ã€‚ docker é»˜è®¤é‡‡ç”¨ veth çš„æ–¹å¼å°† container ä¸­çš„è™šæ‹Ÿç½‘å¡åŒ host ä¸Šçš„ä¸€ä¸ª docker bridge è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2014/01/19/introduction-to-linux-namespaces-part-5-net/">Introduction to Linux namespaces â€“ Part 5: NET</a></p>
<h3 id="uts-namespace"><a class="header-anchor" href="#uts-namespace"></a>uts namespace</h3>
<p>UTS (â€œUNIX Time-sharing Systemâ€) namespace å…è®¸æ¯ä¸ª container æ‹¥æœ‰ç‹¬ç«‹çš„ hostname å’Œ domain name, ä½¿å…¶åœ¨ç½‘ç»œä¸Šå¯ä»¥è¢«è§†ä½œä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹è€Œé Host ä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2013/12/22/introduction-to-linux-namespaces-part-1-uts/">Introduction to Linux namespaces â€“ Part 1: UTS</a></p>
<h3 id="ipc-namespace"><a class="header-anchor" href="#ipc-namespace"></a>ipc namespace</h3>
<p>container ä¸­è¿›ç¨‹äº¤äº’è¿˜æ˜¯é‡‡ç”¨ Linux å¸¸è§çš„è¿›ç¨‹é—´äº¤äº’æ–¹æ³• (interprocess communication - IPC), åŒ…æ‹¬å¸¸è§çš„ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜ã€‚ç„¶è€ŒåŒ VM ä¸åŒï¼Œcontainer çš„è¿›ç¨‹é—´äº¤äº’å®é™…ä¸Šè¿˜æ˜¯ host ä¸Šå…·æœ‰ç›¸åŒ pid namespace ä¸­çš„è¿›ç¨‹é—´äº¤äº’ï¼Œå› æ­¤éœ€è¦åœ¨IPCèµ„æºç”³è¯·æ—¶åŠ å…¥ namespace ä¿¡æ¯ - æ¯ä¸ª IPC èµ„æºæœ‰ä¸€ä¸ªå”¯ä¸€çš„ 32bit IDã€‚</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2013/12/28/introduction-to-linux-namespaces-part-2-ipc/">Introduction to Linux namespaces â€“ Part 2: IPC</a></p>
<h3 id="user-namespace"><a class="header-anchor" href="#user-namespace"></a>user namespace</h3>
<p>æ¯ä¸ª container å¯ä»¥æœ‰ä¸åŒçš„ user å’Œ group id, ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä»¥ container å†…éƒ¨çš„ç”¨æˆ·åœ¨ container å†…éƒ¨æ‰§è¡Œç¨‹åºè€Œé Host ä¸Šçš„ç”¨æˆ·ã€‚</p>
<p>æœ‰äº†ä»¥ä¸Š 6 ç§ namespace ä»è¿›ç¨‹ã€ç½‘ç»œã€IPCã€æ–‡ä»¶ç³»ç»Ÿã€UTS å’Œç”¨æˆ·è§’åº¦çš„éš”ç¦»ï¼Œä¸€ä¸ª container å°±å¯ä»¥å¯¹å¤–å±•ç°å‡ºä¸€ä¸ªç‹¬ç«‹è®¡ç®—æœºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¸åŒ container ä» OS å±‚é¢å®ç°äº†éš”ç¦»ã€‚ ç„¶è€Œä¸åŒ namespace ä¹‹é—´èµ„æºè¿˜æ˜¯ç›¸äº’ç«äº‰çš„ï¼Œä»ç„¶éœ€è¦ç±»ä¼¼ ulimit æ¥ç®¡ç†æ¯ä¸ª container æ‰€èƒ½ä½¿ç”¨çš„èµ„æº - cgroupã€‚</p>
<h3 id="Reference"><a class="header-anchor" href="#Reference"></a>Reference</h3>
<ul>
<li><a href="http://tiewei.github.io/cloud/Docker-Getting-Start/">Docker Getting Start: Related Knowledge</a></li>
<li><a href="https://ruby-china.org/topics/22004">Docker ä»‹ç»ä»¥åŠå…¶ç›¸å…³æœ¯è¯­ã€åº•å±‚åŸç†å’ŒæŠ€æœ¯</a></li>
</ul>
<h2 id="1-6-èµ„æºé…é¢ã€Œcgroupsã€"><a class="header-anchor" href="#1-6-èµ„æºé…é¢ã€Œcgroupsã€"></a>1.6 èµ„æºé…é¢ã€Œcgroupsã€</h2>
<p>cgroups å®ç°äº†å¯¹èµ„æºçš„é…é¢å’Œåº¦é‡ã€‚ cgroups çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œæä¾›ç±»ä¼¼æ–‡ä»¶çš„æ¥å£ï¼Œåœ¨ /cgroup ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å³å¯æ–°å»ºä¸€ä¸ª groupï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æ–°å»º task æ–‡ä»¶ï¼Œå¹¶å°† pid å†™å…¥è¯¥æ–‡ä»¶ï¼Œå³å¯å®ç°å¯¹è¯¥è¿›ç¨‹çš„èµ„æºæ§åˆ¶ã€‚å…·ä½“çš„èµ„æºé…ç½®é€‰é¡¹å¯ä»¥åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­æ–°å»ºå­ subsystem ï¼Œ{å­ç³»ç»Ÿå‰ç¼€}.{èµ„æºé¡¹} æ˜¯å…¸å‹çš„é…ç½®æ–¹æ³•ï¼Œ å¦‚ memory.usageinbytes å°±å®šä¹‰äº†è¯¥ group åœ¨ subsystem memory ä¸­çš„ä¸€ä¸ªå†…å­˜é™åˆ¶é€‰é¡¹ã€‚ å¦å¤–ï¼Œcgroups ä¸­çš„ subsystem å¯ä»¥éšæ„ç»„åˆï¼Œä¸€ä¸ª subsystem å¯ä»¥åœ¨ä¸åŒçš„ group ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ª group åŒ…å«å¤šä¸ª subsystem - ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª subsystemã€‚</p>
<ul>
<li>memory
<ul>
<li>å†…å­˜ç›¸å…³çš„é™åˆ¶</li>
</ul>
</li>
<li>cpu
<ul>
<li>åœ¨ cgroup ä¸­ï¼Œå¹¶ä¸èƒ½åƒç¡¬ä»¶è™šæ‹ŸåŒ–æ–¹æ¡ˆä¸€æ ·èƒ½å¤Ÿå®šä¹‰ CPU èƒ½åŠ›ï¼Œä½†æ˜¯èƒ½å¤Ÿå®šä¹‰ CPU è½®è½¬çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤å…·æœ‰è¾ƒé«˜ CPU ä¼˜å…ˆçº§çš„è¿›ç¨‹ä¼šæ›´å¯èƒ½å¾—åˆ° CPU è¿ç®—ã€‚ é€šè¿‡å°†å‚æ•°å†™å…¥ cpu.shares ,å³å¯å®šä¹‰æ”¹ cgroup çš„ CPU ä¼˜å…ˆçº§ - è¿™é‡Œæ˜¯ä¸€ä¸ªç›¸å¯¹æƒé‡ï¼Œè€Œéç»å¯¹å€¼</li>
</ul>
</li>
<li>blkio
<ul>
<li>block IO ç›¸å…³çš„ç»Ÿè®¡å’Œé™åˆ¶ï¼Œbyte/operation ç»Ÿè®¡å’Œé™åˆ¶ (IOPS ç­‰)ï¼Œè¯»å†™é€Ÿåº¦é™åˆ¶ç­‰ï¼Œä½†æ˜¯è¿™é‡Œä¸»è¦ç»Ÿè®¡çš„éƒ½æ˜¯åŒæ­¥ IO</li>
</ul>
</li>
<li>devices
<ul>
<li>è®¾å¤‡æƒé™é™åˆ¶</li>
</ul>
</li>
</ul>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="http://tiewei.github.io/devops/howto-use-cgroup/">how to use cgroup</a></p>
<h1 id="äºŒã€Docker-å®‰è£…"><a class="header-anchor" href="#äºŒã€Docker-å®‰è£…"></a>äºŒã€Docker å®‰è£…</h1>
<p>docker çš„ç›¸å…³å®‰è£…æ–¹æ³•è¿™é‡Œä¸ä½œä»‹ç»ï¼Œå…·ä½“å®‰è£…å‚è€ƒÂ <a href="https://docs.docker.com/installation/">å®˜æ¡£</a></p>
<p>è·å–å½“å‰ docker ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker version<br>Client version: 1.3.2<br>Client API version: 1.15<br>Go version (client): go1.3.3<br>Git commit (client): 39fa2fa/1.3.2<br>OS/Arch (client): linux/amd64<br>Server version: 1.3.2<br>Server API version: 1.15<br>Go version (server): go1.3.3<br>Git commit (server): 39fa2fa/1.3.2<br></code></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€Docker-åŸºç¡€ç”¨æ³•"><a class="header-anchor" href="#ä¸‰ã€Docker-åŸºç¡€ç”¨æ³•"></a>ä¸‰ã€Docker åŸºç¡€ç”¨æ³•</h1>
<p><a href="https://registry.hub.docker.com/">Docker HUB</a>Â : Dockeré•œåƒé¦–é¡µï¼ŒåŒ…æ‹¬å®˜æ–¹é•œåƒå’Œå…¶å®ƒå…¬å¼€é•œåƒ</p>
<p>å› ä¸ºå›½æƒ…çš„åŸå› ï¼Œå›½å†…ä¸‹è½½ Docker HUB å®˜æ–¹çš„ç›¸å…³é•œåƒæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨Â <a href="http://opskumu.github.io/docker.cn">docker.cn</a>Â é•œåƒï¼Œé•œåƒä¿æŒå’Œå®˜æ–¹ä¸€è‡´ï¼Œå…³é”®æ˜¯é€Ÿåº¦å—ï¼Œæ¨èä½¿ç”¨ã€‚</p>
<h2 id="3-1-Search-images"><a class="header-anchor" href="#3-1-Search-images"></a>3.1 Search images</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker search ubuntu<br></code></pre></td></tr></table></figure>
<h2 id="3-2-Pull-images"><a class="header-anchor" href="#3-2-Pull-images"></a>3.2 Pull images</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker pull ubuntu <span class="hljs-comment"># è·å– ubuntu å®˜æ–¹é•œåƒ </span><br>$ sudo docker images <span class="hljs-comment"># æŸ¥çœ‹å½“å‰é•œåƒåˆ—è¡¨ </span><br></code></pre></td></tr></table></figure>
<h2 id="3-3-Running-an-interactive-shell"><a class="header-anchor" href="#3-3-Running-an-interactive-shell"></a>3.3 Running an interactive shell</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -i -t ubuntu:14.04 /bin/bash<br></code></pre></td></tr></table></figure>
<ul>
<li>docker run - è¿è¡Œä¸€ä¸ªå®¹å™¨</li>
<li>-t - åˆ†é…ä¸€ä¸ªï¼ˆä¼ªï¼‰tty (link is external)</li>
<li>-i - äº¤äº’æ¨¡å¼ (so we can interact with it)</li>
<li>ubuntu:14.04 - ä½¿ç”¨ ubuntu åŸºç¡€é•œåƒ 14.04</li>
<li>/bin/bash - è¿è¡Œå‘½ä»¤ bash shell</li>
</ul>
<p>æ³¨: ubuntu ä¼šæœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œé€šè¿‡æŒ‡å®š tag æ¥å¯åŠ¨ç‰¹å®šçš„ç‰ˆæœ¬ [image]:[tag]</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker ps <span class="hljs-comment"># æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨, ps -a åˆ—å‡ºå½“å‰ç³»ç»Ÿæ‰€æœ‰çš„å®¹å™¨ </span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br>6c9129e9df10        ubuntu:14.04        /bin/bash 6 minutes ago       Up 6 minutes                            cranky_babbage<br></code></pre></td></tr></table></figure>
<h2 id="3-4-ç›¸å…³å¿«æ·é”®"><a class="header-anchor" href="#3-4-ç›¸å…³å¿«æ·é”®"></a>3.4 ç›¸å…³å¿«æ·é”®</h2>
<ul>
<li>é€€å‡ºï¼šCtrl-Dorexit</li>
<li>detachï¼šCtrl-P + Ctrl-Q</li>
<li>attach:docker attach CONTAINER-ID</li>
</ul>
<h1 id="å››ã€Docker-å‘½ä»¤å¸®åŠ©"><a class="header-anchor" href="#å››ã€Docker-å‘½ä»¤å¸®åŠ©"></a>å››ã€Docker å‘½ä»¤å¸®åŠ©</h1>
<h2 id="4-1-docker-help"><a class="header-anchor" href="#4-1-docker-help"></a>4.1 docker help</h2>
<h3 id="docker-command"><a class="header-anchor" href="#docker-command"></a>docker command</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker   <span class="hljs-comment"># docker å‘½ä»¤å¸®åŠ©</span><br>Commands:<br>    attach    Attach to a running container                 <span class="hljs-comment"># å½“å‰ shell ä¸‹ attach è¿æ¥æŒ‡å®šè¿è¡Œé•œåƒ</span><br>    build     Build an image from a Dockerfile              <span class="hljs-comment"># é€šè¿‡ Dockerfile å®šåˆ¶é•œåƒ</span><br>    commit    Create a new image from a container<span class="hljs-string">&#x27;s changes # æäº¤å½“å‰å®¹å™¨ä¸ºæ–°çš„é•œåƒ</span><br><span class="hljs-string">    cp        Copy files/folders from the containers filesystem to the host path</span><br><span class="hljs-string">              # ä»å®¹å™¨ä¸­æ‹·è´æŒ‡å®šæ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¿ä¸»æœºä¸­</span><br><span class="hljs-string">    create    Create a new container                        # åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ŒåŒ runï¼Œä½†ä¸å¯åŠ¨å®¹å™¨</span><br><span class="hljs-string">    diff      Inspect changes on a container&#x27;</span>s filesystem   <span class="hljs-comment"># æŸ¥çœ‹ docker å®¹å™¨å˜åŒ–</span><br>    events    Get real time events from the server          <span class="hljs-comment"># ä» docker æœåŠ¡è·å–å®¹å™¨å®æ—¶äº‹ä»¶</span><br>    <span class="hljs-built_in">exec</span>      Run a <span class="hljs-built_in">command</span> <span class="hljs-keyword">in</span> an existing container        <span class="hljs-comment"># åœ¨å·²å­˜åœ¨çš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤</span><br>    <span class="hljs-built_in">export</span>    Stream the contents of a container as a tar archive   <br>              <span class="hljs-comment"># å¯¼å‡ºå®¹å™¨çš„å†…å®¹æµä½œä¸ºä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶[å¯¹åº” import ]</span><br>    <span class="hljs-built_in">history</span>   Show the <span class="hljs-built_in">history</span> of an image                  <span class="hljs-comment"># å±•ç¤ºä¸€ä¸ªé•œåƒå½¢æˆå†å²</span><br>    images    List images                                   <span class="hljs-comment"># åˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ</span><br>    import    Create a new filesystem image from the contents of a tarball  <br>              <span class="hljs-comment"># ä»taråŒ…ä¸­çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿæ˜ åƒ[å¯¹åº” export]</span><br>    info      Display system-wide information               <span class="hljs-comment"># æ˜¾ç¤ºç³»ç»Ÿç›¸å…³ä¿¡æ¯</span><br>    inspect   Return low-level information on a container   <span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span><br>    <span class="hljs-built_in">kill</span>      Kill a running container                      <span class="hljs-comment"># kill æŒ‡å®š docker å®¹å™¨</span><br>    load      Load an image from a tar archive              <span class="hljs-comment"># ä»ä¸€ä¸ª tar åŒ…ä¸­åŠ è½½ä¸€ä¸ªé•œåƒ[å¯¹åº” save]</span><br>    login     Register or Login to the docker registry server   <br>              <span class="hljs-comment"># æ³¨å†Œæˆ–è€…ç™»é™†ä¸€ä¸ª docker æºæœåŠ¡å™¨</span><br>    <span class="hljs-built_in">logout</span>    Log out from a Docker registry server         <span class="hljs-comment"># ä»å½“å‰ Docker registry é€€å‡º</span><br>    logs      Fetch the logs of a container                 <span class="hljs-comment"># è¾“å‡ºå½“å‰å®¹å™¨æ—¥å¿—ä¿¡æ¯</span><br>    port      Lookup the public-facing port <span class="hljs-built_in">which</span> is NAT-ed to PRIVATE_PORT<br>              <span class="hljs-comment"># æŸ¥çœ‹æ˜ å°„ç«¯å£å¯¹åº”çš„å®¹å™¨å†…éƒ¨æºç«¯å£</span><br>    pause     Pause all processes within a container        <span class="hljs-comment"># æš‚åœå®¹å™¨</span><br>    ps        List containers                               <span class="hljs-comment"># åˆ—å‡ºå®¹å™¨åˆ—è¡¨</span><br>    pull      Pull an image or a repository from the docker registry server<br>              <span class="hljs-comment"># ä»dockeré•œåƒæºæœåŠ¡å™¨æ‹‰å–æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒ</span><br>    push      Push an image or a repository to the docker registry server<br>              <span class="hljs-comment"># æ¨é€æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒè‡³dockeræºæœåŠ¡å™¨</span><br>    restart   Restart a running container                   <span class="hljs-comment"># é‡å¯è¿è¡Œçš„å®¹å™¨</span><br>    <span class="hljs-built_in">rm</span>        Remove one or more containers                 <span class="hljs-comment"># ç§»é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨</span><br>    rmi       Remove one or more images                 <br>              <span class="hljs-comment"># ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ[æ— å®¹å™¨ä½¿ç”¨è¯¥é•œåƒæ‰å¯åˆ é™¤ï¼Œå¦åˆ™éœ€åˆ é™¤ç›¸å…³å®¹å™¨æ‰å¯ç»§ç»­æˆ– -f å¼ºåˆ¶åˆ é™¤]</span><br>    run       Run a <span class="hljs-built_in">command</span> <span class="hljs-keyword">in</span> a new container<br>              <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</span><br>    save      Save an image to a tar archive                <span class="hljs-comment"># ä¿å­˜ä¸€ä¸ªé•œåƒä¸ºä¸€ä¸ª tar åŒ…[å¯¹åº” load]</span><br>    search    Search <span class="hljs-keyword">for</span> an image on the Docker Hub         <span class="hljs-comment"># åœ¨ docker hub ä¸­æœç´¢é•œåƒ</span><br>    start     Start a stopped containers                    <span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span><br>    stop      Stop a running containers                     <span class="hljs-comment"># åœæ­¢å®¹å™¨</span><br>    tag       Tag an image into a repository                <span class="hljs-comment"># ç»™æºä¸­é•œåƒæ‰“æ ‡ç­¾</span><br>    top       Lookup the running processes of a container   <span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</span><br>    unpause   Unpause a paused container                    <span class="hljs-comment"># å–æ¶ˆæš‚åœå®¹å™¨</span><br>    version   Show the docker version information           <span class="hljs-comment"># æŸ¥çœ‹ docker ç‰ˆæœ¬å·</span><br>    <span class="hljs-built_in">wait</span>      Block until a container stops, <span class="hljs-keyword">then</span> <span class="hljs-built_in">print</span> its <span class="hljs-built_in">exit</span> code   <br>              <span class="hljs-comment"># æˆªå–å®¹å™¨åœæ­¢æ—¶çš„é€€å‡ºçŠ¶æ€å€¼</span><br>Run <span class="hljs-string">&#x27;docker COMMAND --help&#x27;</span> <span class="hljs-keyword">for</span> more information on a <span class="hljs-built_in">command</span>.<br></code></pre></td></tr></table></figure>
<h3 id="docker-option"><a class="header-anchor" href="#docker-option"></a>docker option</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Usage of docker:<br>  --api-enable-cors=<span class="hljs-literal">false</span>                Enable CORS headers <span class="hljs-keyword">in</span> the remote API                      <span class="hljs-comment"># è¿œç¨‹ API ä¸­å¼€å¯ CORS å¤´</span><br>  -b, --bridge=<span class="hljs-string">&quot;&quot;</span>                        Attach containers to a pre-existing network bridge         <span class="hljs-comment"># æ¡¥æ¥ç½‘ç»œ</span><br>                                           use <span class="hljs-string">&#x27;none&#x27;</span> to <span class="hljs-built_in">disable</span> container networking<br>  --bip=<span class="hljs-string">&quot;&quot;</span>                               Use this CIDR notation address <span class="hljs-keyword">for</span> the network bridge<span class="hljs-string">&#x27;s IP, not compatible with -b</span><br><span class="hljs-string">                                         # å’Œ -b é€‰é¡¹ä¸å…¼å®¹ï¼Œå…·ä½“æ²¡æœ‰æµ‹è¯•è¿‡</span><br><span class="hljs-string">  -d, --daemon=false                     Enable daemon mode                                         # daemon æ¨¡å¼</span><br><span class="hljs-string">  -D, --debug=false                      Enable debug mode                                          # debug æ¨¡å¼</span><br><span class="hljs-string">  --dns=[]                               Force docker to use specific DNS servers                   # å¼ºåˆ¶ docker ä½¿ç”¨æŒ‡å®š dns æœåŠ¡å™¨</span><br><span class="hljs-string">  --dns-search=[]                        Force Docker to use specific DNS search domains            # å¼ºåˆ¶ docker ä½¿ç”¨æŒ‡å®š dns æœç´¢åŸŸ</span><br><span class="hljs-string">  -e, --exec-driver=&quot;native&quot;             Force the docker runtime to use a specific exec driver     # å¼ºåˆ¶ docker è¿è¡Œæ—¶ä½¿ç”¨æŒ‡å®šæ‰§è¡Œé©±åŠ¨å™¨</span><br><span class="hljs-string">  --fixed-cidr=&quot;&quot;                        IPv4 subnet for fixed IPs (ex: 10.20.0.0/16)</span><br><span class="hljs-string">                                           this subnet must be nested in the bridge subnet (which is defined by -b or --bip)</span><br><span class="hljs-string">  -G, --group=&quot;docker&quot;                   Group to assign the unix socket specified by -H when running in daemon mode</span><br><span class="hljs-string">                                           use &#x27;</span><span class="hljs-string">&#x27; (the empty string) to disable setting of a group</span><br><span class="hljs-string">  -g, --graph=&quot;/var/lib/docker&quot;          Path to use as the root of the docker runtime              # å®¹å™¨è¿è¡Œçš„æ ¹ç›®å½•è·¯å¾„</span><br><span class="hljs-string">  -H, --host=[]                          The socket(s) to bind to in daemon mode                    # daemon æ¨¡å¼ä¸‹ docker æŒ‡å®šç»‘å®šæ–¹å¼[tcp or æœ¬åœ° socket]</span><br><span class="hljs-string">                                           specified using one or more tcp://host:port, unix:///path/to/socket, fd://* or fd://socketfd.</span><br><span class="hljs-string">  --icc=true                             Enable inter-container communication                       # è·¨å®¹å™¨é€šä¿¡</span><br><span class="hljs-string">  --insecure-registry=[]                 Enable insecure communication with specified registries (no certificate verification for HTTPS and enable HTTP fallback) (e.g., localhost:5000 or 10.20.0.0/16)</span><br><span class="hljs-string">  --ip=&quot;0.0.0.0&quot;                         Default IP address to use when binding container ports     # æŒ‡å®šç›‘å¬åœ°å€ï¼Œé»˜è®¤æ‰€æœ‰ ip</span><br><span class="hljs-string">  --ip-forward=true                      Enable net.ipv4.ip_forward                                 # å¼€å¯è½¬å‘</span><br><span class="hljs-string">  --ip-masq=true                         Enable IP masquerading for bridge&#x27;</span>s IP range<br>  --iptables=<span class="hljs-literal">true</span>                        Enable Docker<span class="hljs-string">&#x27;s addition of iptables rules                 # æ·»åŠ å¯¹åº” iptables è§„åˆ™</span><br><span class="hljs-string">  --mtu=0                                Set the containers network MTU                             # è®¾ç½®ç½‘ç»œ mtu</span><br><span class="hljs-string">                                           if no value is provided: default to the default route MTU or 1500 if no default route is available</span><br><span class="hljs-string">  -p, --pidfile=&quot;/var/run/docker.pid&quot;    Path to use for daemon PID file                            # æŒ‡å®š pid æ–‡ä»¶ä½ç½®</span><br><span class="hljs-string">  --registry-mirror=[]                   Specify a preferred Docker registry mirror                  </span><br><span class="hljs-string">  -s, --storage-driver=&quot;&quot;                Force the docker runtime to use a specific storage driver  # å¼ºåˆ¶ docker è¿è¡Œæ—¶ä½¿ç”¨æŒ‡å®šå­˜å‚¨é©±åŠ¨</span><br><span class="hljs-string">  --selinux-enabled=false                Enable selinux support                                     # å¼€å¯ selinux æ”¯æŒ</span><br><span class="hljs-string">  --storage-opt=[]                       Set storage driver options                                 # è®¾ç½®å­˜å‚¨é©±åŠ¨é€‰é¡¹</span><br><span class="hljs-string">  --tls=false                            Use TLS; implied by tls-verify flags                       # å¼€å¯ tls</span><br><span class="hljs-string">  --tlscacert=&quot;/root/.docker/ca.pem&quot;     Trust only remotes providing a certificate signed by the CA given here</span><br><span class="hljs-string">  --tlscert=&quot;/root/.docker/cert.pem&quot;     Path to TLS certificate file                               # tls è¯ä¹¦æ–‡ä»¶ä½ç½®</span><br><span class="hljs-string">  --tlskey=&quot;/root/.docker/key.pem&quot;       Path to TLS key file                                       # tls key æ–‡ä»¶ä½ç½®</span><br><span class="hljs-string">  --tlsverify=false                      Use TLS and verify the remote (daemon: verify client, client: verify daemon) # ä½¿ç”¨ tls å¹¶ç¡®è®¤è¿œç¨‹æ§åˆ¶ä¸»æœº</span><br><span class="hljs-string">  -v, --version=false                    Print version information and quit                         # è¾“å‡º docker ç‰ˆæœ¬ä¿¡æ¯</span><br></code></pre></td></tr></table></figure>
<h2 id="4-2-docker-search"><a class="header-anchor" href="#4-2-docker-search"></a>4.2 docker search</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker search --<span class="hljs-built_in">help</span><br>Usage: docker search TERM<br>Search the Docker Hub <span class="hljs-keyword">for</span> images <span class="hljs-comment"># ä» Docker Hub æœç´¢é•œåƒ --automated=false Only show automated builds</span><br>  --no-trunc=<span class="hljs-literal">false</span> Don<span class="hljs-string">&#x27;t truncate output</span><br><span class="hljs-string">  -s, --stars=0 Only displays with at least xxx stars</span><br></code></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><code class="hljs pgsql">$ sudo docker <span class="hljs-keyword">search</span> -s <span class="hljs-number">100</span> ubuntu # æŸ¥æ‰¾ star æ•°è‡³å°‘ä¸º <span class="hljs-number">100</span> çš„é•œåƒï¼Œæ‰¾å‡ºåªæœ‰å®˜æ–¹é•œåƒ <span class="hljs-keyword">start</span> æ•°è¶…è¿‡ <span class="hljs-number">100</span>ï¼Œé»˜è®¤ä¸åŠ  s é€‰é¡¹æ‰¾å‡ºæ‰€æœ‰ç›¸å…³ ubuntu é•œåƒ <br><span class="hljs-type">NAME</span>      DESCRIPTION                  STARS     OFFICIAL   AUTOMATED<br>ubuntu    Official Ubuntu base image <span class="hljs-number">425</span> [OK] <br></code></pre></td></tr></table></figure>
<h2 id="4-3-docker-info"><a class="header-anchor" href="#4-3-docker-info"></a>4.3 docker info</h2>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">$</span> <span class="hljs-string">sudo</span> <span class="hljs-string">docker</span> <span class="hljs-string">info</span> <br><span class="hljs-attr">Containers:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># å®¹å™¨ä¸ªæ•° </span><br><span class="hljs-attr">Images:</span> <span class="hljs-number">22</span> <span class="hljs-comment"># é•œåƒä¸ªæ•° </span><br><span class="hljs-attr">Storage Driver:</span> <span class="hljs-string">devicemapper</span> <span class="hljs-comment"># å­˜å‚¨é©±åŠ¨ </span><br><span class="hljs-attr">Pool Name:</span> <span class="hljs-string">docker-8:17-3221225728-pool</span><br><span class="hljs-attr">Pool Blocksize:</span> <span class="hljs-number">65.54</span> <span class="hljs-string">kB</span><br><span class="hljs-attr">Data file:</span> <span class="hljs-string">/data/docker/devicemapper/devicemapper/data</span><br><span class="hljs-attr">Metadata file:</span> <span class="hljs-string">/data/docker/devicemapper/devicemapper/metadata</span><br><span class="hljs-attr">Data Space Used:</span> <span class="hljs-number">1.83</span> <span class="hljs-string">GB</span><br> <span class="hljs-attr">Data Space Total:</span> <span class="hljs-number">107.4</span> <span class="hljs-string">GB</span><br><span class="hljs-attr">Metadata Space Used:</span> <span class="hljs-number">2.191</span> <span class="hljs-string">MB</span><br> <span class="hljs-attr">Metadata Space Total:</span> <span class="hljs-number">2.147</span> <span class="hljs-string">GB</span><br><span class="hljs-attr">Library Version:</span> <span class="hljs-number">1.02</span><span class="hljs-number">.84</span><span class="hljs-string">-RHEL7</span> <span class="hljs-string">(2014-03-26)</span> <span class="hljs-attr">Execution Driver:</span> <span class="hljs-string">native-0.2</span> <span class="hljs-comment"># å­˜å‚¨é©±åŠ¨ Kernel Version: 3.10.0-123.el7.x86_64</span><br><span class="hljs-attr">Operating System:</span> <span class="hljs-string">CentOS</span> <span class="hljs-string">Linux</span> <span class="hljs-number">7</span> <span class="hljs-string">(Core)</span> <br></code></pre></td></tr></table></figure>
<h2 id="4-4-docker-pull-docker-push"><a class="header-anchor" href="#4-4-docker-pull-docker-push"></a>4.4 docker pull &amp;&amp; docker push</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker pull --<span class="hljs-built_in">help</span> <span class="hljs-comment"># pull æ‹‰å–é•œåƒ </span><br>Usage: docker pull [OPTIONS] NAME[:TAG] Pull an image or a repository from the registry<br>-a, --all-tags=<span class="hljs-literal">false</span> Download all tagged images <span class="hljs-keyword">in</span> the repository <br><br>$ sudo docker push <span class="hljs-comment"># push æ¨é€æŒ‡å®šé•œåƒ </span><br>Usage: docker push NAME[:TAG] Push an image or a repository to the registry<br></code></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker pull ubuntu <span class="hljs-comment"># ä¸‹è½½å®˜æ–¹ ubuntu docker é•œåƒï¼Œé»˜è®¤ä¸‹è½½æ‰€æœ‰ ubuntu å®˜æ–¹åº“é•œåƒ </span><br>$ sudo docker pull ubuntu:14.04 <span class="hljs-comment"># ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ ubuntu å®˜æ–¹é•œåƒ </span><br></code></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker push 192.168.0.100:5000/ubuntu <span class="hljs-comment"># æ¨é€é•œåƒåº“åˆ°ç§æœ‰æº[å¯æ³¨å†Œ docker å®˜æ–¹è´¦æˆ·ï¼Œæ¨é€åˆ°å®˜æ–¹è‡ªæœ‰è´¦æˆ·] </span><br>$ sudo docker push 192.168.0.100:5000/ubuntu:14.04 <span class="hljs-comment"># æ¨é€æŒ‡å®šé•œåƒåˆ°ç§æœ‰æº </span><br></code></pre></td></tr></table></figure>
<h2 id="4-5-docker-images"><a class="header-anchor" href="#4-5-docker-images"></a>4.5 docker images</h2>
<p>åˆ—å‡ºå½“å‰ç³»ç»Ÿé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker images --<span class="hljs-built_in">help</span><br><br>Usage: docker images [OPTIONS] [NAME] List images<br><br>  -a, --all=<span class="hljs-literal">false</span> Show all images (by default filter out the intermediate image layers) <span class="hljs-comment"># -a æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„æ‰€æœ‰é•œåƒï¼ŒåŒ…æ‹¬è¿‡æ¸¡å±‚é•œåƒï¼Œé»˜è®¤ docker images æ˜¾ç¤ºæœ€ç»ˆé•œåƒï¼Œä¸åŒ…æ‹¬è¿‡æ¸¡å±‚é•œåƒ </span><br>  -f, --filter=[] Provide filter values (i.e. <span class="hljs-string">&#x27;dangling=true&#x27;</span>) --no-trunc=<span class="hljs-literal">false</span> Don<span class="hljs-string">&#x27;t truncate output</span><br><span class="hljs-string">  -q, --quiet=false Only show numeric IDs</span><br></code></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker images <span class="hljs-comment"># æ˜¾ç¤ºå½“å‰ç³»ç»Ÿé•œåƒï¼Œä¸åŒ…æ‹¬è¿‡æ¸¡å±‚é•œåƒ </span><br>$ sudo docker images -a <span class="hljs-comment"># æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ‰€æœ‰é•œåƒï¼ŒåŒ…æ‹¬è¿‡æ¸¡å±‚é•œåƒ </span><br>$ sudo docker images ubuntu <span class="hljs-comment"># æ˜¾ç¤ºå½“å‰ç³»ç»Ÿ docker ubuntu åº“ä¸­çš„æ‰€æœ‰é•œåƒ </span><br>REPOSITORY                 TAG                 IMAGE ID            CREATED             VIRTUAL SIZE<br>ubuntu                     12.04               ebe4be4dd427 4 weeks ago         210.6 MB<br>ubuntu                     14.04               e54ca5efa2e9 4 weeks ago         276.5 MB<br>ubuntu                     14.04-ssh           6334d3ac099a 7 weeks ago         383.2 MB<br></code></pre></td></tr></table></figure>
<h2 id="4-6-docker-rmi"><a class="header-anchor" href="#4-6-docker-rmi"></a>4.6 docker rmi</h2>
<p>åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker rmi --<span class="hljs-built_in">help</span><br>Usage: docker rmi IMAGE [IMAGE...] Remove one or more images<br>  -f, --force=<span class="hljs-literal">false</span> Force removal of the image <span class="hljs-comment"># å¼ºåˆ¶ç§»é™¤é•œåƒä¸ç®¡æ˜¯å¦æœ‰å®¹å™¨ä½¿ç”¨è¯¥é•œåƒ --no-prune=false Do not delete untagged parents # ä¸è¦åˆ é™¤æœªæ ‡è®°çš„çˆ¶é•œåƒ </span><br></code></pre></td></tr></table></figure>
<h2 id="4-7-docker-run"><a class="header-anchor" href="#4-7-docker-run"></a>4.7 docker run</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --<span class="hljs-built_in">help</span><br>Usage: docker run [OPTIONS] IMAGE [COMMAND] [ARG...]<br>Run a <span class="hljs-built_in">command</span> <span class="hljs-keyword">in</span> a new container<br>  -a, --attach=[]            Attach to stdin, stdout or stderr.<br>  -c, --cpu-shares=0         CPU shares (relative weight)                       <span class="hljs-comment"># è®¾ç½® cpu ä½¿ç”¨æƒé‡</span><br>  --cap-add=[]               Add Linux capabilities<br>  --cap-drop=[]              Drop Linux capabilities<br>  --cidfile=<span class="hljs-string">&quot;&quot;</span>               Write the container ID to the file                 <span class="hljs-comment"># æŠŠå®¹å™¨ id å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶</span><br>  --cpuset=<span class="hljs-string">&quot;&quot;</span>                CPUs <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to allow execution (0-3, 0,1)        <span class="hljs-comment"># cpu ç»‘å®š</span><br>  -d, --detach=<span class="hljs-literal">false</span>         Detached mode: Run container <span class="hljs-keyword">in</span> the background, <span class="hljs-built_in">print</span> new container <span class="hljs-built_in">id</span> <span class="hljs-comment"># åå°è¿è¡Œå®¹å™¨</span><br>  --device=[]                Add a host device to the container (e.g. --device=/dev/sdc:/dev/xvdc)<br>  --dns=[]                   Set custom dns servers                             <span class="hljs-comment"># è®¾ç½® dns</span><br>  --dns-search=[]            Set custom dns search domains                      <span class="hljs-comment"># è®¾ç½® dns åŸŸæœç´¢</span><br>  -e, --<span class="hljs-built_in">env</span>=[]               Set environment variables                          <span class="hljs-comment"># å®šä¹‰ç¯å¢ƒå˜é‡</span><br>  --entrypoint=<span class="hljs-string">&quot;&quot;</span>            Overwrite the default entrypoint of the image      <span class="hljs-comment"># ï¼Ÿ</span><br>  --env-file=[]              Read <span class="hljs-keyword">in</span> a line delimited file of ENV variables     <span class="hljs-comment"># ä»æŒ‡å®šæ–‡ä»¶è¯»å–å˜é‡å€¼</span><br>  --expose=[]                Expose a port from the container without publishing it to your host    <span class="hljs-comment"># æŒ‡å®šå¯¹å¤–æä¾›æœåŠ¡ç«¯å£</span><br>  -h, --hostname=<span class="hljs-string">&quot;&quot;</span>          Container host name                                <span class="hljs-comment"># è®¾ç½®å®¹å™¨ä¸»æœºå</span><br>  -i, --interactive=<span class="hljs-literal">false</span>    Keep stdin open even <span class="hljs-keyword">if</span> not attached               <span class="hljs-comment"># ä¿æŒæ ‡å‡†è¾“å‡ºå¼€å¯å³ä½¿æ²¡æœ‰ attached</span><br>  --<span class="hljs-built_in">link</span>=[]                  Add <span class="hljs-built_in">link</span> to another container (name:<span class="hljs-built_in">alias</span>)         <span class="hljs-comment"># æ·»åŠ é“¾æ¥åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨</span><br>  --lxc-conf=[]              (lxc exec-driver only) Add custom lxc options --lxc-conf=<span class="hljs-string">&quot;lxc.cgroup.cpuset.cpus = 0,1&quot;</span><br>  -m, --memory=<span class="hljs-string">&quot;&quot;</span>            Memory <span class="hljs-built_in">limit</span> (format: &lt;number&gt;&lt;optional unit&gt;, <span class="hljs-built_in">where</span> unit = b, k, m or g) <span class="hljs-comment"># å†…å­˜é™åˆ¶</span><br>  --name=<span class="hljs-string">&quot;&quot;</span>                  Assign a name to the container                     <span class="hljs-comment"># è®¾ç½®å®¹å™¨å</span><br>  --net=<span class="hljs-string">&quot;bridge&quot;</span>             Set the Network mode <span class="hljs-keyword">for</span> the container             <span class="hljs-comment"># è®¾ç½®å®¹å™¨ç½‘ç»œæ¨¡å¼</span><br>                               <span class="hljs-string">&#x27;bridge&#x27;</span>: creates a new network stack <span class="hljs-keyword">for</span> the container on the docker bridge<br>                               <span class="hljs-string">&#x27;none&#x27;</span>: no networking <span class="hljs-keyword">for</span> this container<br>                               <span class="hljs-string">&#x27;container:&lt;name|id&gt;&#x27;</span>: reuses another container network stack<br>                               <span class="hljs-string">&#x27;host&#x27;</span>: use the host network stack inside the container.  Note: the host mode gives the container full access to <span class="hljs-built_in">local</span> system services such as D-bus and is therefore considered insecure.<br>  -P, --publish-all=<span class="hljs-literal">false</span>    Publish all exposed ports to the host interfaces   <span class="hljs-comment"># è‡ªåŠ¨æ˜ å°„å®¹å™¨å¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£</span><br>  -p, --publish=[]           Publish a container<span class="hljs-string">&#x27;s port to the host             # æŒ‡å®šç«¯å£æ˜ å°„</span><br><span class="hljs-string">                               format: ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</span><br><span class="hljs-string">                               (use &#x27;</span>docker port<span class="hljs-string">&#x27; to see the actual mapping)</span><br><span class="hljs-string">  --privileged=false         Give extended privileges to this container         # æä¾›æ›´å¤šçš„æƒé™ç»™å®¹å™¨</span><br><span class="hljs-string">  --restart=&quot;&quot;               Restart policy to apply when a container exits (no, on-failure[:max-retry], always)</span><br><span class="hljs-string">  --rm=false                 Automatically remove the container when it exits (incompatible with -d) # å¦‚æœå®¹å™¨é€€å‡ºè‡ªåŠ¨ç§»é™¤å’Œ -d é€‰é¡¹å†²çª</span><br><span class="hljs-string">  --security-opt=[]          Security Options</span><br><span class="hljs-string">  --sig-proxy=true           Proxify received signals to the process (even in non-tty mode). SIGCHLD is not proxied.</span><br><span class="hljs-string">  -t, --tty=false            Allocate a pseudo-tty                              # åˆ†é…ä¼ªç»ˆç«¯</span><br><span class="hljs-string">  -u, --user=&quot;&quot;              Username or UID                                    # æŒ‡å®šè¿è¡Œå®¹å™¨çš„ç”¨æˆ· uid æˆ–è€…ç”¨æˆ·å</span><br><span class="hljs-string">  -v, --volume=[]            Bind mount a volume (e.g., from the host: -v /host:/container, from docker: -v /container)</span><br><span class="hljs-string">                             # æŒ‚è½½å·</span><br><span class="hljs-string">  --volumes-from=[]          Mount volumes from the specified container(s)      # ä»æŒ‡å®šå®¹å™¨æŒ‚è½½å·</span><br><span class="hljs-string">  -w, --workdir=&quot;&quot;           Working directory inside the container             # æŒ‡å®šå®¹å™¨å·¥ä½œç›®å½•</span><br></code></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker images ubuntu<br>REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE<br>ubuntu              14.04               e54ca5efa2e9 4 weeks ago         276.5 MB<br>... ... <br>$ sudo docker run -t -i -c 100 -m 512MB -h test1 -d --name=<span class="hljs-string">&quot;docker_test1&quot;</span> ubuntu /bin/bash <br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª cpu ä¼˜å…ˆçº§ä¸º 100ï¼Œå†…å­˜é™åˆ¶ 512MBï¼Œä¸»æœºåä¸º test1ï¼Œåä¸º docker_test1 åå°è¿è¡Œ bash çš„å®¹å™¨ a424ca613c9f2247cd3ede95adfbaf8d28400cbcb1d5f9b69a7b56f97b2b52e5 </span><br>$ sudo docker ps <br>CONTAINER ID        IMAGE           COMMAND         CREATED             STATUS              PORTS       NAMES<br>a424ca613c9f        ubuntu:14.04    /bin/bash 6 seconds ago       Up 5 seconds                    docker_test1 <br>$ sudo docker attach docker_test1<br>root@test1:/<span class="hljs-comment"># pwd </span><br>/<br>root@test1:/<span class="hljs-comment"># exit </span><br><span class="hljs-built_in">exit</span> <br></code></pre></td></tr></table></figure>
<p>å…³äºcpuä¼˜å…ˆçº§:</p>
<blockquote>
<p>By default all groups have 1024 shares. A group with 100 shares will get a ~10% portion of the CPU time -<a href="https://wiki.archlinux.org/index.php/cgroups">archlinux cgroups</a></p>
</blockquote>
<h2 id="4-8-docker-start-stop-killâ€¦-â€¦"><a class="header-anchor" href="#4-8-docker-start-stop-killâ€¦-â€¦"></a>4.8 docker start|stop|killâ€¦ â€¦</h2>
<p>dockerstart|stop|kill|restart|pause|unpause|rm|commit|inspect|logs</p>
<ul>
<li>
<p>docker start CONTAINER [CONTAINERâ€¦]</p>
<ul>
<li># è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªåœæ­¢çš„å®¹å™¨</li>
</ul>
</li>
<li>
<p>docker stop CONTAINER [CONTAINERâ€¦]</p>
<ul>
<li># åœæ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçš„å®¹å™¨-té€‰é¡¹å¯æŒ‡å®šè¶…æ—¶æ—¶é—´</li>
</ul>
</li>
<li>
<p>docker kill [OPTIONS] CONTAINER [CONTAINERâ€¦]</p>
<ul>
<li># é»˜è®¤ kill å‘é€ SIGKILL ä¿¡å·-så¯ä»¥æŒ‡å®šå‘é€ kill ä¿¡å·ç±»å‹</li>
</ul>
</li>
<li>
<p>docker restart [OPTIONS] CONTAINER [CONTAINERâ€¦]</p>
<ul>
<li># é‡å¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçš„å®¹å™¨-té€‰é¡¹å¯æŒ‡å®šè¶…æ—¶æ—¶é—´</li>
</ul>
</li>
<li>
<p>docker pause CONTAINER</p>
<ul>
<li># æš‚åœä¸€ä¸ªå®¹å™¨ï¼Œæ–¹ä¾¿ commit</li>
</ul>
</li>
<li>
<p>docker unpause CONTAINER</p>
<ul>
<li># ç»§ç»­æš‚åœçš„å®¹å™¨</li>
</ul>
</li>
<li>
<p>docker rm [OPTIONS] CONTAINER [CONTAINERâ€¦]</p>
<ul>
<li># ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨</li>
<li>-f, --force=false Force removal of running container</li>
<li>-l, --link=false Remove the specified link and not the underlying container</li>
<li>-v, --volumes=false Remove the volumes associated with the container</li>
</ul>
</li>
<li>
<p>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</p>
<ul>
<li># æäº¤æŒ‡å®šå®¹å™¨ä¸ºé•œåƒ</li>
<li>-a, --author=â€œâ€ Author (e.g., â€œJohn Hannibal SmithÂ <a href="mailto:hannibal@a-team.com">hannibal@a-team.com</a>â€)</li>
<li>-m, --message=â€œâ€ Commit message</li>
<li>-p, --pause=true Pause container during commit
<ul>
<li># é»˜è®¤ commit æ˜¯æš‚åœçŠ¶æ€</li>
</ul>
</li>
</ul>
</li>
<li>
<p>docker inspect CONTAINER|IMAGE [CONTAINER|IMAGEâ€¦]</p>
<ul>
<li># æŸ¥çœ‹å®¹å™¨æˆ–è€…é•œåƒçš„è¯¦ç»†ä¿¡æ¯</li>
</ul>
</li>
<li>
<p>docker logs CONTAINER</p>
<ul>
<li># è¾“å‡ºæŒ‡å®šå®¹å™¨æ—¥å¿—ä¿¡æ¯</li>
<li>-f, --follow=false Follow log output
<ul>
<li># ç±»ä¼¼ tail -f</li>
</ul>
</li>
<li>-t, --timestamps=false Show timestamps</li>
<li>â€“tail=â€œallâ€ Output the specified number of lines at the end of logs (defaults to all logs)</li>
</ul>
</li>
</ul>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://docs.docker.com/reference/run/">Docker Run Reference</a></p>
<h2 id="4-9-Docker-1-3-æ–°å¢ç‰¹æ€§å’Œå‘½ä»¤"><a class="header-anchor" href="#4-9-Docker-1-3-æ–°å¢ç‰¹æ€§å’Œå‘½ä»¤"></a>4.9 Docker 1.3 æ–°å¢ç‰¹æ€§å’Œå‘½ä»¤</h2>
<h3 id="Digital-Signature-Verification"><a class="header-anchor" href="#Digital-Signature-Verification"></a>Digital Signature Verification</h3>
<p>Docker 1.3 ç‰ˆæœ¬å°†ä½¿ç”¨æ•°å­—ç­¾åè‡ªåŠ¨éªŒè¯æ‰€æœ‰å®˜æ–¹åº“çš„æ¥æºå’Œå®Œæ•´æ€§ï¼Œå¦‚æœä¸€ä¸ªå®˜æ–¹é•œåƒè¢«ç¯¡æ”¹æˆ–è€…è¢«ç ´åï¼Œç›®å‰ Docker åªä¼šå¯¹è¿™ç§æƒ…å†µå‘å‡ºè­¦å‘Šè€Œå¹¶ä¸é˜»æ­¢å®¹å™¨çš„è¿è¡Œã€‚</p>
<h3 id="Inject-new-processes-withdocker-exec"><a class="header-anchor" href="#Inject-new-processes-withdocker-exec"></a>Inject new processes withdocker exec</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> --<span class="hljs-built_in">help</span><br>Usage: docker <span class="hljs-built_in">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...] Run a <span class="hljs-built_in">command</span> <span class="hljs-keyword">in</span> an existing container<br>  -d, --detach=<span class="hljs-literal">false</span> Detached mode: run <span class="hljs-built_in">command</span> <span class="hljs-keyword">in</span> the background<br>  -i, --interactive=<span class="hljs-literal">false</span> Keep STDIN open even <span class="hljs-keyword">if</span> not attached<br>  -t, --<span class="hljs-built_in">tty</span>=<span class="hljs-literal">false</span> Allocate a pseudo-TTY<br></code></pre></td></tr></table></figure>
<p>ä¸ºäº†ç®€åŒ–è°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨docker execå‘½ä»¤é€šè¿‡ Docker API å’Œ CLI åœ¨è¿è¡Œçš„å®¹å™¨ä¸Šè¿è¡Œç¨‹åºã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker <span class="hljs-built_in">exec</span> -it ubuntu_bash bash<br></code></pre></td></tr></table></figure>
<p>ä¸Šä¾‹å°†åœ¨å®¹å™¨ ubuntu_bash ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Bash ä¼šè¯ã€‚</p>
<h3 id="Tune-container-lifecycles-withdocker-create"><a class="header-anchor" href="#Tune-container-lifecycles-withdocker-create"></a>Tune container lifecycles withdocker create</h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡docker run <image name>å‘½ä»¤åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œå…¶ä¸­çš„ç¨‹åºï¼Œå› ä¸ºæœ‰å¾ˆå¤šç”¨æˆ·è¦æ±‚åˆ›å»ºå®¹å™¨çš„æ—¶å€™ä¸å¯åŠ¨å®¹å™¨ï¼Œæ‰€ä»¥docker createåº”è¿è€Œç”Ÿäº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker create -t -i fedora bash<br>6d8af538ec541dd581ebc2a24153a28329acb5268abe5ef868c1f1a261221752<br></code></pre></td></tr></table></figure>
<p>ä¸Šä¾‹åˆ›å»ºäº†ä¸€ä¸ªå¯å†™çš„å®¹å™¨å±‚ (å¹¶ä¸”æ‰“å°å‡ºå®¹å™¨ ID)ï¼Œä½†æ˜¯å¹¶ä¸è¿è¡Œå®ƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œè¯¥å®¹å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker start -a -i 6d8af538ec5<br>bash-4.2<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>
<h3 id="Security-Options"><a class="header-anchor" href="#Security-Options"></a>Security Options</h3>
<p>é€šè¿‡â€“security-opté€‰é¡¹ï¼Œè¿è¡Œå®¹å™¨æ—¶ç”¨æˆ·å¯è‡ªå®šä¹‰ SELinux å’Œ AppArmor å·æ ‡å’Œé…ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker run --security-opt label:<span class="hljs-built_in">type</span>:svirt_apache -i -t centos \ bash<br></code></pre></td></tr></table></figure>
<p>ä¸Šä¾‹åªå…è®¸å®¹å™¨ç›‘å¬åœ¨ Apache ç«¯å£ï¼Œè¿™ä¸ªé€‰é¡¹çš„å¥½å¤„æ˜¯ç”¨æˆ·ä¸éœ€è¦è¿è¡Œ docker çš„æ—¶å€™æŒ‡å®šâ€“privilegedé€‰é¡¹ï¼Œé™ä½å®‰å…¨é£é™©ã€‚</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="http://blog.docker.com/2014/10/docker-1-3-signed-images-process-injection-security-options-mac-shared-directories/">Docker 1.3: signed images, process injection, security options, Mac shared directories</a></p>
<h2 id="4-10-Docker-1-5-æ–°ç‰¹æ€§"><a class="header-anchor" href="#4-10-Docker-1-5-æ–°ç‰¹æ€§"></a>4.10 Docker 1.5 æ–°ç‰¹æ€§</h2>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="http://dockerone.com/article/202">Docker 1.5 æ–°ç‰¹æ€§</a></p>
<h1 id="äº”ã€Docker-ç«¯å£æ˜ å°„"><a class="header-anchor" href="#äº”ã€Docker-ç«¯å£æ˜ å°„"></a>äº”ã€Docker ç«¯å£æ˜ å°„</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Find IP address of container with ID &lt;container_id&gt; é€šè¿‡å®¹å™¨ id è·å– ip </span><br>$ sudo docker inspect &lt;container_id&gt; | grep IPAddress | <span class="hljs-built_in">cut</span> -d â€™<span class="hljs-string">&quot;â€™ -f 4</span><br></code></pre></td></tr></table></figure>
<p>æ— è®ºå¦‚ä½•ï¼Œè¿™äº› ip æ˜¯åŸºäºæœ¬åœ°ç³»ç»Ÿçš„å¹¶ä¸”å®¹å™¨çš„ç«¯å£éæœ¬åœ°ä¸»æœºæ˜¯è®¿é—®ä¸åˆ°çš„ã€‚æ­¤å¤–ï¼Œé™¤äº†ç«¯å£åªèƒ½æœ¬åœ°è®¿é—®å¤–ï¼Œå¯¹äºå®¹å™¨çš„å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯è¿™äº› ip åœ¨å®¹å™¨æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™éƒ½ä¼šæ”¹å˜ã€‚</p>
<p>Docker è§£å†³äº†å®¹å™¨çš„è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ç»™å®¹å™¨å†…éƒ¨æœåŠ¡çš„è®¿é—®æä¾›äº†ä¸€ä¸ªç®€å•è€Œå¯é çš„æ–¹æ³•ã€‚Docker é€šè¿‡ç«¯å£ç»‘å®šä¸»æœºç³»ç»Ÿçš„æ¥å£ï¼Œå…è®¸éæœ¬åœ°å®¢æˆ·ç«¯è®¿é—®å®¹å™¨å†…éƒ¨è¿è¡Œçš„æœåŠ¡ã€‚ä¸ºäº†ç®€ä¾¿çš„ä½¿å¾—å®¹å™¨é—´é€šä¿¡ï¼ŒDocker æä¾›äº†è¿™ç§è¿æ¥æœºåˆ¶ã€‚</p>
<h2 id="5-1-è‡ªåŠ¨æ˜ å°„ç«¯å£"><a class="header-anchor" href="#5-1-è‡ªåŠ¨æ˜ å°„ç«¯å£"></a>5.1 è‡ªåŠ¨æ˜ å°„ç«¯å£</h2>
<p>-Pä½¿ç”¨æ—¶éœ€è¦æŒ‡å®šâ€“exposeé€‰é¡¹ï¼ŒæŒ‡å®šéœ€è¦å¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -P --expose 22 --name server  ubuntu:14.04<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨docker run -Pè‡ªåŠ¨ç»‘å®šæ‰€æœ‰å¯¹å¤–æä¾›æœåŠ¡çš„å®¹å™¨ç«¯å£ï¼Œæ˜ å°„çš„ç«¯å£å°†ä¼šä»æ²¡æœ‰ä½¿ç”¨çš„ç«¯å£æ± ä¸­ (49000â€¦49900) è‡ªåŠ¨é€‰æ‹©ï¼Œä½ å¯ä»¥é€šè¿‡docker psã€docker inspect &lt;container_id&gt;æˆ–è€…docker port &lt;container_id&gt; <port>ç¡®å®šå…·ä½“çš„ç»‘å®šä¿¡æ¯ã€‚</p>
<h2 id="5-2-ç»‘å®šç«¯å£åˆ°æŒ‡å®šæ¥å£"><a class="header-anchor" href="#5-2-ç»‘å®šç«¯å£åˆ°æŒ‡å®šæ¥å£"></a>5.2 ç»‘å®šç«¯å£åˆ°æŒ‡å®šæ¥å£</h2>
<p>åŸºæœ¬è¯­æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -p [([&lt;host_interface&gt;:[host_port]])|(&lt;host_port&gt;):]&lt;container_port&gt;[/udp] &lt;image&gt; &lt;cmd&gt;<br></code></pre></td></tr></table></figure>
<p>é»˜è®¤ä¸æŒ‡å®šç»‘å®š ip åˆ™ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ã€‚</p>
<h3 id="ç»‘å®š-TCP-ç«¯å£"><a class="header-anchor" href="#ç»‘å®š-TCP-ç«¯å£"></a>ç»‘å®š TCP ç«¯å£</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Bind TCP port 8080 of the container to TCP port 80 on 127.0.0.1 of the host machine. </span><br>$ sudo docker run -p 127.0.0.1:80:8080 &lt;image&gt; &lt;cmd&gt; <span class="hljs-comment"># Bind TCP port 8080 of the container to a dynamically allocated TCP port on 127.0.0.1 of the host machine. </span><br>$ sudo docker run -p 127.0.0.1::8080 &lt;image&gt; &lt;cmd&gt; <span class="hljs-comment"># Bind TCP port 8080 of the container to TCP port 80 on all available interfaces of the host machine. </span><br>$ sudo docker run -p 80:8080 &lt;image&gt; &lt;cmd&gt; <span class="hljs-comment"># Bind TCP port 8080 of the container to a dynamically allocated TCP port on all available interfaces </span><br>$ sudo docker run -p 8080 &lt;image&gt; &lt;cmd&gt;<br></code></pre></td></tr></table></figure>
<h3 id="ç»‘å®š-UDP-ç«¯å£"><a class="header-anchor" href="#ç»‘å®š-UDP-ç«¯å£"></a>ç»‘å®š UDP ç«¯å£</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Bind UDP port 5353 of the container to UDP port 53 on 127.0.0.1 of the host machine. </span><br>$ sudo docker run -p 127.0.0.1:53:5353/udp &lt;image&gt; &lt;cmd&gt;<br></code></pre></td></tr></table></figure>
<h1 id="å…­ã€Docker-ç½‘ç»œé…ç½®"><a class="header-anchor" href="#å…­ã€Docker-ç½‘ç»œé…ç½®"></a>å…­ã€Docker ç½‘ç»œé…ç½®</h1>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091034_634.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<p>å›¾:Â <a href="http://www.slideshare.net/janghoonsim/docker-container-and-lightweight-virtualization">Docker - container and lightweight virtualization</a></p>
<p>Dokcer é€šè¿‡ä½¿ç”¨ Linux æ¡¥æ¥æä¾›å®¹å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œdocker0 æ¡¥æ¥æ¥å£çš„ç›®çš„å°±æ˜¯æ–¹ä¾¿ Docker ç®¡ç†ã€‚å½“ Docker daemon å¯åŠ¨æ—¶éœ€è¦åšä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>creates the docker0 bridge if not present
<ul>
<li># å¦‚æœ docker0 ä¸å­˜åœ¨åˆ™åˆ›å»º</li>
</ul>
</li>
<li>searches for an IP address range which doesnâ€™t overlap with an existing route
<ul>
<li># æœç´¢ä¸€ä¸ªä¸å½“å‰è·¯ç”±ä¸å†²çªçš„ ip æ®µ</li>
</ul>
</li>
<li>picks an IP in the selected range
<ul>
<li># åœ¨ç¡®å®šçš„èŒƒå›´ä¸­é€‰æ‹© ip</li>
</ul>
</li>
<li>assigns this IP to the docker0 bridge
<ul>
<li># ç»‘å®š ip åˆ° docker0</li>
</ul>
</li>
</ul>
<h2 id="6-1-Docker-å››ç§ç½‘ç»œæ¨¡å¼"><a class="header-anchor" href="#6-1-Docker-å››ç§ç½‘ç»œæ¨¡å¼"></a>6.1 Docker å››ç§ç½‘ç»œæ¨¡å¼</h2>
<p>å››ç§ç½‘ç»œæ¨¡å¼æ‘˜è‡ªÂ <a href="http://www.infoq.com/cn/articles/docker-network-and-pipework-open-source-explanation-practice">Docker ç½‘ç»œè¯¦è§£åŠ pipework æºç è§£è¯»ä¸å®è·µ</a></p>
<p>docker run åˆ›å»º Docker å®¹å™¨æ—¶ï¼Œå¯ä»¥ç”¨ --net é€‰é¡¹æŒ‡å®šå®¹å™¨çš„ç½‘ç»œæ¨¡å¼ï¼ŒDocker æœ‰ä»¥ä¸‹ 4 ç§ç½‘ç»œæ¨¡å¼ï¼š</p>
<ul>
<li>host æ¨¡å¼ï¼Œä½¿ç”¨ --net=host æŒ‡å®šã€‚</li>
<li>container æ¨¡å¼ï¼Œä½¿ç”¨ --net=container:NAMEorID æŒ‡å®šã€‚</li>
<li>none æ¨¡å¼ï¼Œä½¿ç”¨ --net=none æŒ‡å®šã€‚</li>
<li>bridge æ¨¡å¼ï¼Œä½¿ç”¨ --net=bridge æŒ‡å®šï¼Œé»˜è®¤è®¾ç½®ã€‚</li>
</ul>
<h3 id="host-æ¨¡å¼"><a class="header-anchor" href="#host-æ¨¡å¼"></a>host æ¨¡å¼</h3>
<p>å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ host æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„ Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ª Network Namespaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ 10.10.101.105/24 çš„æœºå™¨ä¸Šç”¨ host æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå«æœ‰ web åº”ç”¨çš„ Docker å®¹å™¨ï¼Œç›‘å¬ tcp 80 ç«¯å£ã€‚å½“æˆ‘ä»¬åœ¨å®¹å™¨ä¸­æ‰§è¡Œä»»ä½•ç±»ä¼¼ ifconfig å‘½ä»¤æŸ¥çœ‹ç½‘ç»œç¯å¢ƒæ—¶ï¼Œçœ‹åˆ°çš„éƒ½æ˜¯å®¿ä¸»æœºä¸Šçš„ä¿¡æ¯ã€‚è€Œå¤–ç•Œè®¿é—®å®¹å™¨ä¸­çš„åº”ç”¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ 10.10.101.105:80 å³å¯ï¼Œä¸ç”¨ä»»ä½• NAT è½¬æ¢ï¼Œå°±å¦‚ç›´æ¥è·‘åœ¨å®¿ä¸»æœºä¸­ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p>
<h3 id="container-æ¨¡å¼"><a class="header-anchor" href="#container-æ¨¡å¼"></a>container æ¨¡å¼</h3>
<p>è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network Namespaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡ lo ç½‘å¡è®¾å¤‡é€šä¿¡ã€‚</p>
<h3 id="noneæ¨¡å¼"><a class="header-anchor" href="#noneæ¨¡å¼"></a>noneæ¨¡å¼</h3>
<p>è¿™ä¸ªæ¨¡å¼å’Œå‰ä¸¤ä¸ªä¸åŒã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒDocker å®¹å™¨æ‹¥æœ‰è‡ªå·±çš„ Network Namespaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸º Dockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ª Docker å®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸º Docker å®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½® IP ç­‰ã€‚</p>
<h3 id="bridgeæ¨¡å¼"><a class="header-anchor" href="#bridgeæ¨¡å¼"></a>bridgeæ¨¡å¼</h3>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091035_252.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<p>å›¾:<a href="http://www.wickedawesometech.us/2014/07/the-container-world-part-2-networking.html">The Container World | Part 2 Networking</a></p>
<p>bridge æ¨¡å¼æ˜¯ Docker é»˜è®¤çš„ç½‘ç»œè®¾ç½®ï¼Œæ­¤æ¨¡å¼ä¼šä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é… Network Namespaceã€è®¾ç½® IP ç­‰ï¼Œå¹¶å°†ä¸€ä¸ªä¸»æœºä¸Šçš„ Docker å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚å½“ Docker server å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º docker0 çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„ Docker å®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚æ¥ä¸‹æ¥å°±è¦ä¸ºå®¹å™¨åˆ†é… IP äº†ï¼ŒDocker ä¼šä» RFC1918 æ‰€å®šä¹‰çš„ç§æœ‰ IP ç½‘æ®µä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªå’Œå®¿ä¸»æœºä¸åŒçš„IPåœ°å€å’Œå­ç½‘åˆ†é…ç»™ docker0ï¼Œè¿æ¥åˆ° docker0 çš„å®¹å™¨å°±ä»è¿™ä¸ªå­ç½‘ä¸­é€‰æ‹©ä¸€ä¸ªæœªå ç”¨çš„ IP ä½¿ç”¨ã€‚å¦‚ä¸€èˆ¬ Docker ä¼šä½¿ç”¨ 172.17.0.0/16 è¿™ä¸ªç½‘æ®µï¼Œå¹¶å°† 172.17.42.1/16 åˆ†é…ç»™ docker0 ç½‘æ¡¥ï¼ˆåœ¨ä¸»æœºä¸Šä½¿ç”¨ ifconfig å‘½ä»¤æ˜¯å¯ä»¥çœ‹åˆ° docker0 çš„ï¼Œå¯ä»¥è®¤ä¸ºå®ƒæ˜¯ç½‘æ¡¥çš„ç®¡ç†æ¥å£ï¼Œåœ¨å®¿ä¸»æœºä¸Šä½œä¸ºä¸€å—è™šæ‹Ÿç½‘å¡ä½¿ç”¨ï¼‰</p>
<h2 id="6-2-åˆ—å‡ºå½“å‰ä¸»æœºç½‘æ¡¥"><a class="header-anchor" href="#6-2-åˆ—å‡ºå½“å‰ä¸»æœºç½‘æ¡¥"></a>6.2 åˆ—å‡ºå½“å‰ä¸»æœºç½‘æ¡¥</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo brctl show <span class="hljs-comment"># brctl å·¥å…·ä¾èµ– bridge-utils è½¯ä»¶åŒ… bridge name bridge id STP enabled interfaces</span><br>docker0 8000.000000000000 no<br></code></pre></td></tr></table></figure>
<h2 id="6-3-æŸ¥çœ‹å½“å‰-docker0-ip"><a class="header-anchor" href="#6-3-æŸ¥çœ‹å½“å‰-docker0-ip"></a>6.3 æŸ¥çœ‹å½“å‰ docker0 ip</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo ifconfig docker0<br>docker0 Link encap:Ethernet HWaddr xx:xx:xx:xx:xx:xx<br>inet addr:172.17.42.1 Bcast:0.0.0.0 Mask:255.255.0.0<br></code></pre></td></tr></table></figure>
<p>åœ¨å®¹å™¨è¿è¡Œæ—¶ï¼Œæ¯ä¸ªå®¹å™¨éƒ½ä¼šåˆ†é…ä¸€ä¸ªç‰¹å®šçš„è™šæ‹Ÿæœºå£å¹¶æ¡¥æ¥åˆ° docker0ã€‚æ¯ä¸ªå®¹å™¨éƒ½ä¼šé…ç½®åŒ docker0 ip ç›¸åŒç½‘æ®µçš„ä¸“ç”¨ ip åœ°å€ï¼Œdocker0 çš„ IP åœ°å€è¢«ç”¨äºæ‰€æœ‰å®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚</p>
<h2 id="6-4-è¿è¡Œä¸€ä¸ªå®¹å™¨"><a class="header-anchor" href="#6-4-è¿è¡Œä¸€ä¸ªå®¹å™¨"></a>6.4 è¿è¡Œä¸€ä¸ªå®¹å™¨</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d ubuntu /bin/bash<br>52f811c5d3d69edddefc75aff5a4525fc8ba8bcfa1818132f9dc7d4f7c7e78b4 <br>$ sudo brctl show<br>bridge name bridge <span class="hljs-built_in">id</span> STP enabled interfaces<br>docker0 8000.fef213db5a66 no vethQCDY1N<br></code></pre></td></tr></table></figure>
<p>ä»¥ä¸Š, docker0 æ‰®æ¼”ç€ 52f811c5d3d6 container è¿™ä¸ªå®¹å™¨çš„è™šæ‹Ÿæ¥å£ vethQCDY1N interface æ¡¥æ¥çš„è§’è‰²ã€‚</p>
<h3 id="ä½¿ç”¨ç‰¹å®šèŒƒå›´çš„-IP"><a class="header-anchor" href="#ä½¿ç”¨ç‰¹å®šèŒƒå›´çš„-IP"></a>ä½¿ç”¨ç‰¹å®šèŒƒå›´çš„ IP</h3>
<p>Docker ä¼šå°è¯•å¯»æ‰¾æ²¡æœ‰è¢«ä¸»æœºä½¿ç”¨çš„ ip æ®µï¼Œå°½ç®¡å®ƒé€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å¯¹ ip è¿›ä¸€æ­¥è§„åˆ’ã€‚Docker å…è®¸ä½ ç®¡ç† docker0 æ¡¥æ¥æˆ–è€…é€šè¿‡-bé€‰é¡¹è‡ªå®šä¹‰æ¡¥æ¥ç½‘å¡ï¼Œéœ€è¦å®‰è£…bridge-utilsè½¯ä»¶åŒ…ã€‚</p>
<p>åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ensure Docker is stopped</p>
<ul>
<li># ç¡®ä¿ docker çš„è¿›ç¨‹æ˜¯åœæ­¢çš„</li>
</ul>
</li>
<li>
<p>create your own bridge (bridge0 for example)</p>
<ul>
<li># åˆ›å»ºè‡ªå®šä¹‰ç½‘æ¡¥</li>
</ul>
</li>
<li>
<p>assign a specific IP to this bridge</p>
<ul>
<li># ç»™ç½‘æ¡¥åˆ†é…ç‰¹å®šçš„ ip</li>
</ul>
</li>
<li>
<p>start Docker with the -b=bridge0 parameter</p>
<ul>
<li># ä»¥ -b çš„æ–¹å¼æŒ‡å®šç½‘æ¡¥</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Stopping Docker and removing docker0 </span><br>$ sudo service docker stop <br>$ sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> dev docker0 down <br>$ sudo brctl delbr docker0 <span class="hljs-comment"># Create our own bridge </span><br>$ sudo brctl addbr bridge0 <br>$ sudo ip addr add 192.168.5.1/24 dev bridge0 <br>$ sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> dev bridge0 up <span class="hljs-comment"># Confirming that our bridge is up and running </span><br>$ ip addr show bridge0<br>4: bridge0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state UP group default<br>    <span class="hljs-built_in">link</span>/ether 66:38:d0:0d:76:18 brd ff:ff:ff:ff:ff:ff<br>    inet 192.168.5.1/24 scope global bridge0<br>       valid_lft forever preferred_lft forever <span class="hljs-comment"># Tell Docker about it and restart (on Ubuntu) </span><br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;DOCKER_OPTS=&quot;-b=bridge0&quot;&#x27;</span> &gt;&gt; /etc/default/docker <br>$ sudo service docker start<br></code></pre></td></tr></table></figure>
<p>å‚è€ƒæ–‡æ¡£:Â <a href="https://docs.docker.com/articles/networking/">Network Configuration</a></p>
<h2 id="6-5-ä¸åŒä¸»æœºé—´å®¹å™¨é€šä¿¡"><a class="header-anchor" href="#6-5-ä¸åŒä¸»æœºé—´å®¹å™¨é€šä¿¡"></a>6.5 ä¸åŒä¸»æœºé—´å®¹å™¨é€šä¿¡</h2>
<p>ä¸åŒå®¹å™¨ä¹‹é—´çš„é€šä¿¡å¯ä»¥å€ŸåŠ©äº pipework è¿™ä¸ªå·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> https://github.com/jpetazzo/pipework.git<br>$ sudo <span class="hljs-built_in">cp</span> -rp pipework/pipework /usr/local/bin/<br></code></pre></td></tr></table></figure>
<h3 id="å®‰è£…ç›¸åº”ä¾èµ–è½¯ä»¶"><a class="header-anchor" href="#å®‰è£…ç›¸åº”ä¾èµ–è½¯ä»¶"></a>å®‰è£…ç›¸åº”ä¾èµ–è½¯ä»¶</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo apt-get install iputils-arping bridge-utils -y<br></code></pre></td></tr></table></figure>
<h3 id="æ¡¥æ¥ç½‘ç»œ"><a class="header-anchor" href="#æ¡¥æ¥ç½‘ç»œ"></a>æ¡¥æ¥ç½‘ç»œ</h3>
<p>æ¡¥æ¥ç½‘ç»œå¯ä»¥å‚è€ƒÂ <a href="https://github.com/opskumu/Day/blob/master/tips/tips.md">æ—¥å¸¸é—®é¢˜å¤„ç† Tips</a>Â å…³äºæ¡¥æ¥çš„é…ç½®è¯´æ˜ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># brctl show</span><br>bridge name     bridge <span class="hljs-built_in">id</span>               STP enabled     interfaces<br>br0             8000.000c291412cd       no              eth0<br>docker0         8000.56847afe9799       no              vetheb48029<br></code></pre></td></tr></table></figure>
<p>å¯ä»¥åˆ é™¤ docker0ï¼Œç›´æ¥æŠŠ docker çš„æ¡¥æ¥æŒ‡å®šä¸º br0ã€‚ä¹Ÿå¯ä»¥ä¿ç•™ä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼Œè¿™æ ·å•ä¸»æœºå®¹å™¨ä¹‹é—´çš„é€šä¿¡å¯ä»¥é€šè¿‡ docker0ï¼Œè€Œè·¨ä¸»æœºä¸åŒå®¹å™¨ä¹‹é—´é€šè¿‡ pipework æ–°å»º docker å®¹å™¨çš„ç½‘å¡æ¡¥æ¥åˆ° br0ï¼Œè¿™æ ·è·¨ä¸»æœºå®¹å™¨ä¹‹é—´å°±å¯ä»¥é€šä¿¡äº†ã€‚</p>
<ul>
<li>ubuntu</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo service docker stop<br>$ sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> dev docker0 down<br>$ sudo brctl delbr docker0<br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;DOCKER_OPTS=&quot;-b=br0&quot;&#x27;</span> &gt;&gt; /etc/default/docker<br>$ sudo service docker start<br></code></pre></td></tr></table></figure>
<ul>
<li>CentOS 7/RHEL 7</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo systemctl stop docker<br>$ sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> dev docker0 down<br>$ sudo brctl delbr docker0<br>$ <span class="hljs-built_in">cat</span> /etc/sysconfig/docker | grep <span class="hljs-string">&#x27;OPTIONS=&#x27;</span><br>OPTIONS=--selinux-enabled -b=br0 -H fd://<br>$ sudo systemctl start docker<br></code></pre></td></tr></table></figure>
<h3 id="pipework"><a class="header-anchor" href="#pipework"></a>pipework</h3>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091035_900.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<p>ä¸åŒå®¹å™¨ä¹‹é—´çš„é€šä¿¡å¯ä»¥å€ŸåŠ©äº pipework è¿™ä¸ªå·¥å…·ç»™ docker å®¹å™¨æ–°å»ºè™šæ‹Ÿç½‘å¡å¹¶ç»‘å®š IP æ¡¥æ¥åˆ° br0</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> https://github.com/jpetazzo/pipework.git<br>$ sudo <span class="hljs-built_in">cp</span> -rp pipework/pipework /usr/local/bin/<br>$ pipework <br>Syntax:<br>pipework &lt;hostinterface&gt; [-i containerinterface] &lt;guest&gt; &lt;ipaddr&gt;/&lt;subnet&gt;[@default_gateway] [macaddr][@vlan]<br>pipework &lt;hostinterface&gt; [-i containerinterface] &lt;guest&gt; dhcp [macaddr][@vlan]<br>pipework --<span class="hljs-built_in">wait</span> [-i containerinterface]<br></code></pre></td></tr></table></figure>
<p>å¦‚æœåˆ é™¤äº†é»˜è®¤çš„ docker0 æ¡¥æ¥ï¼ŒæŠŠ docker é»˜è®¤æ¡¥æ¥æŒ‡å®šåˆ°äº† br0ï¼Œåˆ™æœ€å¥½åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™åŠ ä¸Šâ€“net=noneï¼Œé˜²æ­¢è‡ªåŠ¨åˆ†é…çš„ IP åœ¨å±€åŸŸç½‘ä¸­æœ‰å†²çªã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --<span class="hljs-built_in">rm</span> -ti --net=none ubuntu:14.04 /bin/bash<br>root@a46657528059:/<span class="hljs-comment">#</span><br>$                  <span class="hljs-comment"># Ctrl-P + Ctrl-Q å›åˆ°å®¿ä¸»æœº shellï¼Œå®¹å™¨ detach çŠ¶æ€</span><br>$ sudo docker  ps<br>CONTAINER ID    IMAGE          COMMAND       CREATED         STATUS          PORTS      NAMES<br>a46657528059    ubuntu:14.04   <span class="hljs-string">&quot;/bin/bash&quot;</span>   4 minutes ago   Up 4 minutes               hungry_lalande<br>$ sudo pipework br0 -i eth0 a46657528059 192.168.115.10/24@192.168.115.2 <br><span class="hljs-comment"># é»˜è®¤ä¸æŒ‡å®šç½‘å¡è®¾å¤‡åï¼Œåˆ™é»˜è®¤æ·»åŠ ä¸º eth1</span><br><span class="hljs-comment"># å¦å¤– pipework ä¸èƒ½æ·»åŠ é™æ€è·¯ç”±ï¼Œå¦‚æœæœ‰éœ€æ±‚åˆ™å¯ä»¥åœ¨ run çš„æ—¶å€™åŠ ä¸Š --privileged=true æƒé™åœ¨å®¹å™¨ä¸­æ‰‹åŠ¨æ·»åŠ ï¼Œ</span><br><span class="hljs-comment"># ä½†è¿™ç§å®‰å…¨æ€§æœ‰ç¼ºé™·ï¼Œå¯ä»¥é€šè¿‡ ip netns æ“ä½œ</span><br>$ sudo docker attach a46657528059<br>root@a46657528059:/<span class="hljs-comment"># ifconfig eth0</span><br>eth0      Link encap:Ethernet  HWaddr 86:b6:6b:e8:2e:4d  <br>          inet addr:192.168.115.10  Bcast:0.0.0.0  Mask:255.255.255.0<br>          inet6 addr: fe80::84b6:6bff:fee8:2e4d/64 Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>          RX packets:8 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:1000 <br>          RX bytes:648 (648.0 B)  TX bytes:690 (690.0 B)<br><br>root@a46657528059:/<span class="hljs-comment"># route -n</span><br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br>0.0.0.0         192.168.115.2   0.0.0.0         UG    0      0        0 eth0<br>192.168.115.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨ip netnsæ·»åŠ é™æ€è·¯ç”±ï¼Œé¿å…åˆ›å»ºå®¹å™¨ä½¿ç”¨â€“privileged=trueé€‰é¡¹é€ æˆä¸€äº›ä¸å¿…è¦çš„å®‰å…¨é—®é¢˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker inspect --format=<span class="hljs-string">&quot;&#123;&#123; .State.Pid &#125;&#125;&quot;</span> a46657528059 <span class="hljs-comment"># è·å–æŒ‡å®šå®¹å™¨ pid</span><br>6350<br>$ sudo <span class="hljs-built_in">ln</span> -s /proc/6350/ns/net /var/run/netns/6350<br>$ sudo ip netns <span class="hljs-built_in">exec</span> 6350 ip route add 192.168.0.0/16 dev eth0 via 192.168.115.2<br>$ sudo ip netns <span class="hljs-built_in">exec</span> 6350 ip route    <span class="hljs-comment"># æ·»åŠ æˆåŠŸ</span><br>192.168.0.0/16 via 192.168.115.2 dev eth0 <br>... ...<br></code></pre></td></tr></table></figure>
<p>åœ¨å…¶å®ƒå®¿ä¸»æœºè¿›è¡Œç›¸åº”çš„é…ç½®ï¼Œæ–°å»ºå®¹å™¨å¹¶ä½¿ç”¨ pipework æ·»åŠ è™šæ‹Ÿç½‘å¡æ¡¥æ¥åˆ° br0ï¼Œæµ‹è¯•é€šä¿¡æƒ…å†µå³å¯ã€‚</p>
<p>å¦å¤–ï¼Œpipework å¯ä»¥åˆ›å»ºå®¹å™¨çš„ vlan ç½‘ç»œï¼Œè¿™é‡Œä¸ä½œè¿‡å¤šçš„ä»‹ç»äº†ï¼Œå®˜æ–¹æ–‡æ¡£å·²ç»å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://github.com/jpetazzo/pipework">Pipework å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="http://www.infoq.com/cn/articles/docker-network-and-pipework-open-source-explanation-practice">Docker ç½‘ç»œè¯¦è§£åŠ pipework æºç è§£è¯»ä¸å®è·µ</a></li>
</ul>
<h1 id="ä¸ƒã€Dockerfile"><a class="header-anchor" href="#ä¸ƒã€Dockerfile"></a>ä¸ƒã€Dockerfile</h1>
<p>Docker å¯ä»¥é€šè¿‡ Dockerfile çš„å†…å®¹æ¥è‡ªåŠ¨æ„å»ºé•œåƒã€‚Dockerfile æ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºé•œåƒæ‰€æœ‰å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼Œé€šè¿‡docker buildå‘½ä»¤å¯ä»¥æ ¹æ® Dockerfile çš„å†…å®¹æ„å»ºé•œåƒï¼Œåœ¨ä»‹ç»å¦‚ä½•æ„å»ºä¹‹å‰å…ˆä»‹ç»ä¸‹ Dockerfile çš„åŸºæœ¬è¯­æ³•ç»“æ„ã€‚</p>
<p>Dockerfile æœ‰ä»¥ä¸‹æŒ‡ä»¤é€‰é¡¹:</p>
<ul>
<li>FROM</li>
<li>MAINTAINER</li>
<li>RUN</li>
<li>CMD</li>
<li>EXPOSE</li>
<li>ENV</li>
<li>ADD</li>
<li>COPY</li>
<li>ENTRYPOINT</li>
<li>VOLUME</li>
<li>USER</li>
<li>WORKDIR</li>
<li>ONBUILD</li>
</ul>
<h2 id="7-1-FROM"><a class="header-anchor" href="#7-1-FROM"></a>7.1 FROM</h2>
<p>ç”¨æ³•:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM &lt;image&gt;<br></code></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM &lt;image&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>FROMæŒ‡å®šæ„å»ºé•œåƒçš„åŸºç¡€æºé•œåƒï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰æŒ‡å®šçš„é•œåƒï¼Œåˆ™ä¼šè‡ªåŠ¨ä» Docker çš„å…¬å…±åº“ pull é•œåƒä¸‹æ¥ã€‚</li>
<li>FROMå¿…é¡»æ˜¯ Dockerfile ä¸­éæ³¨é‡Šè¡Œçš„ç¬¬ä¸€ä¸ªæŒ‡ä»¤ï¼Œå³ä¸€ä¸ª Dockerfile ä»FROMè¯­å¥å¼€å§‹ã€‚</li>
<li>FROMå¯ä»¥åœ¨ä¸€ä¸ª Dockerfile ä¸­å‡ºç°å¤šæ¬¡ï¼Œå¦‚æœæœ‰éœ€æ±‚åœ¨ä¸€ä¸ª Dockerfile ä¸­åˆ›å»ºå¤šä¸ªé•œåƒã€‚</li>
<li>å¦‚æœFROMè¯­å¥æ²¡æœ‰æŒ‡å®šé•œåƒæ ‡ç­¾ï¼Œåˆ™é»˜è®¤ä½¿ç”¨latestæ ‡ç­¾ã€‚</li>
</ul>
<h2 id="7-2-MAINTAINER"><a class="header-anchor" href="#7-2-MAINTAINER"></a>7.2 MAINTAINER</h2>
<p>ç”¨æ³•:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">MAINTAINER &lt;name&gt;<br></code></pre></td></tr></table></figure>
<p>æŒ‡å®šåˆ›å»ºé•œåƒçš„ç”¨æˆ·</p>
<p>RUN æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼</p>
<ul>
<li>RUN</li>
<li>RUNÂ <a href="http://opskumu.github.io/exec%20form">â€œexecutableâ€, â€œparam1â€, â€œparam2â€</a></li>
</ul>
<p>æ¯æ¡RUNæŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒåŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒï¼Œåç»­çš„RUNéƒ½åœ¨ä¹‹å‰RUNæäº¤åçš„é•œåƒä¸ºåŸºç¡€ï¼Œé•œåƒæ˜¯åˆ†å±‚çš„ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªé•œåƒçš„ä»»ä½•ä¸€ä¸ªå†å²æäº¤ç‚¹æ¥åˆ›å»ºï¼Œç±»ä¼¼æºç çš„ç‰ˆæœ¬æ§åˆ¶ã€‚</p>
<p>exec æ–¹å¼ä¼šè¢«è§£æä¸ºä¸€ä¸ª JSON æ•°ç»„ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨åŒå¼•å·è€Œä¸æ˜¯å•å¼•å·ã€‚exec æ–¹å¼ä¸ä¼šè°ƒç”¨ä¸€ä¸ªå‘½ä»¤ shellï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ä¼šç»§æ‰¿ç›¸åº”çš„å˜é‡ï¼Œå¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">RUN [ <span class="hljs-string">&quot;echo&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>&quot;</span> ]<br></code></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼æ˜¯ä¸ä¼šè¾¾åˆ°è¾“å‡º HOME å˜é‡çš„ï¼Œæ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯è¿™æ ·çš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">RUN [ <span class="hljs-string">&quot;sh&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;echo&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>&quot;</span> ]<br></code></pre></td></tr></table></figure>
<p>RUNäº§ç”Ÿçš„ç¼“å­˜åœ¨ä¸‹ä¸€æ¬¡æ„å»ºçš„æ—¶å€™æ˜¯ä¸ä¼šå¤±æ•ˆçš„ï¼Œä¼šè¢«é‡ç”¨ï¼Œå¯ä»¥ä½¿ç”¨â€“no-cacheé€‰é¡¹ï¼Œå³docker build --no-cacheï¼Œå¦‚æ­¤ä¾¿ä¸ä¼šç¼“å­˜ã€‚</p>
<h2 id="7-3-CMD"><a class="header-anchor" href="#7-3-CMD"></a>7.3 CMD</h2>
<p>CMDæœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼:</p>
<ul>
<li>CMDÂ <a href="http://opskumu.github.io/exec%20form,%20this%20is%20the%20preferred%20form,%20%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9">â€œexecutableâ€,â€œparam1â€,â€œparam2â€</a></li>
<li>CMDÂ <a href="http://opskumu.github.io/as%20default%20parameters%20to%20%60ENTRYPOINT%60">â€œparam1â€,â€œparam2â€</a></li>
<li>CMD command param1 param2 (shell form)</li>
</ul>
<p>CMDæŒ‡å®šåœ¨ Dockerfile ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆã€‚</p>
<p>CMDçš„ç›®çš„æ˜¯ä¸ºäº†åœ¨å¯åŠ¨å®¹å™¨æ—¶æä¾›ä¸€ä¸ªé»˜è®¤çš„å‘½ä»¤æ‰§è¡Œé€‰é¡¹ã€‚å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šäº†è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰CMDæŒ‡å®šçš„å‘½ä»¤ã€‚</p>
<blockquote>
<p>CMDä¼šåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™æ‰§è¡Œï¼Œbuild æ—¶ä¸æ‰§è¡Œï¼Œè€ŒRUNåªæ˜¯åœ¨æ„å»ºé•œåƒçš„æ—¶å€™æ‰§è¡Œï¼Œåç»­é•œåƒæ„å»ºå®Œæˆä¹‹åï¼Œå¯åŠ¨å®¹å™¨å°±ä¸RUNæ— å…³äº†ï¼Œè¿™ä¸ªåˆå­¦è€…å®¹æ˜“å¼„æ··è¿™ä¸ªæ¦‚å¿µï¼Œè¿™é‡Œç®€å•æ³¨è§£ä¸€ä¸‹ã€‚</p>
</blockquote>
<h2 id="7-4-EXPOSE"><a class="header-anchor" href="#7-4-EXPOSE"></a>7.4 EXPOSE</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">EXPOSE &lt;port&gt; [&lt;port&gt;...]<br></code></pre></td></tr></table></figure>
<p>å‘Šè¯‰ Docker æœåŠ¡ç«¯å®¹å™¨å¯¹å¤–æ˜ å°„çš„æœ¬åœ°ç«¯å£ï¼Œéœ€è¦åœ¨ docker run çš„æ—¶å€™ä½¿ç”¨-pæˆ–è€…-Pé€‰é¡¹ç”Ÿæ•ˆã€‚</p>
<h2 id="7-5-ENV"><a class="header-anchor" href="#7-5-ENV"></a>7.5 ENV</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ENV &lt;key&gt; &lt;value&gt;       <span class="hljs-comment"># åªèƒ½è®¾ç½®ä¸€ä¸ªå˜é‡</span><br>ENV &lt;key&gt;=&lt;value&gt; ...   <span class="hljs-comment"># å…è®¸ä¸€æ¬¡è®¾ç½®å¤šä¸ªå˜é‡</span><br></code></pre></td></tr></table></figure>
<p>æŒ‡å®šä¸€ä¸ªç¯èŠ‚å˜é‡ï¼Œä¼šè¢«åç»­RUNæŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶ä¿ç•™ã€‚</p>
<p>ä¾‹å­:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ENV myName=<span class="hljs-string">&quot;John Doe&quot;</span> myDog=Rex\ The\ Dog \<br>    myCat=fluffy<br></code></pre></td></tr></table></figure>
<p>ç­‰åŒäº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ENV myName John Doe<br>ENV myDog Rex The Dog<br>ENV myCat fluffy<br></code></pre></td></tr></table></figure>
<h2 id="7-6-ADD"><a class="header-anchor" href="#7-6-ADD"></a>7.6 ADD</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ADD &lt;src&gt;... &lt;dest&gt;<br></code></pre></td></tr></table></figure>
<p>ADDå¤åˆ¶æœ¬åœ°ä¸»æœºæ–‡ä»¶ã€ç›®å½•æˆ–è€…è¿œç¨‹æ–‡ä»¶ URLS ä» å¹¶ä¸”æ·»åŠ åˆ°å®¹å™¨æŒ‡å®šè·¯å¾„ä¸­ ã€‚</p>
<p>æ”¯æŒé€šè¿‡ GO çš„æ­£åˆ™æ¨¡ç³ŠåŒ¹é…ï¼Œå…·ä½“è§„åˆ™å¯å‚è§Â <a href="http://golang.org/pkg/path/filepath/#Match">Go filepath.Match</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ADD hom* /mydir/        <span class="hljs-comment"># adds all files starting with &quot;hom&quot;</span><br>ADD hom?.txt /mydir/    <span class="hljs-comment"># ? is replaced with any single character</span><br></code></pre></td></tr></table></figure>
<ul>
<li>è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¦‚æœ ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”ç›®å½•</li>
<li>è·¯å¾„å¿…é¡»æ˜¯ Dockerfile æ‰€åœ¨è·¯å¾„çš„ç›¸å¯¹è·¯å¾„</li>
<li>å¦‚æœæ˜¯ä¸€ä¸ªç›®å½•ï¼Œåªä¼šå¤åˆ¶ç›®å½•ä¸‹çš„å†…å®¹ï¼Œè€Œç›®å½•æœ¬èº«åˆ™ä¸ä¼šè¢«å¤åˆ¶</li>
</ul>
<h2 id="7-7-COPY"><a class="header-anchor" href="#7-7-COPY"></a>7.7 COPY</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">COPY &lt;src&gt;... &lt;dest&gt;<br></code></pre></td></tr></table></figure>
<p>COPYå¤åˆ¶æ–°æ–‡ä»¶æˆ–è€…ç›®å½•ä» å¹¶ä¸”æ·»åŠ åˆ°å®¹å™¨æŒ‡å®šè·¯å¾„ä¸­ ã€‚ç”¨æ³•åŒADDï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯ä¸èƒ½æŒ‡å®šè¿œç¨‹æ–‡ä»¶ URLSã€‚</p>
<h2 id="7-8-ENTRYPOINT"><a class="header-anchor" href="#7-8-ENTRYPOINT"></a>7.8 ENTRYPOINT</h2>
<ul>
<li>ENTRYPOINTÂ <a href="http://opskumu.github.io/the%20preferred%20exec%20form%EF%BC%8C%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9">â€œexecutableâ€, â€œparam1â€, â€œparam2â€</a></li>
<li>ENTRYPOINT command param1 param2 (shell form)</li>
</ul>
<p>é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« docker run æä¾›çš„å‚æ•°è¦†ç›–ï¼Œè€ŒCMDæ˜¯å¯ä»¥è¢«è¦†ç›–çš„ã€‚å¦‚æœéœ€è¦è¦†ç›–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨docker run --entrypointé€‰é¡¹ã€‚</p>
<p>æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ªENTRYPOINTï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p>
<h3 id="Exec-form-ENTRYPOINT-ä¾‹å­"><a class="header-anchor" href="#Exec-form-ENTRYPOINT-ä¾‹å­"></a>Exec form ENTRYPOINT ä¾‹å­</h3>
<p>é€šè¿‡ENTRYPOINTä½¿ç”¨ exec form æ–¹å¼è®¾ç½®ç¨³å®šçš„é»˜è®¤å‘½ä»¤å’Œé€‰é¡¹ï¼Œè€Œä½¿ç”¨CMDæ·»åŠ é»˜è®¤ä¹‹å¤–ç»å¸¸è¢«æ”¹åŠ¨çš„é€‰é¡¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM ubuntu<br>ENTRYPOINT [<span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-string">&quot;-b&quot;</span>]<br>CMD [<span class="hljs-string">&quot;-c&quot;</span>]<br></code></pre></td></tr></table></figure>
<p>é€šè¿‡ Dockerfile ä½¿ç”¨ENTRYPOINTå±•ç¤ºå‰å°è¿è¡Œ Apache æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM debian:stable<br>RUN apt-get update &amp;&amp; apt-get install -y --force-yes apache2<br>EXPOSE 80 443<br>VOLUME [<span class="hljs-string">&quot;/var/www&quot;</span>, <span class="hljs-string">&quot;/var/log/apache2&quot;</span>, <span class="hljs-string">&quot;/etc/apache2&quot;</span>]<br>ENTRYPOINT [<span class="hljs-string">&quot;/usr/sbin/apache2ctl&quot;</span>, <span class="hljs-string">&quot;-D&quot;</span>, <span class="hljs-string">&quot;FOREGROUND&quot;</span>]<br></code></pre></td></tr></table></figure>
<h3 id="Shell-form-ENTRYPOINT-ä¾‹å­"><a class="header-anchor" href="#Shell-form-ENTRYPOINT-ä¾‹å­"></a>Shell form ENTRYPOINT ä¾‹å­</h3>
<p>è¿™ç§æ–¹å¼ä¼šåœ¨/bin/sh -cä¸­æ‰§è¡Œï¼Œä¼šå¿½ç•¥ä»»ä½•CMDæˆ–è€…docker runå‘½ä»¤è¡Œé€‰é¡¹ï¼Œä¸ºäº†ç¡®ä¿docker stopèƒ½å¤Ÿåœæ­¢é•¿æ—¶é—´è¿è¡ŒENTRYPOINTçš„å®¹å™¨ï¼Œç¡®ä¿æ‰§è¡Œçš„æ—¶å€™ä½¿ç”¨execé€‰é¡¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM ubuntu<br>ENTRYPOINT <span class="hljs-built_in">exec</span> top -b<br></code></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨ENTRYPOINTå¿˜è®°ä½¿ç”¨execé€‰é¡¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨CMDè¡¥ä¸Š:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM ubuntu<br>ENTRYPOINT top -b<br>CMD --ignored-param1 <span class="hljs-comment"># --ignored-param2 ... --ignored-param3 ... ä¾æ­¤ç±»æ¨</span><br></code></pre></td></tr></table></figure>
<h2 id="7-9-VOLUME"><a class="header-anchor" href="#7-9-VOLUME"></a>7.9 VOLUME</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">VOLUME [<span class="hljs-string">&quot;/data&quot;</span>]<br></code></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°ä¸»æœºæˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼Œåç»­å…·ä½“ä»‹ç»ã€‚</p>
<h2 id="7-10-USER"><a class="header-anchor" href="#7-10-USER"></a>7.10 USER</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">USER daemon<br></code></pre></td></tr></table></figure>
<p>æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„RUNã€CMDã€ENTRYPOINTä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚</p>
<h2 id="7-11-WORKDIR"><a class="header-anchor" href="#7-11-WORKDIR"></a>7.11 WORKDIR</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">WORKDIR /path/to/workdir<br></code></pre></td></tr></table></figure>
<p>ä¸ºåç»­çš„RUNã€CMDã€ENTRYPOINTæŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªWORKDIRæŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">WORKDIR /a<br>WORKDIR b<br>WORKDIR c<br>RUN <span class="hljs-built_in">pwd</span><br></code></pre></td></tr></table></figure>
<p>æœ€ç»ˆè·¯å¾„æ˜¯/a/b/cã€‚</p>
<p>WORKDIRæŒ‡ä»¤å¯ä»¥åœ¨ENVè®¾ç½®å˜é‡ä¹‹åè°ƒç”¨ç¯å¢ƒå˜é‡:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ENV DIRPATH /path<br>WORKDIR <span class="hljs-variable">$DIRPATH</span>/<span class="hljs-variable">$DIRNAME</span><br></code></pre></td></tr></table></figure>
<p>æœ€ç»ˆè·¯å¾„åˆ™ä¸º /path/$DIRNAMEã€‚</p>
<h2 id="7-12-ONBUILD"><a class="header-anchor" href="#7-12-ONBUILD"></a>7.12 ONBUILD</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ONBUILD [INSTRUCTION]<br></code></pre></td></tr></table></figure>
<p>é…ç½®å½“æ‰€åˆ›å»ºçš„é•œåƒä½œä¸ºå…¶å®ƒæ–°åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ“ä½œæŒ‡ä»¤ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒDockerfile ä½¿ç”¨å¦‚ä¸‹çš„å†…å®¹åˆ›å»ºäº†é•œåƒ image-Aï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[...]<br>ONBUILD ADD . /app/src<br>ONBUILD RUN /usr/local/bin/python-build --<span class="hljs-built_in">dir</span> /app/src<br>[...]<br></code></pre></td></tr></table></figure>
<p>å¦‚æœåŸºäº image-A åˆ›å»ºæ–°çš„é•œåƒæ—¶ï¼Œæ–°çš„ Dockerfile ä¸­ä½¿ç”¨ FROM image-A æŒ‡å®šåŸºç¡€é•œåƒæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ ONBUILD æŒ‡ä»¤å†…å®¹ï¼Œç­‰ä»·äºåœ¨åé¢æ·»åŠ äº†ä¸¤æ¡æŒ‡ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Automatically run the following</span><br>ADD . /app/src<br>RUN /usr/local/bin/python-build --<span class="hljs-built_in">dir</span> /app/src<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨ONBUILDæŒ‡ä»¤çš„é•œåƒï¼Œæ¨èåœ¨æ ‡ç­¾ä¸­æ³¨æ˜ï¼Œä¾‹å¦‚ ruby:1.9-onbuildã€‚</p>
<h2 id="7-13-Dockerfile-Examples"><a class="header-anchor" href="#7-13-Dockerfile-Examples"></a>7.13 Dockerfile Examples</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Nginx</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># VERSION               0.0.1</span><br>FROM      ubuntu<br>MAINTAINER Victor Vieux &lt;victor@docker.com&gt;<br>RUN apt-get update &amp;&amp; apt-get install -y inotify-tools nginx apache2 openssh-server<br>  <br><span class="hljs-comment"># Firefox over VNC</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># VERSION               0.3</span><br>FROM ubuntu<br><span class="hljs-comment"># Install vnc, xvfb in order to create a &#x27;fake&#x27; display and firefox</span><br>RUN apt-get update &amp;&amp; apt-get install -y x11vnc xvfb firefox<br>RUN <span class="hljs-built_in">mkdir</span> ~/.vnc<br><span class="hljs-comment"># Setup a password</span><br>RUN x11vnc -storepasswd 1234 ~/.vnc/passwd<br><span class="hljs-comment"># Autostart firefox (might not be the best way, but it does the trick)</span><br>RUN bash -c <span class="hljs-string">&#x27;echo &quot;firefox&quot; &gt;&gt; /.bashrc&#x27;</span><br>EXPOSE 5900<br>CMD    [<span class="hljs-string">&quot;x11vnc&quot;</span>, <span class="hljs-string">&quot;-forever&quot;</span>, <span class="hljs-string">&quot;-usepw&quot;</span>, <span class="hljs-string">&quot;-create&quot;</span>]<br>  <br><span class="hljs-comment"># Multiple images example</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># VERSION               0.1</span><br>FROM ubuntu<br>RUN <span class="hljs-built_in">echo</span> foo &gt; bar<br><span class="hljs-comment"># Will output something like ===&gt; 907ad6c2736f</span><br>FROM ubuntu<br>RUN <span class="hljs-built_in">echo</span> moo &gt; oink<br><span class="hljs-comment"># Will output something like ===&gt; 695d7793cbe4</span><br> <br><span class="hljs-comment"># Youá¾¿ll now have two images, 907ad6c2736f with /bar, and 695d7793cbe4 with</span><br><span class="hljs-comment"># /oink.</span><br></code></pre></td></tr></table></figure>
<h2 id="7-14-docker-build"><a class="header-anchor" href="#7-14-docker-build"></a>7.14 docker build</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker build --<span class="hljs-built_in">help</span><br>Usage: docker build [OPTIONS] PATH | URL | -<br>Build a new image from the <span class="hljs-built_in">source</span> code at PATH<br>  --force-rm=<span class="hljs-literal">false</span>     Always remove intermediate containers, even after unsuccessful builds <span class="hljs-comment"># ç§»é™¤è¿‡æ¸¡å®¹å™¨ï¼Œå³ä½¿æ„å»ºå¤±è´¥</span><br>  --no-cache=<span class="hljs-literal">false</span>     Do not use cache when building the image                              <span class="hljs-comment"># ä¸å®ç”¨ cache        </span><br>  -q, --quiet=<span class="hljs-literal">false</span>    Suppress the verbose output generated by the containers               <br>  --<span class="hljs-built_in">rm</span>=<span class="hljs-literal">true</span>            Remove intermediate containers after a successful build               <span class="hljs-comment"># æ„å»ºæˆåŠŸåç§»é™¤è¿‡æ¸¡å±‚å®¹å™¨</span><br>  -t, --tag=<span class="hljs-string">&quot;&quot;</span>         Repository name (and optionally a tag) to be applied to the resulting image <span class="hljs-keyword">in</span> <span class="hljs-keyword">case</span> of success<br></code></pre></td></tr></table></figure>
<p>å‚è€ƒæ–‡æ¡£:<a href="https://docs.docker.com/reference/builder/">Dockerfile Reference</a></p>
<h2 id="7-15-dockerfile-æœ€ä½³å®è·µ"><a class="header-anchor" href="#7-15-dockerfile-æœ€ä½³å®è·µ"></a>7.15 dockerfile æœ€ä½³å®è·µ</h2>
<ul>
<li>ä½¿ç”¨.dockerignoreæ–‡ä»¶</li>
</ul>
<p>ä¸ºäº†åœ¨docker buildè¿‡ç¨‹ä¸­æ›´å¿«ä¸Šä¼ å’Œæ›´åŠ é«˜æ•ˆï¼Œåº”è¯¥ä½¿ç”¨ä¸€ä¸ª.dockerignoreæ–‡ä»¶ç”¨æ¥æ’é™¤æ„å»ºé•œåƒæ—¶ä¸éœ€è¦çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚ä¾‹å¦‚,é™¤é.gitåœ¨æ„å»ºè¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°ï¼Œå¦åˆ™ä½ åº”è¯¥å°†å®ƒæ·»åŠ åˆ°.dockerignoreæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚</p>
<ul>
<li>é¿å…å®‰è£…ä¸å¿…è¦çš„è½¯ä»¶åŒ…</li>
</ul>
<p>ä¸ºäº†é™ä½å¤æ‚æ€§ã€ä¾èµ–æ€§ã€æ–‡ä»¶å¤§å°ä»¥åŠæ„å»ºæ—¶é—´ï¼Œåº”è¯¥é¿å…å®‰è£…é¢å¤–çš„æˆ–ä¸å¿…è¦çš„åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸éœ€è¦åœ¨ä¸€ä¸ªæ•°æ®åº“é•œåƒä¸­å®‰è£…ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p>
<ul>
<li>æ¯ä¸ªå®¹å™¨éƒ½è·‘ä¸€ä¸ªè¿›ç¨‹</li>
</ul>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¹å™¨åº”è¯¥åªå•ç‹¬è·‘ä¸€ä¸ªç¨‹åºã€‚è§£è€¦åº”ç”¨åˆ°å¤šä¸ªå®¹å™¨ä½¿å…¶æ›´å®¹æ˜“æ¨ªå‘æ‰©å±•å’Œé‡ç”¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡ä¾èµ–å¦å¤–ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥å‚è€ƒÂ <a href="https://docs.docker.com/userguide/dockerlinks/">Linking Containers Together</a>ã€‚</p>
<ul>
<li>æœ€å°åŒ–å±‚</li>
</ul>
<p>æˆ‘ä»¬çŸ¥é“æ¯æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œéƒ½ä¼šæœ‰ä¸€æ¬¡é•œåƒçš„æäº¤ï¼Œé•œåƒæ˜¯åˆ†å±‚çš„ç»“æ„ï¼Œå¯¹äºDockerfileï¼Œåº”è¯¥æ‰¾åˆ°å¯è¯»æ€§å’Œæœ€å°åŒ–å±‚ä¹‹é—´çš„å¹³è¡¡ã€‚</p>
<ul>
<li>å¤šè¡Œå‚æ•°æ’åº</li>
</ul>
<p>å¦‚æœå¯èƒ½ï¼Œé€šè¿‡å­—æ¯é¡ºåºæ¥æ’åºï¼Œè¿™æ ·å¯ä»¥é¿å…å®‰è£…åŒ…çš„é‡å¤å¹¶ä¸”æ›´å®¹æ˜“æ›´æ–°åˆ—è¡¨ï¼Œå¦å¤–å¯è¯»æ€§ä¹Ÿä¼šæ›´å¼ºï¼Œæ·»åŠ ä¸€ä¸ªç©ºè¡Œä½¿ç”¨\æ¢è¡Œ:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">RUN apt-get update &amp;&amp; apt-get install -y \<br>  bzr \<br>  cvs \<br>  git \<br>  mercurial \<br>  subversion<br></code></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºç¼“å­˜</li>
</ul>
<p>é•œåƒæ„å»ºè¿‡ç¨‹ä¸­ä¼šæŒ‰ç…§Dockerfileçš„é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œæ¯æ‰§è¡Œä¸€æ¬¡æŒ‡ä»¤ Docker ä¼šå¯»æ‰¾æ˜¯å¦æœ‰å­˜åœ¨çš„é•œåƒç¼“å­˜å¯å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºæ–°çš„é•œåƒã€‚å¦‚æœä¸æƒ³ä½¿ç”¨ç¼“å­˜ï¼Œåˆ™å¯ä»¥åœ¨docker buildæ—¶æ·»åŠ â€“no-cache=trueé€‰é¡¹ã€‚</p>
<p>ä»åŸºç¡€é•œåƒå¼€å§‹å°±å·²ç»åœ¨ç¼“å­˜ä¸­äº†ï¼Œä¸‹ä¸€ä¸ªæŒ‡ä»¤ä¼šå¯¹æ¯”æ‰€æœ‰çš„å­é•œåƒå¯»æ‰¾æ˜¯å¦æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç¼“å­˜å¤±æ•ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åªå¯¹æ¯”DockerfileæŒ‡ä»¤å’Œå­é•œåƒå°±è¶³å¤Ÿäº†ã€‚ADDå’ŒCOPYæŒ‡ä»¤é™¤å¤–ï¼Œæ‰§è¡ŒADDå’ŒCOPYæ—¶å­˜æ”¾åˆ°é•œåƒçš„æ–‡ä»¶ä¹Ÿæ˜¯éœ€è¦æ£€æŸ¥çš„ï¼Œå®Œæˆä¸€ä¸ªæ–‡ä»¶çš„æ ¡éªŒä¹‹åå†åˆ©ç”¨è¿™ä¸ªæ ¡éªŒåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ£€æµ‹çš„æ–‡ä»¶æ”¹å˜åˆ™ç¼“å­˜å¤±æ•ˆã€‚RUN apt-get -y updateå‘½ä»¤åªæ£€æŸ¥å‘½ä»¤æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…å°±ä¸ä¼šå†æ‰§è¡Œæ›´æ–°äº†ã€‚</p>
<blockquote>
<p>ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨ç¼“å­˜ï¼Œä½ éœ€è¦ä¿æŒä½ çš„ Dockerfile ä¸€è‡´ï¼Œå¹¶ä¸”å°½é‡åœ¨æœ«å°¾ä¿®æ”¹ã€‚</p>
</blockquote>
<h3 id="Dockerfile-æŒ‡ä»¤"><a class="header-anchor" href="#Dockerfile-æŒ‡ä»¤"></a>Dockerfile æŒ‡ä»¤</h3>
<ul>
<li>FROM: åªè¦å¯èƒ½å°±ä½¿ç”¨å®˜æ–¹é•œåƒåº“ä½œä¸ºåŸºç¡€é•œåƒ</li>
<li>RUN: ä¸ºä¿æŒå¯è¯»æ€§ã€æ–¹ä¾¿ç†è§£ã€å¯ç»´æŠ¤æ€§ï¼ŒæŠŠé•¿æˆ–è€…å¤æ‚çš„RUNè¯­å¥ä½¿ç”¨\åˆ†éš”ç¬¦åˆ†æˆå¤šè¡Œ
<ul>
<li>ä¸å»ºè®®RUN apt-get updateç‹¬ç«‹æˆè¡Œï¼Œå¦åˆ™å¦‚æœåç»­åŒ…æœ‰æ›´æ–°ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šå†æ‰§è¡Œæ›´æ–°</li>
<li>é¿å…ä½¿ç”¨RUN apt-get upgradeæˆ–è€…dist-upgradeï¼Œå¾ˆå¤šå¿…è¦çš„åŒ…åœ¨ä¸€ä¸ªéprivilegedæƒé™çš„å®¹å™¨é‡Œæ˜¯æ— æ³•å‡çº§çš„ã€‚å¦‚æœçŸ¥é“æŸä¸ªåŒ…æ›´æ–°ï¼Œä½¿ç”¨apt-get install -y xxx</li>
<li>æ ‡å‡†å†™æ³•
<ul>
<li>RUN apt-get update &amp;&amp; apt-get install -y package-bar package-foo</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä¾‹å­:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">RUN apt-get update &amp;&amp; apt-get install -y \<br>    aufs-tools \<br>    automake \<br>    btrfs-tools \<br>    build-essential \<br>    curl \<br>    dpkg-sig \<br>    git \<br>    iptables \<br>    libapparmor-dev \<br>    libcap-dev \<br>    libsqlite3-dev \<br>    lxc=1.0* \<br>    mercurial \<br>    parallel \<br>    reprepro \<br>    ruby1.9.1 \<br>    ruby1.9.1-dev \<br>    s3cmd=1.1.0*<br></code></pre></td></tr></table></figure>
<ul>
<li>CMD: æ¨èä½¿ç”¨CMD [â€œexecutableâ€, â€œparam1â€, â€œparam2â€â€¦]è¿™ç§æ ¼å¼ï¼ŒCMD [â€œparamâ€, â€œparamâ€]åˆ™é…åˆENTRYPOINTä½¿ç”¨</li>
<li>EXPOSE: Dockerfile æŒ‡å®šè¦å…¬å¼€çš„ç«¯å£ï¼Œä½¿ç”¨docker runæ—¶æŒ‡å®šæ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£å³å¯</li>
<li>ENV: ä¸ºäº†ä½¿æ–°çš„è½¯ä»¶æ›´å®¹æ˜“è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ENVæ›´æ–°PATHå˜é‡ã€‚å¦‚ENV PATH /usr/local/nginx/bin:$PATHç¡®ä¿CMD [â€œnginxâ€]å³å¯è¿è¡Œ</li>
</ul>
<p>ENVä¹Ÿå¯ä»¥è¿™æ ·å®šä¹‰å˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ENV PG_MAJOR 9.3<br>ENV PG_VERSION 9.3.4<br>RUN curl -SL http://example.com/postgres-<span class="hljs-variable">$PG_VERSION</span>.tar.xz | tar -xJC /usr/src/postgress &amp;&amp; â€¦<br>ENV PATH /usr/local/postgres-<span class="hljs-variable">$PG_MAJOR</span>/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure>
<ul>
<li>ADDorCOPY:ADDæ¯”COPYå¤šä¸€äº›ç‰¹æ€§ã€Œtar æ–‡ä»¶è‡ªåŠ¨è§£åŒ…å’Œæ”¯æŒè¿œç¨‹ URLã€ï¼Œä¸æ¨èæ·»åŠ è¿œç¨‹ URL</li>
</ul>
<p>å¦‚ä¸æ¨èè¿™ç§æ–¹å¼:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">ADD http://example.com/big.tar.xz /usr/src/things/<br>RUN tar -xJf /usr/src/things/big.tar.xz -C /usr/src/things<br>RUN make -C /usr/src/things all<br></code></pre></td></tr></table></figure>
<p>æ¨èä½¿ç”¨ curl æˆ–è€… wget æ›¿æ¢ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹å¼:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">RUN <span class="hljs-built_in">mkdir</span> -p /usr/src/things \<br>    &amp;&amp; curl -SL http://example.com/big.tar.gz \<br>    | tar -xJC /usr/src/things \<br>    &amp;&amp; make -C /usr/src/things all<br></code></pre></td></tr></table></figure>
<p>å¦‚æœä¸éœ€è¦æ·»åŠ  tar æ–‡ä»¶ï¼Œæ¨èä½¿ç”¨COPYã€‚</p>
<p>å‚è€ƒæ–‡æ¡£:</p>
<ul>
<li><a href="https://docs.docker.com/articles/dockerfile_best-practices/">Best practices for writing Dockerfiles</a></li>
<li><a href="http://dockerone.com/article/131">Dockerfileæœ€ä½³å®è·µï¼ˆä¸€ï¼‰</a></li>
<li><a href="http://dockerone.com/article/132">Dockerfileæœ€ä½³å®è·µï¼ˆäºŒï¼‰</a></li>
</ul>
<h1 id="å…«ã€å®¹å™¨æ•°æ®ç®¡ç†"><a class="header-anchor" href="#å…«ã€å®¹å™¨æ•°æ®ç®¡ç†"></a>å…«ã€å®¹å™¨æ•°æ®ç®¡ç†</h1>
<p>dockerç®¡ç†æ•°æ®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>æ•°æ®å·</li>
<li>æ•°æ®å·å®¹å™¨</li>
</ul>
<h2 id="8-1-æ•°æ®å·"><a class="header-anchor" href="#8-1-æ•°æ®å·"></a>8.1 æ•°æ®å·</h2>
<p>æ•°æ®å·æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸“é—¨æŒ‡å®šç»•è¿‡Union File Systemçš„ç›®å½•ï¼Œä¸ºæŒç»­æ€§æˆ–å…±äº«æ•°æ®æä¾›ä¸€äº›æœ‰ç”¨çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨é—´å…±äº«å’Œé‡ç”¨</li>
<li>æ•°æ®å·æ•°æ®æ”¹å˜æ˜¯ç›´æ¥ä¿®æ”¹çš„</li>
<li>æ•°æ®å·æ•°æ®æ”¹å˜ä¸ä¼šè¢«åŒ…æ‹¬åœ¨å®¹å™¨ä¸­</li>
<li>æ•°æ®å·æ˜¯æŒç»­æ€§çš„ï¼Œç›´åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä»¬</li>
</ul>
<h3 id="æ·»åŠ ä¸€ä¸ªæ•°æ®å·"><a class="header-anchor" href="#æ·»åŠ ä¸€ä¸ªæ•°æ®å·"></a>æ·»åŠ ä¸€ä¸ªæ•°æ®å·</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨-vé€‰é¡¹æ·»åŠ ä¸€ä¸ªæ•°æ®å·ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨å¤šæ¬¡-vé€‰é¡¹ä¸ºä¸€ä¸ª docker å®¹å™¨è¿è¡ŒæŒ‚è½½å¤šä¸ªæ•°æ®å·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --name data -v /data -t -i ubuntu:14.04 /bin/bash <span class="hljs-comment"># åˆ›å»ºæ•°æ®å·ç»‘å®šåˆ°åˆ°æ–°å»ºå®¹å™¨ï¼Œæ–°å»ºå®¹å™¨ä¸­ä¼šåˆ›å»º /data æ•°æ®å· bash-4.1# ls -ld /data/</span><br>drwxr-xr-x 2 root root 4096 Jul 23 06:59 /data/<br>bash-4.1<span class="hljs-comment"># df -Th</span><br>Filesystem    Type    Size  Used Avail Use% Mounted on<br>... ...<br>              ext4     91G  4.6G   82G   6% /data<br></code></pre></td></tr></table></figure>
<p>åˆ›å»ºçš„æ•°æ®å·å¯ä»¥é€šè¿‡docker inspectè·å–å®¿ä¸»æœºå¯¹åº”è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker inspect data<br>... ... <span class="hljs-string">&quot;Volumes&quot;</span>: &#123; <span class="hljs-string">&quot;/data&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/vfs/dir/151de401d268226f96d824fdf444e77a4500aed74c495de5980c807a2ffb7ea9&quot;</span> &#125;, <span class="hljs-comment"># å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„æ•°æ®å·å®¿ä¸»æœºè·¯å¾„ ... ...</span><br></code></pre></td></tr></table></figure>
<p>æˆ–è€…ç›´æ¥æŒ‡å®šè·å–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker inspect --format=<span class="hljs-string">&quot;&#123;&#123; .Volumes &#125;&#125;&quot;</span> data<br>map[/data: /var/lib/docker/vfs/dir/151de401d268226f96d824fdf444e77a4500aed74c495de5980c807a2ffb7ea9]<br></code></pre></td></tr></table></figure>
<h3 id="æŒ‚è½½å®¿ä¸»æœºç›®å½•ä¸ºä¸€ä¸ªæ•°æ®å·"><a class="header-anchor" href="#æŒ‚è½½å®¿ä¸»æœºç›®å½•ä¸ºä¸€ä¸ªæ•°æ®å·"></a>æŒ‚è½½å®¿ä¸»æœºç›®å½•ä¸ºä¸€ä¸ªæ•°æ®å·</h3>
<p>-vé€‰é¡¹é™¤äº†å¯ä»¥åˆ›å»ºå·ï¼Œä¹Ÿå¯ä»¥æŒ‚è½½å½“å‰ä¸»æœºçš„ä¸€ä¸ªç›®å½•åˆ°å®¹å™¨ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --name web -v /source/:/web -t -i ubuntu:14.04 /bin/bash<br>bash-4.1<span class="hljs-comment"># ls -ld /web/</span><br>drwxr-xr-x 2 root root 4096 Jul 23 06:59 /web/<br>bash-4.1<span class="hljs-comment"># df -Th</span><br>... ...<br>              ext4     91G  4.6G   82G   6% /web<br>bash-4.1<span class="hljs-comment"># exit </span><br></code></pre></td></tr></table></figure>
<p>é»˜è®¤æŒ‚è½½å·æ˜¯å¯è¯»å†™çš„ï¼Œå¯ä»¥åœ¨æŒ‚è½½æ—¶æŒ‡å®šåªè¯»</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --<span class="hljs-built_in">rm</span> --name <span class="hljs-built_in">test</span> -v /source/:/test:ro -t -i ubuntu:14.04 /bin/bash<br></code></pre></td></tr></table></figure>
<h2 id="8-2-åˆ›å»ºå’ŒæŒ‚è½½ä¸€ä¸ªæ•°æ®å·å®¹å™¨"><a class="header-anchor" href="#8-2-åˆ›å»ºå’ŒæŒ‚è½½ä¸€ä¸ªæ•°æ®å·å®¹å™¨"></a>8.2 åˆ›å»ºå’ŒæŒ‚è½½ä¸€ä¸ªæ•°æ®å·å®¹å™¨</h2>
<p>å¦‚æœä½ æœ‰ä¸€äº›æŒä¹…æ€§çš„æ•°æ®å¹¶ä¸”æƒ³åœ¨å®¹å™¨é—´å…±äº«ï¼Œæˆ–è€…æƒ³ç”¨åœ¨éæŒä¹…æ€§çš„å®¹å™¨ä¸Šï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ•°æ®å·å®¹å™¨ï¼Œç„¶åä»æ­¤å®¹å™¨ä¸ŠæŒ‚è½½æ•°æ®ã€‚</p>
<p>åˆ›å»ºæ•°æ®å·å®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d -v /test --name <span class="hljs-built_in">test</span> ubuntu:14.04 <span class="hljs-built_in">echo</span> hello<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨â€“volumes-fromé€‰é¡¹åœ¨å¦ä¸€ä¸ªå®¹å™¨ä¸­æŒ‚è½½ /test å·ã€‚ä¸ç®¡ test å®¹å™¨æ˜¯å¦è¿è¡Œï¼Œå…¶å®ƒå®¹å™¨éƒ½å¯ä»¥æŒ‚è½½è¯¥å®¹å™¨æ•°æ®å·ï¼Œå½“ç„¶å¦‚æœåªæ˜¯å•ç‹¬çš„æ•°æ®å·æ˜¯æ²¡å¿…è¦è¿è¡Œå®¹å™¨çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d --volumes-from <span class="hljs-built_in">test</span> --name test1 ubuntu:14.04 /bin/bash<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ å¦ä¸€ä¸ªå®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d --volumes-from <span class="hljs-built_in">test</span> --name test2 ubuntu:14.04 /bin/bash<br></code></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç»§æ‰¿å…¶å®ƒæŒ‚è½½æœ‰ /test å·çš„å®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d --volumes-from test1 --name test3 ubuntu:14.04 /bin/bash<br></code></pre></td></tr></table></figure>
<p><img src="http://static.open-open.com/lib/uploadImg/20150212/20150212091035_912.png" alt="éå¸¸è¯¦ç»†çš„ Docker å­¦ä¹ ç¬”è®°"></p>
<h2 id="8-3-å¤‡ä»½ã€æ¢å¤æˆ–è¿ç§»æ•°æ®å·"><a class="header-anchor" href="#8-3-å¤‡ä»½ã€æ¢å¤æˆ–è¿ç§»æ•°æ®å·"></a>8.3 å¤‡ä»½ã€æ¢å¤æˆ–è¿ç§»æ•°æ®å·</h2>
<h3 id="å¤‡ä»½"><a class="header-anchor" href="#å¤‡ä»½"></a>å¤‡ä»½</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --<span class="hljs-built_in">rm</span> --volumes-from <span class="hljs-built_in">test</span> -v $(<span class="hljs-built_in">pwd</span>):/backup ubuntu:14.04 tar cvf /backup/test.tar /test<br>tar: Removing leading `/<span class="hljs-string">&#x27; from member names</span><br><span class="hljs-string">/test/</span><br><span class="hljs-string">/test/b</span><br><span class="hljs-string">/test/d</span><br><span class="hljs-string">/test/c</span><br><span class="hljs-string">/test/a</span><br></code></pre></td></tr></table></figure>
<p>å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶ä¸”ä»testå®¹å™¨ä¸­æŒ‚è½½å·ï¼Œç„¶åæŒ‚è½½å½“å‰ç›®å½•åˆ°å®¹å™¨ä¸­ä¸º backupï¼Œå¹¶å¤‡ä»½ test å·ä¸­æ‰€æœ‰çš„æ•°æ®ä¸º test.tarï¼Œæ‰§è¡Œå®Œæˆä¹‹ååˆ é™¤å®¹å™¨â€“rmï¼Œæ­¤æ—¶å¤‡ä»½å°±åœ¨å½“å‰çš„ç›®å½•ä¸‹ï¼Œåä¸ºtest.tarã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span> <span class="hljs-comment"># å®¿ä¸»æœºå½“å‰ç›®å½•ä¸‹äº§ç”Ÿäº† test å·çš„å¤‡ä»½æ–‡ä»¶ </span><br>test.tar test.tar<br></code></pre></td></tr></table></figure>
<h3 id="æ¢å¤"><a class="header-anchor" href="#æ¢å¤"></a>æ¢å¤</h3>
<p>ä½ å¯ä»¥æ¢å¤ç»™åŒä¸€ä¸ªå®¹å™¨æˆ–è€…å¦å¤–çš„å®¹å™¨ï¼Œæ–°å»ºå®¹å™¨å¹¶è§£å‹å¤‡ä»½æ–‡ä»¶åˆ°æ–°çš„å®¹å™¨æ•°æ®å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i -d -v /test --name test4 ubuntu:14.04  /bin/bash <br>$ sudo docker run --<span class="hljs-built_in">rm</span> --volumes-from test4 -v $(<span class="hljs-built_in">pwd</span>):/backup ubuntu:14.04 tar xvf /backup/test.tar -C / <span class="hljs-comment"># æ¢å¤ä¹‹å‰çš„æ–‡ä»¶åˆ°æ–°å»ºå·ä¸­ï¼Œæ‰§è¡Œå®Œåè‡ªåŠ¨åˆ é™¤å®¹å™¨ </span><br><span class="hljs-built_in">test</span>/ <span class="hljs-built_in">test</span>/b <span class="hljs-built_in">test</span>/d <span class="hljs-built_in">test</span>/c <span class="hljs-built_in">test</span>/a<br></code></pre></td></tr></table></figure>
<h2 id="8-4-åˆ é™¤-Volumes"><a class="header-anchor" href="#8-4-åˆ é™¤-Volumes"></a>8.4 åˆ é™¤ Volumes</h2>
<p>Volume åªæœ‰åœ¨ä¸‹åˆ—æƒ…å†µä¸‹æ‰èƒ½è¢«åˆ é™¤ï¼š</p>
<ul>
<li>docker rm -våˆ é™¤å®¹å™¨æ—¶æ·»åŠ äº†-vé€‰é¡¹</li>
<li>docker run --rmè¿è¡Œå®¹å™¨æ—¶æ·»åŠ äº†â€“rmé€‰é¡¹</li>
</ul>
<p>å¦åˆ™ï¼Œä¼šåœ¨/var/lib/docker/vfs/dirç›®å½•ä¸­é—ç•™å¾ˆå¤šä¸æ˜ç›®å½•ã€‚</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<ul>
<li><a href="http://docs.docker.com/userguide/dockervolumes/#data-volumes">Managing Data in Containers</a></li>
<li><a href="http://dockerone.com/article/128">æ·±å…¥ç†è§£Docker Volumeï¼ˆä¸€ï¼‰</a></li>
<li><a href="http://dockerone.com/article/129">æ·±å…¥ç†è§£Docker Volumeï¼ˆäºŒï¼‰</a></li>
</ul>
<h1 id="ä¹ã€é“¾æ¥å®¹å™¨"><a class="header-anchor" href="#ä¹ã€é“¾æ¥å®¹å™¨"></a>ä¹ã€é“¾æ¥å®¹å™¨</h1>
<p>docker å…è®¸æŠŠå¤šä¸ªå®¹å™¨è¿æ¥åœ¨ä¸€èµ·ï¼Œç›¸äº’äº¤äº’ä¿¡æ¯ã€‚docker é“¾æ¥ä¼šåˆ›å»ºä¸€ç§å®¹å™¨çˆ¶å­çº§åˆ«çš„å…³ç³»ï¼Œå…¶ä¸­çˆ¶å®¹å™¨å¯ä»¥çœ‹åˆ°å…¶å­å®¹å™¨æä¾›çš„ä¿¡æ¯ã€‚</p>
<h2 id="9-1-å®¹å™¨å‘½å"><a class="header-anchor" href="#9-1-å®¹å™¨å‘½å"></a>9.1 å®¹å™¨å‘½å</h2>
<p>åœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šå®¹å™¨çš„åå­—ï¼Œåˆ™é»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåå­—ï¼Œè¿™é‡Œæ¨èç»™å®¹å™¨å‘½åï¼š</p>
<ul>
<li>1ã€ç»™å®¹å™¨å‘½åæ–¹ä¾¿è®°å¿†ï¼Œå¦‚å‘½åè¿è¡Œ web åº”ç”¨çš„å®¹å™¨ä¸º web</li>
<li>2ã€ä¸º docker å®¹å™¨æä¾›ä¸€ä¸ªå‚è€ƒï¼Œå…è®¸æ–¹ä¾¿å…¶ä»–å®¹å™¨è°ƒç”¨ï¼Œå¦‚æŠŠå®¹å™¨ web é“¾æ¥åˆ°å®¹å™¨ db</li>
</ul>
<p>å¯ä»¥é€šè¿‡â€“nameé€‰é¡¹ç»™å®¹å™¨è‡ªå®šä¹‰å‘½åï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -d -t -i --name <span class="hljs-built_in">test</span> ubuntu:14.04 bash              <br>$ sudo docker  inspect --format=<span class="hljs-string">&quot;&#123;&#123; .Nmae &#125;&#125;&quot;</span> <span class="hljs-built_in">test</span><br>/test<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šå®¹å™¨åç§°å¿…é¡»å”¯ä¸€ï¼Œå³ä½ åªèƒ½å‘½åä¸€ä¸ªå«testçš„å®¹å™¨ã€‚å¦‚æœä½ æƒ³å¤ç”¨å®¹å™¨åï¼Œåˆ™å¿…é¡»åœ¨åˆ›å»ºæ–°çš„å®¹å™¨å‰é€šè¿‡docker rmåˆ é™¤æ—§çš„å®¹å™¨æˆ–è€…åˆ›å»ºå®¹å™¨æ—¶æ·»åŠ â€“rmé€‰é¡¹ã€‚</p>
</blockquote>
<h2 id="9-2-é“¾æ¥å®¹å™¨"><a class="header-anchor" href="#9-2-é“¾æ¥å®¹å™¨"></a>9.2 é“¾æ¥å®¹å™¨</h2>
<p>é“¾æ¥å…è®¸å®¹å™¨é—´å®‰å…¨é€šä¿¡ï¼Œä½¿ç”¨â€“linké€‰é¡¹åˆ›å»ºé“¾æ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -d --name db training/postgres<br></code></pre></td></tr></table></figure>
<p>åŸºäº training/postgres é•œåƒåˆ›å»ºä¸€ä¸ªåä¸º db çš„å®¹å™¨ï¼Œç„¶åä¸‹é¢åˆ›å»ºä¸€ä¸ªå«åš web çš„å®¹å™¨ï¼Œå¹¶ä¸”å°†å®ƒä¸ db ç›¸äº’è¿æ¥åœ¨ä¸€èµ·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -d -P --name web --<span class="hljs-built_in">link</span> db:db training/webapp python app.py<br></code></pre></td></tr></table></figure>
<p>â€“link <name or id>:aliasé€‰é¡¹æŒ‡å®šé“¾æ¥åˆ°çš„å®¹å™¨ã€‚</p>
<p>æŸ¥çœ‹ web å®¹å™¨çš„é“¾æ¥å…³ç³»:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker inspect -f <span class="hljs-string">&quot;&#123;&#123; .HostConfig.Links &#125;&#125;&quot;</span> web<br>[/db:/web/db]<br></code></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ° web å®¹å™¨è¢«é“¾æ¥åˆ° db å®¹å™¨ä¸º/web/dbï¼Œè¿™å…è®¸ web å®¹å™¨è®¿é—® db å®¹å™¨çš„ä¿¡æ¯ã€‚</p>
<p>å®¹å™¨ä¹‹é—´çš„é“¾æ¥å®é™…åšäº†ä»€ä¹ˆï¼Ÿä¸€ä¸ªé“¾æ¥å…è®¸ä¸€ä¸ªæºå®¹å™¨æä¾›ä¿¡æ¯è®¿é—®ç»™ä¸€ä¸ªæ¥æ”¶å®¹å™¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œweb å®¹å™¨ä½œä¸ºä¸€ä¸ªæ¥æ”¶è€…ï¼Œå…è®¸è®¿é—®æºå®¹å™¨ db çš„ç›¸å…³æœåŠ¡ä¿¡æ¯ã€‚Docker åˆ›å»ºäº†ä¸€ä¸ªå®‰å…¨éš§é“è€Œä¸éœ€è¦å¯¹å¤–å…¬å¼€ä»»ä½•ç«¯å£ç»™å¤–éƒ¨å®¹å™¨ï¼Œå› æ­¤ä¸éœ€è¦åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™æ·»åŠ -pæˆ–-PæŒ‡å®šå¯¹å¤–å…¬å¼€çš„ç«¯å£ï¼Œè¿™ä¹Ÿæ˜¯é“¾æ¥å®¹å™¨çš„æœ€å¤§å¥½å¤„ï¼Œæœ¬ä¾‹ä¸º PostgreSQL æ•°æ®åº“ã€‚</p>
<p>Docker ä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹å¼æä¾›è¿æ¥ä¿¡æ¯ç»™æ¥æ”¶å®¹å™¨ï¼š</p>
<ul>
<li>ç¯å¢ƒå˜é‡</li>
<li>æ›´æ–°/etc/hostsæ–‡ä»¶</li>
</ul>
<h3 id="ç¯å¢ƒå˜é‡"><a class="header-anchor" href="#ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3>
<p>å½“ä¸¤ä¸ªå®¹å™¨é“¾æ¥ï¼ŒDocker ä¼šåœ¨ç›®æ ‡å®¹å™¨ä¸Šè®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä»¥è·å–æºå®¹å™¨çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<p>é¦–å…ˆï¼ŒDocker ä¼šåœ¨æ¯ä¸ªé€šè¿‡â€“linké€‰é¡¹æŒ‡å®šåˆ«åçš„ç›®æ ‡å®¹å™¨ä¸Šè®¾ç½®ä¸€ä¸ª<alias>_NAMEç¯å¢ƒå˜é‡ã€‚å¦‚æœä¸€ä¸ªåä¸º web çš„å®¹å™¨é€šè¿‡â€“link db:webdbè¢«é“¾æ¥åˆ°ä¸€ä¸ªåä¸º db çš„æ•°æ®åº“å®¹å™¨ï¼Œé‚£ä¹ˆ web å®¹å™¨ä¸Šä¼šè®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ä¸ºWEBDB_NAME=/web/webdb.</p>
<p>ä»¥ä¹‹å‰çš„ä¸ºä¾‹ï¼ŒDocker è¿˜ä¼šè®¾ç½®ç«¯å£å˜é‡:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run --<span class="hljs-built_in">rm</span> --name web2 --<span class="hljs-built_in">link</span> db:db training/webapp <span class="hljs-built_in">env</span><br>. . .<br>DB_NAME=/web2/db<br>DB_PORT=tcp://172.17.0.5:5432           <br>DB_PORT_5432_TCP=tcp://172.17.0.5:5432  <span class="hljs-comment"># &lt;name&gt;_PORT_&lt;port&gt;_&lt;protocol&gt; åè®®å¯ä»¥æ˜¯ TCP æˆ– UDP</span><br>DB_PORT_5432_TCP_PROTO=tcp<br>DB_PORT_5432_TCP_PORT=5432<br>DB_PORT_5432_TCP_ADDR=172.17.0.5<br>. . .<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šè¿™äº›ç¯å¢ƒå˜é‡åªè®¾ç½®ç»™å®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œç±»ä¼¼ä¸€äº›å®ˆæŠ¤è¿›ç¨‹ (å¦‚ sshd ) å½“ä»–ä»¬æ´¾ç”Ÿ shells æ—¶ä¼šæ¸…é™¤è¿™äº›å˜é‡</p>
</blockquote>
<h3 id="æ›´æ–°-etc-hostsæ–‡ä»¶"><a class="header-anchor" href="#æ›´æ–°-etc-hostsæ–‡ä»¶"></a>æ›´æ–°/etc/hostsæ–‡ä»¶</h3>
<p>é™¤äº†ç¯å¢ƒå˜é‡ï¼ŒDocker ä¼šåœ¨ç›®æ ‡å®¹å™¨ä¸Šæ·»åŠ ç›¸å…³ä¸»æœºæ¡ç›®åˆ°/etc/hostsä¸­ï¼Œä¸Šä¾‹ä¸­å°±æ˜¯ web å®¹å™¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo docker run -t -i --<span class="hljs-built_in">rm</span> --<span class="hljs-built_in">link</span> db:db training/webapp /bin/bash<br>root@aed84ee21bde:/opt/webapp<br><span class="hljs-comment"># cat /etc/hosts</span><br>172.17.0.7  aed84ee21bde<br>. . .<br>172.17.0.5  db<br></code></pre></td></tr></table></figure>
<blockquote>
<p>/etc/hostæ–‡ä»¶åœ¨æºå®¹å™¨è¢«é‡å¯ä¹‹åä¼šè‡ªåŠ¨æ›´æ–° IP åœ°å€ï¼Œè€Œç¯å¢ƒå˜é‡ä¸­çš„ IP åœ°å€åˆ™ä¸ä¼šè‡ªåŠ¨æ›´æ–°çš„ã€‚</p>
</blockquote>
<h1 id="åã€æ„å»ºç§æœ‰åº“"><a class="header-anchor" href="#åã€æ„å»ºç§æœ‰åº“"></a>åã€æ„å»ºç§æœ‰åº“</h1>
<p>Docker å®˜æ–¹æä¾›äº† docker registry çš„æ„å»ºæ–¹æ³•Â <a href="https://github.com/docker/docker-registry">docker-registry</a></p>
<h2 id="10-1-å¿«é€Ÿæ„å»º"><a class="header-anchor" href="#10-1-å¿«é€Ÿæ„å»º"></a>10.1 å¿«é€Ÿæ„å»º</h2>
<p>å¿«é€Ÿæ„å»º docker registry é€šè¿‡ä»¥ä¸‹ä¸¤æ­¥:</p>
<ul>
<li>å®‰è£… docker</li>
<li>è¿è¡Œ registry:docker run -p 5000:5000 registry</li>
</ul>
<p>è¿™ç§æ–¹æ³•é€šè¿‡ Docker hub ä½¿ç”¨å®˜æ–¹é•œåƒÂ <a href="https://registry.hub.docker.com/_/registry/">official image from the Docker hub</a></p>
<h2 id="10-2-ä¸ä½¿ç”¨å®¹å™¨æ„å»º-registry"><a class="header-anchor" href="#10-2-ä¸ä½¿ç”¨å®¹å™¨æ„å»º-registry"></a>10.2 ä¸ä½¿ç”¨å®¹å™¨æ„å»º registry</h2>
<h3 id="å®‰è£…å¿…è¦çš„è½¯ä»¶"><a class="header-anchor" href="#å®‰è£…å¿…è¦çš„è½¯ä»¶"></a>å®‰è£…å¿…è¦çš„è½¯ä»¶</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ sudo apt-get install build-essential python-dev libevent-dev python-pip liblzma-dev<br></code></pre></td></tr></table></figure>
<h3 id="é…ç½®-docker-registry"><a class="header-anchor" href="#é…ç½®-docker-registry"></a>é…ç½® docker-registry</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">sudo pip install docker-registry<br></code></pre></td></tr></table></figure>
<p>æˆ–è€… ä½¿ç”¨ github clone æ‰‹åŠ¨å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> https://github.com/dotcloud/docker-registry.git<br>$ <span class="hljs-built_in">cd</span> docker-registry/<br>$ <span class="hljs-built_in">cp</span> config/config_sample.yml config/config.yml<br>$ <span class="hljs-built_in">mkdir</span> /data/registry -p<br>$ pip install .<br></code></pre></td></tr></table></figure>
<h3 id="è¿è¡Œ"><a class="header-anchor" href="#è¿è¡Œ"></a>è¿è¡Œ</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker-registry<br></code></pre></td></tr></table></figure>
<h3 id="é«˜çº§å¯åŠ¨æ–¹å¼-ä¸æ¨è"><a class="header-anchor" href="#é«˜çº§å¯åŠ¨æ–¹å¼-ä¸æ¨è"></a>é«˜çº§å¯åŠ¨æ–¹å¼ [ä¸æ¨è]</h3>
<p>ä½¿ç”¨gunicornæ§åˆ¶:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">gunicorn -c contrib/gunicorn_config.py docker_registry.wsgi:application<br></code></pre></td></tr></table></figure>
<p>æˆ–è€…å¯¹å¤–ç›‘å¬å¼€æ”¾</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">gunicorn --access-logfile - --error-logfile - -k gevent -b 0.0.0.0:5000 -w 4 --max-requests 100 docker_registry.wsgi:application<br></code></pre></td></tr></table></figure>
<h2 id="10-3-æäº¤æŒ‡å®šå®¹å™¨åˆ°ç§æœ‰åº“"><a class="header-anchor" href="#10-3-æäº¤æŒ‡å®šå®¹å™¨åˆ°ç§æœ‰åº“"></a>10.3 æäº¤æŒ‡å®šå®¹å™¨åˆ°ç§æœ‰åº“</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ docker tag ubuntu:12.04 ç§æœ‰åº“IP:5000/ubuntu:12.04<br>$ docker push ç§æœ‰åº“IP:5000/ubuntu<br></code></pre></td></tr></table></figure>
<p>æ›´å¤šçš„é…ç½®é€‰é¡¹æ¨èé˜…è¯»å®˜æ–¹æ–‡æ¡£:</p>
<ul>
<li><a href="https://github.com/docker/docker-registry/blob/master/README.md">Docker-Registry README</a></li>
<li><a href="https://github.com/docker/docker-registry/blob/master/ADVANCED.md">Docker-Registry advanced use</a></li>
</ul>
<p>æ¥è‡ªï¼š<a href="http://opskumu.github.io/docker.html">http://opskumu.github.io/docker.html</a></p>
]]></content>
      <categories>
        <category>ä»–å±±ä¹‹çŸ³</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåºå¹•</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E5%BA%8F%E5%B9%95.html</url>
    <content><![CDATA[<hr>
<ul>
<li>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿ</p>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯å…¶ç»„ä»¶åˆ†å¸ƒåœ¨è¿ç½‘çš„è®¡ç®—æœºä¸Šï¼Œç»„ä»¶ä¹‹é—´é€šè¿‡ä¼ é€’æ¶ˆæ¯è¿›è¡Œé€šä¿¡å’Œåè°ƒçš„ç³»ç»Ÿã€‚</li>
<li>ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼
<ul>
<li>é«˜å¯ç”¨ï¼Œå¯æ‹“å±•ï¼Œæ€§ä»·æ¯”</li>
</ul>
</li>
<li>ä¸‰ä¸ªç‰¹ç‚¹ï¼šä¸å…±äº«å†…å­˜ï¼ˆéœ€è¦ç½‘ç»œä¼ è¾“ï¼‰ï¼Œä¸å…±äº«æ—¶é’Ÿï¼Œä¸å…±äº«æ“ä½œç³»ç»Ÿ</li>
<li>ä¸‰ä¸ªé—®é¢˜ï¼šç½‘ç»œé—®é¢˜ï¼Œæ—¶é’Ÿé—®é¢˜ï¼Œéƒ¨åˆ†å¤±æ•ˆpartial failure</li>
<li>è¯·æ±‚ç»“æœå­˜åœ¨ä¸‰æ€ï¼šæˆåŠŸï¼Œå¤±è´¥ï¼Œè¶…æ—¶</li>
<li>ä¸‰å¤§æ–¹å‘ï¼šåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿ
<ul>
<li>å„ä¸ªæ–¹å‘éƒ½æœ‰ä¸€äº›ç‰¹å®šçš„ç®—æ³•ï¼Œä½†æ˜¯åˆ†å¸ƒå¼å…±è¯†é—®é¢˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„é—®é¢˜ï¼šå¦‚ä½•è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¾¾æˆå…±è¯†</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å…±è¯†</p>
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†
<ul>
<li>åœ¨å…±è¯†çš„å¸®åŠ©ä¸‹ï¼Œ<strong>åˆ†å¸ƒå¼ç³»ç»Ÿå°±å¯ä»¥åƒå•ä¸€èŠ‚ç‚¹ä¸€æ ·å·¥ä½œ</strong>â€”â€”æ‰€ä»¥å…±è¯†é—®é¢˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæœ€åŸºæœ¬çš„é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ¨¡å‹</p>
<ul>
<li>ç½‘ç»œæ¨¡å—
<ul>
<li>åŒæ­¥ï¼šå“åº”æ—¶é—´æ˜¯æœ‰é™çš„</li>
<li>å¼‚æ­¥ï¼šå“åº”æ—¶é—´æ— é™çš„</li>
</ul>
</li>
<li>æ•…éšœç±»å‹
<ul>
<li>Fail-stop failures èŠ‚ç‚¹å®•æœºå¹¶åœæ­¢å“åº” (ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ not Byzantine)</li>
<li>Byzantine failures æºè‡ªâ€œæ‹œå åº­å°†å†›é—®é¢˜â€ï¼ŒèŠ‚ç‚¹å“åº”çš„æ¶ˆæ¯æ— æ³•é¢„æ–™ï¼Œå¯èƒ½çŸ›ç›¾æˆ–è€…æ— æ„ä¹‰ã€‚ä¹Ÿå°±æ˜¯é™¤äº†é€šä¿¡æ•…éšœè¿˜å¯èƒ½å­˜åœ¨æ¶ˆæ¯ç¯¡æ”¹å’Œä¼ªé€ ã€‚</li>
</ul>
</li>
<li>æ¶ˆæ¯æ¨¡å‹
<ul>
<li>å£ä¿¡å‹æ¶ˆæ¯oral messagesï¼ˆæœªç­¾åï¼ˆå£å¤´çš„ï¼‰çš„æ¶ˆæ¯ï¼‰</li>
<li>ç­¾åå‹æ¶ˆæ¯signed messages</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¼‚æ­¥ç³»ç»Ÿä¸­çš„å…±è¯†é—®é¢˜</p>
<ul>
<li>FLPä¸å¯èƒ½ç»“è®º</li>
<li>åˆ†å¸ƒå¼å…±è¯†ç®—æ³•éœ€è¦å…·æœ‰çš„ä¸¤ä¸ªå±æ€§ï¼š<strong>å®‰å…¨æ€§(safety)<strong>å’Œ</strong>æ´»æ€§(liveness)</strong>
<ul>
<li>å®‰å…¨æ€§ï¼šæ‰€æœ‰æ­£ç¡®çš„è¿›ç¨‹éƒ½è®¤åŒåŒä¸€ä¸ªå€¼</li>
<li>æ´»æ€§ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæœ€ç»ˆä¼šè®¤åŒæŸä¸€ä¸ªå€¼</li>
<li>æ¯ä¸€ä¸ªå…±è¯†ç®—æ³•è¦ä¹ˆç‰ºç‰²æ‰ä¸€ä¸ªå±æ€§ï¼Œè¦ä¹ˆæ”¾å®½å¯¹ç½‘ç»œå¼‚æ­¥çš„å‡è®¾ã€‚</li>
</ul>
</li>
<li>FLPç»“è®ºçš„å¯ç¤º
<ul>
<li>ä¸å†å°è¯•å¯»æ‰¾å¼‚æ­¥é€šä¿¡ç³»ç»Ÿä¸­ï¼Œå…±è¯†é—®é¢˜çš„å®Œå…¨æ­£ç¡®çš„è§£æ³•ã€‚å¯ä»¥æ‰¾åˆ°ä¸€äº›æ–¹æ³•ï¼Œç»•å¼€FLPä¸å¯èƒ½ï¼Œæ»¡è¶³å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½è¾¾æˆå…±è¯†
<ul>
<li>æ•…éšœå±è”½Fault masking
<ul>
<li>æ•…éšœå±è”½å‡è®¾æ•…éšœçš„è¿›ç¨‹æœ€ç»ˆä¼šæ¢å¤ï¼Œå¹¶æ‰¾åˆ°ä¸€ç§é‡æ–°åŠ å…¥åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ–¹å¼ã€‚å¦‚æœæ²¡æœ‰æ”¶åˆ°æ¥è‡ªæŸä¸ªè¿›ç¨‹çš„æ¶ˆæ¯ï¼Œå°±ä¸€ç›´ç­‰å¾…ç›´åˆ°æ”¶åˆ°é¢„æœŸçš„æ¶ˆæ¯ã€‚</li>
<li>ä¾‹å¦‚ï¼Œä¸¤é˜¶æ®µæäº¤äº‹åŠ¡ä½¿ç”¨æŒä¹…å­˜å‚¨ï¼Œèƒ½å¤Ÿä»å´©æºƒä¸­æ¢å¤ã€‚</li>
</ul>
</li>
<li>æ•…éšœæ£€æµ‹Failure detectors</li>
<li>éšæœºæ€§ç®—æ³•Non-Determinism</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>åŒæ­¥ç³»ç»Ÿä¸­çš„å…±è¯†é—®é¢˜</p>
<ul>
<li>æˆ‘ä»¬ç†ŸçŸ¥çš„ Paxos åœ¨å¼‚æ­¥ç³»ç»Ÿä¸­ï¼Œç”±äº<strong>æ´»é”</strong>çš„å­˜åœ¨ï¼Œå¹¶æ²¡æœ‰å®Œå…¨è§£å†³å…±è¯†é—®é¢˜ï¼ˆlivenessä¸æ»¡è¶³ï¼‰ã€‚ä½† Paxos è¢«å¹¿æ³›åº”ç”¨åœ¨å„ç§åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå°±æ˜¯å› ä¸ºåœ¨è¾¾æˆå…±è¯†ä¹‹å‰ï¼Œç³»ç»Ÿå¹¶æ²¡æœ‰é‚£ä¹ˆâ€œå¼‚æ­¥â€ï¼Œè¿˜æ˜¯æœ‰æå¤§æ¦‚ç‡è¾¾æˆå…±è¯†çš„ã€‚</li>
<li><strong>åŒæ­¥ç³»ç»Ÿä¸­ï¼Œå¦‚æœ N ä¸ªè¿›ç¨‹ä¸­æœ€å¤šæœ‰ f ä¸ªä¼šå‡ºç°å´©æºƒæ•…éšœï¼Œé‚£ä¹ˆç»è¿‡ f + 1 è½®æ¶ˆæ¯ä¼ é€’åå³å¯è¾¾æˆå…±è¯†ã€‚</strong> ã€ŠAuthenticated Algorithms for Byzantine Agreementã€‹</li>
</ul>
</li>
<li>
<p>åˆ†å¸ƒå¼ç†è®ºå‘å±•å†ç¨‹</p>
<ul>
<li>
<p>è´¹æ—åˆ†ç±»æ³•ï¼ˆFlynnâ€™s Taxonomyï¼‰ï¼ŒMIMDå¼•å‡ºå¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿ</p>
</li>
<li>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸‰ä¸ªé—®é¢˜ä¸ä¸‰ä¸ªæ–¹å‘</p>
</li>
<li>
<p>é€»è¾‘æ—¶é’Ÿã€‚Lamportçš„ã€ŠTime, Clocks and the Ordering of Events in a Distributed Systemã€‹</p>
</li>
<li>
<p>æ‹œå åº­å°†å†›é—®é¢˜ã€‚Lamportçš„ã€ŠByzantine Generals Problemã€‹</p>
</li>
<li>
<p>åˆ†å¸ƒå¼çŠ¶æ€æœºå‰¯æœ¬</p>
</li>
<li>
<p>åˆ†å¸ƒå¼å¿«ç…§</p>
</li>
<li>
<p>FLPç»“è®ºã€‚ã€ŠImpossibility of Distributed Consensus with One Faulty Processã€‹</p>
<ul>
<li>è¯æ˜äº†ï¼šåœ¨ä¸€ä¸ªå¼‚æ­¥ç³»ç»Ÿä¸­ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‡ºäº†æ•…éšœï¼Œä¹Ÿæ²¡æœ‰ç®—æ³•èƒ½å¤Ÿ<strong>ä¿è¯</strong>è¾¾æˆå…±è¯†ã€‚</li>
<li>æ³¨æ„ï¼šä¸æ˜¯è¯´åªè¦æœ‰ä¸€ä¸ªè¿›ç¨‹æ•…éšœå°±ä¸èƒ½è¾¾æˆå…±è¯†ï¼Œè€Œæ˜¯è¯´æ— æ³•ç¡®ä¿è¾¾æˆå…±è¯†ã€‚</li>
</ul>
</li>
<li>
<p>Paxosç®—æ³•</p>
</li>
<li>
<p>PBFT</p>
</li>
<li>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºæœ¬é—®é¢˜ï¼šå…±è¯†</p>
</li>
</ul>
</li>
<li>
<p>æ‹œå åº­å°†å†›é—®é¢˜</p>
<ul>
<li>åˆ†å¸ƒå¼å…±è¯†é—®é¢˜
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†
<ul>
<li>ç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹å¯¹æŸä¸ªå€¼è¾¾æˆä¸€è‡´</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†</li>
</ul>
</li>
<li>å®¹é”™ç®—æ³•åˆ†ä¸ºä¸¤ç±»</li>
<li>æœ‰æ— æ¶æ„è¡Œä¸ºåŒºåˆ†ä½¿ç”¨BFTè¿˜æ˜¯CFT</li>
</ul>
</li>
<li>
<p>Poxasæ˜¯å±äºCFTçš„ä¸€ç§</p>
</li>
<li>
<p>Poxasé‡è¦æ€§</p>
<ul>
<li>Chubbyä½œè€…MikeBurrowsè¯´è¿‡ï¼Œè¿™ä¸–ç•Œä¸Šåªæœ‰ä¸€ç§ä¸€è‡´æ€§å…±è¯†ç®—æ³•ï¼Œé‚£å°±æ˜¯Paxos</li>
</ul>
</li>
</ul>
<hr>
<p>åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œå…±è¯†Consensusé—®é¢˜æ˜¯æœ€é‡è¦çš„ï¼Œæœ€åŸºæœ¬çš„é—®é¢˜ã€‚å…±è¯†ä½¿å¾—åˆ†å¸ƒå¼ç³»ç»Ÿè¡¨ç°å‡ºä¸€è‡´çš„è¡Œä¸ºï¼Œå°±åƒæ˜¯å•ä¸€èŠ‚ç‚¹ä¸€æ ·ã€‚Lamportæå‡ºçš„æ‹œå åº­å°†å†›é—®é¢˜ï¼ˆThe Byzantine Generals Problemï¼‰ï¼Œå€ŸåŠ©æ‹œå åº­å°†å†›çš„æ•…äº‹ï¼Œå¾ˆå¥½åœ°æŠ½è±¡äº†åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„å…±è¯†é—®é¢˜ï¼Œå¹¶ä¸”æ¢è®¨å’Œè®ºè¯äº†è§£å†³åŠæ³•ã€‚</p>
<p>æ‹œå åº­å°†å†›é—®é¢˜æè¿°çš„æ˜¯æœ€ä¸ºå¤æ‚çš„ä¸€ç§åˆ†å¸ƒå¼æ•…éšœåœºæ™¯ï¼Œä¸ä»…å«æœ‰é€šä¿¡æ•…éšœï¼ˆæ¶ˆæ¯ä¸¢å¤±ï¼Œé‡å¤ï¼‰ï¼Œè€Œä¸”åŒ…å«æ¶æ„è¡Œä¸ºï¼ˆç¯¡æ”¹æ¶ˆæ¯ï¼Œä¼ªé€ æ¶ˆæ¯ï¼‰ã€‚è§£å†³æ‹œå åº­å°†å†›é—®é¢˜çš„ç®—æ³•ç§°ä¹‹ä¸ºæ‹œå åº­å®¹é”™ç®—æ³•ï¼ˆByzantine Fault Toleranceï¼ŒBFTï¼‰ã€‚å¯¹äºè§£å†³ä¸å«æœ‰æ¶æ„è¡Œä¸ºåœºæ™¯ä¸‹çš„å®¹é”™ç®—æ³•ï¼Œç»Ÿç§°ä¸ºéæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯æ•…éšœå®¹é”™ç®—æ³•ï¼ˆCrash Fault Tolerance, CFTï¼‰ã€‚äº‹å®ä¸Šï¼Œè®¡ç®—æœºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯CFTã€‚</p>
<ul>
<li>æ‹œå åº­å®¹é”™ç®—æ³• BFT
<ul>
<li>èŠ‚ç‚¹é—´å­˜åœ¨é€šä¿¡æ•…éšœï¼Œæ¶æ„è¡Œä¸ºçš„åœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¾¾æˆå…±è¯†ã€‚</li>
<li>è¿™ç§æ•…éšœåœºæ™¯ï¼Œç§°ä¹‹ä¸ºæ‹œå åº­æ•…éšœ</li>
<li>å¸¸ç”¨äºå¼€æ”¾å¼åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚åŒºå—é“¾æŠ€æœ¯</li>
<li>å¸¸è§ç®—æ³•ï¼šå£ä¿¡å‹æ¶ˆæ¯ç®—æ³•ï¼Œç­¾åå‹æ¶ˆæ¯ç®—æ³•ï¼ŒPBFTç®—æ³•ï¼ŒPoWç®—æ³•</li>
</ul>
</li>
<li>éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œæ•…éšœå®¹é”™ç®—æ³• CFG
<ul>
<li>èŠ‚ç‚¹é—´ä¸å­˜åœ¨æ¶æ„è¡Œä¸ºçš„åœºæ™¯ä¸‹ï¼ˆéæ‹œå åº­æ•…éšœï¼‰ï¼Œå¦‚ä½•è¾¾æˆå…±è¯†</li>
<li>å¸¸è§ç®—æ³•ï¼šPaxosç®—æ³•ï¼ŒRaftç®—æ³•ï¼ŒZABç®—æ³•</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>BasicPaxosç®—æ³•</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/BasicPaxos%E7%AE%97%E6%B3%95.html</url>
    <content><![CDATA[<hr>
<ul>
<li>
<p>CFT éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œ æ•…éšœå®¹é”™ç®—æ³•</p>
</li>
<li>
<p>ç›®çš„</p>
<ul>
<li>å¤šèŠ‚ç‚¹å°±æŸä¸€ä¸ªå€¼è¾¾æˆå…±è¯†</li>
<li>è¾¾æˆäº†å…±è¯†åï¼Œå€¼å°±ä¸ä¼šå†å˜äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜æ•°æ®çš„å€¼ï¼Œå¯ä»¥å®ç°çŠ¶æ€æœºï¼Œå’Œæè®®æ–°çš„æŒ‡ä»¤ã€‚</li>
</ul>
</li>
<li>
<p>ä¸‰ä¸ªè§’è‰²</p>
<ul>
<li>Proposerï¼ŒAcceptorï¼ŒLearner</li>
</ul>
</li>
<li>
<p>å•è°ƒé€’å¢çš„ææ¡ˆç¼–å·</p>
<ul>
<li>è®ºæ–‡æåˆ°äº†æ€è·¯ã€‚ç‹¬ç«‹ã€é€’å¢ã€å­˜å‚¨åœ¨å¯é æ€§è®¾å¤‡ä¸­ã€‚å…·ä½“ç»†èŠ‚å®ç°ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftçš„CurrentTermçš„å®ç°ï¼ˆRaft.setCurrentTerm()ã€raftState.getCurrentTerm()ã€raftState.setCurrentTerm()ï¼‰ï¼ŒåŸå­ã€é€’å¢ã€æŒä¹…å­˜å‚¨ã€‚</li>
</ul>
</li>
<li>
<p>äºŒé˜¶æ®µæäº¤æ€æƒ³</p>
<ul>
<li>å‡†å¤‡é˜¶æ®µ
<ul>
<li>å„ä¸ªèŠ‚ç‚¹ä¾æ®è‡ªèº«æƒ…å†µï¼Œå“åº”â€œå‡†å¤‡è¯·æ±‚â€ä¸­çš„ææ¡ˆ</li>
<li>è‹¥æ”¶åˆ°çš„ææ¡ˆç¼–å·å°äºç­‰äº å·²æ”¶åˆ°çš„â€œå‡†å¤‡è¯·æ±‚â€ä¸­æœ€å¤§çš„ææ¡ˆç¼–å·ï¼Œåˆ™ä¸å“åº”</li>
<li>è‹¥ä¹‹å‰å·²ç»æ¥å—äº†æŸä¸ªææ¡ˆï¼Œé‚£ä¹ˆè¿™æ¬¡â€œå‡†å¤‡è¯·æ±‚â€çš„å“åº”ä¸­ï¼Œä¼šåŒ…å«å·²ç»æ¥å—çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä¿¡æ¯ã€‚ï¼ˆProposerä¼šæ ¹æ®å“åº”å¤„ç†æ¥ä¸‹æ¥â€œæ¥å—è¯·æ±‚â€çš„ææ¡ˆå€¼ï¼Œå¦‚æœå¤§å¤šæ•°èŠ‚ç‚¹å·²ç»æ¥å—äº†ä¸€ä¸ªä¸€è‡´çš„å€¼ï¼Œåˆ™ä»¥è¿™ä¸ªå€¼ä¸ºå‡†ã€‚ï¼‰</li>
</ul>
</li>
<li>æ¥å—é˜¶æ®µ
<ul>
<li>å„ä¸ªèŠ‚ç‚¹ä¾æ®è‡ªèº«æƒ…å†µï¼Œæ¥æ”¶â€œæ¥å—è¯·æ±‚â€ä¸­çš„ææ¡ˆ</li>
<li>è‹¥â€œæ¥å—è¯·æ±‚â€ä¸­ææ¡ˆç¼–å·å°äºå·²ç»å“åº”çš„<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œåˆ™ä¼šæ‹’ç»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¤§å¤šæ•°åŸåˆ™ï¼Œè€Œä¸æ˜¯å…¨éƒ¨</p>
<ul>
<li>æä¾›äº†ä¸€å®šçš„å®¹é”™èƒ½åŠ›</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿ
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯å…¶ç»„ä»¶åˆ†å¸ƒåœ¨è¿ç½‘çš„è®¡ç®—æœºä¸Šï¼Œç»„ä»¶ä¹‹é—´é€šè¿‡ä¼ é€’æ¶ˆæ¯è¿›è¡Œé€šä¿¡å’Œåè°ƒçš„ç³»ç»Ÿã€‚</li>
<li>ä¸‰ä¸ªç‰¹ç‚¹ï¼šä¸å…±äº«å†…å­˜ï¼ˆéœ€è¦ç½‘ç»œä¼ è¾“ï¼‰ï¼Œä¸å…±äº«æ—¶é’Ÿï¼Œä¸å…±äº«æ“ä½œç³»ç»Ÿ</li>
<li>ä¸‰ä¸ªé—®é¢˜ï¼šç½‘ç»œé—®é¢˜ï¼Œæ—¶é’Ÿé—®é¢˜ï¼Œéƒ¨åˆ†å¤±æ•ˆpartial failure</li>
<li>è¯·æ±‚ç»“æœå­˜åœ¨ä¸‰æ€ï¼šæˆåŠŸï¼Œå¤±è´¥ï¼Œè¶…æ—¶</li>
<li>ä¸‰å¤§æ–¹å‘ï¼šåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿ
<ul>
<li>å„ä¸ªæ–¹å‘éƒ½æœ‰ä¸€äº›ç‰¹å®šçš„ç®—æ³•ï¼Œä½†æ˜¯åˆ†å¸ƒå¼å…±è¯†é—®é¢˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„é—®é¢˜ï¼šå¦‚ä½•è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¾¾æˆå…±è¯†</li>
</ul>
</li>
</ul>
</li>
<li>å…±è¯†
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†</li>
<li></li>
</ul>
</li>
<li>æ‹œå åº­å°†å†›é—®é¢˜
<ul>
<li>åˆ†å¸ƒå¼å…±è¯†é—®é¢˜
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†
<ul>
<li>ç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹å¯¹æŸä¸ªå€¼è¾¾æˆä¸€è‡´</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†</li>
</ul>
</li>
<li>å®¹é”™ç®—æ³•åˆ†ä¸ºä¸¤ç±»</li>
<li>æœ‰æ— æ¶æ„è¡Œä¸ºåŒºåˆ†ä½¿ç”¨BFTè¿˜æ˜¯CFT</li>
</ul>
</li>
<li>Paxosæ˜¯å±äºCFTçš„ä¸€ç§</li>
<li>Paxosé‡è¦æ€§
<ul>
<li>Chubbyä½œè€…MikeBurrowsè¯´è¿‡ï¼Œè¿™ä¸–ç•Œä¸Šåªæœ‰ä¸€ç§ä¸€è‡´æ€§å…±è¯†ç®—æ³•ï¼Œé‚£å°±æ˜¯Paxos</li>
</ul>
</li>
</ul>
<hr>
<p>Paxosç®—æ³•åŒ…å«ä¸¤éƒ¨åˆ†</p>
<ul>
<li>
<p>ä¸€ä¸ªæ˜¯Basic Paxosç®—æ³•ï¼Œæè¿°å¤šèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±ä¸€ä¸ªå€¼è¾¾æˆå…±è¯†ã€‚</p>
</li>
<li>
<p>ä¸€ä¸ªæ˜¯Multi Paxosæ€æƒ³ï¼Œæè¿°å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚</p>
</li>
</ul>
<p>å…ˆå¤§è‡´äº†è§£ä¸€ä¸‹æ‹œå åº­å°†å†›é—®é¢˜ã€‚</p>
<p>æ‹œå åº­å°†å†›é—®é¢˜ï¼ˆThe Byzantine Generals Problemï¼‰æ˜¯Lamportå€ŸåŠ©ä¸€ä¸ªå°†å†›çš„æ•…äº‹æ¥å±•ç°<strong>åˆ†å¸ƒå¼å…±è¯†é—®é¢˜</strong>ï¼Œå¹¶ä¸”æ¢è®¨å’Œè®ºè¯äº†è§£å†³çš„åŠæ³•ã€‚å¯ä»¥è®¤ä¸ºæ‹œå åº­å°†å†›é—®é¢˜æ˜¯åˆ†å¸ƒå¼é¢†åŸŸæœ€å¤æ‚çš„ä¸€ä¸ªå®¹é”™æ¨¡å‹ï¼Œå®ƒæä¾›äº†åˆ†å¸ƒå¼å…±è¯†é—®é¢˜çš„è§£å†³æ€è·¯ã€‚</p>
<p>ç®€å•è¯´ï¼Œæ‹œå åº­å°†å†›é—®é¢˜æè¿°äº†ä¸€ç§åˆ†å¸ƒå¼æ•…éšœåœºæ™¯ï¼Œé™¤äº†å­˜åœ¨**é€šä¿¡æ•…éšœï¼ˆcrash faultï¼‰<strong>è¡Œä¸ºï¼Œè¿˜å­˜åœ¨</strong>æ¶æ„è¡Œä¸ºï¼ˆcorruptï¼‰**çš„ä¸€ä¸ªåœºæ™¯ã€‚</p>
<ul>
<li>
<p>é€šä¿¡æ•…éšœcrash faultï¼šæ¶ˆæ¯ä¸¢å¤±ï¼Œæ¶ˆæ¯é‡å¤ç­‰</p>
</li>
<li>
<p>æ¶æ„è¡Œä¸ºcorruptï¼šç¯¡æ”¹æ¶ˆæ¯ï¼Œä¼ªé€ æ¶ˆæ¯ç­‰</p>
</li>
</ul>
<p>æˆ‘ä»¬ä¾æ®æ˜¯å¦åœºæ™¯ä¸­æ˜¯å¦å­˜åœ¨æ¶æ„è¡Œä¸ºï¼Œå¯ä»¥å°†å®¹é”™ç®—æ³•</p>
<ul>
<li>å¯¹äºå­˜åœ¨æ¶æ„è¡Œä¸ºçš„åœºæ™¯ï¼ˆå¦‚åŒºå—é“¾ï¼‰ï¼Œè¦è§£å†³å…±è¯†é—®é¢˜ï¼Œå¿…é¡»ä½¿ç”¨æ‹œå åº­å®¹é”™ç®—æ³•ï¼ˆByzantine Fault Toleranceï¼ŒBFTï¼‰</li>
<li>å¯¹äºä¸å­˜åœ¨æ¶æ„è¡Œä¸ºï¼Œåªå­˜åœ¨é€šä¿¡æ•…éšœè¡Œä¸ºçš„åœºæ™¯ï¼Œè¦è§£å†³å…±è¯†é—®é¢˜ï¼Œå°±å¯ä»¥ä½¿ç”¨éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯æ•…éšœå®¹é”™ç®—æ³•ï¼ˆCrash Fault Tolerance, CFTï¼‰</li>
</ul>
<p>Paxosç®—æ³•æ˜¯CFTç®—æ³•çš„ä¸€ç§ï¼Œå®ƒè§£å†³çš„æ˜¯å½“é›†ç¾¤èŠ‚ç‚¹ä¸­ä¸å­˜åœ¨æ¶æ„è¡Œä¸ºï¼ˆç¯¡æ”¹ï¼Œä¼ªé€ ä¿¡æ¯ï¼‰ï¼Œåªå¯èƒ½å‡ºç°é€šä¿¡æ•…éšœï¼ˆæ¶ˆæ¯ä¸¢å¤±ï¼Œé‡å¤ï¼‰æƒ…å†µä¸‹çš„å…±è¯†é—®é¢˜ã€‚</p>
<p>è§’è‰²ï¼šClient, Proposerï¼ŒAcceptorï¼Œ Learner</p>
<p>Proposal, proposal identified number,</p>
<p>Basic Paxosæ˜¯ä¸€ä¸ªç»å…¸çš„ä¸¤é˜¶æ®µæäº¤ã€‚</p>
<blockquote>
<p>Phase 1<br>
Phase 1a: Prepare<br>
A Proposer creates a message, which we call a â€œPrepareâ€, identified with a number n. Note that n is not the value to be proposed and maybe agreed on, but just a number which uniquely identifies this initial message by the proposer (to be sent to the acceptors). The number n must be greater than any number used in any of the previous Prepare messages by this Proposer. Then, it sends the Prepare message containing n to a Quorum of Acceptors. Note that the Prepare message only contains the number n (that is, it does not have to contain e.g. the proposed value, often denoted by v). The Proposer decides who is in the Quorum[how?]. A Proposer should not initiate Paxos if it cannot communicate with at least a Quorum of Acceptors.</p>
<p>ä¸€ä¸ªProposeråˆ›å»ºä¸€ä¸ªPrepareæ¶ˆæ¯ï¼Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„nå”¯ä¸€æ ‡è¯†ï¼Œè®°åšPrepare[n,]ã€‚è¦æ³¨æ„ï¼Œnä¸æ˜¯è¢«æè®®çš„å€¼ï¼Œåªæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¢«proposerç”¨æ¥å”¯ä¸€æ ‡è¯†è¿™æ¡åˆå§‹æ¶ˆæ¯ï¼ˆå‘å¾€å„ä¸ªacceptorï¼‰çš„æ•°å­—è€Œå·²ã€‚æ•°å­—nå¯¹äºè¿™ä¸ªproposerè€Œè¨€ï¼Œå¿…é¡»æ˜¯é€’å¢çš„æœªè¢«ä½¿ç”¨è¿‡çš„ã€‚ç„¶åè¿™ä¸ªPrepare[n]æ¶ˆæ¯ä¼šè¢«å‘å¾€æ³•å®šæ•°é‡çš„acceptorã€‚æ³¨æ„è¿™ä¸ªæ¶ˆæ¯åªæºå¸¦æ•°å­—nï¼Œå¹¶ä¸åŒ…å«æè®®å€¼vã€‚</p>
<p>Phase 1b: Promise<br>
Any of the Acceptors waits for a Prepare message from any of the Proposers. If an Acceptor receives a Prepare message, the Acceptor must look at the identifier number n of the just received Prepare message. There are two cases.<br>
If n is higher than every previous proposal number received, from any of the Proposers, by the Acceptor, then the Acceptor must return a message, which we call a â€œPromiseâ€, to the Proposer, to ignore all future proposals having a number less than n. If the Acceptor accepted a proposal at some point in the past, it must include the previous proposal number, say m, and the corresponding accepted value, say w, in its response to the Proposer.<br>
Otherwise (that is, n is less than or equal to any previous proposal number received from any Proposer by the Acceptor) the Acceptor can ignore the received proposal. It does not have to answer in this case for Paxos to work. However, for the sake of optimization, sending a denial (Nack) response would tell the Proposer that it can stop its attempt to create consensus with proposal n.</p>
<p>è‹¥ä¸€ä¸ªAcceptoræ¥æ”¶åˆ°äº†prepare[n,]æ¶ˆæ¯ï¼Œå®ƒä¼šæŸ¥çœ‹è¿™ä¸ªææ¡ˆå·næ˜¯å¦æ˜¯å®ƒä¹‹å‰æ”¶åˆ°çš„æ‰€æœ‰æ¶ˆæ¯ä¸­æœ€å¤§çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå“åº”ç»™proposerï¼Œè®°åšpromise[]ã€‚å¹¶ä¸”ä¼šå¿½ç•¥ä¹‹åæ”¶åˆ°çš„ææ¡ˆå·å°äºnçš„æ‰€æœ‰ææ¡ˆã€‚å¦‚æœè¿™ä¸ªaceeptoråœ¨ä¹‹å‰æ¥å—äº†(accepted)ä¸€ä¸ªææ¡ˆ[m,w]ï¼Œé‚£ä¹ˆpromiseå“åº”å°±å¿…é¡»å¸¦ä¸Šè¿™ä¸ªææ¡ˆä¿¡æ¯ï¼Œè®°åšpromise[m,w]ã€‚</p>
<p>å¦åˆ™ï¼Œå¦‚æœacceptoræ”¶åˆ°çš„ææ¡ˆå·å°äºæˆ–ç­‰äºä¹‹å‰æ”¶åˆ°çš„ä»»ä½•ææ¡ˆå·ï¼Œacceptorå°±ä¼šå¿½ç•¥æ‰è¿™ä¸ªæ¶ˆæ¯ã€‚å‡ºäºä¼˜åŒ–çš„è€ƒè™‘ï¼Œacceptorä¼šå“åº”ä¸€ä¸ªæ‹’ç»ç»™proposerï¼Œè®©proposerä¸è¦å†ä½¿ç”¨nä½œä¸ºææ¡ˆå·ã€‚</p>
<p>Phase 2<br>
Phase 2a: Accept<br>
If a Proposer receives a majority of Promises from a Quorum of Acceptors, it needs to set a value v to its proposal. If any Acceptors had previously accepted any proposal, then theyâ€™ll have sent their values to the Proposer, who now must set the value of its proposal, v, to the value associated with the highest proposal number reported by the Acceptors, letâ€™s call it z. If none of the Acceptors had accepted a proposal up to this point, then the Proposer may choose the value it originally wanted to propose, say x.[19]<br>
The Proposer sends an Accept message, (n, v), to a Quorum of Acceptors with the chosen value for its proposal, v, and the proposal number n (which is the same as the number contained in the Prepare message previously sent to the Acceptors). So, the Accept message is either (n, v=z) or, in case none of the Acceptors previously accepted a value, (n, v=x).<br>
This Accept message should be interpreted as a â€œrequestâ€, as in â€œAccept this proposal, please!â€.</p>
<p>å¦‚æœä¸€ä¸ªproposeræ”¶åˆ°äº†å¤§éƒ¨åˆ†acceptorçš„promiseæ¶ˆæ¯ï¼Œ</p>
<p>Phase 2b: Accepted<br>
If an Acceptor receives an Accept message, (n, v), from a Proposer, it must accept it if and only if it has not already promised (in Phase 1b of the Paxos protocol) to only consider proposals having an identifier greater than n.<br>
If the Acceptor has not already promised (in Phase 1b) to only consider proposals having an identifier greater than n, it should register the value v (of the just received Accept message) as the accepted value (of the Protocol), and send an Accepted message to the Proposer and every Learner (which can typically be the Proposers themselves).<br>
Else, it can ignore the Accept message or request.<br>
Note that an Acceptor can accept multiple proposals. This can happen when another Proposer, unaware of the new value being decided, starts a new round with a higher identification number n. In that case, the Acceptor can promise and later accept the new proposed value even though it has accepted another one earlier. These proposals may even have different values in the presence of certain failures[example needed]. However, the Paxos protocol will guarantee that the Acceptors will ultimately agree on a single value.</p>
</blockquote>
<p>ç¬¬ä¸€é˜¶æ®µï¼š</p>
<ul>
<li>prepareå‡†å¤‡ï¼šproposerå‘acceptorsæå‡ºä¸€ä¸ªææ¡ˆ</li>
<li>promiseæ‰¿è¯ºï¼šacceptoræ‰¿è¯ºåªæ¥å—æœ€å¤§ææ¡ˆå·çš„ææ¡ˆ</li>
</ul>
<p>ç¬¬äºŒé˜¶æ®µï¼š</p>
<ul>
<li>accept</li>
<li>accepted</li>
</ul>
<ol>
<li>å¦‚æœ<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œå°äºç­‰äºæ¥å—è€…å·²ç»å“åº”çš„å‡†å¤‡è¯·æ±‚çš„ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºä¸å“åº”è¿™ä¸ªå‡†å¤‡è¯·æ±‚ï¼›</li>
<li>å¦‚æœ<strong>æ¥å—è¯·æ±‚</strong>ä¸­çš„ææ¡ˆçš„ææ¡ˆç¼–å·ï¼Œå°äºæ¥å—è€…å·²ç»å“åº”çš„<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºä¸é€šè¿‡è¿™ä¸ªææ¡ˆï¼›</li>
<li>å¦‚æœæ¥å—è€…ä¹‹å‰æœ‰é€šè¿‡ææ¡ˆï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºï¼Œä¼šåœ¨<strong>å‡†å¤‡è¯·æ±‚</strong>çš„å“åº”ä¸­ï¼ŒåŒ…å«å·²ç»é€šè¿‡çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä¿¡æ¯ã€‚</li>
</ol>
<p>æ€ä¹ˆä¿éšœææ¡ˆå·ä¸é‡å¤å‘¢ï¼Ÿ</p>
<p>å¯ä»¥é€šè¿‡ç‹¬ç«‹å•è°ƒé€’å¢ã€éšæœºè¶…æ—¶ï¼Œæ¥é¿å…é‡å¤å†²çªï¼Œæ¯”å¦‚ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftå¯¹CurrentTermçš„å®ç°ã€‚</p>
<p>@Tung ç›®å‰çœ‹æ¥ï¼Œæ¯”è¾ƒå…³é”®çš„å°±æ˜¯ææ¡ˆç¼–å·çš„å•è°ƒé€’å¢ï¼Œä»¥åŠå¤§å¤šæ•°åŸåˆ™</p>
<p>Paxosèƒ½ä¿è¯ä¸€æ—¦è¾¾æˆå…±è¯†ï¼Œåé¢é™¤äº†ææ¡ˆç¼–å·å˜å¤§ä¹‹å¤–ï¼Œææ¡ˆçš„å€¼ä¸å˜ï¼Œè€Œä¸”2pcçš„ç¬¬ä¸€é˜¶æ®µå°±èƒ½æ„ŸçŸ¥åˆ°å·²ç»é€šè¿‡çš„ææ¡ˆçš„ä¿¡æ¯ã€‚</p>
<p>æ··æ·†äº†å‰¯æœ¬å’Œå…±è¯†çš„æ¦‚å¿µï¼Ÿï¼Œé›†ç¾¤å°±æŸä¸ªææ¡ˆå½¢æˆå¤§å¤šæ•°åè¾¾æˆäº†å…±è¯†ï¼Œä½†æ˜¯å‰¯æœ¬ä¸ä¿è¯ä¸€è‡´ï¼Œåœ¨2f+1ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é‡Œï¼Œåªè¦f+1ä¸ªèŠ‚ç‚¹æ¥å—æŸä¸ªææ¡ˆkï¼Œåˆ™å°±kè¾¾æˆå…±è¯†ï¼Œä½†æ˜¯å‰¯æœ¬åªä¿è¯è‡³å°‘f+1ä¸ªæ˜¯æ­£ç¡®çš„ææ¡ˆï¼Œå…¶ä½™çš„èŠ‚ç‚¹ä¸Šçš„ææ¡ˆä¸åšä¿è¯ã€‚ç®€å•çš„è¯´æ³•æ˜¯æ­¤æ—¶éœ€è¦è·å–æŸä¸ªææ¡ˆçš„è¯ï¼Œéœ€è¦ä»2f+1ä¸ªèŠ‚ç‚¹ä¸Šéƒ½è·å–ä¸€æ¬¡ï¼Œå†ç¡®è®¤é›†ç¾¤æäº¤çš„ææ¡ˆæ˜¯å“ªä¸ªï¼Œæ‰ç®—æ˜¯ä»é›†ç¾¤çš„ä¸€æ¬¡è¯»å–è¿‡ç¨‹ã€‚</p>
<p><img src="https://tximgcdn.tung7.com/BasicPaxos%E7%AE%97%E6%B3%95/BasicPaxos%E7%AE%97%E6%B3%95_20210807005639_357847.png" alt="image-20210807005634094"></p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>MultiPaxosæ€æƒ³</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MultiPaxos%E6%80%9D%E6%83%B3.html</url>
    <content><![CDATA[<p>å…°ä¼¯ç‰¹Lamportæåˆ°çš„ Multi-Paxos æ˜¯<strong>ä¸€ç§æ€æƒ³</strong>ï¼Œä¸æ˜¯ç®—æ³•ã€‚</p>
<p>è€Œ Multi-Paxos ç®—æ³•æ˜¯<strong>ä¸€ä¸ªç»Ÿç§°</strong>ï¼Œå®ƒæ˜¯æŒ‡åŸºäº Multi-Paxos æ€æƒ³ï¼Œé€šè¿‡å¤šä¸ª Basic Paxos å®ä¾‹å®ç°ä¸€ç³»åˆ—å€¼çš„å…±è¯†çš„ç®—æ³•ï¼ˆæ¯”å¦‚ Chubby çš„ Multi-Paxos å®ç°ã€Raft ç®—æ³•ç­‰ï¼‰</p>
<p>ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å¦‚æœå¤šä¸ªæè®®è€…åŒæ—¶æäº¤ææ¡ˆï¼Œå¯èƒ½å‡ºç°å› ä¸ºææ¡ˆç¼–å·å†²çªï¼Œä¹Ÿå¯èƒ½å‡ºç°æ²¡æœ‰æè®®è€…èƒ½å¤Ÿæ”¶åˆ°å¤§å¤šæ•°å“åº”ï¼Œæœ€ç»ˆä¸»å¤‡å¤±è´¥é‡æ–°åå•†ã€‚</li>
<li>å‡†å¤‡é˜¶æ®µå’Œæ¥å—é˜¶æ®µä¸¤è½®çš„å¾€è¿”æ¶ˆæ¯å¤šï¼Œæ€§èƒ½å’Œå»¶è¿Ÿé—®é¢˜ã€‚
<ol>
<li>å…°ä¼¯ç‰¹æåˆ°ï¼šâ€œå½“é¢†å¯¼è€…å¤„äºç¨³å®šçŠ¶æ€æ—¶ï¼Œçœæ‰å‡†å¤‡é˜¶æ®µï¼Œç›´æ¥è¿›å…¥æ¥å—é˜¶æ®µâ€è¿™ä¸ªä¼˜åŒ–æœºåˆ¶</li>
</ol>
</li>
</ol>
<ul>
<li>
<p>å¼•å…¥Leader</p>
<ul>
<li>ä½œä¸ºå”¯ä¸€Proposerï¼Œ</li>
<li>é¿å…å¤šä¸ªèŠ‚ç‚¹ä½œä¸ºProposåŒæ—¶ææ¡ˆï¼Œä½¿å¾—æ²¡æœ‰æè®®è€…èƒ½å¤Ÿè·å¾—å¤§å¤šæ•°å“åº”ï¼Œå¯¼è‡´å‡†å¤‡é˜¶æ®µå¤±è´¥ï¼Œé‡æ–°åå•†çš„æƒ…å†µ</li>
<li>åœ¨è®ºæ–‡ä¸­ï¼Œå…°ä¼¯ç‰¹æ²¡æœ‰è¯´å¦‚ä½•é€‰ä¸¾é¢†å¯¼è€…ï¼Œéœ€è¦æˆ‘ä»¬åœ¨å®ç° Multi-Paxos ç®—æ³•çš„æ—¶å€™è‡ªå·±å®ç°ã€‚</li>
<li>å¯ä»¥é€šè¿‡BasicPaxosç®—æ³•è¿›è¡Œé€‰ä¸»ã€‚</li>
</ul>
</li>
<li>
<p>çœç•¥å‡†å¤‡é˜¶æ®µ</p>
<ul>
<li>å½“Leaderç¨³å®šæ—¶ï¼Œå¯ä»¥çœç•¥å‡†å¤‡é˜¶æ®µï¼Œç›´æ¥è¿›å…¥æ¥å—é˜¶æ®µ</li>
<li>ç¨³å®šçš„æ„æ€æ˜¯ã€‚é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šï¼Œåºåˆ—ä¸­çš„å‘½ä»¤æ˜¯æœ€æ–°çš„ï¼Œ<strong>ä¸éœ€è¦é€šè¿‡å‡†å¤‡é˜¶æ®µæ¥å‘ç°ä¹‹å‰è¢«å¤§å¤šæ•°èŠ‚ç‚¹é€šè¿‡çš„ææ¡ˆã€‚</strong>ã€‚å½“é¢†å¯¼è€…å¤„äºç¨³å®šçŠ¶æ€æ—¶ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªé¢†å¯¼è€…å³æ˜¯å•æœºï¼Œå•æœºè‡ªç„¶æ˜¯æ—¶é—´æœ‰åºçš„ï¼Œä¸éœ€è¦é€»è¾‘æ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨å•æœºç‰©ç†æ—¶é—´ï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥æ—¶é—´æ¦‚å¿µ(ä¸€èˆ¬å•æœºä¸Šæ˜¯ä¸ä¼šæ„ŸçŸ¥æ—¶é—´çš„ï¼Œéƒ½æ˜¯æŒ‰ç…§æ“ä½œçš„å…ˆåé¡ºåº)ã€‚</li>
<li><strong>ä¸å­˜åœ¨ææ¡ˆå†²çª</strong>ï¼šé‡å¤æ‰§è¡Œ Basic Paxos ç›¸æ¯”ï¼ŒMulti-Paxos å¼•å…¥é¢†å¯¼è€…èŠ‚ç‚¹ä¹‹åï¼Œå› ä¸ºåªæœ‰é¢†å¯¼è€…èŠ‚ç‚¹ä¸€ä¸ªæè®®è€…ï¼Œåªæœ‰å®ƒè¯´äº†ç®—ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨ææ¡ˆå†²çªï¼Œå¯ä»¥ç›´æ¥è¿›å…¥æ¥å—é˜¶æ®µã€‚</li>
</ul>
</li>
<li>
<p>é€‰ä¸»</p>
</li>
<li>
<p>ä¸»èŠ‚ç‚¹ç»­ç§ŸLease</p>
</li>
<li>
<p>æˆå‘˜å˜æ›´</p>
</li>
<li>
<p>ä¸€è‡´æ€§</p>
<ul>
<li>åŒæ­¥å†™ï¼Œå¼ºä¸€è‡´æ€§</li>
</ul>
</li>
<li>
<p>BasicPaxosç®—æ³•ç»è¿‡è¯æ˜</p>
</li>
<li>
<p>MultiPaxosæ€æƒ³çš„å·¥ç¨‹å®ç°éœ€è¦è¯æ˜æ˜¯æœ€å¤§çš„æŒ‘æˆ˜</p>
</li>
<li>
<p>Raftç®—æ³•ä¹Ÿæ˜¯ç»è¿‡è¯æ˜çš„</p>
</li>
</ul>
<p>æ€ä¹ˆç¡®å®šacceptoræ€»æ•°ï¼Œæ¶‰åŠä»£ç å®ç°å’Œæˆå‘˜å˜æ›´ï¼›æ‰©å®¹æ¶‰åŠåˆ°æˆå‘˜å˜æ›´ã€‚<br>
é¦–å…ˆï¼Œä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„æ¥ä¿å­˜acceptoræ€»æ•°ï¼Œè¿™å±äºç¼–ç¨‹å®ç°ï¼Œä¸å±äºç®—æ³•äº†ï¼Œç»å¤§å¤šæ•°ç®—æ³•éƒ½ä¸ä¼šçº¦å®šçš„è¿™ä¹ˆç»†çš„ã€‚</p>
<p>å…¶å®ï¼Œå­¦ä¹ Multi-Paxosçš„æœ€å¥½çš„æ–¹å¼ï¼Œæ˜¯å…ˆç†è§£Raftï¼Œå†å›è¿‡å¤´æ¥ï¼Œå­¦ä¹ Multi-Paxosã€‚å¦‚æœåœ¨å­¦ä¹ Multi-Paxosä¸­é‡åˆ°ä¸ç†è§£çš„ï¼Œå¯ä»¥åœ¨å­¦ä¹ å®ŒRaftåï¼Œå†å›å¤´æ¥ç ”ç©¶å­¦ä¹ ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL XA</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MySQL%20XA.html</url>
    <content><![CDATA[<p><a href="https://www.jianshu.com/p/7003d58ea182">MySQL XA ä»‹ç» - ç®€ä¹¦ (jianshu.com)</a></p>
<p><a href="https://www.cnblogs.com/dennyzhangdd/p/10580446.html">åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆä¸€ï¼‰åŸç†æ¦‚è§ˆ - åªä¼šä¸€ç‚¹java - åšå®¢å›­ (cnblogs.com)</a></p>
<h1 id="DTPæ¨¡å‹"><a class="header-anchor" href="#DTPæ¨¡å‹"></a>DTPæ¨¡å‹</h1>
<p>DTPæ¨¡å‹æ˜¯ä¸€ç§è½¯ä»¶ä½“ç³»ç»“æ„ï¼Œå®ƒå…è®¸å¤šä¸ªåº”ç”¨ç¨‹åºå…±äº«å¤šä¸ªèµ„æºç®¡ç†å™¨æä¾›çš„èµ„æºï¼Œå¹¶å…è®¸å°†å®ƒä»¬çš„å·¥ä½œåè°ƒåˆ°å…¨å±€äº‹åŠ¡ä¸­ã€‚</p>
<h2 id="å…ƒç´ ä»‹ç»"><a class="header-anchor" href="#å…ƒç´ ä»‹ç»"></a>å…ƒç´ ä»‹ç»</h2>
<ul>
<li>åº”ç”¨ç¨‹åºApplication Program, AP
<ul>
<li>å®šä¹‰äº‹åŠ¡çš„å¼€å§‹å’Œç»“æŸï¼Œè®¿é—®äº‹åŠ¡è¾¹ç•Œå†…çš„èµ„æºï¼Œé€šå¸¸å†³å®šæ˜¯æäº¤è¿˜æ˜¯å›æ»šäº‹åŠ¡ã€‚</li>
</ul>
</li>
<li>èµ„æºç®¡ç†å™¨Resource Managerï¼ŒRM
<ul>
<li>æ•°æ®åº“æœåŠ¡ï¼Œæ–‡ä»¶ç³»ç»ŸæœåŠ¡ç­‰</li>
</ul>
</li>
<li>äº‹åŠ¡ç®¡ç†å™¨Transaction Manager, TM
<ul>
<li>ç®¡ç†å…¨å±€äº‹åŠ¡ï¼Œåˆ†é…äº‹åŠ¡å”¯ä¸€è¡¨ç¤ºXIDï¼Œç›‘æ§äº‹åŠ¡æ‰§è¡Œè¿›åº¦ï¼Œè´Ÿè´£äº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚</li>
<li>å¦‚æœRMæ˜¯ä¸€ä¸ªCRMï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œä¸¤ä¸ªAPä¹‹é—´çš„é€šä¿¡æ—¶ï¼Œå®ƒå°†xidä¼ é€’ç»™åˆä½œä¼™ä¼´ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</li>
</ul>
</li>
<li>é€šä¿¡èµ„æºç®¡ç†å™¨Communication Resource Managerï¼ŒCRM
<ul>
<li>æ§åˆ¶ä¸€ä¸ªTMåŸŸå†…æˆ–è€…è·¨TMåŸŸçš„åˆ†å¸ƒå¼åº”ç”¨ä¹‹é—´çš„é€šä¿¡</li>
</ul>
</li>
<li>é€šä¿¡åè®®Communication Protocolï¼ŒCP
<ul>
<li>æä¾›ç»™åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä½¿ç”¨çš„ï¼Œç”±CRMæ”¯æŒçš„åº•å±‚é€šä¿¡æœåŠ¡ã€‚</li>
</ul>
</li>
</ul>
<h1 id="å•åº”ç”¨è·¨åº“DTPï¼Œè·¨åº”ç”¨DTP"><a class="header-anchor" href="#å•åº”ç”¨è·¨åº“DTPï¼Œè·¨åº”ç”¨DTP"></a>å•åº”ç”¨è·¨åº“DTPï¼Œè·¨åº”ç”¨DTP</h1>
<p>ä¸€ä¸ªAPä¸€ä¸ªTMï¼Œæ“ä½œå¤šä¸ªRM</p>
<p>å¦‚æœåˆ†å¸ƒå¼äº‹åŠ¡ä¸­ï¼Œéœ€è¦è·¨å¤šä¸ªåº”ç”¨ï¼ˆå¦‚å¾®æœåŠ¡ï¼‰ï¼Œé‚£å°±å¿…é¡»å¢åŠ é€šä¿¡èµ„æºç®¡ç†å™¨CRM</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>åˆ†å¸ƒå¼äº‹åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>Raftå…±è¯†ç®—æ³•</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/Raft%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95.html</url>
    <content><![CDATA[<ul>
<li>æ˜¯å·¥ç¨‹å¼€å‘é¦–é€‰çš„å…±è¯†ç®—æ³•
<ul>
<li>Etcd, Consul</li>
</ul>
</li>
<li>æ˜¯åœ¨Multi-Paxosæ€æƒ³ä¸Šï¼Œåšäº†ç®€åŒ–å’Œé™åˆ¶ã€‚
<ul>
<li>è¦æ±‚æ—¥å¿—å¿…é¡»è¿ç»­çš„
<ul>
<li>åªè¦çœ‹æœ€åä¸€ä¸ªlogè°æ›´æ–°ï¼ŒO(1)å°±èƒ½è¯æ˜è°æ›´å®Œæ•´ï¼› è‹¥æ—¥å¿—ä¸è¿ç»­ï¼Œæœ‰ä¸­é—´çš„ç©ºæ ¼ï¼Œé‚£å°±å¾—å…¨é‡æ¯”è¾ƒï¼ŒO(n)äº†ï¼› æ‰€ä»¥ï¼Œæ—¥å¿—å¿…é¡»è¿ç»­ï¼›ç”¨æ•°æ®ç»“æ„çš„ç»´æŠ¤æˆæœ¬ï¼Œæ¥é™ä½ç®—æ³•æˆæœ¬ï¼Œæ˜¯ç©ºé—´æ¢æ—¶é—´çš„ä¾‹å­ã€‚</li>
</ul>
</li>
<li>åªæœ‰é¢†å¯¼è€…ï¼Œè¿½éšè€…ï¼Œå€™é€‰äººä¸‰ç§çŠ¶æ€</li>
</ul>
</li>
<li>æœ¬è´¨ï¼šå¼ºé¢†å¯¼è€…æ¨¡å‹ï¼Œä¸€åˆ‡ä»¥é¢†å¯¼è€…ä¸ºå‡†ï¼Œå®ç°ä¸€ç³»åˆ—å€¼çš„å…±è¯†ï¼Œå„ä¸ªèŠ‚ç‚¹æ—¥å¿—çš„ä¸€è‡´ã€‚</li>
<li>çŠ¶æ€æœº</li>
<li>æ—¥å¿—ç»“æ„
<ul>
<li>åˆ—è¡¨ï¼š{ç´¢å¼•ï¼Œ{ä»»æœŸç¼–å·Termï¼ŒæŒ‡ä»¤}}</li>
</ul>
</li>
<li>é€‰ä¸¾è¿‡ç¨‹
<ul>
<li>éšæœºå¿ƒè·³è¶…æ—¶ï¼Œä»»æœŸç¼–å·</li>
<li>ä»»æœŸæŠ•ç¥¨ï¼Œä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æŠ•ä¸€ç¥¨ã€‚
<ul>
<li>æŠ•ç»™æ—¥å¿—å®Œæ•´åº¦æ¯”è‡ªå·±é«˜çš„ï¼ˆè¿™ä¼šå¯¼è‡´é¢†å¯¼è€…çš„æ—¥å¿—å®Œæ•´åº¦ä¸æ¯”åŠæ•°èŠ‚ç‚¹ä½ï¼‰</li>
<li>å…ˆæ¥å…ˆå¾—</li>
</ul>
</li>
<li>å¤§å¤šæ•°é€‰ç¥¨</li>
</ul>
</li>
<li>æ—¥å¿—å¤åˆ¶çš„ä¸€é˜¶æ®µæäº¤</li>
</ul>
<blockquote>
<p>æ—@Tung: ä¸ºä»€ä¹ˆè¦å¼•å…¥æ—¥å¿—ã€‚</p>
</blockquote>
<p><strong>å¦‚ä½•ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªé¢†å¯¼è€…ï¼Ÿ</strong></p>
<p>3 ç§çŠ¶æ€ï¼šé¢†å¯¼è€…ï¼ˆLeaderï¼‰ã€è·Ÿéšè€…ï¼ˆFollowerï¼‰å’Œå€™é€‰äººï¼ˆCandidateï¼‰</p>
<p>2ä¸­RPCæ¶ˆæ¯ï¼šRequestVoteæŠ•ç¥¨ï¼ŒAppendEntrieså¤åˆ¶æ—¥å¿—å’Œå¿ƒè·³ä¿¡æ¯</p>
<ul>
<li>å€™é€‰äººæˆ–è€…é¢†å¯¼è€…ï¼Œå‘ç°è‡ªå·±çš„ä»»æœŸç¼–å·æ¯”å…¶ä»–èŠ‚ç‚¹å°ï¼Œé‚£ä¹ˆå®ƒä¼šç«‹å³æ¢å¤æˆè·Ÿéšè€…çŠ¶æ€</li>
</ul>
<p>åœ¨é›†ç¾¤ä¸­è¿›è¡Œæˆå‘˜å˜æ›´çš„æœ€å¤§é£é™©æ˜¯ï¼Œå¯èƒ½ä¼šåŒæ—¶å‡ºç° 2 ä¸ªé¢†å¯¼è€…ã€‚</p>
<h1 id="ç–‘é—®"><a class="header-anchor" href="#ç–‘é—®"></a>ç–‘é—®</h1>
<ul>
<li>ç”±äºleaderä¸followeræ˜¯ä¸€é˜¶æ®µæäº¤ï¼Œleader commitå¹¶å“åº”clientå†™å…¥æˆåŠŸï¼Œä½†å†å‘é€ä¸‹ä¸€æ³¢å¿ƒè·³å‰å®•æœºï¼Œå¯¼è‡´followersæ²¡æœ‰commit logï¼Œè¿™ä¼šæœ‰é—®é¢˜å—
<ul>
<li>é€‰ä¸¾å‡ºæ¥çš„æ–°leaderï¼Œä¼šå‘å…¶å®ƒèŠ‚ç‚¹å¤åˆ¶æ—¥å¿—ã€‚å¦‚æœæŸæ¡uncommittedçš„logè¢«å‘ç°å·²ç»æˆåŠŸå¤åˆ¶åœ¨å¤§å¤šæ•°èŠ‚ç‚¹ä¸Šï¼Œåˆ™è¿™æ¡logä¼šæ›´æ–°ä¸ºcommitçŠ¶æ€ï¼Œä¹Ÿä¼šé€šçŸ¥å…¶ä»–èŠ‚ç‚¹commit</li>
</ul>
</li>
<li>uncommittedçš„logentryç®—ä¸ç®—å…¥æ—¥å¿—å®Œæ•´åº¦ï¼Ÿ
<ul>
<li>ç®—çš„ï¼Œä¸ç„¶å¯èƒ½ä¼šå¯¼è‡´ä¸¢å¤±ï¼Œè§ä¸Šä¸ªé—®é¢˜ã€‚</li>
<li></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTPåè®®é€Ÿè§ˆ</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/http_protocol_conclusion.html</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯HTTPåè®®"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯HTTPåè®®"></a>ä»€ä¹ˆæ˜¯HTTPåè®®</h1>
<p>HTTPæ˜¯hypertext transfer protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç®€å†™ï¼Œå®ƒæ˜¯TCP/IPåè®®çš„ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼Œç”¨äºå®šä¹‰WEBæµè§ˆå™¨ä¸WEBæœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ã€‚å®¢æˆ·ç«¯è¿ä¸ŠwebæœåŠ¡å™¨åï¼Œè‹¥æƒ³è·å¾—webæœåŠ¡å™¨ä¸­çš„æŸä¸ªwebèµ„æºï¼Œéœ€éµå®ˆä¸€å®šçš„é€šè®¯æ ¼å¼ï¼ŒHTTPåè®®ç”¨äºå®šä¹‰å®¢æˆ·ç«¯ä¸webæœåŠ¡å™¨é€šè¿…çš„æ ¼å¼ã€‚</p>
<p>HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚æ¯ä¸€ä¸ªè¯·æ±‚ï¼ˆRequestï¼‰å¿…æœ‰ä¸€ä¸ªç›¸åº”ï¼ˆResponseï¼‰ä¸ä¹‹å¯¹åº”ï¼Œæ¯å¯¹RESQUEST-RESPONSEä¹‹é—´æ˜¯æ²¡æœ‰å½±å“äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨åœ¨æ²¡æœ‰Requestçš„æƒ…å†µä¸‹æ˜¯ä¸èƒ½ä¸»åŠ¨å‘é€Responseåˆ°å®¢æˆ·ç«¯çš„ã€‚</p>
<h1 id="HTTPåè®®çš„ç‰ˆæœ¬ä¸åŒºåˆ«"><a class="header-anchor" href="#HTTPåè®®çš„ç‰ˆæœ¬ä¸åŒºåˆ«"></a>HTTPåè®®çš„ç‰ˆæœ¬ä¸åŒºåˆ«</h1>
<p>HTTPåè®®çš„ç‰ˆæœ¬ï¼šHTTP/1.0ã€HTTP/1.1</p>
<p>åœ¨HTTP1.0åè®®ä¸­ï¼Œå®¢æˆ·ç«¯ä¸webæœåŠ¡å™¨å»ºç«‹è¿æ¥åï¼Œåªèƒ½è·å¾—ä¸€ä¸ªwebèµ„æºã€‚ï¼ˆä¸€è¯·æ±‚ä¸€å“åº”ï¼Œç„¶åå…³é—­TCPè¿æ¥ï¼‰</p>
<p>åœ¨HTTP1.1åè®®ï¼Œå…è®¸å®¢æˆ·ç«¯ä¸webæœåŠ¡å™¨å»ºç«‹è¿æ¥åï¼Œåœ¨ä¸€ä¸ªè¿æ¥ä¸Šè·å–å¤šä¸ªwebèµ„æºã€‚ï¼ˆå¤šè¯·æ±‚å¤šå“åº”ï¼Œæ‰å…³é—­TCPè¿æ¥ï¼‰</p>
<p>åœ¨HTTP1.0ä¸­ï¼Œæ¯æ¬¡è¯·æ±‚èµ„æºéƒ½è¦å…ˆå»ºç«‹TCPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ä¹‹åæ‰å¼€å§‹è¿›è¡ŒHTTPè¿æ¥ï¼Œåœ¨å¾—åˆ°è¯·æ±‚çš„å“åº”ä¹‹åï¼Œå°±ä¼šæ–­å¼€TCPè¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚è¿™æ ·æ•ˆç‡å¾ˆä½ï¼Œ å› æ­¤ï¼ŒKeep-AliveåŠŸèƒ½å°±å‡ºç°äº†ï¼ŒKeep-Aliveå…è®¸åœ¨åŒä¸€TCPè¿æ¥ä¸­è¿›è¡Œå¤šæ¬¡è¯·æ±‚å“åº”è¿æ¥(REQUEST-RESPONSE)ï¼Œé¿å…äº†é‡å¤å»ºç«‹è¿æ¥ã€‚è€ŒHTTP1.1å°±æ˜¯æŠŠKeep-Aliveçº³å…¥äº†æ ‡å‡†ï¼Œæ˜¯HTTP1.1çš„é¢„è®¾çš„åŠŸèƒ½ã€‚å®é™…ä¸ŠHTTP1.0åªè¦åŠ ä¸ŠKeep-Alive è¯·æ±‚å¤´ä¹‹åï¼Œå¦‚æœæœåŠ¡å™¨æ”¯æŒKeep-Aliveçš„è¯ï¼Œä¹Ÿå¯ä»¥å®ç°è¯¥åŠŸèƒ½ã€‚</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">Keep-Alive: <span class="hljs-attribute">timeout</span>=5, <span class="hljs-attribute">max</span>=100<br></code></pre></td></tr></table></figure>
<ul>
<li>timeoutï¼šè¿‡æœŸæ—¶é—´5ç§’ï¼Œï¼ˆå¯¹åº”httpd.confé‡Œçš„å‚æ•°æ˜¯ï¼šKeepAliveTimeoutï¼‰</li>
<li>max: æœ€å¤šä¸€ç™¾æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªrequestï¼Œmaxå°±å‡1ï¼Œåˆ°0æ—¶å¼ºåˆ¶æ–­å¼€ã€‚</li>
</ul>
<p><img src="http://qiniu.tung7.com/1449510434.jpg" alt="Image"></p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šKeep-Aliveå¹¶ä¸èƒ½æ”¹å˜HTTPæ˜¯<code>æ— çŠ¶æ€</code>çš„äº‹å®ï¼Œå› ä¸ºå®ƒåªæ˜¯èƒ½ä½¿TCPè¿æ¥ä¸æ–­å¼€ï¼Œä¸èƒ½ä½¿è¯·æ±‚å“åº”å¯¹ä¹‹é—´æœ‰è”ç³»ã€‚è¦ä½¿æœåŠ¡å™¨ä¸»åŠ¨å‘é€å“åº”åˆ°å®¢æˆ·ç«¯å°±è¦ä½¿ç”¨WebSocketåè®®ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<p>**Keep-Aliveåœ¨Javaä¸­çš„å®ç°ï¼š**Javaç±»åº“ä¸­çš„HttpURLConnectionç±»è‡ªåŠ¨å®ç°äº†Keep-Aliveï¼Œå…¶ä»–ç±»åº“åœ¨æ²¡æœ‰å®ç°Keep-Aliveçš„æ—¶å€™éœ€è¦æ‰‹åŠ¨æ·»åŠ Keep-Aliveè¯·æ±‚å¤´ã€‚ åœ¨æœåŠ¡å™¨ç«¯HttpServletã€HttpServletRequestã€å’ŒHttpServletResponseç±»è‡ªåŠ¨å®ç°äº†Keep-Aliveã€‚</p>
<h1 id="HTTPè¯·æ±‚"><a class="header-anchor" href="#HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h1>
<h2 id="HTTPè¯·æ±‚åŒ…æ‹¬çš„å†…å®¹"><a class="header-anchor" href="#HTTPè¯·æ±‚åŒ…æ‹¬çš„å†…å®¹"></a>HTTPè¯·æ±‚åŒ…æ‹¬çš„å†…å®¹</h2>
<p>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹äº†TCPè¿æ¥åï¼Œå‘æœåŠ¡å™¨è¯·æ±‚æŸä¸€WEBèµ„æºï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªHTTPè¯·æ±‚ã€‚</p>
<p>ä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚åº”è¯¥ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š<code>è¯·æ±‚è¡Œéƒ¨åˆ†</code>ï¼Œ<code>è¯·æ±‚å¤´éƒ¨åˆ†</code>ï¼Œ<code>å®ä½“éƒ¨åˆ†</code>ã€‚</p>
<p><img src="http://qiniu.tung7.com/1449511326.jpg" alt="QQæˆªå›¾20151208020110.jpg"></p>
<h2 id="HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”è¯·æ±‚è¡Œ"><a class="header-anchor" href="#HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”è¯·æ±‚è¡Œ"></a>HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”è¯·æ±‚è¡Œ</h2>
<p>è¯·æ±‚è¡Œæ ¼å¼ï¼š<strong>è¯·æ±‚æ–¹å¼ èµ„æºåç§°Â HTTPç‰ˆæœ¬å·</strong></p>
<p>è¯·æ±‚è¡Œç”¨äºæè¿°å®¢æˆ·ç«¯çš„è¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚èµ„æºåä»¥åŠæ‰€ç”¨çš„HTTPåè®®ç‰ˆæœ¬å·ã€‚è¿™åœ¨ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¯·æ±‚çš„æ–¹å¼æ˜¯GET, èµ„æºåæ˜¯<a href="http://www.tung7.com/">www.tung7.com</a>ï¼Œ HTTPåè®®ç‰ˆæœ¬å·æ˜¯HTTP/1.1</p>
<p>è¯·æ±‚æ–¹å¼æœ‰ï¼šPOSTã€GETã€HEADã€OPTIONSã€DELETEã€TRACEã€PUTï¼Œå¸¸ç”¨çš„æœ‰ï¼š GETã€ POSTã€‚è€Œæµè§ˆå™¨é»˜è®¤éƒ½æ˜¯ä½¿ç”¨GETæ–¹å¼ã€‚</p>
<p>è¿™ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ä¸»è¦è¡¨ç°åœ¨æ•°æ®ä¼ é€’ä¸Šï¼šå¦‚æœè¯·æ±‚æ–¹å¼ä¸ºGETæ–¹å¼ï¼Œåˆ™å¯ä»¥åœ¨è¯·æ±‚çš„URLåœ°å€åä»¥?çš„å½¢å¼å¸¦ä¸Šäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤šä¸ªæ•°æ®ä¹‹é—´ä»¥&amp;è¿›è¡Œåˆ†éš”ã€‚</p>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">www.tung7.com/hi.html?name=abc&amp;password=xyz</span> <span class="hljs-meta">HTTP/1.1</span><br></code></pre></td></tr></table></figure>
<p>GETæ–¹å¼åœ¨URLåœ°å€åé™„å¸¦çš„å‚æ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œå…¶æ•°æ®å®¹é‡é€šå¸¸ä¸èƒ½è¶…è¿‡1Kï¼Œ è€ŒPOSTæ–¹å¼æ˜¯é€šè¿‡è¯·æ±‚å®ä½“å‘é€æ•°æ®çš„ï¼Œä¼ é€çš„æ•°æ®é‡æ— é™åˆ¶ã€‚è¯´æ˜¯æ— é™åˆ¶ï¼Œä½†æ˜¯è¿˜æ˜¯å’ŒæœåŠ¡å™¨ç«¯é…ç½®æœ‰å…³ï¼Œå€˜è‹¥æœåŠ¡å™¨ç«¯æœ€å¤§å•æ¬¡å…è®¸ä¸Šä¼ å¤§å°ä¸º5M, è¶…è¿‡åä¼šè¿”å›413é”™è¯¯çŠ¶æ€ç ã€‚</p>
<p>**æ³¨æ„çš„æ˜¯ï¼š**GETæ–¹å¼åœ¨è¯·æ±‚å®ä½“ä¸­ä¸èƒ½æœ‰å†…å®¹ã€‚</p>
<h2 id="HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”æ¶ˆæ¯å¤´"><a class="header-anchor" href="#HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”æ¶ˆæ¯å¤´"></a>HTTPè¯·æ±‚çš„ç»†èŠ‚â€”â€”æ¶ˆæ¯å¤´</h2>
<p>HTTPè¯·æ±‚ä¸­çš„å¸¸ç”¨æ¶ˆæ¯å¤´</p>
<blockquote>
<p>accept:æµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®ƒæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹<br>
Accept-Charset: æµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®ƒæ”¯æŒå“ªç§å­—ç¬¦é›†<br>
Accept-Encodingï¼šæµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œæ”¯æŒçš„å‹ç¼©æ ¼å¼<br>
Accept-Languageï¼šæµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®ƒçš„è¯­è¨€ç¯å¢ƒ<br>
Hostï¼šæµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œæƒ³è®¿é—®å“ªå°ä¸»æœº<br>
If-Modified-Since: æµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œç¼“å­˜æ•°æ®çš„æ—¶é—´<br>
Refererï¼šæµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·æœºæ˜¯å“ªä¸ªé¡µé¢æ¥çš„ Â å¯ä»¥ç”¨äºé˜²ç›—é“¾<br>
Connectionï¼šæµè§ˆå™¨é€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œè¯·æ±‚å®Œåæ˜¯æ–­å¼€é“¾æ¥è¿˜æ˜¯ä½•æŒé“¾æ¥<br>
Cache-Control: Â æŒ‡å®šæ‰€æœ‰ç¼“å­˜æœºåˆ¶åœ¨æ•´ä¸ªè¯·æ±‚/å“åº”é“¾ä¸­å¿…é¡»æœä»çš„æŒ‡ä»¤ï¼Œmax-age=5 ,5så†…è®¿é—®ä¸ç”¨å»æœåŠ¡å™¨</p>
</blockquote>
<h1 id="HTTPå“åº”"><a class="header-anchor" href="#HTTPå“åº”"></a>HTTPå“åº”</h1>
<h2 id="HTTPå“åº”åŒ…æ‹¬çš„å†…å®¹"><a class="header-anchor" href="#HTTPå“åº”åŒ…æ‹¬çš„å†…å®¹"></a>HTTPå“åº”åŒ…æ‹¬çš„å†…å®¹</h2>
<p>ä¸€ä¸ªHTTPå“åº”ä»£è¡¨æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å›é€çš„æ•°æ®ï¼Œå®ƒåŒ…æ‹¬ï¼š ä¸€ä¸ªçŠ¶æ€è¡Œã€æ¶ˆæ¯å¤´éƒ¨åˆ†ã€ä»¥åŠå®ä½“å†…å®¹ ã€‚</p>
<p><img src="http://qiniu.tung7.com/1449512871.jpg" alt="QQæˆªå›¾20151208022511.jpg"></p>
<h2 id="HTTPå“åº”çš„ç»†èŠ‚â€”â€”çŠ¶æ€è¡Œ"><a class="header-anchor" href="#HTTPå“åº”çš„ç»†èŠ‚â€”â€”çŠ¶æ€è¡Œ"></a>HTTPå“åº”çš„ç»†èŠ‚â€”â€”çŠ¶æ€è¡Œ</h2>
<p>çŠ¶æ€è¡Œæ ¼å¼ï¼šÂ <strong>HTTPç‰ˆæœ¬å·ã€€çŠ¶æ€ç ã€€åŸå› å™è¿°</strong></p>
<p>çŠ¶æ€ç ç”¨äºè¡¨ç¤ºæœåŠ¡å™¨å¯¹è¯·æ±‚çš„å¤„ç†ç»“æœï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸‰ä½çš„åè¿›åˆ¶æ•°ã€‚å“åº”çŠ¶æ€ç åˆ†ä¸º5ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>100 ~ 199</td>
<td>æ¥å—åˆ°è¯·æ±‚ï¼Œéœ€è¦æäº¤ä¸‹ä¸€æ¬¡è¯·æ±‚æ‰å¯ä»¥å®Œæˆè¯·æ±‚è¿‡ç¨‹</td>
</tr>
<tr>
<td>200 ~ 299</td>
<td>è¡¨ç¤ºæˆåŠŸæ¥å—è¯·æ±‚ï¼Œå¹¶å®Œæˆæ•´ä¸ªå¤„ç†è¿‡ç¨‹ï¼Œå¸¸ç”¨çš„æ˜¯200</td>
</tr>
<tr>
<td>300 ~ 399</td>
<td>ä¸ºäº†å®Œæˆè¯·æ±‚éœ€è¦è¿›ä¸€æ­¥ç»†åŒ–è¯·æ±‚ï¼Œå¦‚èµ„æºå·²ç»ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åœ°å€ï¼ˆè·³è½¬ï¼‰ å¸¸ç”¨302 304 307</td>
</tr>
<tr>
<td>400 ~ 499</td>
<td>å®¢æˆ·ç«¯è¯·æ±‚æœ‰é”™è¯¯ï¼Œ å¸¸ç”¨404</td>
</tr>
<tr>
<td>499 ~ 599</td>
<td>æœåŠ¡ç«¯å‡ºç°é”™è¯¯ï¼Œå¸¸ç”¨500</td>
</tr>
</tbody>
</table>
<h2 id="HTTPå“åº”ç»†èŠ‚â€”â€”å¸¸ç”¨å“åº”å¤´"><a class="header-anchor" href="#HTTPå“åº”ç»†èŠ‚â€”â€”å¸¸ç”¨å“åº”å¤´"></a>HTTPå“åº”ç»†èŠ‚â€”â€”å¸¸ç”¨å“åº”å¤´</h2>
<p>HTTPå“åº”ä¸­çš„å¸¸ç”¨å“åº”å¤´(æ¶ˆæ¯å¤´)</p>
<blockquote>
<p>Location: æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œæ¥å‘Šè¯‰æµè§ˆå™¨è·³åˆ°å“ªé‡Œ<br>
Serverï¼šæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æœåŠ¡å™¨çš„å‹å·<br>
Content-Encodingï¼šæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œæ•°æ®çš„å‹ç¼©æ ¼å¼<br>
Content-Length: æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨å›é€æ•°æ®çš„é•¿åº¦<br>
Content-Language: æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨è¯­è¨€ç¯å¢ƒ<br>
Content-Typeï¼šæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨å›é€æ•°æ®çš„ç±»å‹<br>
Refreshï¼šæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨å®šæ—¶åˆ·æ–°<br>
Content-Disposition: æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ä»¥ä¸‹è½½æ–¹å¼æ‰“æ•°æ®<br>
Transfer-Encodingï¼šæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æ•°æ®æ˜¯ä»¥åˆ†å—æ–¹å¼å›é€çš„<br>
Expires: -1 æ§åˆ¶æµè§ˆå™¨ä¸è¦ç¼“å­˜<br>
Cache-Control: no-cacheÂ <br>
Pragma: no-cache</p>
</blockquote>
<h1 id="åœ¨æœåŠ¡ç«¯è®¾ç½®å“åº”å¤´æ¥æ§åˆ¶å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¡Œä¸º"><a class="header-anchor" href="#åœ¨æœåŠ¡ç«¯è®¾ç½®å“åº”å¤´æ¥æ§åˆ¶å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¡Œä¸º"></a>åœ¨æœåŠ¡ç«¯è®¾ç½®å“åº”å¤´æ¥æ§åˆ¶å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¡Œä¸º</h1>
<h2 id="è®¾ç½®Locationå“åº”å¤´ï¼Œå®ç°è¯·æ±‚é‡å®šå‘"><a class="header-anchor" href="#è®¾ç½®Locationå“åº”å¤´ï¼Œå®ç°è¯·æ±‚é‡å®šå‘"></a>è®¾ç½®Locationå“åº”å¤´ï¼Œå®ç°è¯·æ±‚é‡å®šå‘</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        response.setStatus(<span class="hljs-number">302</span>);<span class="hljs-comment">//è®¾ç½®æœåŠ¡å™¨çš„å“åº”çŠ¶æ€ç </span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *è®¾ç½®å“åº”å¤´ï¼ŒæœåŠ¡å™¨é€šè¿‡ Locationè¿™ä¸ªå¤´ï¼Œæ¥å‘Šè¯‰æµè§ˆå™¨è·³åˆ°å“ªé‡Œï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¯·æ±‚é‡å®šå‘</span><br><span class="hljs-comment">         */</span><br>        response.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, <span class="hljs-string">&quot;/re/1.jsp&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å½“è®¿é—®è¯¥servletåœ°å€æ—¶ï¼Œæµè§ˆå…¶ä¼šå†æ¬¡è®¿é—®æˆ‘ä»¬åœ¨ä¸Šé¢è®¾ç½®çš„&quot;/re/1.jsp&quot;ï¼Œä¹Ÿå°±æ˜¯é‡å®šå‘åˆ°1.jspã€‚å¦‚ä¸‹æ˜¯å“åº”è¡Œï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">302</span> Moved Temperarily<br></code></pre></td></tr></table></figure>
<h2 id="è®¾ç½®Content-Encodingå“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æ•°æ®çš„å‹ç¼©æ ¼å¼"><a class="header-anchor" href="#è®¾ç½®Content-Encodingå“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æ•°æ®çš„å‹ç¼©æ ¼å¼"></a>è®¾ç½®Content-Encodingå“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æ•°æ®çš„å‹ç¼©æ ¼å¼</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Â *1ã€ä½¿ç”¨GZIPOutputStreamæµæ¥å‹ç¼©æ•°æ®</span><br><span class="hljs-comment"> *2ã€è®¾ç½®å“åº”å¤´Content-Encodingæ¥å‘Šè¯‰æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨å‘é€å›æ¥çš„æ•°æ®å‹ç¼©åçš„æ ¼å¼</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo02</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abcdabcdabcdabcdabcdabcdab&quot;</span> +<br>                <span class="hljs-string">&quot;cdabcdabcdabcdabcdabcdabcdabcdabc&quot;</span> +<br>                <span class="hljs-string">&quot;dabcdabcdabcdabcdabcdabcdabcdabc&quot;</span> +<br>                <span class="hljs-string">&quot;dabcdabcdabcdabcdabcdabcdabcdabcdab&quot;</span> +<br>                <span class="hljs-string">&quot;cdabcdabcdabcdabcdabcdabcdabcdabcdab&quot;</span> +<br>                <span class="hljs-string">&quot;cdabcdabcdabcdabcdabcdabcdabcdabcdab&quot;</span> +<br>                <span class="hljs-string">&quot;cdabcdabcdabcdabcdabcdabcdabcdabcdab&quot;</span> +<br>                <span class="hljs-string">&quot;cdabcdabcdabcdabcdabcdabcdabcdabcdabcd&quot;</span>;<br>        System.out.println(<span class="hljs-string">&quot;åŸå§‹æ•°æ®çš„å¤§å°ä¸ºï¼š&quot;</span> + data.getBytes().length);<br>        <br>        <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bout</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<br>        <span class="hljs-type">GZIPOutputStream</span> <span class="hljs-variable">gout</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GZIPOutputStream</span>(bout); <span class="hljs-comment">//buffer</span><br>        gout.write(data.getBytes());<br>        gout.close();<br>        <span class="hljs-comment">//å¾—åˆ°å‹ç¼©åçš„æ•°æ®</span><br>        <span class="hljs-type">byte</span> g[] = bout.toByteArray();<br>        response.setHeader(<span class="hljs-string">&quot;Content-Encoding&quot;</span>, <span class="hljs-string">&quot;gzip&quot;</span>);<br>        response.setHeader(<span class="hljs-string">&quot;Content-Length&quot;</span>,g.length +<span class="hljs-string">&quot;&quot;</span>);<br>        response.getOutputStream().write(g);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="http://qiniu.tung7.com/1449513936.jpg" alt="QQæˆªå›¾20151208024505.jpg"></p>
<p>åŸå§‹æ•°æ®å¤§å°272ï¼Œå°†è¿‘10å€ï¼ŒèŠ‚çº¦äº†90%çš„å®½å¸¦ï¼Œå®é™…ä¸Šæ²¡æœ‰è¿™ä¹ˆå¤šä¸€èˆ¬æœ‰40-60%ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿›è¡ŒGZIPå‹ç¼©ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒgzipè§£å‹ï¼ˆAccept-Encodingï¼šgzipï¼‰é‚£ä¹ˆæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è§£å‹ã€‚è¯¦æƒ…è§<a href="http://www.tung7.com/post-107.html">ä½¿ç”¨gzipæé«˜javawebåº”ç”¨æ€§èƒ½</a></p>
<h2 id="è®¾ç½®content-typeå“åº”å¤´ï¼ŒæŒ‡å®šå›é€æ•°æ®ç±»å‹"><a class="header-anchor" href="#è®¾ç½®content-typeå“åº”å¤´ï¼ŒæŒ‡å®šå›é€æ•°æ®ç±»å‹"></a>è®¾ç½®content-typeå“åº”å¤´ï¼ŒæŒ‡å®šå›é€æ•°æ®ç±»å‹</h2>
<p>å…ˆæ¥çœ‹çœ‹å‰é¢çš„ä¸€ä¸ªè¯·æ±‚å¤´</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>,*/*;q=<span class="hljs-number">0</span>.<span class="hljs-number">8</span><br><br></code></pre></td></tr></table></figure>
<p>è¿™ä¸ªè¯·æ±‚å¤´è¡¨ç¤ºæµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒçš„ MIME ç±»å‹ã€‚MIMEçš„è‹±æ–‡å…¨ç§°æ˜¯ Multipurpose Internet Mail Extensionsï¼ˆå¤šåŠŸèƒ½ Internet é‚®ä»¶æ‰©å……æœåŠ¡ï¼‰ï¼Œæœ€æ—©ç”¨äºé‚®ä»¶ã€‚</p>
<p>**t****ext/html,application/xhtml+xml,application/xmlÂ **éƒ½æ˜¯ MIME ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºåª’ä½“ç±»å‹å’Œå†…å®¹ç±»å‹ï¼Œæ–œæ å‰é¢çš„æ˜¯ typeï¼ˆç±»å‹ï¼‰ï¼Œæ–œæ åé¢çš„æ˜¯ subtypeï¼ˆå­ç±»å‹ï¼‰ï¼›type æŒ‡å®šå¤§çš„èŒƒå›´ï¼Œsubtype æ˜¯ type ä¸­èŒƒå›´æ›´æ˜ç¡®çš„ç±»å‹ã€‚Textè¡¨ç¤ºæ–‡æœ¬ä¿¡æ¯ï¼Œæ–‡æœ¬æ¶ˆæ¯å¯ä»¥æ˜¯å¤šç§å­—ç¬¦é›†å’Œæˆ–è€…å¤šç§æ ¼å¼çš„ï¼ŒApplicationè¡¨ç¤ºåº”ç”¨ç¨‹åºæ•°æ®æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<p>**q=0.9Â **è¡¨ç¤ºæƒé‡æ˜¯0.9 (0&lt;q&lt;1), qè¶Šå¤§ï¼Œè¡¨ç¤º&quot;ï¼›&quot;å‰çš„æŒ‡ç¤ºæƒé‡è¶Šé«˜,è¯·æ±‚è¶Šå€¾å‘äºè·å¾—è¯¥æŒ‡ç¤ºæ‰€è¡¨ç¤ºçš„å†…å®¹ã€‚text/html, application/xhtml+xml, application/xml çš„æƒé‡ä¸º0.9, */*çš„æƒé‡ä¸º0.8ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo03</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        response.setHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;image/jpeg&quot;</span>);<span class="hljs-comment">//ä½¿ç”¨content-typeå“åº”å¤´æŒ‡å®šå‘é€ç»™æµè§ˆå™¨çš„æ•°æ®ç±»å‹ä¸º&quot;image/jpeg&quot;</span><br>        <span class="hljs-comment">//è¯»å–02.jpgè¿™å¼ å›¾ç‰‡ï¼Œè¿”å›ä¸€ä¸ªè¾“å…¥æµ</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getServletContext().getResourceAsStream(<span class="hljs-string">&quot;/img/02.jpg&quot;</span>);<br>        <span class="hljs-type">byte</span> buffer[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getOutputStream();<span class="hljs-comment">//å¾—åˆ°è¾“å‡ºæµ</span><br>        <span class="hljs-keyword">while</span> ((len = in.read(buffer)) &gt; <span class="hljs-number">0</span>) &#123;<span class="hljs-comment">//è¯»å–è¾“å…¥æµ(in)é‡Œé¢çš„å†…å®¹å­˜å‚¨åˆ°ç¼“å†²åŒº(buffer)</span><br>            out.write(buffer, <span class="hljs-number">0</span>, len);<span class="hljs-comment">//å°†ç¼“å†²åŒºé‡Œé¢çš„å†…å®¹è¾“å‡ºåˆ°æµè§ˆå™¨</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="http://qiniu.tung7.com/1449515437.jpg" alt="QQæˆªå›¾20151208031022.jpg"></p>
<h2 id="è®¾ç½®refreshå“åº”å¤´ï¼Œè®©æµè§ˆå™¨å®šæ—¶åˆ·æ–°"><a class="header-anchor" href="#è®¾ç½®refreshå“åº”å¤´ï¼Œè®©æµè§ˆå™¨å®šæ—¶åˆ·æ–°"></a>è®¾ç½®refreshå“åº”å¤´ï¼Œè®©æµè§ˆå™¨å®šæ—¶åˆ·æ–°</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo04</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è®¾ç½®refreshå“åº”å¤´ï¼Œè®©æµè§ˆå™¨æ¯éš”3ç§’å®šæ—¶åˆ·æ–°</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">// response.setHeader(&quot;refresh&quot;, &quot;3&quot;);</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è®¾ç½®refreshå“åº”å¤´ï¼Œè®©æµè§ˆå™¨3ç§’åè·³è½¬åˆ°http://www.baidu.com</span><br><span class="hljs-comment">         */</span><br>        response.setHeader(<span class="hljs-string">&quot;refresh&quot;</span>, <span class="hljs-string">&quot;3;url=&#x27;http://www.baidu.com&#x27;&quot;</span>);<br>        response.getWriter().write(<span class="hljs-string">&quot;gacl&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doGet(request, response);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="è®¾ç½®content-dispositionå“åº”å¤´ï¼Œè®©æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶"><a class="header-anchor" href="#è®¾ç½®content-dispositionå“åº”å¤´ï¼Œè®©æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶"></a>è®¾ç½®content-dispositionå“åº”å¤´ï¼Œè®©æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo05</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è®¾ç½®content-dispositionå“åº”å¤´ï¼Œè®©æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶</span><br><span class="hljs-comment">         */</span><br>        response.setHeader(<span class="hljs-string">&quot;content-disposition&quot;</span>, <span class="hljs-string">&quot;attachment;filename=xxx.jpg&quot;</span>);<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getServletContext().getResourceAsStream(<span class="hljs-string">&quot;/img/1.jpg&quot;</span>);<br>        <span class="hljs-type">byte</span> buffer[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getOutputStream();<br>        <span class="hljs-keyword">while</span> ((len = in.read(buffer)) &gt; <span class="hljs-number">0</span>) &#123;<br>            out.write(buffer, <span class="hljs-number">0</span>, len);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>            <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doGet(request, response);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>è®¿é—®è¯¥servletçš„é“¾æ¥çš„æ—¶å€™ï¼Œæµè§ˆå…¶ä¼šå¼¹å‡ºä¸‹è½½æ¡†ã€‚ä½†æ˜¯æˆ‘ä»¬åˆæ—¶å€™å‘ç°å•çº¯è®¾ç½®content-dispositionå“åº”å¤´ï¼Œä¸èƒ½å¼¹å‡ºä¸‹è½½æ¡†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Content-<span class="hljs-built_in">type</span>:application/vnd.ms-excel<br>Content-Disposition:attachment;filename=åç§°.xls<br></code></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œä¼šç›´æ¥æ‰“å¼€xlsæ–‡ä»¶ï¼Œè€Œä¸è¯¢é—®æ˜¯å¦ä¸‹è½½ã€‚è§£å†³åŠæ³•æ˜¯å°†Content-typeè®¾ç½®ä¸ºapplication/octet-stream</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Content-<span class="hljs-built_in">type</span>:application/octet-stream .<br>Content-Disposition:attachment;filename=åç§°.xls<br></code></pre></td></tr></table></figure>
<p>è¿™æ ·æµè§ˆå™¨å°±ä¼šå¼¹å‡ºä¸‹è½½çª—å£äº†ã€‚åŸå› æ˜¯ç”¨æˆ·ç”µè„‘ä¸Šå®‰è£…äº†officeï¼Œæµè§ˆå™¨èƒ½è¯†åˆ«application/octet-streamç±»å‹ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>åŸºç¡€çŸ¥è¯†</tag>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title>TCPå‘é€FINåæ”¶ä¸åˆ°ACKä¼šå‘ç”Ÿä»€ä¹ˆ</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/TCP%E5%8F%91%E9%80%81FIN%E5%90%8E%E6%94%B6%E4%B8%8D%E5%88%B0ACK%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html</url>
    <content><![CDATA[<p>å¦‚æœæ¥æ”¶ä¸åˆ°</p>
<p>ä¸‹åˆ—è¡¨æ ¼åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯çš„FINæœªèƒ½åˆ°è¾¾Serverã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯æ¥æ”¶ä¸åˆ°æœåŠ¡ç«¯å¯¹FINçš„ACKåº”ç­”ã€‚</p>
<table>
<thead>
<tr>
<th>â€“</th>
<th>Server(111)</th>
<th>Client(108)</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>nc -l 9999</code></td>
<td>`cat /dev/zero</td>
<td>nc 192.168.0.111 9999`</td>
</tr>
<tr>
<td></td>
<td></td>
<td>ç­‰å¾…ä¸€æ®µæ—¶é—´</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>iptables -A INPUT -p tcp -s 192.168.0.111 --tcp-flags ACK,FIN ACK -j DROP</code></td>
<td>æŠŠæ¥è‡ªæœåŠ¡ç«¯çš„FIN=1 ACK=1æŠ¥æ–‡DROPæ‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>killall nc</code></td>
<td>ä¿ƒä½¿Clientå‘é€FINè¯·æ±‚ï¼ˆå®é™…ä¸Šä¼šä¸¢å¤±ï¼‰</td>
</tr>
<tr>
<td></td>
<td>ESTABLISHED</td>
<td>FIN_WAIT1</td>
<td>è¯´æ˜Clientçš„FINå¹¶æ²¡æœ‰åˆ°è¾¾Server</td>
</tr>
<tr>
<td></td>
<td>ESTABLISHED</td>
<td>è‡ªåŠ¨é”€æ¯</td>
<td>è¶…æ—¶åä¸ä¼šè¿›å…¥TIME_WAIT,ç›´æ¥é”€æ¯</td>
</tr>
<tr>
<td></td>
<td>----</td>
<td>----</td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>nc -l 9999</code></td>
<td><code>nc -vn 192.168.0.111 9999</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>iptables -A INPUT -p tcp -s 192.168.0.111 --tcp-flags ACK ACK -j DROP</code></td>
<td>æŠŠæ¥è‡ªæœåŠ¡ç«¯çš„ACK=1æŠ¥æ–‡DROPæ‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>killall nc</code></td>
<td>ä¿ƒä½¿Clientå‘é€FINè¯·æ±‚</td>
</tr>
<tr>
<td></td>
<td>LAST_ACK</td>
<td>FIN_WAIT1</td>
<td></td>
</tr>
<tr>
<td></td>
<td>è‡ªåŠ¨é”€æ¯</td>
<td>è‡ªåŠ¨é”€æ¯</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Linuxä¸‹FIN-WAIT1ï¼ŒFIN-WAIT2è¶…æ—¶æ—¶é—´"><a class="header-anchor" href="#Linuxä¸‹FIN-WAIT1ï¼ŒFIN-WAIT2è¶…æ—¶æ—¶é—´"></a>Linuxä¸‹FIN_WAIT1ï¼ŒFIN_WAIT2è¶…æ—¶æ—¶é—´</h1>
<ul>
<li>tcp_fin_timeout</li>
</ul>
<blockquote>
<p>tcp_fin_timeout (integer; default: 60; since Linux 2.2)<br>
This specifies how many seconds to wait for a final FIN packet before the socket is forcibly closed. This is<br>
strictly a violation of the TCP specification, but required to prevent denial-of-service attacks. In Linux 2.2,<br>
the default value was 180.</p>
</blockquote>
<ul>
<li>tcp_orphan_retries
<ul>
<li>This value influences the timeout of a locally closed TCP connection,<br>
when RTO retransmissions remain unacknowledged.<br>
See tcp_retries2 for more details.  The default value is 8.<br>
If your machine is a loaded WEB server,<br>
you should think about lowering this value, such sockets<br>
may consume significant resources. Cf. tcp_max_orphans.</li>
<li>è¿™ä¸ªå‚æ•°è¡¨ç¤º<strong>å¦‚æœä¸€ç›´éƒ½æ”¶ä¸åˆ°é’ˆå¯¹FINçš„ACKï¼Œé‚£ä¹ˆåœ¨å½»åº•é”€æ¯è¿™ä¸ªFIN_WAIT1çš„è¿æ¥å‰ï¼Œç­‰å¾…å‡ è½®RTOé€€é¿</strong>ã€‚</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>TCPåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>FIN_WAIT1,FIN_WAIT2,TIME_WAITå’ŒLAST_ACKçš„è¶…æ—¶é—®é¢˜</title>
    <url>/POST/FIN_WAIT1,FIN_WAIT2,TIME_WAIT%E5%92%8CLAST_ACK%E7%9A%84%E8%B6%85%E6%97%B6%E9%97%AE%E9%A2%98.html</url>
    <content><![CDATA[<h1 id="å¦‚æœFIN-WAIT1ç­‰ä¸åˆ°ACK"><a class="header-anchor" href="#å¦‚æœFIN-WAIT1ç­‰ä¸åˆ°ACK"></a>å¦‚æœFIN_WAIT1ç­‰ä¸åˆ°ACK</h1>
<h1 id="å¦‚æœFIN-WAIT2ç­‰ä¸åˆ°FIN"><a class="header-anchor" href="#å¦‚æœFIN-WAIT2ç­‰ä¸åˆ°FIN"></a>å¦‚æœFIN_WAIT2ç­‰ä¸åˆ°FIN</h1>
<h1 id="å¦‚æœLAST-ACKç­‰ä¸åˆ°ACK"><a class="header-anchor" href="#å¦‚æœLAST-ACKç­‰ä¸åˆ°ACK"></a>å¦‚æœLAST_ACKç­‰ä¸åˆ°ACK</h1>
<p>åœ¨tcpåè®®ä¸­å¤„äºlast_ackçŠ¶æ€çš„è¿æ¥ï¼Œå¦‚æœä¸€ç›´æ”¶ä¸åˆ°å¯¹æ–¹çš„ackï¼Œä¼šä¸€ç›´å¤„äºè¿™ä¸ªçŠ¶æ€å—ï¼Ÿ - JCRunnerçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/27564314/answer/162476313">https://www.zhihu.com/question/27564314/answer/162476313</a></p>
<h1 id="CLOSE-WAITä¸TIME-WAITè¿‡å¤šä¼šå½±å“ä»€ä¹ˆ"><a class="header-anchor" href="#CLOSE-WAITä¸TIME-WAITè¿‡å¤šä¼šå½±å“ä»€ä¹ˆ"></a>CLOSE_WAITä¸TIME_WAITè¿‡å¤šä¼šå½±å“ä»€ä¹ˆ</h1>
<p>æœåŠ¡ç«¯close-waitæˆ–è€…time-waitçŠ¶æ€è¿‡å¤šä¼šå¯¼è‡´ä»€ä¹ˆæ ·çš„åæœï¼Ÿ - æœå†»è™¾ä»çš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/298214130/answer/1090787813">https://www.zhihu.com/question/298214130/answer/1090787813</a></p>
]]></content>
      <categories>
        <category>POST</category>
      </categories>
      <tags>
        <tag>TCPåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP2.0çš„æ–°å˜åŒ–</title>
    <url>/POST/HTTP2.0%E7%9A%84%E6%96%B0%E5%8F%98%E5%8C%96.html</url>
    <content><![CDATA[<p>SPDYåè®®ï¼ŒRFC7540</p>
<p>ä¸HTTP1.1çš„ä¸»è¦åŒºåˆ«</p>
<ul>
<li>ä»æ–‡æœ¬åè®®å˜ä¸ºäº†äºŒè¿›åˆ¶åè®®ï¼Œå¼•å…¥äº†å¸§Frameçš„æ¦‚å¿µ</li>
<li>å®ç°äº†å¤šè·¯å¤ç”¨ï¼Œæ— åºçš„é˜»å¡çš„ã€‚è§£å†³äº†é˜Ÿå¤´é˜»å¡é—®é¢˜head-of-line blocking</li>
<li>æ”¯æŒæŠ¥å¤´å‹ç¼©ï¼Œé™ä½å¼€é”€</li>
<li>å…·æœ‰ä¸»åŠ¨æ¨é€çš„åŠŸèƒ½ï¼Œå¯ä»¥æå‰å°†HTMLç›¸åº”ä¸­çš„js,css,imgç­‰èµ„æºæå‰æ¨é€ç»™æµè§ˆå™¨ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>POST</category>
      </categories>
      <tags>
        <tag>HTTP2</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤é˜¶æ®µæäº¤çš„ç»†è‡´åˆ†è§£</title>
    <url>/POST/%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E7%9A%84%E7%BB%86%E8%87%B4%E5%88%86%E8%A7%A3.html</url>
    <content><![CDATA[<p>keywords: åŸå­æäº¤ï¼ŒåŸå­æäº¤åè®®</p>
<p>åŸå­æäº¤ï¼ˆatomic commitï¼‰ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ç»´æŠ¤äº‹åŠ¡çš„åŸå­æ€§ï¼Œæ‰€æœ‰èŠ‚ç‚¹å¯¹äºäº‹åŠ¡çš„ç»“æœå¿…é¡»è¾¾æˆå…±è¯†ï¼Œè¦ä¹ˆæ‰€æœ‰èŠ‚ç‚¹å…¨éƒ¨æäº¤äº‹åŠ¡ï¼Œè¦ä¹ˆæ‰€æœ‰èŠ‚ç‚¹å…¨éƒ¨æ”¾å¼ƒäº‹åŠ¡ã€‚è¿™ä¸ªå°±å«åšåŸå­æäº¤ã€‚</p>
<p>åŸå­æäº¤åè®®ï¼Œæ˜¯å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡èŠ‚ç‚¹æ‰€ä½¿ç”¨çš„ä¸€ä¸ªåä½œè¿‡ç¨‹ï¼Œå®ƒä½¿å¤šä¸ªèŠ‚ç‚¹èƒ½å¤Ÿåœ¨æäº¤äº‹åŠ¡è¿˜æ˜¯æ”¾å¼ƒäº‹åŠ¡ä¸Šè¾¾æˆå…±è¯†ã€‚</p>
<p>ä¸¤é˜¶æ®µæäº¤ï¼ˆtwo-phase commitï¼‰ï¼šæ˜¯ä¸€ç§è·¨å¤šèŠ‚ç‚¹å®ç°<strong>åŸå­æäº¤</strong>çš„ç®—æ³•ï¼Œå³ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹æäº¤æˆ–æ‰€æœ‰èŠ‚ç‚¹æ”¾å¼ƒã€‚å®ƒæ˜¯æœ€å¸¸ç”¨çš„åŸå­æäº¤åè®®ã€‚</p>
<p>åœ¨å•é˜¶æ®µæäº¤çš„æ–¹å¼ä¸­ï¼Œå®¢æˆ·ç«¯è¦æ±‚æäº¤äº‹åŠ¡æ—¶ï¼Œä¸å…è®¸ä»»ä½•èŠ‚ç‚¹å•æ–¹é¢æ”¾å¼ƒäº‹åŠ¡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé˜»æ­¢èŠ‚ç‚¹æäº¤å®ƒè‡ªå·±é‚£éƒ¨åˆ†äº‹åŠ¡çš„åŸå› é€šå¸¸ä¸å¹¶å‘æ§åˆ¶é—®é¢˜æœ‰å…³ï¼ˆåŠ é”åçš„æ­»é”é—®é¢˜ï¼Œéœ€è¦å°†äº‹åŠ¡æ”¾å¼ƒï¼‰ã€‚</p>
<p>ä¸¤é˜¶æ®µæäº¤çš„è®¾è®¡å‡ºå‘ç‚¹ï¼Œæ˜¯å…è®¸ä»»ä½•ä¸€ä¸ªå‚ä¸è€…<strong>è‡ªè¡Œæ”¾å¼ƒ</strong>å®ƒè‡ªå·±çš„é‚£éƒ¨åˆ†äº‹åŠ¡ã€‚</p>
<p>ç”±äºäº‹åŠ¡çš„åŸå­æ€§è¦æ±‚ï¼Œå¦‚æœéƒ¨åˆ†äº‹åŠ¡åˆ«æ”¾å¼ƒï¼Œé‚£ä¹ˆæ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¹Ÿå¿…é¡»è¢«æ”¾å¼ƒã€‚</p>
<p>åœ¨ä¸¤é˜¶æ®µæäº¤çš„ç¬¬ä¸€é˜¶æ®µï¼Œæ¯ä¸ªå‚ä¸è€…æŠ•ç¥¨è¡¨å†³äº‹åŠ¡æ—¶æ”¾å¼ƒè¿˜æ˜¯æäº¤ã€‚ä¸€æ—¦å‚ä¸è€…æŠ•ç¥¨è¦æ±‚æäº¤äº‹åŠ¡ï¼Œé‚£ä¹ˆå°±ä¸å…è®¸æ”¾å¼ƒäº‹åŠ¡ï¼ˆä»»ä½•æƒ…å†µéƒ½ä¸å…è®¸ï¼Œå®•æœºï¼Œç¡¬ç›˜ç©ºé—´ä¸è¶³ï¼Œç”šè‡³æ–­ç”µéƒ½ä¸å…è®¸æ”¾å¼ƒã€‚è¿™éœ€è¦åœ¨å·¥ç¨‹å®ç°ä¸Šè¿›è¡Œä¿è¯ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€é˜¶æ®µä¸­ï¼Œæ¯ä¸ªå‚ä¸è€…å¯¹è‡ªå·±é‚£éƒ¨åˆ†çš„äº‹åŠ¡æœ‰å•æ–¹é¢æ”¾å¼ƒçš„æƒåŠ›ï¼Œæ”¾å¼ƒåˆ™æŠ•ç¥¨æ”¾å¼ƒæ•´ä¸ªäº‹åŠ¡ï¼Œå¦åˆ™æŠ•ç¥¨æäº¤æ•´ä¸ªäº‹åŠ¡ã€‚å‚ä¸è€…ä¸€æ—¦æŠ•ç¥¨å®Œæˆï¼Œå°±å¤±å»äº†äº‹åŠ¡å•æ–¹é¢çš„æƒåŠ›ï¼Œå¹¶ä¸”è¿™ä¸ªæƒåŠ›è¢«ç»Ÿä¸€è½¬ç§»åˆ°äº†åè°ƒè€…ã€‚åè°ƒè€…ä¾æ®æŠ•ç¥¨ç»“æœï¼Œç¡®å®šä¸€ä¸ªå…±åŒçš„å†³å®šï¼ˆå…±è¯†ï¼‰ï¼šæ˜¯æäº¤äº‹åŠ¡ï¼Œè¿˜æ˜¯æ”¾å¼ƒäº‹åŠ¡ã€‚</p>
<p>åè®®åœ¨æ— æ•…éšœçš„æƒ…å†µä¸‹ç›¸å½“ç®€å•ï¼Œä½†æ˜¯åè®®å¿…é¡»åœ¨å„ç§æ•…éšœæ—¶ä¹Ÿèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚è¿™ä¸ªæ•…éšœåŒ…æ‹¬èŠ‚ç‚¹å´©æºƒï¼Œæ¶ˆæ¯ä¸¢å¤±æˆ–è€…èŠ‚ç‚¹æš‚æ—¶å¤±è”ç­‰ç­‰ã€‚</p>
<p><a href="https://zhuanlan.zhihu.com/p/358576217">MysqlåŸºäºä¸¤é˜¶æ®µå®ç°redoã€binlogæ—¥å¿—ä¸€è‡´æ€§ - blueskyçš„æ–‡ç«  - çŸ¥ä¹ </a></p>
<h1 id="è¿‡ç¨‹"><a class="header-anchor" href="#è¿‡ç¨‹"></a>è¿‡ç¨‹</h1>
<p>è§’è‰²ï¼šå®¢æˆ·ç«¯clientï¼Œåè°ƒè€…coordinatorï¼Œå‚ä¸è€…participant</p>
<p>å®¢æˆ·ç«¯å‘å¯åŠ¨ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå®ƒå‘åè°ƒè€…è¯·æ±‚ä¸€ä¸ªäº‹åŠ¡IDï¼Œå¹¶å°†æ­¤äº‹åŠ¡æ¶ˆæ¯å‘é€ç»™æ‰€æœ‰å‚ä¸è€…ã€‚</p>
<p>åœ¨å®é™…çš„åˆ†å¸ƒå¼æ•°æ®åº“ä¸­ï¼Œå¼€å§‹ä¸¤é˜¶æ®µæäº¤å‰ç”±åè°ƒè€…å‘è‹¥å¹²å‚ä¸è€…å‘é€SQLè¯·æ±‚æˆ–æ‰§è¡Œè®¡åˆ’ï¼ŒåŒ…æ‹¬è·å–è¡Œé”ï¼Œç”Ÿæˆredoæ•°æ®ç­‰æ“ä½œã€‚</p>
<p>ç¬¬ä¸€é˜¶æ®µï¼šæŠ•ç¥¨é˜¶æ®µ/å‡†å¤‡é˜¶æ®µï¼ŒPrepareé˜¶æ®µ</p>
<p>ç¬¬äºŒé˜¶æ®µï¼šå®Œæˆé˜¶æ®µï¼ŒCommité˜¶æ®µ</p>
<h1 id="å±€é™"><a class="header-anchor" href="#å±€é™"></a>å±€é™</h1>
<p>é˜»å¡ï¼š2PCæ˜¯ä¸€ä¸ªé˜»å¡å¼çš„åè®®ï¼Œåœ¨æ‰€æœ‰å‚ä¸è€…æ‰§è¡Œcommit/abortä¹‹å‰çš„ä»»ä½•æ—¶é—´å†…åè°ƒè€…å®•æœºï¼Œéƒ½å°†é˜»å¡äº‹åŠ¡è¿›ç¨‹ï¼Œå¿…é¡»ç­‰å¾…åè°ƒè€…æ¢å¤åï¼Œäº‹åŠ¡æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</p>
<p>å»¶è¿Ÿï¼šåè°ƒè€…è¦æŒä¹…åŒ–äº‹åŠ¡çš„commit/abortçŠ¶æ€åæ‰èƒ½å‘é€commit/abortå‘½ä»¤ï¼Œå› æ­¤å…¨ç¨‹è‡³å°‘2æ¬¡RPCå»¶è¿Ÿï¼ˆprepare+commitï¼‰ï¼Œå’Œ3æ¬¡æŒä¹…åŒ–æ•°æ®å»¶è¿Ÿï¼ˆprepareå†™æ—¥å¿—+åè°ƒè€…çŠ¶æ€æŒä¹…åŒ–+commitå†™æ—¥å¿—ï¼‰ã€‚</p>
<h2 id="å¦‚ä½•åˆ¤æ–­binlogå’Œredologæ˜¯å¦è¾¾æˆäº†ä¸€è‡´"><a class="header-anchor" href="#å¦‚ä½•åˆ¤æ–­binlogå’Œredologæ˜¯å¦è¾¾æˆäº†ä¸€è‡´"></a>å¦‚ä½•åˆ¤æ–­binlogå’Œredologæ˜¯å¦è¾¾æˆäº†ä¸€è‡´#</h2>
<p><strong>è¿™ä¸ªçŸ¥è¯†ç‚¹å¯æ˜¯çº¯å¹²è´§ï¼</strong></p>
<p>å½“MySQLå†™å®Œredologå¹¶å°†å®ƒæ ‡è®°ä¸ºprepareçŠ¶æ€æ—¶ï¼Œå¹¶ä¸”ä¼šåœ¨redologä¸­è®°å½•ä¸€ä¸ªXIDï¼Œå®ƒå…¨å±€å”¯ä¸€çš„æ ‡è¯†ç€è¿™ä¸ªäº‹åŠ¡ã€‚è€Œå½“ä½ è®¾ç½®<code>sync_binlog=1</code>æ—¶ï¼Œåšå®Œäº†ä¸Šé¢ç¬¬ä¸€é˜¶æ®µå†™redologåï¼Œmysqlå°±ä¼šå¯¹åº”binlogå¹¶ä¸”ä¼šç›´æ¥å°†å…¶åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</p>
<p>ä¸‹å›¾å°±æ˜¯ç£ç›˜ä¸Šçš„rowæ ¼å¼çš„binlogè®°å½•ã€‚binlogç»“æŸçš„ä½ç½®ä¸Šä¹Ÿæœ‰ä¸€ä¸ªXIDã€‚</p>
<p>åªè¦è¿™ä¸ªXIDå’Œredologä¸­è®°å½•çš„XIDæ˜¯ä¸€è‡´çš„ï¼ŒMySQLå°±ä¼šè®¤ä¸ºbinlogå’Œredologé€»è¾‘ä¸Šä¸€è‡´ã€‚å°±ä¸Šé¢çš„åœºæ™¯æ¥è¯´å°±ä¼šcommitï¼Œè€Œå¦‚æœä»…ä»…æ˜¯rodologä¸­è®°å½•äº†XIDï¼Œbinlogä¸­æ²¡æœ‰ï¼ŒMySQLå°±ä¼šRollBack</p>
<p><img src="https://pic2.zhimg.com/80/v2-217bcf3a4d081e4734b12c32b5a05d55_1440w.jpg" alt="img"></p>
<p>(1)prepareé˜¶æ®µæŠŠpageç‰©ç†ä¿®æ”¹è®°å½•åˆ°redo bufferï¼Œ(2)å°†é€»è¾‘æ“ä½œå†™binlogç¼“å­˜åŒºå¹¶ç›´æ¥è½ç›˜åˆ°ç£ç›˜binlogæ–‡ä»¶ï¼Œ(3)commité˜¶æ®µæ‰å…è®¸ä¸»çº¿ç¨‹å°†redo bufferé‡Œçš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜redo logæ–‡ä»¶ã€‚æ— è®ºæ˜¯(1)(2)ä¹‹é—´å®•æœºè¿˜æ˜¯(2)(3)ä¹‹é—´å®•æœºï¼Œéƒ½ä¼šå›æ»šï¼Œ(3)ä¹‹åæ‰ä¼šæäº¤ã€‚æ˜¯è¿™æ ·çš„å—ï¼Ÿ</p>
<blockquote>
<p>Prepareé˜¶æ®µï¼Œå°†Redo Logå†™å…¥æ–‡ä»¶ï¼Œå¹¶åˆ·å…¥ç£ç›˜ï¼Œè®°å½•ä¸Šå†…éƒ¨XAäº‹åŠ¡çš„IDï¼ŒåŒæ—¶å°†Redo LogçŠ¶æ€è®¾ç½®ä¸ºPrepareã€‚Redo Logå†™å…¥æˆåŠŸåï¼Œå†å°†BinlogåŒæ ·åˆ·å…¥ç£ç›˜ï¼Œè®°å½•XAäº‹åŠ¡IDã€‚</p>
<p>Commité˜¶æ®µï¼Œå‘ç£ç›˜ä¸­çš„Redo Logå†™å…¥Commitæ ‡è¯†ï¼Œè¡¨ç¤ºäº‹åŠ¡æäº¤ã€‚ç„¶åæ‰§è¡Œå™¨è°ƒç”¨å­˜å‚¨å¼•æ“çš„æ¥å£æäº¤äº‹åŠ¡ã€‚è¿™å°±æ˜¯æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<h3 id="éªŒè¯2PCæœºåˆ¶çš„å¯ç”¨æ€§"><a class="header-anchor" href="#éªŒè¯2PCæœºåˆ¶çš„å¯ç”¨æ€§"></a><strong>éªŒè¯2PCæœºåˆ¶çš„å¯ç”¨æ€§</strong></h3>
<p>è¿™å°±æ˜¯2PCæäº¤Redo Logå’ŒBinlogçš„è¿‡ç¨‹ï¼Œé‚£åœ¨è¿™ä¸ªæœŸé—´å‘ç”Ÿäº†å¼‚å¸¸ï¼Œ2PCè¿™å¥—æœºåˆ¶çœŸçš„èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§å—ï¼Ÿ</p>
<p>å‡è®¾Redo Logåˆ·å…¥æˆåŠŸäº†ï¼Œä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠåˆ·å…¥Binlog MySQLå°±æŒ‚äº†ã€‚æ­¤æ—¶é‡å¯ä¹‹åä¼šå‘ç°Redo Logå¹¶æ²¡æœ‰Commitæ ‡è¯†ï¼Œæ­¤æ—¶æ ¹æ®è®°å½•çš„XAäº‹åŠ¡æ‰¾åˆ°è¿™ä¸ªäº‹åŠ¡ï¼Œè¿›è¡Œå›æ»šã€‚</p>
<p>å¦‚æœRedo Logåˆ·å…¥æˆåŠŸï¼Œè€Œä¸”Binlogä¹Ÿåˆ·å…¥æˆåŠŸäº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ¥å¾—åŠå°†Redo Logä»Prepareæ”¹æˆCommit MySQLå°±æŒ‚äº†ï¼Œæ­¤æ—¶é‡å¯ä¼šå‘ç°è™½ç„¶Redo Logæ²¡æœ‰Commitæ ‡è¯†ï¼Œä½†æ˜¯é€šè¿‡XIDæŸ¥è¯¢åˆ°çš„Binlogå´å·²ç»æˆåŠŸåˆ·å…¥ç£ç›˜äº†ã€‚</p>
<p>æ­¤æ—¶ï¼Œè™½ç„¶Redo Logæ²¡æœ‰Commitæ ‡è¯†ï¼ŒMySQLä¹Ÿè¦æäº¤è¿™ä¸ªäº‹åŠ¡ã€‚å› ä¸ºBinlogä¸€æ—¦å†™å…¥ï¼Œå°±å¯èƒ½ä¼šè¢«ä»åº“æˆ–è€…ä»»ä½•æ¶ˆè´¹Binlogçš„æ¶ˆè´¹è€…ç»™æ¶ˆè´¹ã€‚å¦‚æœæ­¤æ—¶MySQLä¸æäº¤äº‹åŠ¡ï¼Œåˆ™å¯èƒ½é€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚è€Œä¸”ç›®å‰Redo Logå’ŒBinlogä»æ•°æ®å±‚é¢ä¸Šï¼Œå…¶å®å·²ç»Readyäº†ï¼Œåªæ˜¯å·®ä¸ªæ ‡å¿—ä½ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>POST</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆå°Prometheusä¸Grafanaç›‘æ§Docker</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/%E5%88%9D%E5%B0%9DPrometheus%E4%B8%8EGrafana%E7%9B%91%E6%8E%A7Docker.html</url>
    <content><![CDATA[<h1 id="ç›‘æ§ä½“ç³»éœ€è¦çš„å››ä¸ªæœåŠ¡"><a class="header-anchor" href="#ç›‘æ§ä½“ç³»éœ€è¦çš„å››ä¸ªæœåŠ¡"></a>ç›‘æ§ä½“ç³»éœ€è¦çš„å››ä¸ªæœåŠ¡</h1>
<ul>
<li>n * Node Exporter (æ”¶é›†Hostç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯)</li>
<li>n * cAdvisor (è´Ÿè´£æ”¶é›†Hostä¸Šè¿è¡Œçš„å®¹å™¨ä¿¡æ¯)</li>
<li>1 * Prometheus Server(æ™®ç½—ç±³ä¿®æ–¯ç›‘æ§ä¸»æœåŠ¡å™¨ )</li>
<li>1 * Grafana (å±•ç¤ºæ™®ç½—ç±³ä¿®æ–¯ç›‘æ§ç•Œé¢ï¼‰</li>
</ul>
<p>è¢«ç›‘æ§çš„æœåŠ¡å™¨ä¸Šå¯åŠ¨Node Exporter (æ”¶é›†Hostç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯) ä»¥åŠ cAdvisor (è´Ÿè´£æ”¶é›†Hostä¸Šè¿è¡Œçš„å®¹å™¨ä¿¡æ¯)å³å¯</p>
<p>ç„¶ååœ¨prometheus.ymlé…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸Štargetsåœ°å€å³å¯ã€‚</p>
<h1 id="è§„åˆ’"><a class="header-anchor" href="#è§„åˆ’"></a>è§„åˆ’</h1>
<p>ç›®å‰åªæœ‰ä¸€ä¸ªHost(192.168.0.108)</p>
<p>NodeExporterç«¯å£9100</p>
<p>cAdvisorç«¯å£8080</p>
<p>Prometheusç«¯å£9090</p>
<p>Grafanaç«¯å£3000</p>
<p><img src="https://tximgcdn.tung7.com/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker_20210804195720_642447.png" alt="éƒ¨ç½²è§„åˆ’"></p>
<h1 id="å¯åŠ¨NodeExporter"><a class="header-anchor" href="#å¯åŠ¨NodeExporter"></a>å¯åŠ¨NodeExporter</h1>
<p><a href="https://github.com/prometheus/node_exporter/">https://github.com/prometheus/node_exporter/</a></p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><code class="hljs livescript">docker run -d -p <span class="hljs-number">9100</span>:<span class="hljs-number">9100</span> <span class="hljs-string">\</span><br>-v <span class="hljs-string">&quot;/proc:/host/proc&quot;</span> <span class="hljs-string">\</span><br>-v <span class="hljs-string">&quot;/sys:/host/sys&quot;</span> <span class="hljs-string">\</span><br>-v <span class="hljs-string">&quot;/:/rootfs&quot;</span> <span class="hljs-string">\</span><br>-v <span class="hljs-string">&quot;/etc/localtime:/etc/localtime&quot;</span> <span class="hljs-string">\</span><br>--net=host <span class="hljs-string">\</span><br>--name=node-exporter <span class="hljs-string">\</span><br>prom/node-exporter <span class="hljs-string">\</span><br>--path.procfs /host/proc <span class="hljs-string">\</span><br>--path.sysfs /host/sys <span class="hljs-string">\</span><br>--collector.filesystem.ignored-mount-points <span class="hljs-string">&quot;^/(sys|proc|dev|host|etc)($|/)&quot;</span><br></code></pre></td></tr></table></figure>
<h1 id="å¯åŠ¨cAdvisor"><a class="header-anchor" href="#å¯åŠ¨cAdvisor"></a>å¯åŠ¨cAdvisor</h1>
<p><a href="https://github.com/google/cadvisor">https://github.com/google/cadvisor</a></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><code class="hljs ruby">docker run -d \<br>--volume=<span class="hljs-regexp">/:/rootfs</span><span class="hljs-symbol">:ro</span> \<br>--volume=<span class="hljs-regexp">/var/run</span><span class="hljs-symbol">:/var/run</span><span class="hljs-symbol">:rw</span> \<br>--volume=<span class="hljs-regexp">/sys:/sys</span><span class="hljs-symbol">:ro</span> \<br>--volume=<span class="hljs-regexp">/var/lib</span><span class="hljs-regexp">/docker/</span><span class="hljs-symbol">:/var/lib/docker</span><span class="hljs-symbol">:ro</span> \<br>--publish=<span class="hljs-number">8080</span><span class="hljs-symbol">:</span><span class="hljs-number">8080</span> \<br>--detach=<span class="hljs-literal">true</span> \<br>--name=cadvisor \<br>--net=host \<br>-v <span class="hljs-string">&quot;/etc/localtime:/etc/localtime&quot;</span> \<br>google/<span class="hljs-symbol">cadvisor:</span>latest<br></code></pre></td></tr></table></figure>
<h1 id="å¯åŠ¨Prometheus"><a class="header-anchor" href="#å¯åŠ¨Prometheus"></a>å¯åŠ¨Prometheus</h1>
<p><a href="https://prometheus.io/">Prometheus - Monitoring system &amp; time series database</a></p>
<p>prometheusçš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯å¡«å†™ç›‘å¬çš„åœ°å€ï¼ˆæ‰€æœ‰è¢«ç›‘æ§æœºå™¨çš„NodeExporteræœåŠ¡ä¸cAdvisoræœåŠ¡çš„åˆ—è¡¨ï¼‰</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># my global config</span><br><span class="hljs-attr">global:</span><br>  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span> <span class="hljs-comment"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span><br>  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span> <span class="hljs-comment"># Evaluate rules every 15 seconds. The default is every 1 minute.</span><br>  <span class="hljs-comment"># scrape_timeout is set to the global default (10s).</span><br><br><span class="hljs-comment"># Alertmanager configuration</span><br><span class="hljs-attr">alerting:</span><br>  <span class="hljs-attr">alertmanagers:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span><br>          <span class="hljs-comment"># - alertmanager:9093</span><br><br><span class="hljs-comment"># Load rules once and periodically evaluate them according to the global &#x27;evaluation_interval&#x27;.</span><br><span class="hljs-attr">rule_files:</span><br>  <span class="hljs-comment"># - &quot;first_rules.yml&quot;</span><br>  <span class="hljs-comment"># - &quot;second_rules.yml&quot;</span><br><br><span class="hljs-comment"># A scrape configuration containing exactly one endpoint to scrape:</span><br><span class="hljs-comment"># Here it&#x27;s Prometheus itself.</span><br><span class="hljs-attr">scrape_configs:</span><br>  <span class="hljs-comment"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&quot;prometheus&quot;</span><br>    <span class="hljs-comment"># metrics_path defaults to &#x27;/metrics&#x27;</span><br>    <span class="hljs-comment"># scheme defaults to &#x27;http&#x27;.</span><br>    <span class="hljs-attr">static_configs:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&quot;localhost:9090&quot;</span>]<br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&quot;docker-cluster&quot;</span><br>    <span class="hljs-attr">static_configs:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&quot;192.168.0.108:9100&quot;</span>,<span class="hljs-string">&quot;192.168.0.108:8080&quot;</span>]<br></code></pre></td></tr></table></figure>
<p>å¯åŠ¨,æ³¨æ„æ˜ å°„é…ç½®æ–‡ä»¶çš„ç›®å½•</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><code class="hljs awk">docker run -d -p <span class="hljs-number">9090</span>:<span class="hljs-number">9090</span> \<br>-v <span class="hljs-regexp">/opt/</span>sc<span class="hljs-regexp">/runner/</span>prometheus.yml:<span class="hljs-regexp">/etc/</span>prometheus/prometheus.yml \<br>-v <span class="hljs-string">&quot;/etc/localtime:/etc/localtime&quot;</span> \<br>--name prometheus \<br>--net=host \<br>prom/prometheus<br></code></pre></td></tr></table></figure>
<h1 id="å¯åŠ¨Grafana"><a class="header-anchor" href="#å¯åŠ¨Grafana"></a>å¯åŠ¨Grafana</h1>
<figure class="highlight livescript"><table><tr><td class="code"><pre><code class="hljs livescript">docker run -d -i -p <span class="hljs-number">3000</span>:<span class="hljs-number">3000</span> <span class="hljs-string">\</span><br>-v <span class="hljs-string">&quot;/etc/localtime:/etc/localtime&quot;</span> <span class="hljs-string">\</span><br>-e <span class="hljs-string">&quot;GF_SERVER_ROOT_URL=http://grafana.server.name&quot;</span> <span class="hljs-string">\</span><br>-e <span class="hljs-string">&quot;GF_SECURITY_ADMIN_PASSWORD=admin8888&quot;</span> <span class="hljs-string">\</span><br>--name grafana <span class="hljs-string">\</span><br>--net=host <span class="hljs-string">\</span><br>grafana/grafana<br></code></pre></td></tr></table></figure>
<p>ç”¨æˆ·åå¯†ç admin/admin8888</p>
<h2 id="é…ç½®Prometheusä½œä¸ºDatasource"><a class="header-anchor" href="#é…ç½®Prometheusä½œä¸ºDatasource"></a>é…ç½®Prometheusä½œä¸ºDatasource</h2>
<p>æµè§ˆå™¨è®¿é—®Gafanaçš„åœ°å€192.168.0.108:3000ã€‚</p>
<p>Configuration - Data sources - Add data source - é€‰æ‹©Prometheusç±»å‹ - å¡«å†™URLä¸ºï¼š192.168.0.108:9090å³å¯ï¼Œå…¶å®ƒå¯ä»¥é»˜è®¤</p>
<h2 id="å¯¼å…¥Dashborad"><a class="header-anchor" href="#å¯¼å…¥Dashborad"></a>å¯¼å…¥Dashborad</h2>
<p>åœ¨ä¸‹é¢ç½‘ç«™æœç´¢åˆ°æƒ³è¦æ·»åŠ çš„Dashboradã€‚</p>
<p>æ¨è179ï¼Œ893ï¼Œ8919</p>
<p><a href="https://grafana.com/grafana/dashboards?dataSource=prometheus&amp;search=docker">Grafana Dashboards - discover and share dashboards for Grafana. | Grafana Labs</a></p>
<p><img src="https://tximgcdn.tung7.com/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker_20210804201558_324957.png" alt=""></p>
<p><img src="https://tximgcdn.tung7.com/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker/%E5%88%9D%E5%B0%9DPrometheus+Grafana%E7%9B%91%E6%8E%A7Docker_20210810190711_869122.png" alt=""></p>
<h1 id="Docker-å¯åŠ¨-cAdvisor-æŠ¥é”™é—®é¢˜è§£å†³"><a class="header-anchor" href="#Docker-å¯åŠ¨-cAdvisor-æŠ¥é”™é—®é¢˜è§£å†³"></a>Docker å¯åŠ¨ cAdvisor æŠ¥é”™é—®é¢˜è§£å†³</h1>
<blockquote>
<p>Failed to start container manager: inotify_add_watch<br>
/sys/fs/cgroup/cpuacct,cpu: no such file or directory</p>
</blockquote>
<figure class="highlight awk"><table><tr><td class="code"><pre><code class="hljs awk">mount -o remount,rw <span class="hljs-string">&#x27;/sys/fs/cgroup&#x27;</span><br>ln -s <span class="hljs-regexp">/sys/</span>fs<span class="hljs-regexp">/cgroup/</span>cpu,cpuacct <span class="hljs-regexp">/sys/</span>fs<span class="hljs-regexp">/cgroup/</span>cpuacct,cpu<br></code></pre></td></tr></table></figure>
<p>ç„¶åé‡å¯å®¹å™¨å³å¯ã€‚sd</p>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP2ä¸Java9</title>
    <url>/POST/HTTP2.0%E4%B8%8EJava.html</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>POST</category>
      </categories>
      <tags>
        <tag>HTTP2</tag>
        <tag>Java9</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆï¼Ÿ</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E7%9A%84ISN%E9%9C%80%E8%A6%81%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90.html</url>
    <content><![CDATA[<ul>
<li>é¿å…ISNé¢„æµ‹ï¼Œé˜²æ­¢TCP Resetæ”»å‡»?
<ul>
<li>é˜²èŒƒçš„å…³é”®æ˜¯åœ¨IPå±‚é€šä¿¡çš„åŠ å¯†?</li>
</ul>
</li>
<li>ISNçš„ç”Ÿæˆæœºåˆ¶</li>
</ul>
<hr>
<p>ä¸‹é¢æ‘˜æŠ„RFC793çš„åŸæ–‡</p>
<blockquote>
<p>Initial Sequence Number Selection</p>
<p>The protocol places no restriction on a particular connection being<br>
used over and over again.  A connection is defined by a pair of<br>
sockets.  New instances of a connection will be referred to as<br>
incarnations of the connection.  The problem that arises from this is<br>
â€“ â€œhow does the TCP identify duplicate segments from previous<br>
incarnations of the connection?â€  This problem becomes apparent if the<br>
connection is being opened and closed in quick succession, or if the<br>
connection breaks with loss of memory and is then reestablished.</p>
<p>To avoid confusion we must prevent segments from one incarnation of a<br>
connection from being used while the same sequence numbers may still<br>
be present in the network from an earlier incarnation.  We want to<br>
assure this, even if a TCP crashes and loses all knowledge of the<br>
sequence numbers it has been using.  When new connections are created,<br>
an initial sequence number (ISN) generator is employed which selects a<br>
new 32 bit ISN.  The generator is bound to a (possibly fictitious) 32<br>
bit clock whose low order bit is incremented roughly every 4<br>
microseconds.  Thus, the ISN cycles approximately every 4.55 hours.<br>
Since we assume that segments will stay in the network no more than<br>
the Maximum Segment Lifetime (MSL) and that the MSL is less than 4.55<br>
hours we can reasonably assume that ISNâ€™s will be unique.</p>
</blockquote>
<p>ä¸€ä¸ªé•¿åº¦ä¸º32bit,æ¯4å¾®å¦™åŠ ä¸€çš„è®¡æ•°å™¨æ¥é€‰å®šISNã€‚ç„¶è€Œï¼Œè¿™ä¸ªISNçš„è§„å¾‹æ˜¯å¯ä»¥è½»æ˜“é¢„æµ‹çš„ï¼Œä»è€Œä¼ªé€ å‡ºä¸€ä¸ªå¯ä»¥æ‰°ä¹±å¹¶æ³¨å…¥TCPè¿æ¥çš„TCP Segmentï¼ˆåªè¦æœ‰æ­£ç¡®çš„Socketå’ŒSeq Numï¼‰ã€‚å› æ­¤ï¼ŒRFC 793è¿™ç§é€‰å®šISNçš„åšæ³•å¹¶ä¸å¯å–ã€‚</p>
<p>è€Œåï¼ŒRFC1948ä¸­æå‡ºäº†ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹åŒ–åºåˆ—å·ISNéšæœºç”Ÿæˆç®—æ³•ï¼š</p>
<p><strong>ISN = M + F(localhost, localport, remotehost, remoteport).</strong></p>
<p>å…¶ä¸­ï¼šMæ˜¯ä¸€ä¸ªè®¡æ—¶å™¨ï¼ŒFæ˜¯ä¸€ä¸ªHashç®—æ³•ã€‚</p>
<p>å½“å‰ï¼Œå¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿéƒ½ä½¿ç”¨è¿™ç§åŠéšæœºçš„æ–¹å¼å»é€‰æ‹©ISNã€‚ä½¿ç”¨â€œè®¡æ—¶å™¨ + éšæœºåç§»é‡â€çš„æ–¹æ³•æ¥é€‰å®šISNã€‚</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>TCPåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>Lab | TCPå»ºç«‹è¿æ¥åé“¾è·¯æ–­å¼€äº†ä¼šå‘ç”Ÿä»€ä¹ˆ</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/TCP%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E5%90%8E%E9%93%BE%E8%B7%AF%E6%96%AD%E5%BC%80%E4%BA%86%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html</url>
    <content><![CDATA[<ul>
<li>TCPè¿æ¥æ˜¯è™šæ‹Ÿçš„ï¼ŒæŠ½è±¡çš„</li>
<li>å¯¹åº•å±‚é“¾è·¯å‡ºç°çš„æ–­å¼€æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä¼šå¯¼è‡´å‡ºç°å‡è¿æ¥</li>
<li>KILLå‘½ä»¤ç›´æ¥æ€æ­»æœåŠ¡ç«¯ç¨‹åºåçš„è¿æ¥çŠ¶æ€</li>
<li>æ–­ç½‘æ–­ç”µåçš„è¿æ¥çŠ¶æ€</li>
</ul>
<hr>
<p>TCPçš„è¿æ¥æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼ŒRFC793æ–‡æ¡£ä¸­å°†è¿æ¥ç§°ä¹‹ä¸ºsockets,åºå·,çª—å£å¤§å°è¿™ç±»ä¿¡æ¯çš„ç»„åˆã€‚</p>
<blockquote>
<p>The reliability and flow control mechanisms described above require that TCPs initialize and maintain certain status information for each data stream. The combination of this information, including sockets, sequence numbers, and window sizes, is called a connection.</p>
</blockquote>
<p>å®é™…ä¸Šå¯ä»¥è¿™ä¹ˆç†è§£ï¼šè¿æ¥å°±æ˜¯åœ¨é€šä¿¡åŒç«¯ä¼ è¾“çŠ¶æ€ï¼ˆçŠ¶æ€æœºï¼‰ä¸çŠ¶æ€å¯¹åº”ä¿¡æ¯ï¼ˆåºå·ï¼Œçª—å£ï¼Œé€‰é¡¹ç­‰ç­‰ï¼‰çš„ç»´æŒï¼Œå®ƒæ˜¯æŠ½è±¡çš„ï¼ŒTCPç«¯å¯¹ç«¯é€šä¿¡å®é™…ä¸Šä¸å­˜åœ¨ä¸€æ¡å¯é çš„ç‰©ç†è¿æ¥ï¼Œå®ƒæ€»è¦ä¾æ‰˜ä¸‹å±‚ä¸å¯é çš„IPå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ã€‚å› æ­¤ï¼Œå‡ºç°äº†è¿™ä¸ªç–‘é—®ï¼šå½“è¿æ¥å»ºç«‹åï¼Œç‰©ç†é“¾è·¯æ–­å¼€äº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä½¿ç”¨<code>kill -9</code>ç›´æ¥æ€æ­»æœåŠ¡ç«¯ç¨‹åº</li>
<li>æ‹”ç½‘çº¿ï¼ŒæœåŠ¡å™¨æ–­ç”µ</li>
</ul>
<h1 id="KILLå‘½ä»¤ç›´æ¥æ€æ­»æœåŠ¡ç«¯ç¨‹åºåçš„è¿æ¥çŠ¶æ€"><a class="header-anchor" href="#KILLå‘½ä»¤ç›´æ¥æ€æ­»æœåŠ¡ç«¯ç¨‹åºåçš„è¿æ¥çŠ¶æ€"></a>KILLå‘½ä»¤ç›´æ¥æ€æ­»æœåŠ¡ç«¯ç¨‹åºåçš„è¿æ¥çŠ¶æ€</h1>
<ul>
<li>Serverå¯åŠ¨æœåŠ¡ç¨‹åº</li>
<li>tcpdumpåœ¨Clientä¾§è¿›è¡ŒæŠ“åŒ…</li>
<li>Clientè¿æ¥æœåŠ¡ç¨‹åº</li>
<li>æ€æ­»æœåŠ¡ç¨‹åº</li>
</ul>
<p>åœ¨Serverä¸Šä½¿ç”¨<code>netcat</code>å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç¨‹åºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nc -l 9999</span><br></code></pre></td></tr></table></figure>
<p>åœ¨Clientä¾§ä½¿ç”¨<code>tcpdump</code>æŠ“åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># tcpdump -i any -n -# port 9999</span><br></code></pre></td></tr></table></figure>
<p>å†ä½¿ç”¨<code>netcat</code>ä½œä¸ºClientè¿æ¥Serverçš„æœåŠ¡ç¨‹åºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nc -vn 192.168.0.108 9999</span><br>Connection to 192.168.0.108 9999 port [tcp/*] succeeded!<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>netstat</code>å‘½ä»¤æŸ¥çœ‹è¿æ¥ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># netstat -antlp | grep 9999</span><br>tcp        0      0 0.0.0.0:9999            0.0.0.0:*               LISTEN      12650/nc            <br>tcp        0      0 192.168.0.108:53756     192.168.0.108:9999      ESTABLISHED 12671/nc            <br>tcp        0      0 192.168.0.108:9999      192.168.0.108:53756     ESTABLISHED 12650/nc    <br></code></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºServerçš„æœåŠ¡ç¨‹åºPID=12650ï¼Œç¬¬äºŒæ¡è®°å½•ä¸ºClientåˆ°Serverçš„è¿æ¥ï¼Œç¬¬ä¸‰æ¡ä¸ºServeråˆ°Clientçš„è¿æ¥ã€‚</p>
<p>æ€æ­»æœåŠ¡ç¨‹åº<code>kill -9 12650</code>åï¼Œå†æ¬¡æŸ¥çœ‹è¿æ¥ä¿¡æ¯:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># netstat -antlp | grep 9999</span><br>tcp        0      0 192.168.0.108:53756     192.168.0.108:9999      CLOSE_WAIT  12671/nc            <br>tcp        0      0 192.168.0.108:9999      192.168.0.108:53756     FIN_WAIT2   - <br></code></pre></td></tr></table></figure>
<p>æ€æ­»è¿›ç¨‹ä½¿å¾—Serverå‘é€FINè¯·æ±‚ï¼Œè¿æ¥çŠ¶æ€å˜ä¸º<code>FIN_WAIT1</code>-&gt;<code>FIN_WAIT2</code>ã€‚Clientä¸Šçš„è¿æ¥å˜ä¸º<code>CLOSE_WAIT</code>ï¼Œè¯´æ˜å®ƒæ”¶åˆ°äº†FINè¯·æ±‚å¹¶å›å¤ACKã€‚</p>
<p>æŸ¥çœ‹tcpdumpæŠ“åŒ…ä¿¡æ¯ï¼š</p>
<figure class="highlight basic"><table><tr><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span> <span class="hljs-number">08</span>:<span class="hljs-number">03</span>:<span class="hljs-number">47.983746</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span> &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct: Flags [S], seq <span class="hljs-number">2732082131</span>, win <span class="hljs-number">43690</span><br><span class="hljs-symbol">2 </span> <span class="hljs-number">08</span>:<span class="hljs-number">03</span>:<span class="hljs-number">47.983789</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span>: Flags [S.], seq <span class="hljs-number">2892591615</span>, ack <span class="hljs-number">2732082132</span>, win <span class="hljs-number">43690</span><br><span class="hljs-symbol">3 </span> <span class="hljs-number">08</span>:<span class="hljs-number">03</span>:<span class="hljs-number">47.983824</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span> &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct: Flags [.], ack <span class="hljs-number">1</span>, win <span class="hljs-number">342</span><br><span class="hljs-symbol">4 </span> <span class="hljs-number">08</span>:<span class="hljs-number">04</span>:<span class="hljs-number">01.168828</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span>: Flags [F.], seq <span class="hljs-number">1</span>, ack <span class="hljs-number">1</span>, win <span class="hljs-number">342</span><br><span class="hljs-symbol">5 </span> <span class="hljs-number">08</span>:<span class="hljs-number">04</span>:<span class="hljs-number">01.169328</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span> &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct: Flags [.], ack <span class="hljs-number">2</span>, win <span class="hljs-number">342</span><br></code></pre></td></tr></table></figure>
<p>å‰ä¸‰è¡Œæ˜¯ä¸‰æ¬¡æ¡æ‰‹ã€‚åä¸¤è¡Œæ­£æ˜¯Serverå‘Clientå‘é€çš„FINè¯·æ±‚ã€‚</p>
<blockquote>
<p>Serveräº§ç”ŸFINè¯·æ±‚çš„åŸå› æ˜¯ï¼Œæ“ä½œç³»ç»Ÿåœ¨è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¼šå¯¹å…¶æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ‰§è¡Œclose()ã€‚å¯¹äºTCPæ–‡ä»¶æè¿°ç¬¦è€Œè¨€ï¼Œå°±æ˜¯å…³é—­è¿æ¥ï¼Œå‘é€FINè¯·æ±‚ï¼Œç­‰å¾…å››æ¬¡æŒ¥æ‰‹çš„å®Œæˆã€‚</p>
<p>ã€Šunix ç½‘ç»œç¼–ç¨‹ã€‹é‡Œé¢å†™â€œTCP FIN sent by kernel when client is killed or crashedâ€ã€‚å½“ç¨‹åºè¢«killçš„æ—¶å€™ï¼Œå†…æ ¸ä¼šå‘é€finåŒ…ç»™å¯¹ç«¯ã€‚è¿™æ ·å¯¹ç«¯è¿›å…¥close_waitçš„çŠ¶æ€ï¼Œè‹¥epollæ³¨å†Œäº†HUPçš„äº‹ä»¶ï¼ŒæŠŠè¿æ¥å…³é—­close_waitå˜ä¸ºcloseï¼›è‹¥æ²¡æœ‰å¤„ç†ï¼Œå¯¹ç«¯å°±æœ‰ä¸€ä¸ªclose_waitçš„çŠ¶æ€ï¼Œå ç”¨äº†fdã€‚</p>
</blockquote>
<p>åœ¨ç»è¿‡äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå†æ¬¡æŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># netstat -antlp | grep 9999</span><br>tcp        0      0 192.168.0.108:53756     192.168.0.108:9999      CLOSE_WAIT  12671/nc<br></code></pre></td></tr></table></figure>
<p>å‘ç°åªå‰©ä¸‹Clientçš„è¿æ¥ï¼ŒServerä¸Š<code>FIN_WAIT2</code>çŠ¶æ€çš„è¿æ¥å·²ç»æ¶ˆå¤±ã€‚tcpdumpæŠ“åŒ…å¾—çŸ¥ï¼ŒClientå¹¶æ²¡æœ‰å‘Serverå‘é€FINè¯·æ±‚ï¼Œé‚£ä¹ˆä¹Ÿå°±è¯´æ˜Serverçš„<code>FIN_WAIT2</code>çŠ¶æ€æœ‰ç­‰å¾…è¶…æ—¶çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨è¶…æ—¶åï¼Œè‡ªåŠ¨é”€æ¯è¿æ¥ã€‚</p>
<p>å½“Clientåœ¨Serverè¿æ¥è¢«é”€æ¯åï¼Œå†æ¬¡å‘é€æ•°æ®æ—¶ï¼Œåˆ™ä¼šæ”¶åˆ°Serverçš„RSTè¯·æ±‚ã€‚</p>
<figure class="highlight basic"><table><tr><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">6 </span> <span class="hljs-number">08</span>:<span class="hljs-number">06</span>:<span class="hljs-number">28.504828</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span> &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct: Flags [P.], seq <span class="hljs-number">1</span>:<span class="hljs-number">3</span>, ack <span class="hljs-number">2</span>, win <span class="hljs-number">342</span><br><span class="hljs-symbol">7 </span> <span class="hljs-number">08</span>:<span class="hljs-number">06</span>:<span class="hljs-number">28.504888</span> IP <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.distinct &gt; <span class="hljs-number">192.168</span>.<span class="hljs-number">0.108</span>.<span class="hljs-number">58274</span>: Flags [R], seq <span class="hljs-number">2892591617</span>, win <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<h1 id="æ–­ç½‘æ–­ç”µåçš„è¿æ¥çŠ¶æ€"><a class="header-anchor" href="#æ–­ç½‘æ–­ç”µåçš„è¿æ¥çŠ¶æ€"></a>æ–­ç½‘æ–­ç”µåçš„è¿æ¥çŠ¶æ€</h1>
<p>è¿™é‡Œä½¿ç”¨ä¸¤å°æœºå™¨è¿›è¡Œè¯•éªŒï¼Œä¸­é—´é€šè¿‡Routerè¿›è¡Œéç›´è¿è¿æ¥ã€‚</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><code class="hljs abnf">Client(<span class="hljs-number">188</span>) <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>A<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> Router <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>B<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> Server(<span class="hljs-number">108</span>)<br></code></pre></td></tr></table></figure>
<p>Serverå¯åŠ¨9999æ–­å¼€æœåŠ¡</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># nc -l 9999</span><br></code></pre></td></tr></table></figure>
<p>Clientè¿æ¥Serverçš„9999æœåŠ¡</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># nc -vn 192.168.0.108 9999</span><br></code></pre></td></tr></table></figure>
<p>æ‹”æ‰Serverçš„ç½‘çº¿åï¼Œåœ¨Clientä¾§æŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼Œä¾æ—§æ˜¯<code>ESTABLISHED</code>çŠ¶æ€</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># netstat -altn | grep 9999</span><br><span class="hljs-attribute">tcp4</span>       <span class="hljs-number">0</span>      <span class="hljs-number">0</span>  <span class="hljs-number">192.168.0.188</span>.<span class="hljs-number">52210</span>    <span class="hljs-number">192.168.0.108</span>.<span class="hljs-number">9999</span>     ESTABLISHED<br></code></pre></td></tr></table></figure>
<p>å¦‚æœClientæ­¤æ—¶å°è¯•å‘é€æ•°æ®ï¼ŒClientä¾§ä¼šä¸æ–­è¿›è¡Œé‡ä¼ ï¼Œç›´åˆ°æœ€åå‘é€ä¸€ä¸ªRSTè¯·æ±‚ï¼ŒæŠ¥è¶…æ—¶å¼‚å¸¸åï¼Œé€€å‡ºClientè¿æ¥ç¨‹åºï¼Œé”€æ¯è¿æ¥ã€‚åœ¨æ¢å¤Serverç½‘ç»œï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶å€™åï¼Œä½¿ç”¨<code>netstat</code>æŸ¥çœ‹Serverçš„è¿æ¥çŠ¶æ€ï¼Œä¼šå‘ç°Serveråˆ°Clientçš„è¿æ¥å°†ä¼šä¸€ç›´éƒ½æ˜¯<code>ESTABLISHED</code>çŠ¶æ€ã€‚</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># netstat -anltp | grep 9999</span><br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">0.0.0.0:9999</span>            <span class="hljs-number">0.0.0.0</span>:*               LISTEN      <span class="hljs-number">10188</span>/nc            <br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">192.168.0.108:9999</span>      <span class="hljs-number">192.168.0.188:52210</span>     ESTABLISHED <span class="hljs-number">10188</span>/nc <br></code></pre></td></tr></table></figure>
<p>æ–­ç”µçš„æ“ä½œå’Œæ–­ç½‘çš„æ“ä½œæ˜¯ç±»ä¼¼çš„ã€‚ç»“æœå¦‚ä¸‹ï¼š</p>
<ul>
<li>Serveræ–­ç½‘åï¼Œè‹¥Serverå’ŒClientå‡æ— æ•°æ®ä¼ è¾“ï¼Œåˆ™Serverç½‘ç»œæ¢å¤åï¼ˆæ–­å¼€æ—¶é•¿ä¸è¶…è¿‡TCPè¿æ¥è¶…æ—¶æ—¶é—´ï¼‰ï¼ŒåŒæ–¹å·²ç»èƒ½åœ¨åŸæ¥çš„è¿æ¥çŠ¶æ€ï¼ˆESTABLISHEDï¼‰ä¸Šç»§ç»­ä¼ è¾“æ•°æ®ã€‚</li>
<li>Serveræ–­ç½‘åï¼Œè‹¥Clientç»§ç»­å‘é€æ•°æ®å°†ä¼šè¶…æ—¶å¯¼è‡´ç¨‹åºé€€å‡ºè¿æ¥æ–­å¼€ï¼ˆä¼šæœ€åå‘å‡ºä¸€ä¸ªRSTæŠ¥æ–‡æ®µï¼‰ã€‚è‡³å°‘æ˜¯2MSLåï¼Œæ¢å¤Serverç½‘ç»œï¼Œå‘ç°Serverä¸Šçš„è¿æ¥å°†ä¼šä¸€ç›´å­˜åœ¨ï¼ˆæš‚ä¸è€ƒè™‘ä¿æ´»æœºåˆ¶ï¼‰ï¼Œè¿™å°±æ˜¯<strong>å‡è¿æ¥</strong>ç°è±¡ï¼Œå‡è¿æ¥ä¼šä¸€ç›´å ç”¨èµ„æºæ— æ³•é‡Šæ”¾ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCPå¼•å…¥<strong>ä¿æ´»æœºåˆ¶ï¼ˆKeepaliveï¼‰</strong>ï¼Œå¯¹æ²¡æœ‰è¿›è¡Œé€šä¿¡çš„è¿æ¥æ¯éš”ä¸€æ®µæ—¶é—´è¿›è¡Œæ£€æŸ¥ï¼Œå¯¹å¤±æ•ˆçš„è¿æ¥è¿›è¡Œä¸»åŠ¨é”€æ¯ã€‚</li>
<li>Serveræ–­ç”µåï¼Œè‹¥Clientæ— æ•°æ®ä¼ è¾“ï¼Œåˆ™Clientä¸Šçš„è¿æ¥çŠ¶æ€ï¼ˆESTABLISHEDï¼‰å°†ä¸€ç›´ä¿æŒã€‚ä½†æ˜¯ï¼Œå¾ˆæ˜æ˜¾çš„ï¼Œå› ä¸ºServerä¾§æ–­ç”µåä¸¢å¤±äº†è¿æ¥ä¿¡æ¯ï¼Œè¿™ä¸ªè¿æ¥å·²ç»æ— æ³•å†è¢«é‡æ–°ä½¿ç”¨ã€‚</li>
</ul>
<h1 id="FIN-WAIT2çš„è¶…æ—¶æ—¶é—´"><a class="header-anchor" href="#FIN-WAIT2çš„è¶…æ—¶æ—¶é—´"></a>FIN_WAIT2çš„è¶…æ—¶æ—¶é—´</h1>
<p>Serverä¸»åŠ¨å…³é—­è¿æ¥ï¼Œåœ¨è¿›å…¥<code>FIN_WAIT2</code>é˜¶æ®µåï¼Œéœ€è¦Clientä¸»åŠ¨å‘é€FINè¯·æ±‚ï¼Œè¡¨ç¤ºClientä¾§çš„è¿æ¥å¯ä»¥å…³é—­äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœClientä¸€ç›´ä¸å‘é€FINè¯·æ±‚å‘¢ï¼Ÿæ“ä½œç³»ç»Ÿåœ¨å®ç°å±‚é¢ä¼šç»™FIN_WAIT2çŠ¶æ€è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé€šè¿‡è°ƒæ•´å†…æ ¸å‚æ•°<code>net.ipv4.tcp_fin_timeout</code>è¿›è¡Œè®¾ç½®ã€‚åœ¨è¶…æ—¶åï¼Œå°†ä¼šç›´æ¥é”€æ¯è¿æ¥ã€‚</p>
<p>å®é™…ä¸Šï¼ŒæœåŠ¡å™¨ä¼šç»å¸¸é‡åˆ°å¤§é‡FIN_WAIT2çŠ¶æ€è¿æ¥ä¸èƒ½åŠæ—¶é‡Šæ”¾çš„æƒ…å†µã€‚åŸå› æœ¬è´¨ä¸Šéƒ½æ˜¯æœåŠ¡å™¨ä½œä¸ºä¸»åŠ¨å…³é—­æ–¹ï¼ŒClientæ²¡æœ‰ä¸»åŠ¨å‘é€FINè¯·æ±‚ã€‚</p>
<h1 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h1>
<p>è¯•éªŒä½“ç°äº†TCPè¿æ¥æ˜¯æŠ½è±¡çš„ï¼Œå®ƒå¯ä»¥åœ¨ç‰©ç†é“¾è·¯æ–­å¼€åä¾æ—§ä¿æŒçŠ¶æ€ã€‚è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯åŒç«¯çŠ¶æ€æœºçš„åå•†ä¸è½¬æ¢ã€‚åº•å±‚é“¾è·¯çš„çŸ­æ—¶é—´æ–­å¼€ï¼ŒTCPè¿æ¥æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œè¿™æ—¶çš„è¿æ¥æ˜¯å‡è¿æ¥ã€‚ä½†æ˜¯åŒç«¯åªè¦ä¸è¿›è¡Œé€šä¿¡ï¼Œä¸ç ´åæ–­å¼€å‰çš„è¿æ¥ä¿¡æ¯ï¼Œé“¾è·¯æ¢å¤åï¼Œå‡è¿æ¥åˆä¼šæ¢å¤ä¸ºæœ‰æ•ˆçš„è¿æ¥ï¼ŒåŒç«¯ä¾æ—§å¯ä»¥åœ¨æ­¤è¿æ¥ä¸Šç»§ç»­é€šä¿¡ã€‚</p>
<h1 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ"></a>å‚è€ƒ</h1>
<ul>
<li><a href="https://www.zhihu.com/answer/136153506">https://www.zhihu.com/answer/136153506</a></li>
</ul>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>TCPåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-Javaå†…å­˜åŒºåŸŸ</title>
    <url>/POST/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F.html</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>POST</category>
        <category>æ·±å…¥ç†è§£JAVAè™šæ‹Ÿæœº</category>
      </categories>
  </entry>
  <entry>
    <title>TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0.html</url>
    <content><![CDATA[<hr>
<ul>
<li>å»ºç«‹è¿æ¥
<ul>
<li>ä»€ä¹ˆæ˜¯è¿æ¥</li>
<li>ä¸ºä»€ä¹ˆè¦å»ºç«‹è¿æ¥</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆè¦æ¡æ‰‹ä¸‰æ¬¡
<ul>
<li>è§£å†³old duplicated SYNé—®é¢˜</li>
<li>è§£å†³ISNåå•†é—®é¢˜</li>
</ul>
</li>
<li>åŠè¿æ¥çŠ¶æ€ä¸RST</li>
</ul>
<hr>
<p>TCPå»ºç«‹è¿æ¥é˜¶æ®µï¼Œéœ€è¦è¿›è¡Œä¿—ç§°â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼ˆthree-way handshakeï¼‰çš„åå•†è¿‡ç¨‹ã€‚è¿™é‡Œå°±å¼•å‡ºä¸¤ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆTCPéœ€è¦â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Ÿ
<ul>
<li>éœ€è¦è§£é‡Šâ€œä¸‰æ¬¡æ¡æ‰‹â€è¿™ä¸ªæœºåˆ¶çš„åŸå› </li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆâ€œä¸‰æ¬¡æ¡æ‰‹â€éœ€è¦ä¸‰æ¬¡ï¼Ÿ
<ul>
<li>éœ€è¦è§£é‡Šæ¡æ‰‹æ¬¡æ•°çš„ç»†èŠ‚</li>
</ul>
</li>
</ul>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¾ˆç®€å•ï¼Œä¸ºäº†åœ¨ä¸å¯é çš„IPå±‚ä¸Šå®ç°å¯é æ€§ï¼Œé€šä¿¡åŒæ–¹éœ€è¦å¯¹é€šä¿¡ä¿¡æ¯è¿›è¡Œåˆå§‹åŒ–å’Œç»´æŒç‰¹å®šçš„çŠ¶æ€ã€‚çŠ¶æ€åˆå§‹åŒ–çš„åå•†è¿‡ç¨‹å°±æ˜¯æ¡æ‰‹æœºåˆ¶ã€‚è¿™é‡Œçš„é€šä¿¡ä¿¡æ¯åŒ…å«åºå·ï¼Œçª—å£å¤§å°ï¼Œé€‰é¡¹ä¿¡æ¯ç­‰ç­‰ï¼Œæ­£æ˜¯è¿™äº›ä¿¡æ¯ä¿è¯äº†TCPçš„å¯é å’Œæµé‡æ§åˆ¶çš„å®ç°ã€‚</p>
<p>ç¬¬äºŒé—®é¢˜ç­”æ¡ˆï¼šé€šä¿¡åŒæ–¹è¦äº¤æ¢ä¿¡æ¯ï¼Œå¿…ç„¶æ˜¯è‡³å°‘éœ€è¦ä¸¤æ¬¡æ¡æ‰‹çš„ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹å°±æ˜¯é—®é¢˜çš„æ ¸å¿ƒã€‚ç¬¬ä¸€ï¼Œä¸»è¦æ˜¯éœ€è¦é˜²æ­¢å·²å¤±æ•ˆçš„æ—§çš„SYNè¯·æ±‚ï¼ˆold duplicatedï¼‰å†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ï¼Œå¯¼è‡´è¿æ¥é”™è¯¯å»ºç«‹ï¼ˆå¦‚åˆå§‹åºå·ISNï¼Œçª—å£å¤§å°ç­‰ç­‰ï¼‰çš„å¼‚å¸¸ã€‚å…¶æ¬¡ï¼Œç”±äºåˆå§‹åºå·ISNçš„ç‰¹æ®Šæ€§ï¼ˆå¿…é¡»ç”±å¯¹æ–¹è¿›è¡Œæ ¡éªŒï¼‰ï¼Œå¿…é¡»è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ‰èƒ½ä¿è¯åŒæ–¹ISNäº¤æ¢æˆåŠŸã€‚æœ€åï¼Œä¸‰æ¬¡çš„æ¡æ‰‹é…åˆRSTæ ‡å¿—ä¸åŠè¿æ¥çŠ¶æ€çš„è®¾è®¡ï¼Œæä¾›äº†å¼‚å¸¸å›é€€ï¼ŒçŠ¶æ€é‡ç½®çš„å¯èƒ½ï¼Œæ˜¯ç¨³å®šæ€§çš„ä½“ç°ã€‚</p>
<h1 id="è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶"><a class="header-anchor" href="#è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶"></a>è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶</h1>
<p>è¿™ä¸€å°èŠ‚åªè®¨è®ºæ¡æ‰‹æœºåˆ¶ï¼Œä¸è®¨è®ºå…·ä½“å‡ æ¬¡æ¡æ‰‹ã€‚</p>
<h2 id="è¿æ¥ä¸å»ºç«‹è¿æ¥"><a class="header-anchor" href="#è¿æ¥ä¸å»ºç«‹è¿æ¥"></a>è¿æ¥ä¸å»ºç«‹è¿æ¥</h2>
<p>TCPçš„è®¾è®¡ç›®æ ‡å°±æ˜¯ä¸€æ¬¾å¯é çš„ï¼Œ<strong>é¢å‘è¿æ¥çš„</strong>ä¼ è¾“å±‚åè®®ã€‚</p>
<p>é‚£ä»€ä¹ˆæ˜¯è¿æ¥å‘¢ï¼Ÿ**è¿æ¥(connection)**çš„æ¦‚å¿µåœ¨RFC793æ–‡æ¡£ä¸­æ˜¯è¿™æ ·æš—ç¤ºçš„ï¼š</p>
<blockquote>
<p>The reliability and flow control mechanisms described above require that TCPs initialize and maintain certain status information for each data stream. The combination of this information, including sockets, sequence numbers, and window sizes, is called a connection.</p>
<p>å¯é æ€§å’Œæµæ§æœºåˆ¶éœ€è¦åœ¨TCPé€šä¿¡åŒç«¯åˆå§‹åŒ–å’Œç»´æŒç‰¹å®šçŠ¶æ€ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯çš„ç»„åˆå°±ç§°ä¸º<strong>è¿æ¥</strong>ï¼ŒåŒ…æ‹¬åŒæ–¹socketï¼Œåºå·ï¼Œçª—å£å¤§å°ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¿æ¥çš„å»ºç«‹å°±æ˜¯é€šä¿¡åŒç«¯å¯¹ä¸Šè¿°ä¿¡æ¯ï¼ˆsockets, seq, wndï¼‰çš„åå•†å¹¶è¾¾åˆ°å…±è¯†çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>Since connections must be established between unreliable hosts and over the unreliable internet communication system, a handshake mechanism with clock-based sequence numbers is used to avoid erroneous initialization of connections.</p>
<p>ç”±äºè¿æ¥å¿…é¡»åœ¨ä¸¤ä¸ªä¸å¯é ä¸»æœºï¼Œå¹¶ä¸”åœ¨ä¸å¯é çš„IPä½“ç³»ä¸Šå»ºç«‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªåŸºäºæ—¶é’Ÿåºå·çš„æ¡æ‰‹æœºåˆ¶æ¥é¿å…é”™è¯¯çš„è¿æ¥åˆå§‹åŒ–ã€‚</p>
</blockquote>
<p>ç”±æ­¤çœ‹æ¥ï¼Œæ¡æ‰‹æœºåˆ¶æ˜¯ç”¨æ¥éšè—åº•å±‚çš„ä¸å¯é æ€§è´¨çš„ã€‚å¹¶ä¸”ï¼Œè¿™é‡Œæåˆ°äº†<em>ä¸€ä¸ªç»†èŠ‚</em>ï¼ŒSYNä¸­çš„åºå·æ˜¯åŸºäºæ—¶é’Ÿçš„ã€‚ï¼ˆ<a href="/POST/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E7%9A%84ISN%E9%9C%80%E8%A6%81%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90.html">ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆ | Tung7 Note</a>)</p>
<h1 id="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡"></a>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡</h1>
<ul>
<li>é˜²æ­¢æ—§çš„å·²å¤±æ•ˆçš„SYNè¯·æ±‚ï¼Œå†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ã€‚</li>
<li>ISNåŒæ­¥é—®é¢˜å¿…é¡»éœ€è¦ä¸‰æ¬¡ã€‚</li>
<li>ä¸‰æ¬¡æ¡æ‰‹ç»“åˆåŠè¿æ¥è®¾è®¡ï¼Œèƒ½æä¾›çŠ¶æ€å›é€€çš„èƒ½åŠ›ï¼Œä¹Ÿèƒ½é¿å…æœåŠ¡ç«¯æ¥æ”¶åˆ°SYNè¯·æ±‚åå°±è®¤ä¸ºæ–°è¿æ¥å»ºç«‹äº†ï¼Œç©ºç­‰æ•°æ®è€Œæµªè´¹èµ„æºçš„æƒ…å†µã€‚</li>
</ul>
<h2 id="å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾"><a class="header-anchor" href="#å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾"></a>å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾</h2>
<p>ä¸ºäº†ä¸¤ç«¯èƒ½å¤ŸåŒæ­¥åºå·ï¼Œçª—å£å¤§å°ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡æ¡æ‰‹æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç¬¬ä¸‰æ¬¡ACKå›åº”å‘¢ï¼Ÿä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æ—§çš„é‡å¤çš„å·²å¤±æ•ˆçš„SYNè¯·æ±‚ï¼ˆå®¢æˆ·ç«¯é‡å‘SYNï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªSYNå°±æ˜¯å·²å¤±æ•ˆçš„è¯·æ±‚ï¼‰å†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ï¼ˆåºå·è¿·æƒ‘ï¼Œçª—å£è¿·æƒ‘ï¼Œé€‰é¡¹è¿·æƒ‘ç­‰ç­‰é—®é¢˜ï¼‰ã€‚</p>
<blockquote>
<p>The principle reason for the three-way handshake is to prevent old duplicate connection initiations from causing confusion. To deal with this, a special control message, reset, has been devised.  If the receiving TCP is in a  non-synchronized state (i.e., SYN-SENT, SYN-RECEIVED), it returns to LISTEN on receiving an acceptable reset.</p>
<p>ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦ï¼ˆprincipalï¼‰åŸå› å°±æ˜¯é¿å…æ—§çš„é‡å¤çš„è¿æ¥åˆå§‹åŒ–æ‰€å¼•èµ·çš„æ··æ·†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ··æ·†é—®é¢˜ï¼Œè®¾è®¡å‡ºäº†resetæ§åˆ¶ä¿¡æ¯ï¼ˆRSTæ ‡å¿—ä½ï¼‰ã€‚å¦‚æœæ¥æ”¶æ–¹åœ¨éåŒæ­¥çŠ¶æ€ï¼ˆSYN-SENT, SYN-RECEIVEDï¼‰æ¥æ”¶åˆ°äº†RSTæŠ¥æ–‡ï¼Œæ¥æ”¶æ–¹å°±ä¼šå›é€€åˆ°LISTENçŠ¶æ€ã€‚</p>
</blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹ï¼ˆé…åˆåŠè¿æ¥çŠ¶æ€ä¸RSTï¼‰å¯ä»¥è®©è¿æ¥çŠ¶æ€æœ‰â€œå›é€€â€çš„å¯èƒ½ï¼Œè€Œä¸¤æ¬¡æ¡æ‰‹æ˜¯ä¸èƒ½è¾¾åˆ°è¦æ±‚çš„ã€‚ç”±æ­¤çœ‹æ¥ä¸‰æ¬¡æ¡æ‰‹ä¸åŠè¿æ¥ï¼ˆhalf-openï¼‰çŠ¶æ€æ˜¯å¯†ä¸å¯åˆ†çš„ã€‚</p>
<p>ä¸‹é¢ç›´æ¥ç”¨RFCæ–‡æ¡£ä¸­çš„åŸä¾‹å­è¯´æ˜ï¼š</p>
<p><img src="https://tximgcdn.tung7.com/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0_20210714224115_154222.png" alt="image-20210714224054097"></p>
<p>åœ¨ç¬¬3è¡Œï¼Œä¸€ä¸ªæ—§çš„é‡å¤çš„SYNè¯·æ±‚æ¯”ç¬¬äºŒè¡Œçš„SYNå…ˆåˆ°è¾¾TCP Bï¼Œè¿™æ˜¯TCP Bæ˜¯æ— æ³•åŒºåˆ†è¿™ä¸ªSYNè¯·æ±‚æ˜¯ä¸æ˜¯æ—§çš„ï¼Œåªèƒ½å“åº”ACKå¹¶ä¸”çŠ¶æ€ç”±LISTENå˜ä¸ºSYN-RECEIVEDã€‚TCP Aå‘ç°TCP Bå“åº”å›æ¥çš„æŠ¥æ–‡æ®µä¸­çš„ACKå·ä¸åŒ¹é…ï¼Œå°±ç›´æ¥å“åº”RST=1ï¼Œè®©TCP Bå›é€€åˆ°LISTENçŠ¶æ€ã€‚éšååœ¨ç¬¬6è¡Œï¼ŒåŸæœ¬æ­£ç¡®çš„SYNè¯·æ±‚åˆ°è¾¾TCP Båå°±èƒ½æ­£å¸¸å»ºç«‹è¿æ¥ã€‚ä½†æ˜¯å¦‚æœï¼ŒåŸæœ¬çš„SYNè¯·æ±‚æ¯”RSTå…ˆåˆ°è¾¾ï¼ˆä¹Ÿå°±æ˜¯ç¬¬5è¡Œå’Œç¬¬6è¡Œäº’æ¢ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´TCP Bä¹Ÿå“åº”ä¸€ä¸ªRSTã€‚</p>
<h2 id="ISNçš„äº¤æ¢ä¸éªŒè¯"><a class="header-anchor" href="#ISNçš„äº¤æ¢ä¸éªŒè¯"></a>ISNçš„äº¤æ¢ä¸éªŒè¯</h2>
<blockquote>
<p>A three way handshake is necessary because sequence numbers are not tied to a global clock in the network, and TCPs may have different mechanisms for picking the ISNâ€™s.  The receiver of the first SYN has no way of knowing whether the segment was an old delayed one or not, unless it remembers the last sequence number used on the connection (which is not always possible), and so it must ask the sender to verify this SYN.  The three way handshake and the advantages of a clock-driven scheme are discussed in [3].</p>
</blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹çš„å¦ä¸€ä¸ªå¿…è¦åŸå› å°±æ˜¯ä¸ºäº†åŒæ–¹éƒ½èƒ½æ­£ç¡®åŒæ­¥ISNã€‚ç”±äºç½‘ç»œä¸å­˜åœ¨ä¸€ä¸ªå…¨å±€æ—¶é’Ÿï¼Œå¹¶ä¸”é€šä¿¡åŒæ–¹éƒ½æœ‰è‡ªå·±çš„æ–¹å¼å¾—åˆ°ISNã€‚æ¥æ”¶æ–¹æ˜¯æ— æ³•åˆ¤æ–­æŠ¥æ–‡æ®µæ˜¯å¦æ˜¯å»¶è¯¯çš„å¤±æ•ˆçš„æŠ¥æ–‡æ®µï¼Œé™¤éå®ƒè®°ä½ä¸Šä¸€ä¸ªåœ¨è¿æ¥ä¸­ä½¿ç”¨çš„åºå·ï¼ˆè¿™æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼‰ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹å¿…é¡»å‘å‘é€æ–¹éªŒè¯è¿™ä¸ªSYNã€‚</p>
<h1 id="åŠè¿æ¥çŠ¶æ€"><a class="header-anchor" href="#åŠè¿æ¥çŠ¶æ€"></a>åŠè¿æ¥çŠ¶æ€</h1>
<h1 id="RST"><a class="header-anchor" href="#RST"></a>RST</h1>
<p>RSTå¹¶ä¸æ˜¯ä¸€å®šæœ‰æ•ˆçš„ï¼Œé™¤äº†åœ¨æ¡æ‰‹é˜¶æ®µï¼Œå…¶ä»–æƒ…å†µä¸‹RSTåŒ…çš„SEQåºå·å¿…é¡»åœ¨æ¥æ”¶çª—å£ä¸­æ‰æœ‰æ•ˆï¼Œå¦åˆ™ä¼šè¢«å¿½ç•¥æ‰ã€‚</p>
<blockquote>
<p>Reset Processing</p>
<p>In all states except SYN-SENT, all reset (RST) segments are validated<br>
by checking their SEQ-fields.  A reset is valid if its sequence number<br>
is in the window.  In the SYN-SENT state (a RST received in response<br>
to an initial SYN), the RST is acceptable if the ACK field<br>
acknowledges the SYN.</p>
<p>The receiver of a RST first validates it, then changes state.  If the<br>
receiver was in the LISTEN state, it ignores it.  If the receiver was<br>
in SYN-RECEIVED state and had previously been in the LISTEN state,<br>
then the receiver returns to the LISTEN state, otherwise the receiver<br>
aborts the connection and goes to the CLOSED state.  If the receiver<br>
was in any other state, it aborts the connection and advises the user<br>
and goes to the CLOSED state.</p>
</blockquote>
<h1 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ"></a>å‚è€ƒ</h1>
<ol>
<li>
<p><a href="https://networkengineering.stackexchange.com/questions/24068/why-do-we-need-a-3-way-handshake-why-not-just-2-way">tcp - Why do we need a 3-way handshake? Why not just 2-way? - Network Engineering Stack Exchange</a></p>
</li>
<li>
<p><a href="https://datatracker.ietf.org/doc/html/rfc793#page-10">rfc793 (ietf.org)</a></p>
</li>
</ol>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>TCPåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œåŸºç¡€-TCPåè®®</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0.html</url>
    <content><![CDATA[<h1 id="ä¼ è¾“å±‚åè®®"><a class="header-anchor" href="#ä¼ è¾“å±‚åè®®"></a>ä¼ è¾“å±‚åè®®</h1>
<p>ä¼ è¾“å±‚çš„ä½œç”¨ï¼Œ<u>TCPåè®®çš„ç‰¹ç‚¹</u></p>
<h1 id="æŠ¥æ–‡é¦–éƒ¨"><a class="header-anchor" href="#æŠ¥æ–‡é¦–éƒ¨"></a>æŠ¥æ–‡é¦–éƒ¨</h1>
<p>å‚è€ƒ</p>
<h1 id="å¯é æ€§ä¼ è¾“"><a class="header-anchor" href="#å¯é æ€§ä¼ è¾“"></a>å¯é æ€§ä¼ è¾“</h1>
<p><em>TCPå¯é æ€§ä¼ è¾“çš„ä¿è¯</em>ï¼šæ¯ä¸ªå·²å‘é€çš„æŠ¥æ–‡éƒ½éœ€è¦è¿›è¡Œç¡®è®¤ACKï¼Œå¯¹ç­‰å¾…ACKè¶…æ—¶çš„æŠ¥æ–‡è¿›è¡Œè‡ªåŠ¨é‡ä¼ ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£å®ç°è¿ç»­é‡ä¼ ä¸ç´¯ç§¯ç¡®è®¤ä»¥æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚</p>
<p>**åœæ­¢ç­‰å¾…ï¼š**å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œåˆ™éœ€ç­‰å¾…å¯¹ç«¯å¯¹è¿™ä¸ªæŠ¥æ–‡çš„ç¡®è®¤ACK</p>
<p>**è‡ªåŠ¨é‡ä¼ è¯·æ±‚ARQ(Automatic Repeat reQuest)ï¼š**è‹¥ç­‰å¾…ACKè¶…æ—¶äº†ï¼ˆæ¯ä¸ªæŠ¥æ–‡åˆ†é…ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ï¼‰åˆ™é‡å‘</p>
<p>**è¿ç»­ARQï¼š**ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œå¯¹æŠ¥æ–‡è¿›è¡Œæµæ°´çº¿å¼çš„è¿ç»­å‘é€ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹è¿›è¡Œç´¯ç§¯ç¡®è®¤ï¼Œåªéœ€å¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åé«˜åºå·åˆ†ç»„å‘é€ç¡®è®¤ã€‚</p>
<p>**Go-Back-Nï¼ˆå›é€€Nï¼‰é—®é¢˜ï¼š**è¿ç»­ARQåè®®ä¸‹ï¼Œè‹¥ä¸­é—´æŠ¥æ–‡ä¸¢å¤±äº†ï¼Œå‘é€æ–¹æ— æ³•çŸ¥é“åé¢æŠ¥æ–‡æ®µä¸‹è½ï¼Œåªå¥½æŠŠåé¢çš„æŠ¥æ–‡ä¹Ÿéƒ½é‡ä¼ ä¸€éã€‚</p>
<p>**ä»¥å­—èŠ‚ä¸ºå•ä½çš„æ»‘åŠ¨çª—å£ï¼š**æŠ¥æ–‡é¦–éƒ¨æä¾›ä¸€ä¸ªçª—å£å¤§å°çš„å­—æ®µï¼Œç”¨ä»¥å‘Šè¯‰å¯¹ç«¯ï¼Œè‡ªå·±æ¥æ”¶çª—å£çš„å‰©ä½™å­—èŠ‚å¤§å°ï¼Œè®©å¯¹ç«¯æ®æ­¤è®¾ç½®å…¶å‘é€çª—å£ã€‚æ»‘åŠ¨çª—å£å¯ä»¥æ§åˆ¶å‘é€æ–¹çš„å‘é€é€Ÿç‡ï¼Œä¿è¯æ¥æ”¶æ–¹èƒ½å¤Ÿæ¥å¾—åŠå¤„ç†åˆ°æ¥çš„æ•°æ®åŒ…ï¼Œæœ¬èº«æœ‰æµé‡æ§åˆ¶çš„ä½œç”¨ã€‚</p>
<h2 id="TCPå¦‚ä½•å¤„ç†æ— è§£çš„ä¸¤å†›é—®é¢˜"><a class="header-anchor" href="#TCPå¦‚ä½•å¤„ç†æ— è§£çš„ä¸¤å†›é—®é¢˜"></a>TCPå¦‚ä½•å¤„ç†æ— è§£çš„ä¸¤å†›é—®é¢˜</h2>
<p>å‘é€æ–¹æ²¡æœ‰æ”¶åˆ°å·²å‘é€æŠ¥æ–‡çš„ç¡®è®¤æŠ¥æ–‡æ—¶</p>
<p>æ¥æ”¶æ–¹é‡å¤æ”¶åˆ°å·²ç»å›åº”ç¡®è®¤çš„æ•°æ®æ—¶</p>
<h2 id="ç¼“å­˜ä¸çª—å£"><a class="header-anchor" href="#ç¼“å­˜ä¸çª—å£"></a>ç¼“å­˜ä¸çª—å£</h2>
<p>åœ¨å®ç°å±‚é¢ä¸Šï¼ŒTCPåè®®æ ˆä¸­å¯¹å‘é€æ–¹å’Œæ¥æ”¶æ–¹åˆ†åˆ«æœ‰ä¸€ä¸ªç¼“å­˜åŒºï¼Œå¯¹åº”å‘é€ç¼“å­˜å’Œæ¥æ”¶ç¼“å­˜ã€‚ä»–ä»¬å’Œå‘é€çª—å£ï¼Œæ¥æ”¶çª—å£ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä½†å´æœ‰ç´§å¯†è”ç³»ã€‚</p>
<p>å‘é€ç¼“å­˜æ˜¯TCPåè®®æ ˆä¸­çš„ç¼“å­˜åŒºï¼Œç”¨æ¥æ¥æ”¶åº”ç”¨ç¨‹åºä¼ é€è¿‡æ¥çš„ï¼Œå¹¶ä¸”å‡†å¤‡è¿›è¡Œå‘é€çš„æ•°æ®ï¼ŒåŒæ—¶ä¹ŸåŒ…å«äº†é‚£äº›å·²å‘é€çš„ä½†æœªæ”¶åˆ°ç¡®è®¤çš„æ•°æ®ã€‚å¯ä»¥è®¤ä¸ºå‘é€çª—å£å®é™…ä¸Šåªæ˜¯å‘é€ç¼“å­˜çš„ä¸€éƒ¨åˆ†ã€‚å·²å‘é€å¹¶ç¡®è®¤çš„æ•°æ®ä¼šä»ç¼“å­˜ä¸­åˆ é™¤ã€‚</p>
<p>æ¥æ”¶ç¼“å­˜ç±»ä¼¼ã€‚å®ƒç”¨æ¥å­˜æ”¾å·²ç»ç¡®è®¤ä½†å°šæœªè¢«åº”ç”¨ç¨‹åºè¯»å–çš„æ•°æ®ï¼Œä¹ŸåŒ…å«äº†åˆ°è¾¾æœªç¡®è®¤çš„æ•°æ®ï¼ˆå› ç´¯ç§¯ç¡®è®¤è€Œæ²¡æ¥å¾—åŠç¡®è®¤çš„æˆ–æœªæŒ‰åºåˆ°è¾¾çš„æ•°æ®ï¼‰ã€‚å…·ä½“ä¸€ç‚¹ï¼Œå®ƒå¯¹åº”socketå¥—æ¥å­—ç¼“å†²åŒºï¼ˆSO_RCVBUFï¼‰ï¼Œè€Œæ¥å—çª—å£å¯¹åº”è¿™ä¸ªç¼“å†²åŒºçš„å¯ç”¨ç©ºé—´ã€‚</p>
<h2 id="é‡ä¼ çš„æ—¶æœº"><a class="header-anchor" href="#é‡ä¼ çš„æ—¶æœº"></a>é‡ä¼ çš„æ—¶æœº</h2>
<blockquote>
<p>é‡ä¼ è¶…æ—¶æ—¶é—´çš„å¤§å° --ã€‹ åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´SRTTä¸DRTT --ã€‹é‡ä¼ æŠ¥æ–‡æ®µå¯¹RTTçš„å½±å“ --ã€‹Karnç®—æ³• --ã€‹ å¯¹Karnç®—æ³•çš„æ”¹è¿›</p>
</blockquote>
<p>TCPä¸ºæ¯ä¸€ä¸ªæŠ¥æ–‡éƒ½è®¾ç½®äº†ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ï¼Œå¯¹è¶…æ—¶æœªæ”¶åˆ°ACKçš„æŠ¥æ–‡æ®µè¿›è¡Œè‡ªåŠ¨é‡å‘ã€‚è€Œè¿™ä¸ªè¶…æ—¶é‡ä¼ æ—¶é—´ï¼ˆRTOï¼‰çš„å€¼åº”è¯¥å–å¤šå¤§å‘¢ï¼Ÿ</p>
<p>TCPé‡‡ç”¨çš„æ˜¯ä¸€ç§è‡ªé€‚åº”çš„ç®—æ³•ã€‚</p>
<p>å¾€è¿”æ—¶é—´RTTï¼šæŠ¥æ–‡æ®µå‘å‡ºæ—¶é—´ä¸æ¥æ”¶åˆ°ç›¸åº”ç¡®è®¤æ—¶é—´çš„æ—¶é—´å·®ã€‚</p>
<p>åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´SRTTï¼šåˆç§°å¹³æ»‘å¾€è¿”æ—¶é—´ï¼Œs=smoothedã€‚</p>
<p>$$æ–°SRTT = (1-Î±) * æ—§SRTT + Î± * (æ–°RTTæ ·æœ¬)$$</p>
<p>å…¶ä¸­0 â‰¤ Î± &lt; 1ï¼ŒTCPé‡‡ç”¨çš„å€¼ä¸º1/8ã€‚å†…æ ¸ä¸­çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<p>$$SRTT += 1/8 * (m - SRTT)$$</p>
<p>mä¸ºå½“å‰RTTã€‚</p>
<p>è¶…æ—¶é‡ä¼ æ—¶é—´RTO(RetransmissionTimeOut)åº”è¯¥ç•¥å¤§äºä¸Šè¿°SRTTï¼ŒTCPè§„å®šï¼š</p>
<p>$$RTO = SRTT + 4*DRTT$$</p>
<p>RTTdä¸ºRTTçš„åå·®çš„åŠ æƒå¹³å‡å€¼ï¼Œä¹Ÿå°±æ˜¯RTTsä¸RTTå·®å€¼çš„åŠ æƒå¹³å‡æ•°ï¼Œååº”äº†å®é™…RTTä¸SRTTæ³¢åŠ¨å¹…åº¦ã€‚åŒæ ·åœ°ï¼Œä¾æ®åŠ æƒå¹³å‡æ•°é€’æ¨å¼ï¼Œæœ‰ï¼š</p>
<p>$$æ–°DRTT = (1-Î²) * æ—§DRTT + Î² * |RTTs - æ–°RTT|$$</p>
<p>å…¶ä¸­0 â‰¤ Î² &lt; 1ï¼ŒTCPé‡‡ç”¨çš„å€¼ä¸º1/4ã€‚</p>
<p>å› ä¸ºæ— æ³•æ¨æ–­å‡ºå‘é€æ–¹æ‰€æ”¶åˆ°çš„ç¡®è®¤æ˜¯å¯¹æœ€åˆæŠ¥æ–‡æ®µçš„ç¡®è®¤è¿˜æ˜¯å¯¹é‡ä¼ æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œæ‰€ä»¥Karnç®—æ³•å°±å¿½ç•¥æ‰é‡ä¼ æŠ¥æ–‡æ®µçš„RTTï¼šåœ¨è®¡ç®—SRTTçš„æ—¶å€™ï¼Œä¸é‡‡ç”¨é‡ä¼ æŠ¥æ–‡æ®µçš„RTTæ ·æœ¬ã€‚</p>
<p>ä½†æ˜¯Karnç®—æ³•ä¼šå¯¼è‡´RTOæ— æ³•æ›´æ–°çš„æƒ…å†µã€‚å‡å¦‚ç½‘ç»œæ³¢åŠ¨å¼•èµ·æŸä¸ªæ—¶é—´æ®µå†…çš„æ—¶å»¶å¤§å¹…å¢åŠ ï¼ŒæŠ¥æ–‡æ®µéƒ½ä¼šè¶…æ—¶å¹¶é‡ä¼ ï¼Œè¿™æ—¶ï¼ŒKarnç®—æ³•ä¼šå¿½ç•¥æ‰è¿™äº›é‡ä¼ æŠ¥æ–‡æ®µçš„RTTï¼Œä»è€Œå¯¼è‡´RTOæ— æ³•è¢«æ›´æ–°ã€‚</p>
<p>å®é™…ä¸ŠTCPåè®®æ˜¯è¿™æ ·å¤„ç†çš„ï¼šå½“æœ‰æŠ¥æ–‡æ®µå‘é€é‡ä¼ çš„æ—¶å€™ï¼Œå°±å°†å…¶RTOå¢åŠ ä¸º2*RTOï¼Œå½“ä¸å†å‘ç”Ÿé‡ä¼ æ—¶ï¼Œåˆ™æŒ‰ä¸Šé¢æ‰€è¯‰çš„SRTTï¼ŒRTOçš„å¼å­è®¡ç®—ã€‚</p>
<h2 id="Go-Back-Né—®é¢˜"><a class="header-anchor" href="#Go-Back-Né—®é¢˜"></a>Go-Back-Né—®é¢˜</h2>
<p>Go-Back-Né—®é¢˜ï¼šç”±äºæ¥æ”¶æ–¹é‡‡ç”¨çš„æ˜¯ç´¯ç§¯ç¡®è®¤ï¼ˆåˆç§°å»¶è¿Ÿç¡®è®¤ï¼Œå»¶è¿Ÿåº”ç­”ï¼‰ï¼Œæ‰€ä»¥æ— æ³•å‘å‘é€æ–¹åé¦ˆä¸­é—´è¿Ÿæ¥æˆ–ä¸¢å¤±æŠ¥æ–‡ä¹‹åçš„æ¥æ”¶ç¡®è®¤æƒ…å†µï¼Œä½¿å¾—å‘é€æ–¹åªèƒ½å†æ¬¡å‘é€ä¹‹åå·²ç»æ”¶åˆ°çš„æ•°æ®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCPåè®®ä¸­æä¾›äº†ä¸€ä¸ªé€‰æ‹©ç¡®è®¤ï¼ˆSACK Selective ACKï¼‰çš„æœºåˆ¶ï¼Œå®ƒåœ¨é¦–éƒ¨é€‰é¡¹å­—æ®µä¸­å¢åŠ SACKä¿¡æ¯ï¼ŒæŒ‡æ˜å·²æ”¶åˆ°æŠ¥æ–‡æ®µçš„è¾¹ç•Œä¿¡æ¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€‰é¡¹å­—æ®µæœ‰é•¿åº¦é™åˆ¶ï¼Œæœ€å¤š40ä¸ªå­—èŠ‚ï¼Œè€Œä¸€ä¸ªè¾¹ç•Œä¿¡æ¯å°±ä¼šæ¶ˆè€—4å­—èŠ‚ï¼ˆä¸€ä¸ªåºå·å 4å­—èŠ‚ï¼‰ã€‚å› æ­¤ï¼Œé€‰é¡¹å­—æ®µæœ€å¤šèƒ½æ‰¿è½½4ä¸ªè¾¹ç•Œä¿¡æ¯ï¼ˆ1å­—èŠ‚è¡¨ç¤ºSACKæ ‡å¿—ä½ï¼Œ1å­—èŠ‚è¡¨ç¤ºSACKé•¿åº¦ï¼Œ4x4x2=32å­—èŠ‚ï¼‰ã€‚</p>
<p>é€‰æ‹©ç¡®è®¤SACKéœ€è¦å‘é€æ–¹æ‹¥æœ‰é€‰æ‹©é‡ä¼ çš„èƒ½åŠ›ã€‚</p>
<h1 id="æµé‡æ§åˆ¶"><a class="header-anchor" href="#æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h1>
<blockquote>
<p>æ»‘åŠ¨çª—å£æœºåˆ¶ä¿è¯æ§åˆ¶å‘é€é€Ÿç‡ï¼Œä½¿å¾—æ¥æ”¶æ–¹å¤„ç† --ã€‹é›¶çª—å£é€šçŸ¥ï¼ˆæ¥æ”¶çª—å£=0ï¼‰ï¼ŒæŒç»­è®¡æ—¶å™¨ï¼Œé›¶çª—å£æ¢æµ‹æŠ¥æ–‡ --ã€‹</p>
</blockquote>
<p>æµé‡æ§åˆ¶çš„ç›®çš„ï¼Œå°±æ˜¯<strong>è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶æ¥æ”¶</strong>ã€‚åˆ©ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨TCPè¿æ¥ä¸Šå®ç°æµé‡æ§åˆ¶ã€‚</p>
<p>æ¥æ”¶çª—å£rwndï¼ˆreceiver windowï¼‰</p>
<p>TCPé¦–éƒ¨ä¸­æœ‰ä¸€ä¸ªçª—å£å¤§å°å­—æ®µï¼Œæ˜¯æ¥æ”¶æ–¹ç”¨æ¥å‘Šè¯‰å‘é€æ–¹ï¼Œè‡ªå·±çš„æ¥å—çª—å£å‰©ä½™çš„å­—èŠ‚æ•°å¤§å°ï¼Œè®©å‘é€æ–¹ä»¥æ­¤æ¥è®¾ç½®å‘é€çª—å£å¤§å°ã€‚å‘é€æ–¹çš„å‘é€çª—å£ä¸èƒ½è¶…è¿‡æ¥æ”¶æ–¹ç»™å‡ºçš„æ¥æ”¶çª—å£çš„æ•°å€¼ã€‚</p>
<p>å½“æ¥æ”¶æ–¹å›å¤çš„çª—å£å€¼ä¸ºé›¶æ—¶ï¼Œä¹Ÿå°±æ˜¯é›¶çª—å£é€šçŸ¥ï¼Œæ¥æ”¶æ–¹å°±ä¼šå¯åŠ¨ä¸€ä¸ª<strong>æŒç»­è®¡æ—¶å™¨ï¼ˆPersistence Timerï¼‰</strong>ï¼Œè‹¥è®¡æ—¶å™¨åˆ°æœŸä¹‹å‰ï¼Œè‹¥æ²¡æœ‰æ”¶åˆ°æ¢å¤çª—å£ï¼ˆrwnd&gt;0ï¼‰çš„é€šçŸ¥ï¼Œåˆ™ä¼šå‘é€ä¸€ä¸ªé›¶çª—å£æ¢æµ‹æŠ¥æ–‡æ®µã€‚</p>
<p><strong>æŒç»­è®¡æ—¶å™¨</strong>çš„ç›®çš„æ˜¯é˜²æ­¢æ¥æ”¶æ–¹æ¢å¤çª—å£çš„é€šçŸ¥æŠ¥æ–‡æ®µä¸¢å¤±ï¼Œå¼•èµ·çš„åŒæ–¹éƒ½åœ¨æ­»ç­‰çš„é—®é¢˜ã€‚</p>
<h2 id="æŠ¥æ–‡æ®µå‘é€çš„æ—¶æœº"><a class="header-anchor" href="#æŠ¥æ–‡æ®µå‘é€çš„æ—¶æœº"></a>æŠ¥æ–‡æ®µå‘é€çš„æ—¶æœº</h2>
<h3 id="Nagleç®—æ³•"><a class="header-anchor" href="#Nagleç®—æ³•"></a>Nagleç®—æ³•</h3>
<h3 id="ç³Šæ¶‚çª—å£ç»¼åˆå¾"><a class="header-anchor" href="#ç³Šæ¶‚çª—å£ç»¼åˆå¾"></a>ç³Šæ¶‚çª—å£ç»¼åˆå¾</h3>
<h1 id="æ‹¥å¡æ§åˆ¶"><a class="header-anchor" href="#æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h1>
<p>æ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„é—®é¢˜ï¼Œè€Œæµé‡æ§åˆ¶æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„é€šä¿¡é‡æ§åˆ¶é—®é¢˜ã€‚æ‹¥å¡æ§åˆ¶ç›®çš„æ˜¯<strong>é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‘ç”Ÿç½‘ç»œä¸­è·¯ç”±å™¨æˆ–è€…é“¾è·¯çš„è´Ÿè½½æŒç»­å¢åŠ ï¼Œå¯¼è‡´ç½‘ç»œè¿‡è½½ä¸å¯ç”¨çš„æƒ…å†µ</strong>ã€‚</p>
<p>æ‹¥å¡çª—å£ï¼ˆcwnd, Congestion Windowï¼‰æ˜¯ä¸€æ¡è¿æ¥ä¸­å‘é€æ–¹ç»´æŒçš„ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼ˆu32ï¼‰ï¼Œå€¼å¤§å°</p>
<h2 id="æ‹¥å¡çª—å£ä¸å‘é€çª—å£çš„è”ç³»"><a class="header-anchor" href="#æ‹¥å¡çª—å£ä¸å‘é€çª—å£çš„è”ç³»"></a>æ‹¥å¡çª—å£ä¸å‘é€çª—å£çš„è”ç³»</h2>
<p>æˆ‘ä»¬çŸ¥é“TCPæŠ¥æ–‡æ®µé¦–éƒ¨ä¸­ï¼Œçª—å£å¤§å°çš„å­—æ®µå€¼ï¼Œæ˜¯æ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹è‡ªå·±èƒ½è¿˜èƒ½æ¥æ”¶çš„æ•°æ®å­—èŠ‚æ•°å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€æ–¹å‘é€çª—å£çš„å¤§å°ä¸èƒ½å¤§äºæ¥æ”¶æ–¹æ¥æ”¶çª—å£çš„å¤§å°ã€‚å¦å¤–ï¼Œä¸ºäº†ä¿è¯æ‹¥å¡æ§åˆ¶ï¼Œå‘é€çª—å£å¤§å°ä¹Ÿä¼šå—åˆ°æ‹¥å¡çª—å£çš„å› ç´ ã€‚snd_wnd=min(rwnd,cwnd*mss)</p>
<h2 id="æ…¢å¯åŠ¨ä¸æ‹¥å¡é¿å…"><a class="header-anchor" href="#æ…¢å¯åŠ¨ä¸æ‹¥å¡é¿å…"></a>æ…¢å¯åŠ¨ä¸æ‹¥å¡é¿å…</h2>
<h2 id="å¿«é‡ä¼ ä¸å¿«æ¢å¤"><a class="header-anchor" href="#å¿«é‡ä¼ ä¸å¿«æ¢å¤"></a>å¿«é‡ä¼ ä¸å¿«æ¢å¤</h2>
<h2 id="Tahoe-Renoä¸Cubic"><a class="header-anchor" href="#Tahoe-Renoä¸Cubic"></a>Tahoe, Renoä¸Cubic</h2>
<h2 id="BBR"><a class="header-anchor" href="#BBR"></a>BBR</h2>
<h1 id="è¿æ¥ç®¡ç†"><a class="header-anchor" href="#è¿æ¥ç®¡ç†"></a>è¿æ¥ç®¡ç†</h1>
<h2 id="ä¸‰æ¬¡æ¡æ‰‹"><a class="header-anchor" href="#ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h2>
<ul>
<li>socketså»ºç«‹ï¼Œåºå·åŒæ­¥ï¼Œçª—å£åå•†</li>
<li>å†å²çŠ¶æ€å¯¹æ–°è¿æ¥çš„å½±å“</li>
</ul>
<h2 id="å››æ¬¡æŒ¥æ‰‹"><a class="header-anchor" href="#å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h2>
<ul>
<li>å…¨åŒå·¥ï¼Ÿ</li>
<li>èµ„æºï¼ˆsocket?ï¼‰é‡Šæ”¾</li>
</ul>
<h2 id="è¿æ¥çš„æœ‰é™çŠ¶æ€æœº"><a class="header-anchor" href="#è¿æ¥çš„æœ‰é™çŠ¶æ€æœº"></a>è¿æ¥çš„æœ‰é™çŠ¶æ€æœº</h2>
<h1 id="å…¶å®ƒ"><a class="header-anchor" href="#å…¶å®ƒ"></a>å…¶å®ƒ</h1>
<p>æºå¸¦åº”ç­”ï¼Œé€‰æ‹©é‡ä¼ æœºåˆ¶ï¼Œ</p>
<h1 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ"></a>å‚è€ƒ</h1>
<ul>
<li>ã€Šè®¡ç®—æœºç½‘ç»œï¼ˆç¬¬6ç‰ˆï¼‰-è°¢å¸Œä»ã€‹</li>
<li><a href="http://packetbomb.com/understanding-throughput-and-tcp-windows/">Understanding Throughput and TCP Windows â€“ PacketBomb</a></li>
<li>å¦‚ä½•æµ‹é‡å’Œç¡®å®šLinuxç³»ç»Ÿä¸­tcpåˆå§‹å‘é€çª—å£çš„å¤§å°ï¼Ÿ - è…¾è®¯æŠ€æœ¯å·¥ç¨‹çš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/267728663/answer/331489185">https://www.zhihu.com/question/267728663/answer/331489185</a></li>
</ul>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œåŸºç¡€</tag>
        <tag>TCP</tag>
      </tags>
  </entry>
  <entry>
    <title>Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/Typora%E8%87%AA%E5%AE%9A%E4%B9%89Gitee%E5%9B%BE%E5%BA%8A%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC.html</url>
    <content><![CDATA[<h1 id="æ–°å»ºGiteeä»“åº“"><a class="header-anchor" href="#æ–°å»ºGiteeä»“åº“"></a>æ–°å»ºGiteeä»“åº“</h1>
<ul>
<li>ä»“åº“å¿…é¡»æ˜¯<code>å¼€æºï¼ˆæ‰€æœ‰äººå¯è§ï¼‰</code></li>
<li>é€‰æ‹©åˆå§‹åŒ–</li>
</ul>
<img src="https://tximgcdn.tung7.com/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬_20210708212615_220560.png" alt="image-20210612100355952" style="zoom:30%;" />
<h1 id="è·å–Gitee-OpenAPIçš„access-token"><a class="header-anchor" href="#è·å–Gitee-OpenAPIçš„access-token"></a>è·å–Gitee OpenAPIçš„access_token</h1>
<p>åœ¨è®¾ç½®-å®‰å…¨è®¾ç½®-ç§äººä»¤ç‰Œ-ç”Ÿæˆæ–°ä»¤ç‰Œï¼Œä»¤ç‰Œéœ€è¦æœ‰<strong>projectsæƒé™</strong>ï¼Œç”Ÿæˆåä¿å­˜å¥½ç»™åˆ°çš„access_tokenã€‚</p>
<img src="https://tximgcdn.tung7.com/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬_20210708212711_539618.png" style="zoom:30%;" />
<h1 id="Python3ç¯å¢ƒä¸è„šæœ¬é…ç½®å˜é‡çš„ä¿®æ”¹"><a class="header-anchor" href="#Python3ç¯å¢ƒä¸è„šæœ¬é…ç½®å˜é‡çš„ä¿®æ”¹"></a>Python3ç¯å¢ƒä¸è„šæœ¬é…ç½®å˜é‡çš„ä¿®æ”¹</h1>
<p>æå‰è£…å¥½ä¾èµ–</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><code class="hljs smali">pip3  install -U requests<br>pip3  install -U cos-python-sdk-v5<br>pip3  install opencv-python<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> base64<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> cv2<br><br><span class="hljs-comment"># git commitçš„ä¿¡æ¯</span><br>message=<span class="hljs-string">&quot;å›¾åºŠ&quot;</span><br><span class="hljs-comment"># åˆšåˆšè·å–åˆ°çš„ç§äººä»¤ç‰Œ</span><br>access_token=<span class="hljs-string">&quot;XXXXXX&quot;</span><br><span class="hljs-comment"># giteeçš„ç”¨æˆ·å</span><br>owner=<span class="hljs-string">&quot;XXXXXX&quot;</span> <br><span class="hljs-comment"># åˆšåˆšæ–°å»ºçš„ä»“åº“å</span><br>repo=<span class="hljs-string">&quot;pic-repo&quot;</span><br><span class="hljs-comment"># æäº¤æ–‡ä»¶ç›®æ ‡ç›®å½•</span><br><span class="hljs-built_in">dir</span>=<span class="hljs-string">&quot;img&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">compress_img</span>(<span class="hljs-params">img</span>):<br>    src=cv2.imread(img, <span class="hljs-number">1</span>)<br>    d,fname=os.path.split(img)<br>    purename=os.path.splitext(fname)[<span class="hljs-number">0</span>]<br>    cv2.imwrite(d+<span class="hljs-string">&quot;/&quot;</span>+purename+<span class="hljs-string">&quot;.jpg&quot;</span>, src, [cv2.IMWRITE_JPEG_QUALITY, <span class="hljs-number">80</span>])<br>    <span class="hljs-keyword">return</span> d+<span class="hljs-string">&quot;/&quot;</span>+purename+<span class="hljs-string">&quot;.jpg&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_size</span>(<span class="hljs-params">file</span>):<br>    <span class="hljs-comment"># è·å–æ–‡ä»¶å¤§å°:KB</span><br>    size = os.path.getsize(file)<br>    <span class="hljs-keyword">return</span> size / <span class="hljs-number">1024</span><br><br>base_url=<span class="hljs-string">&quot;https://gitee.com/api/v5/repos/&quot;</span><br>filename=sys.argv[<span class="hljs-number">1</span>]<br>filepath=sys.argv[<span class="hljs-number">2</span>]<br>imgs=sys.argv[<span class="hljs-number">3</span>:]<br>tmp=<span class="hljs-string">&quot;&quot;&quot;&#123;&quot;access_token&quot;:&quot;%s&quot;,&quot;content&quot;:&quot;%s&quot;,&quot;message&quot;:&quot;%s&quot;&#125;&quot;&quot;&quot;</span><br><br>arr=[]<br>hasF=<span class="hljs-literal">False</span><br><span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> imgs:<br>    file_ext = os.path.splitext(img)[-<span class="hljs-number">1</span>]<br>    newName=<span class="hljs-string">&quot;%s/%s_%s_%s&quot;</span> % (filename, filename,time.strftime(<span class="hljs-string">&quot;%Y%m%d%H%M%S&quot;</span>, time.localtime()),random.randint(<span class="hljs-number">100000</span>, <span class="hljs-number">999999</span>))<br>    url=base_url+owner+<span class="hljs-string">&quot;/&quot;</span>+repo+<span class="hljs-string">&quot;/contents/&quot;</span>+<span class="hljs-built_in">dir</span>+<span class="hljs-string">&quot;/&quot;</span>+newName+file_ext<br>    <br>    <span class="hljs-keyword">if</span> (get_size(img)&gt;<span class="hljs-number">1000</span>):<br>        img = compress_img(img)<br><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(img, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        encode_img = base64.b64encode(f.read())<br>        img_base64 = encode_img.decode()<br>        <span class="hljs-comment">#print(&#x27;data:image/&#123;&#125;;base64,&#123;&#125;&#x27;.format(file_ext[1:], img_base64))</span><br>        headers=&#123;<span class="hljs-string">&quot;Content-Type&quot;</span>:<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>&#125;<br>        data=tmp%(access_token, img_base64, message)<br>        f.close()<br>        <span class="hljs-keyword">try</span>:<br>            res=requests.post(url=url, headers=headers, data=data.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>            res.encoding = <span class="hljs-string">&quot;utf-8&quot;</span><br>            resBody=json.loads(res.text)<br>            arr.append(resBody[<span class="hljs-string">&#x27;content&#x27;</span>][<span class="hljs-string">&#x27;download_url&#x27;</span>])<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(e)<br>            hasF=<span class="hljs-literal">True</span><br><br><span class="hljs-keyword">if</span> (hasF):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Upload Failed:&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Upload Success:&quot;</span>)<br>    <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> arr:<br>        <span class="hljs-built_in">print</span>(a)<br></code></pre></td></tr></table></figure>
<h1 id="Typoraé…ç½®"><a class="header-anchor" href="#Typoraé…ç½®"></a>Typoraé…ç½®</h1>
<ul>
<li>å–æ¶ˆå‹¾é€‰æœ¬åœ°ä½ç½®çš„å›¾ç‰‡è§„åˆ™
<ul>
<li>è¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡ï¼Œç­‰åˆ°æ–‡ç« ç¼–è¾‘å¥½ä¹‹åï¼Œå†æ‰‹åŠ¨å³é”®å›¾ç‰‡è¿›è¡Œä¸Šä¼ ã€‚</li>
<li>æˆªå›¾ç²˜è´´çš„å›¾ç‰‡é»˜è®¤ä¼šæ”¾åˆ°typoraè‡ªå·±çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å¤¹ï¼Œéœ€è¦å®šæ—¶æ¸…ç†ï¼ˆMacä¸‹ä¸º/Users/XXXX/Library/Application Support/typora-user-imagesï¼‰</li>
</ul>
</li>
<li>å‹¾é€‰ç½‘ç»œä½ç½®çš„å›¾ç‰‡è§„åˆ™
<ul>
<li>ä¼šè‡ªåŠ¨å°†ç½‘ç»œä½ç½®çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠ</li>
</ul>
</li>
<li>ä¸Šä¼ æœåŠ¡å¡«å†™Custom Command</li>
<li>å‘½ä»¤å¡«å†™pythonè„šæœ¬ï¼Œå¹¶é™„å¸¦``${filename}<code>ä¸</code>${filepath}`å‚æ•°
<ul>
<li><code>/usr/bin/python3 /Users/Tung/LocalDoc/hexoblog/cosupload.py &quot;$&#123;filename&#125;&quot; &quot;$&#123;filepath&#125;&quot;</code></li>
<li>ç¯å¢ƒä¸­å¯èƒ½æœ‰å¤šç§pythonç¯å¢ƒï¼Œæ‰‹åŠ¨æŒ‡å®šinstalläº†ä¾èµ–åŒ…çš„é‚£ä¸ªç¯å¢ƒå³å¯</li>
</ul>
</li>
</ul>
<img src="https://tximgcdn.tung7.com/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬/Typoraè‡ªå®šä¹‰Giteeå›¾åºŠä¸Šä¼ è„šæœ¬_20210708212603_404578.png" alt="image-20210612102101852" style="zoom:30%;" />
<p><img src="https://tximgcdn.tung7.com/Typora%E8%87%AA%E5%AE%9A%E4%B9%89Gitee%E5%9B%BE%E5%BA%8A%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC/Typora%E8%87%AA%E5%AE%9A%E4%B9%89Gitee%E5%9B%BE%E5%BA%8A%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC_20230402233103_292999.png" alt="image-20230402233103239"></p>
<h1 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1>
<p><a href="https://support.typora.io/Upload-Image/#custom">Upload Images (typora.io)</a></p>
<p><a href="https://gitee.com/api/v5/swagger#/postV5ReposOwnerRepoContentsPath">Gitee API æ–‡æ¡£</a></p>
]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
      <tags>
        <tag>è„šæœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œåŸºç¡€-è·¯ç”±é€‰æ‹©åè®®</title>
    <url>/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE.html</url>
    <content><![CDATA[<p><img src="../../assets/svg/%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE.svg" alt="è·¯ç”±é€‰æ‹©åè®®"></p>
<h1 id="ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±é€‰æ‹©"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±é€‰æ‹©"></a>ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±é€‰æ‹©</h1>
<p>å¦‚ä»Šï¼ŒInternetæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„äº’è”ç½‘ç»œã€‚ä¸ºäº†è§£å†³ä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼Œç½‘ç»œå±‚éœ€è¦è€ƒè™‘å¦‚ä½•åœ¨åºå¤§çš„ç½‘ç»œä¸­ï¼Œä¸ºæ•°æ®æŠ¥çš„è½¬å‘è¿›è¡Œå¯»å€ã€‚è·¯ç”±é€‰æ‹©åè®®åœ¨è§£å†³ä¸»æœºä¹‹é—´çš„å¯»å€é—®é¢˜æœ‰ç€é‡è¦ä½œç”¨ã€‚</p>
<p><strong>è·¯ç”±é€‰æ‹©</strong>å°±æ˜¯å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ç‚¹çš„è·¯ç”±å™¨åºåˆ—ã€‚ä¸åŒçš„è·¯ç”±å™¨åºåˆ—å¯¹åº”çš„ä»£ä»·æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚è´¹ç”¨ï¼Œå»¶è¿Ÿï¼Œè·³æ•°ç­‰ç­‰ã€‚</p>
<p><strong>è·¯ç”±é€‰æ‹©åè®®</strong>ç”¨æ¥å®šä¹‰è·¯ç”±å™¨å¦‚ä½•å®ç°è·¯ç”±é€‰æ‹©åŠŸèƒ½ï¼Œä»¥è¾¾åˆ°è®©æ•°æ®æŠ¥ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºä¹‹é—´çš„ä¼ è¾“è·¯å¾„æ˜¯<strong>æ¯”è¾ƒå¥½</strong>çš„è·¯ç”±è·¯å¾„ã€‚</p>
<blockquote>
<p>å› ä¸ºåœ¨Internetè§„æ¨¡å¦‚æ­¤å·¨å¤§çš„æƒ…å†µä¸‹ï¼Œå¯»æ‰¾æœ€ä½³è·¯å¾„çš„æˆæœ¬å’Œæ—¶å»¶æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯é€‰æ‹©ä¸€æ¡æ¯”è¾ƒå¥½çš„ï¼Œ<strong>ä»£ä»·è¾ƒä¸ºä½</strong>çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯æœ€ä½³çš„è·¯å¾„ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œç½‘ç»œå±‚çš„è·¯ç”±å®é™…ä¸Šæ˜¯<strong>å­ç½‘åˆ°å­ç½‘çš„è·¯ç”±</strong>ï¼Œé‚£ä¹ˆï¼Œè·¯ç”±å™¨ä¸è·¯ç”±å™¨ä¹‹é—´çš„è·¯ç”±é—®é¢˜å°±ç­‰ä»·äºä¸»æœºåˆ°ä¸»æœºä¹‹é—´çš„è·¯ç”±é—®é¢˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°†ç½‘ç»œçœ‹ä½œæ˜¯*<u>æœ‰æƒè”é€šå›¾</u>*çš„æŠ½è±¡ã€‚èŠ‚ç‚¹ä¸ºä½¿ç”¨è·¯ç”±å™¨ä»£è¡¨çš„å­ç½‘ï¼Œè¾¹ä¸ºé“¾è·¯ï¼Œè¾¹å€¼ä¸ºåº¦é‡ï¼ˆè·¯ç”±ä»£ä»·ï¼Œå¦‚è·³æ•°ï¼Œæ—¶å»¶ï¼Œè´¹ç”¨ç­‰ç­‰ï¼‰ã€‚<strong>è·¯ç”±é€‰æ‹©ç®—æ³•æœ¬è´¨ä¸Šå°±æ˜¯å›¾çš„è·¯å¾„ç®—æ³•ã€‚</strong></p>
<p>è·¯ç”±é€‰æ‹©çš„ç­–ç•¥æœ‰ï¼š</p>
<ul>
<li>é™æ€è·¯ç”±é€‰æ‹©ç­–ç•¥
<ul>
<li>éè‡ªé€‚åº”ï¼Œä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–ï¼Œé€‚åˆå°å‹ç½‘ç»œ</li>
</ul>
</li>
<li>åŠ¨æ€è·¯ç”±é€‰æ‹©ç­–ç•¥ï¼ˆè‡ªé€‚åº”ï¼‰
<ul>
<li>è‡ªé€‚åº”çš„ï¼Œèƒ½å¤Ÿè¾ƒå¥½åœ°é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–ï¼Œå®ç°è¾ƒä¸ºå¤æ‚ï¼Œå¼€é”€ä¹Ÿè¾ƒå¤§ï¼Œæ‰€ä»¥é€‚åˆå¤æ‚çš„å¤§å‹ç½‘ç»œã€‚</li>
</ul>
</li>
</ul>
<h1 id="Internetä¸»è¦çš„è·¯ç”±é€‰æ‹©åè®®"><a class="header-anchor" href="#Internetä¸»è¦çš„è·¯ç”±é€‰æ‹©åè®®"></a>Internetä¸»è¦çš„è·¯ç”±é€‰æ‹©åè®®</h1>
<p>ç°è¡ŒInternetçš„è·¯ç”±é€‰æ‹©åè®®ä¸»è¦æ˜¯<strong>åŠ¨æ€çš„</strong>ï¼Œåˆ†å¸ƒå¼è·¯ç”±é€‰æ‹©åè®®ã€‚</p>
<p>Internetå°†æ•´ä¸ªäº’è”ç½‘åˆ’åˆ†ä¸ºå¤šä¸ªè¾ƒå°çš„<strong>è‡ªæ²»ç³»ç»Ÿï¼ˆautonomous systemï¼‰</strong>,æ¯ä¸ªè‡ªæ²»ç³»ç»Ÿå†…éƒ¨å¯ä»¥ä½¿ç”¨å¤šç§å†…éƒ¨è·¯ç”±é€‰æ‹©åè®®å’Œåº¦é‡ï¼ˆæˆæœ¬ä»£ä»·çš„åº¦é‡ï¼‰ï¼Œä½†æ˜¯ä¸€ä¸ªASå¯¹å…¶ä»–ASè¡¨ç°å‡ºçš„æ˜¯ä¸€ä¸ªå•ä¸€çš„å’Œä¸€è‡´çš„è·¯ç”±é€‰æ‹©ç­–ç•¥ã€‚</p>
<p>ä¸€ä¸ªå¤§çš„ISPå°±æ˜¯ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿã€‚</p>
<p>æŒ‰ç…§è‡ªæ²»ç³»ç»Ÿçš„è§’åº¦ï¼Œå¯ä»¥å°†è·¯ç”±é€‰æ‹©åè®®åˆ’åˆ†ä¸ºä¸¤å¤§ç±»</p>
<ul>
<li>å†…éƒ¨ç½‘å…³åè®®IGP
<ul>
<li>ç§°ä¹‹ä¸ºåŸŸå†…è·¯ç”±é€‰æ‹©åè®®</li>
<li>ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªASå†…ä½¿ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œä¸å…¶ä»–ASé€‰ç”¨çš„è·¯ç”±é€‰æ‹©åè®®æ— å…³ã€‚</li>
<li>ç›®å‰ä½¿ç”¨å¾—æœ€å¤šçš„å°±æ˜¯RIPåè®®ï¼ŒOSPFåè®®</li>
</ul>
</li>
<li>å¤–éƒ¨ç½‘å…³åè®®EGP
<ul>
<li>ç§°ä¹‹ä¸ºåŸŸé—´è·¯ç”±é€‰æ‹©åè®®</li>
<li>å½“æ•°æ®æŠ¥éœ€è¦è·¨è‡ªæ²»ç³»ç»Ÿä¼ è¾“ï¼Œåˆ°è¾¾ä¸€ä¸ªASè¾¹ç•Œçš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸€ç§åè®®å°†è·¯ç”±é€‰æ‹©ä¿¡æ¯ï¼ˆï¼Ÿå…·ä½“ä»€ä¹ˆä¿¡æ¯ï¼Ÿï¼‰ä¼ é€’åˆ°å¦ä¸€ä¸ªASä¸­ã€‚</li>
<li>ç›®å‰ä½¿ç”¨å¾—æœ€å¤šçš„å°±æ˜¯BGP</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>ä¸‹å±‚åè®®</th>
<th>ç®—æ³•</th>
<th>èŒƒå›´</th>
<th>ç¯è·¯æ£€æµ‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>RIPã€RIP2</td>
<td>UDP</td>
<td>è·ç¦»å‘é‡</td>
<td>åŸŸå†…</td>
<td>ä¸æ”¯æŒï¼šä½¿ç”¨è·³æ•°çº¦æŸæ–¹æ³•</td>
</tr>
<tr>
<td>OSPF</td>
<td>IP</td>
<td>é“¾è·¯çŠ¶æ€</td>
<td>åŸŸå†…</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>BGP</td>
<td>TCP</td>
<td>è·¯å¾„å‘é‡</td>
<td>åŸŸé—´</td>
<td>æ”¯æŒ</td>
</tr>
</tbody>
</table>
<h1 id="RIP-Routing-Information-Protocol"><a class="header-anchor" href="#RIP-Routing-Information-Protocol"></a>RIP(Routing Information Protocol)</h1>
<p>ä¸€ç§åˆ†å¸ƒå¼çš„ï¼ŒåŸºäº<strong>è·ç¦»çŸ¢é‡ç®—æ³•</strong>çš„è·¯ç”±é€‰æ‹©åè®®ã€‚æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç®€å•ã€‚</p>
<p>RIPè®¤ä¸ºï¼Œå¥½çš„è·¯ç”±å°±æ˜¯é€šè¿‡çš„è·¯ç”±å™¨çš„æ•°é‡å°‘ï¼Œæ‰€ä»¥RIPä¸­çš„â€œè·ç¦»â€å°±æ˜¯â€œè·³æ•°â€ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±ï¼Œè·³æ•°å°±å¢åŠ 1ã€‚</p>
<h2 id="è·ç¦»çŸ¢é‡ç®—æ³•Distance-Vector"><a class="header-anchor" href="#è·ç¦»çŸ¢é‡ç®—æ³•Distance-Vector"></a>è·ç¦»çŸ¢é‡ç®—æ³•Distance Vector</h2>
<p>DVæ˜¯ä¸€ç§<strong>å±€éƒ¨ç®—æ³•</strong>ï¼Œè·¯ç”±å™¨åªçŸ¥é“ä¸å®ƒæœ‰ç‰©ç†è¿æ¥å…³ç³»çš„é‚»å±…è·¯ç”±ï¼Œå’Œåˆ°ä»–ä»¬ä¹‹é—´çš„ä»£ä»·ã€‚å ä»£åœ°ä¸é‚»å±…äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œè®¡ç®—è·¯ç”±ä¿¡æ¯ã€‚è¿™ä¸ªäº¤æ¢çš„è·¯ç”±ä¿¡æ¯å°±æ˜¯ï¼šâ€œåˆ°æ‰€æœ‰ç½‘ç»œçš„è·ç¦»å’Œä¸‹ä¸€è·³è·¯ç”±å™¨â€ã€‚</p>
<p>å®ç°æ˜¯ä½¿ç”¨<strong>Bellman-Fordç®—æ³•</strong>ï¼Œå…·ä½“ç®—æ³•å®ç°è¿‡ç¨‹è§[#ã€Šè®¡ç®—æœºç½‘ç»œç¬¬å…­ç‰ˆ-è°¢å¸Œä»ã€‹P153ä»¥åŠP154çš„ä¾‹4-5]ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a class="header-anchor" href="#ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2>
<p>RIPå…è®¸ä¸€æ¡è·¯å¾„<strong>æœ€å¤šåŒ…å«15ä¸ªè·¯ç”±</strong>ï¼Œè·ç¦»è¶…è¿‡15æ—¶ï¼Œå°±è®¤ä¸ºä¸å¯è¾¾ï¼Œç”±æ­¤å¯è§ï¼ŒRIPåªé€‚ç”¨äºå°å‹ç½‘ç»œã€‚</p>
<p>ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>ä»…ä»…å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯</p>
<ul>
<li>äº¤æ¢çš„ä¿¡æ¯å°±æ˜¯æœ¬è·¯ç”±å™¨å½“å‰çš„è·¯ç”±è¡¨</li>
<li>è·¯ç”±è¡¨ä¿¡æ¯ï¼šç›®æ ‡ç½‘ç»œï¼Œåˆ°è¿™ä¸ªç½‘ç»œçš„æœ€çŸ­è·ç¦»ï¼Œä»¥åŠå¯¹åº”çš„ä¸‹ä¸€è·³åœ°å€ã€‚</li>
</ul>
</li>
<li>
<p>å½“å‰è·¯ç”±å™¨åˆ°ASä¸­æ‰€æœ‰ç½‘ç»œçš„æœ€çŸ­è·ç¦»ï¼Œä»¥åŠç»è¿‡æ¯ä¸ªç½‘ç»œåº”è¯¥ç»è¿‡çš„ä¸‹ä¸€è·³è·¯ç”±å™¨</p>
</li>
<li>
<p>æŒ‰å›ºå®šçš„æ—¶é—´é—´éš”äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚å½“ç½‘ç»œæ‹“æ‰‘å˜åŒ–æ—¶ï¼Œä¹ŸåŠæ—¶å‘é‚»å±…é€šå‘Šå˜åŒ–ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>**å¥½æ¶ˆæ¯ä¼ æ’­å¾—å¿«ï¼Œåæ¶ˆæ¯ä¼ æ’­çš„æ…¢ã€‚**ç½‘ç»œå‡ºç°æ•…éšœçš„ä¼ æ’­æ—¶é—´å¾€å¾€éœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆæ•°åˆ†é’Ÿï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªç¼ºç‚¹ã€‚</p>
</li>
<li>
<p>RIPåè®®ç”±äºå‘é€é¢‘ç‡é«˜ï¼Œæ‰€ä»¥ä½¿ç”¨çš„UDPåè®®è¿›è¡Œä¿¡æ¯ä¼ é€ã€‚ï¼ˆå¯ä»¥å°†RIPåè®®å®ç°å½“åšæ˜¯åº”ç”¨ç¨‹åºç†è§£ï¼‰</p>
</li>
</ul>
<h1 id="OSPF-Open-Shortest-Path-First"><a class="header-anchor" href="#OSPF-Open-Shortest-Path-First"></a>OSPF (Open Shortest Path First)</h1>
<p><strong>å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆç®—æ³•</strong>ï¼ˆä¹‹æ‰€ä»¥å«SPFï¼Œæ˜¯å› ä¸ºä½¿ç”¨äº†Dijkstraæå‡ºçš„SPFç®—æ³•ã€‚ï¼‰ï¼Œæ˜¯åˆ†å¸ƒå¼çš„ï¼ŒåŸºäº<strong>é“¾è·¯çŠ¶æ€ç®—æ³•</strong>çš„è·¯ç”±é€‰æ‹©åè®®ã€‚</p>
<h2 id="é“¾è·¯çŠ¶æ€ç®—æ³•Link-State"><a class="header-anchor" href="#é“¾è·¯çŠ¶æ€ç®—æ³•Link-State"></a>é“¾è·¯çŠ¶æ€ç®—æ³•Link State</h2>
<p>LSæ˜¯ä¸€ç§å…¨å±€ç®—æ³•ï¼Œåˆ†ä¸ºä¸¤å¤§æ­¥éª¤ï¼šæ‰€æœ‰è·¯ç”±å™¨éƒ½è¦å¾—åˆ°å…¨å±€ç½‘ç»œæ‹“æ‰‘å›¾å’Œåº¦é‡ä¿¡æ¯ï¼Œå¯¹æ‹“æ‰‘å›¾è¿›è¡Œè¿ç®—å¾—åˆ°è·¯ç”±è¡¨ã€‚</p>
<p>ä¸ºäº†ä½¿å¾—æ‰€æœ‰è·¯ç”±å™¨éƒ½æ‹¥æœ‰å®Œæ•´çš„æ‹“æ‰‘å’Œè¾¹çš„åº¦é‡ä¿¡æ¯ï¼ˆä»£ä»·ï¼‰ï¼Œå½“æŸä¸ªè·¯ç”±å™¨çš„ç½‘ç»œçŠ¶æ€å˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ³›æ´ªæ³•ï¼Œå°†è‡ªèº«ä¸é‚»å±…ä¹‹é—´çš„å˜åŒ–ä¿¡æ¯å¹¿æ’­å‡ºå»ï¼Œå…¶å®ƒè·¯ç”±å™¨å¾—åˆ°ä¿¡æ¯åç»§ç»­å‘å¤–æ‰©æ•£å¹¿æ’­ã€‚æœ€ç»ˆæ‰€æœ‰è·¯ç”±å™¨éƒ½èƒ½å¤Ÿå¾—çŸ¥å˜åŒ–ä¿¡æ¯ã€‚</p>
<p>å½“è·¯ç”±å™¨æ‹¥æœ‰äº†å…¨å±€æ‹“æ‰‘ç»“æ„åï¼Œå°±å¯ä»¥ä¾æ®Dijkstra SPFç®—æ³•æ„é€ å‡ºè‡ªå·±çš„è·¯ç”±è¡¨ã€‚</p>
<h2 id="ç‰¹ç‚¹ï¼š"><a class="header-anchor" href="#ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h2>
<ul>
<li>ä½¿ç”¨æ³›æ´ªï¼ˆfloodingï¼‰æ³•å‘æœ¬ASä¸­æ‰€æœ‰çš„è·¯ç”±å™¨å‘é€ä¿¡æ¯ã€‚
<ul>
<li>ä¹Ÿå°±æ˜¯é€šè¿‡æ‰€æœ‰è¾“å‡ºç«¯å£å‘æ‰€æœ‰é‚»å±…å‘é€ä¿¡æ¯ï¼Œé‚»å±…æ”¶åˆ°ä¿¡æ¯ä¹‹åå†æ¬¡å‘å…¶æ‰€æœ‰é‚»å±…ï¼ˆæ’é™¤æ¥æºè·¯ç”±å™¨ï¼‰å‘é€æ¥æ”¶åˆ°çš„ä¿¡æ¯ï¼Œè¿™æ ·ASä¸­æ‰€æœ‰è·¯ç”±å™¨éƒ½èƒ½å¾—åˆ°è¿™ä¸ªä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>å‘é€çš„ä¿¡æ¯å°±æ˜¯æœ¬è·¯ç”±å™¨<strong>ç›¸é‚»çš„æ‰€æœ‰è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€</strong>
<ul>
<li>é“¾è·¯çŠ¶æ€å°±æ˜¯æœ¬è·¯ç”±å™¨å’Œå“ªäº›è·¯ç”±å™¨ç›¸é‚»ï¼Œä»¥åŠé“¾è·¯çš„åº¦é‡ï¼ˆmetric è¡¨ç¤ºè·ç¦»ï¼Œæ—¶å»¶ï¼Œå¸¦å®½ï¼Œè´¹ç”¨ç­‰ç­‰ï¼‰ã€‚è¿™ä¸ªåº¦é‡å¯ä»¥ç†è§£ä¸ºä»£ä»·ã€‚</li>
</ul>
</li>
<li>åªæœ‰é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰ä¼šæ³›æ´ªä¿¡æ¯ã€‚ä¸RIPçš„å®šæ—¶äº¤æ¢ä¿¡æ¯ä¸åŒã€‚</li>
<li>æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªé“¾è·¯çŠ¶æ€æ•°æ®åº“ï¼Œå­˜æ”¾çš„å®é™…ä¸Šå°±æ˜¯å…¨ç½‘ï¼ˆASï¼‰çš„æ‹“æ‰‘ç»“æ„å›¾ï¼Œæ¯ä¸€ä¸ªè·¯ç”±å™¨é€šè¿‡å…¨ç½‘æ‹“æ‰‘å›¾æ„é€ å‡ºè‡ªå·±çš„è·¯ç”±è¡¨ï¼ˆä½¿ç”¨Dijkstraç®—æ³•è®¡ç®—ï¼‰</li>
</ul>
<p>ä¸ºäº†é¿å…æ³›æ´ªå¯¼è‡´çš„å¹¿æ’­é£æš´é—®é¢˜ï¼Œå¯ä»¥å°†ASå†æ¬¡åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„åŒºåŸŸï¼Œæ³›æ´ªå°±åªæ˜¯åœ¨å½“å‰åŒºåŸŸå†…æ³›æ´ªã€‚</p>
<p>OSPFåè®®æŠ¥æ–‡å¾ˆçŸ­ï¼Œæ‰€ä»¥åªéœ€è¦ç›´æ¥ä½¿ç”¨IPåè®®è¿›è¡Œé€šä¿¡å³å¯ï¼Œä¸éœ€è¦ä½¿ç”¨UDPã€‚</p>
<h1 id="BGP"><a class="header-anchor" href="#BGP"></a>BGP</h1>
<p>BGPæ˜¯ä¸€ä¸ª<strong>åŸºäºè·¯å¾„å‘é‡ï¼ˆpath vectorï¼‰è·¯ç”±é€‰æ‹©ç®—æ³•</strong>çš„ï¼Œè¾¹ç•Œç½‘å…³åè®®ã€‚è€ƒè™‘åˆ°å®ç°çš„å¤æ‚åº¦ä¸æˆæœ¬ï¼ŒBGPåè®®ç›®çš„ä¸æ˜¯å¯»æ‰¾æœ€ä½³çš„è·¯ç”±ï¼Œè€Œæ˜¯å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿè¾¾åˆ°ç›®çš„ç½‘ç»œçš„æ¯”è¾ƒå¥½çš„è·¯ç”±ã€‚</p>
<p>åŸå› æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>Internetè§„æ¨¡å¤ªå¤§ï¼Œä½¿å¾—ASä¹‹é—´è·¯ç”±é€‰æ‹©éå¸¸å›°éš¾ã€‚ä¸»å¹²ç½‘ä¸Šçš„è·¯ç”±è¡¨æ—©å·²ç»è¶…è¿‡5ä¸‡ä¸ªç½‘ç»œå‰ç¼€ã€‚å¦‚æœä½¿ç”¨é“¾è·¯çŠ¶æ€ç®—æ³•ï¼Œæ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½éœ€è¦ç»´æŒä¸€ä¸ªå¾ˆå¤§çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“LSDBã€‚åŒæ—¶å¦‚æ­¤å¤§çš„LSDBï¼Œè®¡ç®—æœ€çŸ­è·¯å¾„æ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿå¤ªé•¿äº†ã€‚</li>
<li>ASä¹‹é—´çš„è·¯ç”±é€‰æ‹©éœ€è¦è€ƒè™‘æœ‰å…³ç­–ç•¥ã€‚ä¸åŒASå†…éƒ¨çš„ä»£ä»·å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆåœ¨ASä¹‹é—´ä½¿ç”¨æœ€çŸ­è·¯å¾„ä¹Ÿæ˜¯ä¸èƒ½é€‚é…çš„ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸åŒASæ‰€åœ¨çš„å›½å®¶åœ°åŒºï¼Œå¯èƒ½ç”±äºæ”¿æ²»ï¼Œå®‰å…¨ç­‰åŸå› ä¸å…è®¸æŸäº›ASçš„æ•°æ®ç»è¿‡ã€‚è¿™æ—¶ï¼Œåªèƒ½æ˜¯ç½‘ç»œç®¡ç†äººå‘˜å¯¹ç­ä¸€ä¸ªè·¯ç”±æœŸè¿›è¡Œè®¾ç½®ã€‚</li>
</ul>
<p>BGPæ¯”è¾ƒåˆç†çš„åšæ³•æ˜¯åœ¨ASä¹‹é—´äº¤æ¢å¯è¾¾æ€§ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä»£ä»·ã€‚è¿™æ ·ä¸€æ¥BGPå°±é‡‡ç”¨äº†ä¸€ç§ä¸RIP,OSPFéƒ½ä¸åŒçš„ç®—æ³•ï¼šè·¯å¾„å‘é‡ï¼ˆPath Vectorï¼‰ç®—æ³•ã€‚</p>
<p>æ¯ä¸€ä¸ªBGPéƒ½ä¼šç”±ç®¡ç†å‘˜é…ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªè·¯ç”±å™¨ä½œä¸º<strong>BGPå‘è¨€äººï¼ˆBGP speakerï¼‰</strong>ï¼Œç”±ä»–ä»¬è¿›è¡Œè·¯ç”±ä¿¡æ¯äº¤æ¢ã€‚å‘è¨€äººä¹‹é—´éœ€è¦äº‹å…ˆå»ºç«‹TCPè¿æ¥ï¼ˆç«¯å£179ï¼‰ï¼Œç¡®ä¿é€šä¿¡çš„è´¨é‡ã€‚å½“æ–°å¢è·¯ç”±ï¼Œæ’¤é”€è·¯ç”±æˆ–è€…ç½‘ç»œå¼‚å¸¸æ—¶ï¼Œå‘è¨€äººå°±ä½¿ç”¨å»ºç«‹çš„TCPä¼šè¯äº¤æ¢ä¿¡æ¯ã€‚</p>
<p>å‘è¨€äººå€ŸåŠ©äº¤æ¢çš„ä¿¡æ¯ï¼Œå¾—åˆ°æœ€ç»ˆçš„è·¯å¾„ä¿¡æ¯è®¿é—®åˆ—è¡¨ï¼ˆAS Path Listï¼‰ï¼Œä¾‹å¦‚è¦åˆ°è¾¾ç½‘ç»œN1,N2,N3å¯ç»è¿‡è·¯å¾„(AS1,AS2)ã€‚å…·ä½“ä¾‹å­ï¼šå‚è€ƒ[ã€Šå›¾è§£TCP/IP ç¬¬5ç‰ˆã€‹7.6.2]</p>
]]></content>
      <categories>
        <category>æ—¥æ‹±ä¸€å’</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œåŸºç¡€</tag>
        <tag>IP</tag>
      </tags>
  </entry>
  <entry>
    <title>DDDå³°ä¼š2020æ‘˜å½•</title>
    <url>/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95.html</url>
    <content><![CDATA[<h1 id="å¼ é€¸-æ°‘èˆªä¿¡æ¯æŠ€æœ¯æ€»ç›‘-ã€Šæ¥æ„é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä½œè€…"><a class="header-anchor" href="#å¼ é€¸-æ°‘èˆªä¿¡æ¯æŠ€æœ¯æ€»ç›‘-ã€Šæ¥æ„é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä½œè€…"></a>å¼ é€¸ æ°‘èˆªä¿¡æ¯æŠ€æœ¯æ€»ç›‘ ã€Šæ¥æ„é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä½œè€…</h1>
<h2 id="é¢†åŸŸé©±åŠ¨è®¾è®¡å¤§æ­ç§˜"><a class="header-anchor" href="#é¢†åŸŸé©±åŠ¨è®¾è®¡å¤§æ­ç§˜"></a>é¢†åŸŸé©±åŠ¨è®¾è®¡å¤§æ­ç§˜</h2>
<blockquote>
<ol>
<li>DDD vs DDD ï¼ˆæ•°æ®é©±åŠ¨ vs é¢†åŸŸé©±åŠ¨ï¼‰</li>
<li>DDDé»‘é“æ—¶ä»£ä¸é»„é‡‘æ—¶ä»£</li>
<li>å•ä½“æ¶æ„æ˜¯é‚ªæ¶çš„å—</li>
<li>DDDçš„ä¸è¶³ä¸DDD-UP</li>
</ol>
</blockquote>
<h2 id="ä¼ ç»Ÿä¸DDD"><a class="header-anchor" href="#ä¼ ç»Ÿä¸DDD"></a>ä¼ ç»Ÿä¸DDD</h2>
<h3 id="ä¼ ç»Ÿè®¾è®¡æ¨¡å‹çš„åˆ†æ"><a class="header-anchor" href="#ä¼ ç»Ÿè®¾è®¡æ¨¡å‹çš„åˆ†æ"></a>ä¼ ç»Ÿè®¾è®¡æ¨¡å‹çš„åˆ†æ</h3>
<p>ERå›¾ï¼Œä¸“æ³¨æ•°æ®å­—æ®µï¼Œåˆ°ç±»è®¾è®¡å±‚é¢å°±æ˜¯æ•°æ®è¡¨æ˜ å°„åˆ°æ•°æ®ç±»ï¼Œè¿™ç§ç±»çœ‹ä½œæ˜¯ä¸€ä¸ªæºå¸¦æ•°æ®çš„ä¸€ç§ç»“æ„ï¼ˆæ•°æ®å®ä½“ï¼‰ã€‚ä¹Ÿå°±æ˜¯è´«è¡€æ¨¡å‹ï¼ˆæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†å¼€ï¼Œåªæœ‰æ•°æ®ç»“æ„çš„æ¨¡å‹ï¼‰ã€‚</p>
<p>å­—æ®µçš„é‡ç”¨ã€‚ä»è¶…ç±»çš„å®ç°ï¼Œåˆ°ç»„åˆçš„å®ç°ã€‚</p>
<p>è´«è¡€æ¨¡å‹å°†ç®—æ³•èšé›†åœ¨ä¸€ä¸ªæ²¡æœ‰çŠ¶æ€çš„serviceé‡Œé¢ï¼Œè¿™ä¸ªserviceç§°ä¹‹ä¸ºäº‹åŠ¡è„šæœ¬ï¼Œ</p>
<p>ä¸Šè¿°çš„è´«è¡€æ¨¡å‹+äº‹åŠ¡è„šæœ¬çš„ç»“åˆæ–¹å¼å°±æ˜¯ä¸€ç§ä¼ ç»Ÿçš„é¢å‘è¿‡ç¨‹çš„æ–¹å¼ã€‚</p>
<p>å­˜åœ¨æ¨¡å—ï¼ŒæœåŠ¡ï¼Œç»„ä»¶çš„æ¦‚å¿µ</p>
<h3 id="DDDä¸‹æ¨¡å‹çš„é‡ç”¨"><a class="header-anchor" href="#DDDä¸‹æ¨¡å‹çš„é‡ç”¨"></a>DDDä¸‹æ¨¡å‹çš„é‡ç”¨</h3>
<p>å±æ€§å­—æ®µçš„é‡ç”¨ï¼Œä¼ ç»Ÿæ¨¡å‹ä¼šé€šè¿‡è¶…ç±»å®ç°ï¼ŒDDDä»ç»„åˆçš„è§’åº¦å®ç°ã€‚</p>
<p><strong>é™ç•Œä¸Šä¸‹æ–‡ - Bounded Contextï¼Œæ˜¯ä¸šåŠ¡èƒ½åŠ›çš„çºµå‘åˆ‡åˆ†ï¼Œé¡ºåº”ä¸šåŠ¡çš„å˜åŒ–æ–¹å‘</strong></p>
<p>ä¾‹ï¼šå¯¹äºå®¢æˆ·Customeræ¨¡å‹è€Œè¨€ï¼Œå®ƒåœ¨é”€å”®ä¸Šä¸‹æ–‡ä¸å”®åä¸Šä¸‹æ–‡ä¸­çš„å…³æ³¨ç‚¹æ˜¯ä¸ä¸€æ ·çš„</p>
<p>BCä¹‹é—´çš„é‡ç”¨ï¼Œæ˜¯å€ŸåŠ©ä¸šåŠ¡èƒ½åŠ›è¿›è¡Œé‡ç”¨çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥é‡ç”¨é¢†åŸŸæ¨¡å‹ã€‚</p>
<p>è´¢åŠ¡ä¸Šä¸‹æ–‡ä¸­ï¼Œå…³æ³¨å¾€æ¥è´¦çš„ä¸šåŠ¡èƒ½åŠ›ã€‚å…¶ä¸­æœ‰è¿è¾“è´¹çš„ä¸šåŠ¡ï¼Œä½†æ˜¯è´¢åŠ¡BCä¸å…·å¤‡è®¡ç®—è¿è´¹çš„èƒ½åŠ›ï¼Œè¿è´¹é¢†åŸŸæ¨¡å‹åŒ…å«äº†è¿è¾“è´¹ï¼Œç§Ÿèµè´¹ï¼Œäººå·¥è´¹ï¼Œä¿è´¹ç­‰ä¿¡æ¯ã€‚è¿™äº›æ˜¯è¦åœ¨è¿è¾“ä¸Šä¸‹æ–‡ä¸­æä¾›ã€‚å¯¹äºè´¢åŠ¡BCï¼Œä¼šæä¾›ä¸€ä¸ªç»“ç®—è´¦ç›®çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œå®ƒåœ¨ç»“ç®—çš„æ—¶å€™ï¼Œéœ€è¦å¾—åˆ°ä¸€ä¸ªè¿è´¹ï¼Œè¿™å°±éœ€è¦è¿è¾“BCçš„ä¸šåŠ¡èƒ½åŠ›ã€‚å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯é€šè¿‡ä¸šåŠ¡èƒ½åŠ›ï¼ˆå¯èƒ½å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„ä¸€ç§RESTfulæœåŠ¡ï¼‰æ¥ä¿è¯é‡ç”¨çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å¯¹æ–¹çš„é¢†åŸŸæ¨¡å‹ï¼Œä»è€Œä¿è¯ä¾èµ–é™ä½ï¼ˆè§£è€¦ï¼‰ã€‚</p>
<p>é¢†åŸŸæ¨¡å‹çš„çŸ¥è¯†è¯­å¢ƒã€‚è¯†åˆ«ä¸Šä¸‹æ–‡ï¼Œç¡®å®šé¢†åŸŸæ¨¡å‹çš„çŸ¥è¯†è¯­å¢ƒ</p>
<p>è¿è¾“BCï¼Œéœ€è¦å•†å“çš„ä¿¡æ¯ï¼Œä½†æ˜¯åªéœ€è¦å•†å“è¿è¾“é«˜åº¦ï¼Œè¿è¾“æ·±åº¦ï¼Œæœ‰æ²¡æœ‰å›æ”¶ï¼Œæœ‰æ²¡æœ‰æ”¶ç¨è¿™äº›å±æ€§ã€‚</p>
<p>å•†å“BCä¸­ä¼šå®šä¹‰ä¸€ä¸ªå•†å“ç±»Productï¼Œè¿è¾“BCä¸­ä¹Ÿä¼šå®šä¹‰ä¸€ä¸ªå•†å“ç±»Productï¼Œ</p>
<p>å…ˆæ˜¯ä¸šåŠ¡å±‚é¢ï¼Œé¢†åŸŸå±‚é¢çš„çºµå‘åˆ‡åˆ†ï¼Œå†æ˜¯æŠ€æœ¯è§’åº¦æ¥åˆ’åˆ†ä¸šåŠ¡æ¨¡å—ï¼Œæ•°æ®è®¿é—®æ¨¡å—ã€‚ä»ç¼–ç çš„è§’åº¦ä¸Šçœ‹ï¼Œå¦‚æœä¸šåŠ¡å‘ç”Ÿå˜åŒ–ï¼Œåªå½±å“åˆ°äº†å…¶ä¸­ä¸€ä¸ªç±»ã€‚</p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062842_488234.png" alt="image-20210613100555039"></p>
<p><strong>èšåˆä¸èšåˆæ ¹</strong></p>
<p>å¯¹è±¡çš„ä¾èµ–ï¼Œç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚ç»å¸¸å¤§é‡éœ€è¦ç»†ç²’åº¦çš„ç±»ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç±»å…³ç³»å›¾å¼‚å¸¸å¤æ‚ã€‚ä»å¯¹è±¡çš„ç›¸å…³æ€§è¿›è¡Œåˆ’åˆ†è¾¹ç•Œè¿›è¡Œèšåˆï¼Œç„¶åä¸ºæ¯ä¸€ä¸ªèšåˆå®šä¹‰ä¸€ä¸ªèšåˆæ ¹å®ä½“ï¼Œèšåˆä¹‹é—´åªå…è®¸èšåˆæ ¹ä¹‹é—´è¿›è¡Œå…³è”ï¼Œä»¥æ­¤å‡å°‘ç±»ä¸ç±»çš„å…³ç³»ã€‚</p>
<p>èšåˆæ ¹å¯¹å¤–æä¾›äº¤äº’å…³ç³»ï¼Œå†…éƒ¨çš„ç»†èŠ‚æ˜¯å®ƒè‡ªå·±çš„å®ç°ï¼Œå¤–éƒ¨ä¸éœ€è¦å…³å¿ƒã€‚</p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062849_148415.png" alt="image-20210613101813903"></p>
<p><strong>é™ç•Œä¸Šä¸‹æ–‡</strong>ä¸<strong>èšåˆ</strong>æ˜¯DDDçš„æ ¸å¿ƒæ¨¡å¼ã€‚</p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062856_284094.png" alt="image-20210613102006057"></p>
<h2 id="é»‘é“æ—¶ä»£ä¸é»„é‡‘æ—¶ä»£"><a class="header-anchor" href="#é»‘é“æ—¶ä»£ä¸é»„é‡‘æ—¶ä»£"></a>é»‘é“æ—¶ä»£ä¸é»„é‡‘æ—¶ä»£</h2>
<p>DDDæ˜¯03å¹´å¼€å§‹å½“æ—¶æ˜¯ä¸€ä¸ªå¾ˆæ–°çš„æ¦‚å¿µï¼Œå¯¹å¼€å‘äººå‘˜å’Œè®¾è®¡äººå‘˜æ¥è¯´ï¼Œç¬¬ä¸€ä¼šå¯¼è‡´çŸ¥è¯†ä¸Šçš„å¢åŠ ã€‚ä»–ä»¬é¢ä¸´å¤§é‡æ–°æ¦‚å¿µæ–°çŸ¥è¯†æ¶Œå…¥çš„å‹åŠ›ï¼Œå…¶å®æ˜¯å¾ˆéš¾æ¥å—çš„ã€‚ç¬¬äºŒï¼Œä»–æ²¡æœ‰æ„è¯†åˆ°é™ç•Œä¸Šä¸‹çš„ä»·å€¼ï¼ŒBCæ˜¯æ¶æ„å±‚æ¬¡çš„è‡ªæ²»å•å…ƒã€‚</p>
<p>å—åŒ—å‘è±å½¢æ¨¡å‹ï¼šå—å‘ï¼šé¢†åŸŸ-ç«¯å£-é€‚é…å™¨ï¼ŒåŒ—å‘ï¼šè¿œç¨‹-æœ¬åœ°-é¢†åŸŸã€‚ è°ƒç”¨ä¸€èˆ¬æ˜¯å—åŒ—èµ°å‘ï¼Ÿ</p>
<p>éšç€å¾®æœåŠ¡çš„è¯ç”Ÿï¼ŒDDDå¼€å§‹ç«èµ·æ¥ã€‚</p>
<p>å¾®æœåŠ¡çš„åä½œå°±æ˜¯é™ç•Œä¸Šä¸‹æ–‡çš„åä½œã€‚é€šè¿‡**Clienté˜²è…å±‚ï¼Ÿ**è°ƒç”¨ä¸Šæ¸¸å¾®æœåŠ¡æˆä¸ºåˆç†çš„é€‰æ‹©ã€‚</p>
<h2 id="å•ä½“æ¶æ„ä¸é¢†åŸŸé©±åŠ¨æ¶æ„é£æ ¼"><a class="header-anchor" href="#å•ä½“æ¶æ„ä¸é¢†åŸŸé©±åŠ¨æ¶æ„é£æ ¼"></a>å•ä½“æ¶æ„ä¸é¢†åŸŸé©±åŠ¨æ¶æ„é£æ ¼</h2>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062907_866505.png" alt="DDDå³°ä¼š2020æ‘˜å½•_20210614050949_233675"></p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062913_997895.png" alt="image-20210613111652495"></p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062919_147282.png" alt="äº‹ä»¶é©±åŠ¨æ¶æ„"></p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062926_378798.png" alt="DDDå³°ä¼š2020æ‘˜å½•_20210614051005_654846"></p>
<h2 id="DDDçš„ä¸è¶³ä¸è¡¥å……"><a class="header-anchor" href="#DDDçš„ä¸è¶³ä¸è¡¥å……"></a>DDDçš„ä¸è¶³ä¸è¡¥å……</h2>
<ul>
<li>ç¼ºä¹è§„èŒƒçš„<strong>è¿‡ç¨‹æŒ‡å¯¼</strong>ï¼Œç¼ºä¹<strong>å¯æ“ä½œæ€§</strong>ï¼Œå›¢é˜Ÿå®è·µè¿‡ç¨‹ä¸­ï¼Œæ›´å¤šå–å†³äºè®¾è®¡è€…çš„è¡Œä¸šçŸ¥è¯†ä¸è®¾è®¡ç»éªŒï¼Œè¿™å°±å­˜åœ¨è¾ƒå¤§çš„å¶ç„¶æ€§ã€‚</li>
<li>æ²¡æœ‰åŒ¹é…çš„éœ€æ±‚ç®¡ç†ä½“ç³»ã€‚ä¸åŒå±‚æ¬¡çš„ä¸šåŠ¡éœ€æ±‚è´¯ç©¿äºé¢†åŸŸé©±åŠ¨è®¾è®¡è¿‡ç¨‹ä¸­çš„æ¯ä¸ªç¯èŠ‚ï¼Œè¯†åˆ«é™ç•Œä¸Šä¸‹æ–‡å’Œå»ºç«‹é«˜è´¨é‡çš„é¢†åŸŸæ¨¡å‹<strong>éƒ½æœ‰èµ–äº</strong>è‰¯å¥½çš„éœ€æ±‚ã€‚éœ€æ±‚ç®¡ç†ä½“ç³»ç›´æ¥å½±å“é¢†åŸŸé©±åŠ¨è®¾è®¡çš„è´¨é‡ã€‚</li>
<li>DDDçš„æ ¸å¿ƒè¯‰æ±‚æ˜¯è®©<strong>ä¸šåŠ¡æ¶æ„</strong>å’Œ<strong>åº”ç”¨æ¶æ„</strong>å½¢æˆ<strong>ç»‘å®šå…³ç³»</strong>ï¼Œä»¥é¢å¯¹éœ€æ±‚å˜åŒ–æ—¶ï¼Œä½¿å¾—<strong>åº”ç”¨æ¶æ„èƒ½å¤Ÿé€‚åº”ä¸šåŠ¡æ¶æ„çš„è°ƒæ•´</strong>ï¼Œæ»¡è¶³æ¶æ„çš„<strong>æ¼”è¿›æ€§</strong>ã€‚ä½†æ˜¯DDDå´<strong>ç¼ºä¹é¢å‘é¢†åŸŸçš„æ¶æ„ä½“ç³»</strong>ï¼Œä¸è¶³ä»¥æ”¯æ’‘å¤æ‚è½¯ä»¶é¡¹ç›®çš„æ¶æ„éœ€æ±‚ã€‚
<ul>
<li>ç›®å‰èƒ½å’ŒBCå¯¹åº”ä¸Šçš„åªæœ‰åˆ†å±‚æ¶æ„ã€‚åæ¥è¿˜æœ‰å…­è¾¹å½¢æ¶æ„ï¼Œè¿˜æœ‰ä¸Šé¢æ‰€è¯´çš„è±å½¢æ¶æ„</li>
</ul>
</li>
<li>DDDè™½ç„¶ä»¥æ¨¡å‹é©±åŠ¨è®¾è®¡ä¸ºä¸»çº¿ï¼Œå´<strong>æ²¡æœ‰ç»™å‡ºæ˜ç¡®çš„é¢†åŸŸå»ºæ¨¡æ–¹æ³•</strong>ã€‚æˆ‘ä»¬éœ€è¦åˆ†åˆ«ä¸ºé¢†åŸŸ<strong>åˆ†æå»ºæ¨¡</strong>ï¼Œé¢†åŸŸ<strong>è®¾è®¡å»ºæ¨¡</strong>å’Œé¢†åŸŸ<strong>å®ç°å»ºæ¨¡</strong>æä¾›å¯¹åº”çš„æ–¹æ³•æŒ‡å¯¼ï¼Œå‡è½»å„ä¸ªå»ºæ¨¡æ´»åŠ¨çš„çŸ¥è¯†è´Ÿæ‹…ï¼Œæ˜ç¡®æ¯ä¸ªå»ºæ¨¡æ´»åŠ¨æ´»åŠ¨çš„é¢†åŸŸæ¨¡å‹çš„éªŒè¯æ ‡å‡†ï¼Œé¿å…é¢†åŸŸå»ºæ¨¡çš„éšæ„æ€§ã€‚
<ul>
<li>åˆ†ææ¨¡å‹ï¼Œè®¾è®¡æ¨¡å‹ï¼Œå®ç°æ¨¡å‹åº”è¯¥ä¿æŒä¸€è‡´ã€‚ä½†æ˜¯ï¼Œæ²¡æœ‰æä¾›æ–¹æ³•å‘Šè¯‰æˆ‘ä»¬ï¼šæ€ä¹ˆå»æç‚¼å¯¹è±¡ï¼Œæ€ä¹ˆå»ºç«‹æ¨¡å‹å¯¹è±¡ï¼Œæ¨¡å‹ä»åˆ†æåˆ°è®¾è®¡åˆ°å®ç°æ˜¯æ€ä¹ˆè½¬æ¢ã€‚</li>
</ul>
</li>
</ul>
<p>RUP? é—®é¢˜ç©ºé—´-è§£ç©ºé—´</p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062938_941172.png" alt="DDDå³°ä¼š2020æ‘˜å½•_20210614051041_704101"></p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062947_638824.png" alt="image-20210613123247487"></p>
<h1 id="æ¬§åˆ›æ–°-ã€Šä¸­å°æ¶æ„ä¸å®ç°ï¼šåŸºäºDDDå’Œå¾®æœåŠ¡ã€‹ä½œè€…"><a class="header-anchor" href="#æ¬§åˆ›æ–°-ã€Šä¸­å°æ¶æ„ä¸å®ç°ï¼šåŸºäºDDDå’Œå¾®æœåŠ¡ã€‹ä½œè€…"></a>æ¬§åˆ›æ–° ã€Šä¸­å°æ¶æ„ä¸å®ç°ï¼šåŸºäºDDDå’Œå¾®æœåŠ¡ã€‹ä½œè€…</h1>
<h2 id="å½“ä¸­å°é‡ä¸ŠDDDï¼Œå¦‚ä½•è®¾è®¡å¾®æœåŠ¡"><a class="header-anchor" href="#å½“ä¸­å°é‡ä¸ŠDDDï¼Œå¦‚ä½•è®¾è®¡å¾®æœåŠ¡"></a>å½“ä¸­å°é‡ä¸ŠDDDï¼Œå¦‚ä½•è®¾è®¡å¾®æœåŠ¡</h2>
<p>é¡¶å±‚è®¾è®¡å¼€å§‹ï¼Œè¡Œä¸šé¢†åŸŸä¸åŒå…³æ³¨ä¹Ÿä¸åŒï¼Œé˜¿é‡Œçš„é€šç”¨èƒ½åŠ›ä¸­å°å…³æ³¨å…¬å…±ä¸šåŠ¡é¢†åŸŸï¼Œä¸»è¦è§£å†³é‡å¤é€ è½®å­çš„é—®é¢˜ã€‚</p>
<p>æˆ˜ç•¥ä¸æˆ˜æœ¯</p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062953_744390.png" alt="DDDå³°ä¼š2020æ‘˜å½•_20210614051123_449536"></p>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706062959_205757.png" alt="DDDå³°ä¼š2020æ‘˜å½•_20210614051117_995382"></p>
<p>DDDä¸‹çš„å¾®æœåŠ¡è¾¹ç•Œ</p>
<ul>
<li>å¾®æœåŠ¡å•ä½“å†…ï¼ŒåŸºäºèšåˆåˆ’åˆ†çš„é€»è¾‘è¾¹ç•Œï¼Œæä¾›äº†å¾®æœåŠ¡è¿›ä¸€æ­¥åˆ’åˆ†çš„èƒ½åŠ›ï¼Œè¿™å°±è§£å†³äº†å¾®æœåŠ¡å†…é«˜å†…èšä¸‹é¢å¯¹å˜æ›´æ—¶ä¿®æ”¹çš„éš¾é¢˜ã€‚</li>
<li>é™ç•Œä¸Šä¸‹æ–‡è¾¹ç•Œï¼Œåœ¨å¾®æœåŠ¡è½åœ°çš„æ—¶å€™ï¼Œå°±å˜æˆäº†å¾®æœåŠ¡ä¹‹é—´çš„ç‰©ç†è¾¹ç•Œã€‚</li>
</ul>
<p><img src="https://tximgcdn.tung7.com/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95/DDD%E5%B3%B0%E4%BC%9A2020%E6%91%98%E5%BD%95_20210706063006_179024.png" alt="image-20210613150558524"></p>
<h1 id="äºé™-IBMèµ„æ·±åº”ç”¨æ¶æ„å¸ˆ"><a class="header-anchor" href="#äºé™-IBMèµ„æ·±åº”ç”¨æ¶æ„å¸ˆ"></a>äºé™ IBMèµ„æ·±åº”ç”¨æ¶æ„å¸ˆ</h1>
<h2 id="é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨å¤§å‹é—ç•™ç³»ç»Ÿæ”¹é€ ä¸­çš„å®è·µ"><a class="header-anchor" href="#é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨å¤§å‹é—ç•™ç³»ç»Ÿæ”¹é€ ä¸­çš„å®è·µ"></a>é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨å¤§å‹é—ç•™ç³»ç»Ÿæ”¹é€ ä¸­çš„å®è·µ</h2>
<p>åˆ¶å®šç›®æ ‡ä¸ç­–ç•¥-ä¸šåŠ¡æ¢³ç†-å¾®æœåŠ¡æ”¹é€ -é›†æˆæµ‹è¯•è¿ç§»-åé¦ˆã€‚è¿™äº”ä¸ªæ­¥éª¤å¾ªç¯å¾€å¤ã€‚</p>
<ul>
<li>ä¸šåŠ¡æ¢³ç†
<ul>
<li>ç”¨é¢†åŸŸé©±åŠ¨çš„æ–¹å¼è¿›è¡Œä¸šåŠ¡å»ºæ¨¡</li>
<li>æŠ½è±¡å‡ºä¸€ä¸ªä¸šåŠ¡æ¨¡å‹ï¼Œæ ¹æ®è¿™ä¸ªæ¨¡å‹çš„å…³ç³»åˆ’åˆ†é™ç•Œä¸Šä¸‹æ–‡ã€‚ <strong>å…³é”®</strong></li>
<li>æœ‰æ•ˆæ·±åˆ»åœ°ç†è§£ç°æœ‰çš„ç³»ç»Ÿï¼Œæ¢³ç†ç°æœ‰çš„ä¸šåŠ¡ã€‚</li>
<li>ç³»ç»Ÿæ”¹é€ æœ€éš¾çš„ä¸€ç‚¹å°±æ˜¯åˆ†æä¸šåŠ¡å’Œä»£ç ï¼šå¾ˆéš¾ç†è§£ç°æœ‰ç³»ç»Ÿçš„ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œå¾ˆéš¾ç†è§£ç°æœ‰ç³»ç»Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Œä»¥åŠæ•´ä¸ªç³»ç»ŸåŒ…å«äº†å“ªäº›ä¸šåŠ¡ã€‚</li>
</ul>
</li>
<li>å¾®æœåŠ¡æ”¹é€ 
<ul>
<li>ä¾æ®æ¢³ç†å‡ºæ¥çš„é™ç•Œä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å…ˆæ¢³ç†ç°æœ‰ç³»ç»Ÿæ¶æ„ï¼Œé›†æˆçš„æ–¹å¼ï¼Œæš´éœ²çš„APIï¼Œç„¶åå¾€å¾®æœåŠ¡è½¬æ¢ã€‚</li>
</ul>
</li>
<li>æµ‹è¯•ï¼Œç”Ÿäº§è¿ç§»
<ul>
<li>ç¯å¢ƒï¼ŒåŸŸåï¼Œæ•°æ®</li>
</ul>
</li>
<li>åé¦ˆ
<ul>
<li>åŸºäºå‰å‡ æ­¥éª¤ï¼Œåé¦ˆç»™å›¢é˜Ÿï¼Œä»¥ä¾¿æ›´å¥½åœ°æŒ‡å¯¼ä¸‹ä¸€é˜¶æ®µçš„æ”¹é€ ã€‚</li>
<li>åŒ…å«ä¸šåŠ¡æ–¹åé¦ˆï¼Ÿ</li>
</ul>
</li>
</ul>
<h2 id="DDDå¼•é¢†å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡"><a class="header-anchor" href="#DDDå¼•é¢†å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡"></a>DDDå¼•é¢†å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡</h2>
<p>å¦‚ä½•è¯†åˆ«ç³»ç»Ÿè¾¹ç•Œï¼Ÿè¯†åˆ«ç³»ç»Ÿè¾¹ç•Œçš„ä¸€ä¸ªå®è·µå°±æ˜¯äº‹ä»¶é£æš´å·¥ä½œåŠã€‚</p>
<p>è¦æ±‚<strong>ä¸šåŠ¡éœ€æ±‚çš„æå‡ºè€…</strong>ä¸<strong>æŠ€æœ¯å®æ–½è€…</strong>åä½œå®Œæˆæ•´ä¸ªçš„é¢†åŸŸè®¾è®¡å»ºæ¨¡ï¼ˆä¸šåŠ¡äººå‘˜ï¼Œå¼€å‘ï¼ŒQAï¼ŒPMç­‰ç­‰ï¼Œæ–°å®è·µéœ€è¦æ•™ç»ƒä¸»æŒäººï¼Œé€šçŸ¥å‡†å¤‡ï¼Œå¼•å¯¼æ€è·¯ï¼‰</p>
<ul>
<li>ç†Ÿæ‚‰é¡¹ç›®çš„æˆå‘˜ä»‹ç»ä¸€ä¸‹é¡¹ç›®æƒ…å†µ
<ul>
<li>ä¸“æ³¨èƒŒåçš„ä¸šåŠ¡è®¨è®º</li>
<li>é¿å…å¼€å‘äººå‘˜é™·å…¥ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œè¦è„±ç¦»æ•°æ®åº“è¡¨è®¾è®¡çš„å›ºåŒ–æ€ç»´ï¼Œè·³å‡ºç°æœ‰çš„ä»£ç è®¾è®¡ã€‚ï¼ˆä¸»æŒäººéœ€è¦å…³æ³¨å¹¶æé†’ï¼‰</li>
</ul>
</li>
<li>åšå¥½å‡†å¤‡å·¥ä½œ</li>
<li>ä¸“æ³¨ä¸šåŠ¡è®¨è®º</li>
<li>å¯ä»¥é‚€è¯·ç¬¬ä¸‰æ–¹æ¥å£å›¢é˜Ÿäººå‘˜å‚ä¸
<ul>
<li>æ¶‰åŠä¸‰æ–¹æ¥å£æ—¶ï¼Œå¯ä»¥é‚€è¯·äºŒæ–¹/ä¸‰æ–¹å›¢é˜Ÿå‚åŠ </li>
</ul>
</li>
<li>æˆæœè®°å½•
<ul>
<li>æ¨èMural</li>
</ul>
</li>
</ul>
<p>ä¸šåŠ¡åˆ†æè¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°ä¸€ä¸ªç–‘é—®ï¼šé—ç•™ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ä¸€å®šéƒ½æ˜¯æ­£ç¡®ã€é€‚ç”¨ï¼ˆæ–°å˜æ›´ï¼Œæ–°åœºæ™¯ï¼‰çš„å—ï¼Ÿ</p>
<ul>
<li>å‰åçŸ›ç›¾çš„é€»è¾‘</li>
<li>å¹´ä¹…å¤±ä¿®çš„é€»è¾‘</li>
<li>æ— äººé—®æ´¥çš„é€»è¾‘</li>
</ul>
<p>æˆ‘ä»¬åœ¨è®¾è®¡é¢†åŸŸæ¨¡å‹çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘ï¼Œæˆ–è€…é¡ºå¸¦ç€çº æ­£è¿™äº›é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯è¿™äº›é—®é¢˜çš„è§£å†³å–å†³äºå›¢é˜Ÿå¯¹ç³»ç»Ÿçš„æ‰€æœ‰æƒï¼ˆownershipï¼‰çš„å¼ºåº¦ï¼ˆè¯äº‹æƒé«˜å¯¹æ”¹åŠ¨æ˜¯ååˆ†å‹å¥½çš„ã€‚ï¼‰</p>
<h2 id="å¾®æœåŠ¡å®æˆ˜"><a class="header-anchor" href="#å¾®æœåŠ¡å®æˆ˜"></a>å¾®æœåŠ¡å®æˆ˜</h2>
<blockquote>
<p>ç»æ€è€…æ¨¡å¼ï¼š</p>
<p>é€šè¿‡é€æ­¥ç”¨æ–°åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼Œæ›¿æ¢ç‰¹å®šåŠŸèƒ½æ®µï¼Œå¢é‡è¿ç§»æ—§ç³»ç»Ÿã€‚éšç€æ—§ç³»ç»ŸåŠŸèƒ½çš„æ›´æ¢ï¼Œæ–°ç³»ç»Ÿæœ€ç»ˆå–ä»£äº†æ‰€æœ‰æ—§ç³»ç»ŸåŠŸèƒ½ï¼Œæ‰¼æ€å¹¶åœç”¨æ—§ç³»ç»Ÿã€‚</p>
</blockquote>
<p>ç¬¬ä¸€ä¸ªåŠŸèƒ½æ®µï¼Œå…ˆé”‹é˜Ÿï¼ŒæŒ‘é€‰ä¸€ä¸ªè§„æ¨¡è¾ƒå°ï¼ŒåŠŸèƒ½ç®€å•ï¼Œä¸šåŠ¡è¾ƒä¸ºç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ã€‚</p>
<ul>
<li>æ˜ç¡®åˆ†å±‚æ¨¡å‹ä¸­å„å±‚çš„èŒè´£</li>
<li>è„šæ‰‹æ¶å·¥ç¨‹ï¼ˆæ¨¡æ¿å·¥ç¨‹ï¼‰</li>
<li>å…¬å…±ç»„ä»¶</li>
<li>é˜²è…å±‚</li>
<li>æµ‹è¯•ç”¨ä¾‹</li>
<li>DevOps</li>
<li>äº‘åŸºç¡€è®¾æ–½</li>
</ul>
<p>å£«æ°”ï¼šåŠŸèƒ½ç®€å•ï¼Œæ—¶é—´å‘¨æœŸæˆ˜çº¿ä¸èƒ½æ‹‰å¤ªé•¿ã€‚</p>
<p>è§„èŒƒï¼šå…ˆé”‹é˜Ÿèµ·è¯•éªŒä½œç”¨ï¼Œåˆ¶å®šè§„èŒƒã€‚</p>
<h1 id="æ¨äº‘-ThoughtWorksæ€»ç›‘å’¨è¯¢å¸ˆ"><a class="header-anchor" href="#æ¨äº‘-ThoughtWorksæ€»ç›‘å’¨è¯¢å¸ˆ"></a>æ¨äº‘ ThoughtWorksæ€»ç›‘å’¨è¯¢å¸ˆ</h1>
<h2 id="DDDä»æˆ˜ç•¥å®é™…åˆ°ä»£ç è½åœ°çš„ä¸‰é˜¶æ®µæ–¹æ³•"><a class="header-anchor" href="#DDDä»æˆ˜ç•¥å®é™…åˆ°ä»£ç è½åœ°çš„ä¸‰é˜¶æ®µæ–¹æ³•"></a>DDDä»æˆ˜ç•¥å®é™…åˆ°ä»£ç è½åœ°çš„ä¸‰é˜¶æ®µæ–¹æ³•</h2>
<ol>
<li>ä¸ºä»€ä¹ˆå¤§å®¶è§‰å¾—è½åœ°éš¾</li>
<li>DDDè½åœ°çš„ä¸‰é˜¶æ®µæ–¹æ³•</li>
<li>äº‹ä»¶é£æš´æ¥åšæˆ˜ç•¥å»ºæ¨¡</li>
<li>ç”¨åè¯åŠ¨è¯æ³•åšå­åŸŸå†…çš„ç»“æ„åŒ–æˆ˜æœ¯å»ºæ¨¡</li>
<li>ç”¨ç±»å‹æµåšè¡Œä¸ºå†…éƒ¨çš„å¾®è§‚è¯¦ç»†è®¾è®¡</li>
</ol>
<p>æ¨¡å‹ï¼šè½¯ä»¶çš„æ ¸å¿ƒéª¨æ¶ï¼Œæ ¸å¿ƒçº¦æŸï¼Œæ ¸å¿ƒæ¦‚å¿µçš„ä¸€ä¸ªå¯è§†åŒ–ä½“ç°ã€‚</p>
<p>ç™¾äººå›¢é˜Ÿçš„DDDæ¨¡å‹è½åœ°ï¼Œå…·ä½“åˆ°ç›´è§‚çš„å¾®è§‚æ¨¡å‹ï¼Œä¿è¯æ¨¡å‹å’Œä»£ç çš„ä¸€è‡´æ€§ã€‚</p>
<h1 id="æ­ªï¼šä¸ªäººé‡æ„æ„Ÿæ‚Ÿ"><a class="header-anchor" href="#æ­ªï¼šä¸ªäººé‡æ„æ„Ÿæ‚Ÿ"></a>æ­ªï¼šä¸ªäººé‡æ„æ„Ÿæ‚Ÿ</h1>
<p>æœ¯è¯­å¯¹é½ã€‚äº‹ä»¶é£æš´ï¼Œä¸šåŠ¡æ¢³ç†ï¼Œè®¾è®¡ä¸è½åœ°çš„èµ°æ ·çš„é—®é¢˜</p>
]]></content>
      <categories>
        <category>ä»–å±±ä¹‹çŸ³</category>
      </categories>
      <tags>
        <tag>DDD</tag>
      </tags>
  </entry>
  <entry>
    <title>Kafkaéƒ¨ç½²</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/Kafka%E9%83%A8%E7%BD%B2.html</url>
    <content><![CDATA[<h1 id="ç½‘ç«™"><a class="header-anchor" href="#ç½‘ç«™"></a>ç½‘ç«™</h1>
<p>å®˜æ–¹ä¸‹è½½é¡µï¼š<a href="http://kafka.apache.org/downloads.html">Apache Kafka</a></p>
<h1 id="é…ç½®"><a class="header-anchor" href="#é…ç½®"></a>é…ç½®</h1>
<p>ä¸»è¦çš„é…ç½®<strong>server.properties</strong></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><code class="hljs ini"><span class="hljs-comment">#brokerçš„å…¨å±€å”¯ä¸€ç¼–å·ï¼Œä¸èƒ½é‡å¤</span><br><span class="hljs-attr">broker.id</span>=<span class="hljs-number">0</span><br><br><span class="hljs-comment">#ç”¨æ¥ç›‘å¬é“¾æ¥çš„ç«¯å£ï¼Œproduceræˆ–consumerå°†åœ¨æ­¤ç«¯å£å»ºç«‹è¿æ¥</span><br><span class="hljs-attr">port</span>=<span class="hljs-number">9092</span><br><br><span class="hljs-comment">#å¤„ç†ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ•°é‡</span><br><span class="hljs-attr">num.network.threads</span>=<span class="hljs-number">3</span><br><br><span class="hljs-comment">#ç”¨æ¥å¤„ç†ç£ç›˜IOçš„çº¿ç¨‹æ•°é‡</span><br><span class="hljs-attr">num.io.threads</span>=<span class="hljs-number">8</span><br><br><span class="hljs-comment">#å‘é€å¥—æ¥å­—çš„ç¼“å†²åŒºå¤§å°</span><br><span class="hljs-attr">socket.send.buffer.bytes</span>=<span class="hljs-number">102400</span><br><br><span class="hljs-comment">#æ¥å—å¥—æ¥å­—çš„ç¼“å†²åŒºå¤§å°</span><br><span class="hljs-attr">socket.receive.buffer.bytes</span>=<span class="hljs-number">102400</span><br><br><span class="hljs-comment">#è¯·æ±‚å¥—æ¥å­—çš„ç¼“å†²åŒºå¤§å°</span><br><span class="hljs-attr">socket.request.max.bytes</span>=<span class="hljs-number">104857600</span><br><br><span class="hljs-comment">#kafkaæ¶ˆæ¯å­˜æ”¾çš„è·¯å¾„</span><br><span class="hljs-attr">log.dirs</span>=/home/servers-kafka/logs/kafka<br><br><span class="hljs-comment">#topicåœ¨å½“å‰brokerä¸Šçš„åˆ†ç‰‡ä¸ªæ•°</span><br><span class="hljs-attr">num.partitions</span>=<span class="hljs-number">2</span><br><br><span class="hljs-comment">#ç”¨æ¥æ¢å¤å’Œæ¸…ç†dataä¸‹æ•°æ®çš„çº¿ç¨‹æ•°é‡</span><br><span class="hljs-attr">num.recovery.threads.per.data.dir</span>=<span class="hljs-number">1</span><br><br><span class="hljs-comment">#segmentæ–‡ä»¶ä¿ç•™çš„æœ€é•¿æ—¶é—´ï¼Œè¶…æ—¶å°†è¢«åˆ é™¤</span><br><span class="hljs-attr">log.retention.hours</span>=<span class="hljs-number">168</span><br><br><span class="hljs-comment">#æ»šåŠ¨ç”Ÿæˆæ–°çš„segmentæ–‡ä»¶çš„æœ€å¤§æ—¶é—´</span><br><span class="hljs-attr">log.roll.hours</span>=<span class="hljs-number">168</span><br><br><span class="hljs-comment">#æ—¥å¿—æ–‡ä»¶ä¸­æ¯ä¸ªsegmentçš„å¤§å°ï¼Œé»˜è®¤ä¸º1G</span><br><span class="hljs-attr">log.segment.bytes</span>=<span class="hljs-number">1073741824</span><br><br><span class="hljs-comment">#å‘¨æœŸæ€§æ£€æŸ¥æ–‡ä»¶å¤§å°çš„æ—¶é—´</span><br><span class="hljs-attr">log.retention.check.interval.ms</span>=<span class="hljs-number">300000</span><br><br><span class="hljs-comment">#æ—¥å¿—æ¸…ç†æ˜¯å¦æ‰“å¼€</span><br><span class="hljs-attr">log.cleaner.enable</span>=<span class="hljs-literal">true</span><br><br><span class="hljs-comment">#brokeréœ€è¦ä½¿ç”¨zookeeperä¿å­˜metaæ•°æ®</span><br><span class="hljs-attr">zookeeper.connect</span>=<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span>,<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3001</span>,<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3002</span><br><br><span class="hljs-comment">#zookeeperé“¾æ¥è¶…æ—¶æ—¶é—´</span><br><span class="hljs-attr">zookeeper.connection.timeout.ms</span>=<span class="hljs-number">6000</span><br><br><span class="hljs-comment">#partion bufferä¸­ï¼Œæ¶ˆæ¯çš„æ¡æ•°è¾¾åˆ°é˜ˆå€¼ï¼Œå°†è§¦å‘flushåˆ°ç£ç›˜</span><br><span class="hljs-attr">log.flush.interval.messages</span>=<span class="hljs-number">10000</span><br><br> <br><br><span class="hljs-comment">#æ¶ˆæ¯bufferçš„æ—¶é—´ï¼Œè¾¾åˆ°é˜ˆå€¼ï¼Œå°†è§¦å‘flushåˆ°ç£ç›˜</span><br><span class="hljs-attr">log.flush.interval.ms</span>=<span class="hljs-number">3000</span><br><br><span class="hljs-comment">#åˆ é™¤topicéœ€è¦server.propertiesä¸­è®¾ç½®delete.topic.enable=trueå¦åˆ™åªæ˜¯æ ‡è®°åˆ é™¤</span><br><span class="hljs-attr">delete.topic.enable</span>=<span class="hljs-literal">true</span><br><br><span class="hljs-comment">#æ­¤å¤„çš„host.nameä¸ºæœ¬æœºIP(é‡è¦),å¦‚æœä¸æ”¹,åˆ™å®¢æˆ·ç«¯ä¼šæŠ›å‡º:Producerconnection to localhost:9092 unsuccessful é”™è¯¯!</span><br><span class="hljs-attr">host.name</span>=hadoop02<br></code></pre></td></tr></table></figure>
<p><strong>ä¿®æ”¹producer.properties</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥æµ…å‡ºSwarm</title>
    <url>/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/introduction_swarm.html</url>
    <content><![CDATA[<p>åŸæ–‡ï¼š<a href="http://blog.daocloud.io/swarm_analysis_part1/">http://blog.daocloud.io/swarm_analysis_part1/</a></p>
<hr>
<h1 id="1-Swarmç®€ä»‹"><a class="header-anchor" href="#1-Swarmç®€ä»‹"></a>1.Swarmç®€ä»‹</h1>
<p>Dockerè‡ªè¯ç”Ÿä»¥æ¥ï¼Œå…¶å®¹å™¨ç‰¹æ€§ä»¥åŠé•œåƒç‰¹æ€§ç»™DevOpsçˆ±å¥½è€…å¸¦æ¥äº†è¯¸å¤šæ–¹ä¾¿ã€‚ç„¶è€Œåœ¨å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼ŒDockeråªèƒ½åœ¨å•hostä¸Šè¿è¡Œï¼Œå…¶è·¨hostçš„éƒ¨ç½²ã€è¿è¡Œä¸ç®¡ç†èƒ½åŠ›é¢‡å—å¤–ç•Œè¯Ÿç—…ã€‚è·¨hostèƒ½åŠ›çš„è–„å¼±ï¼Œç›´æ¥å¯¼è‡´Dockerå®¹å™¨ä¸hostçš„ç´§è€¦åˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒDockerå®¹å™¨çš„çµæ´»æ€§å¾ˆéš¾ä»¤äººæ»¡æ„ï¼Œå®¹å™¨çš„è¿ç§»ã€åˆ†ç»„ç­‰éƒ½æˆä¸ºå¾ˆéš¾å®ç°çš„åŠŸèƒ½ç‚¹ã€‚</p>
<p>Swarmæ˜¯Dockerå…¬å¸åœ¨2014å¹´12æœˆåˆæ–°å‘å¸ƒçš„å®¹å™¨ç®¡ç†å·¥å…·ã€‚å’ŒSwarmä¸€èµ·å‘å¸ƒçš„Dockerç®¡ç†å·¥å…·è¿˜æœ‰Machineä»¥åŠComposeã€‚</p>
<p>Swarmæ˜¯ä¸€å¥—è¾ƒä¸ºç®€å•çš„å·¥å…·ï¼Œç”¨ä»¥ç®¡ç†Dockeré›†ç¾¤ï¼Œä½¿å¾—Dockeré›†ç¾¤æš´éœ²ç»™ç”¨æˆ·æ—¶ç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿçš„æ•´ä½“ã€‚Swarmä½¿ç”¨æ ‡å‡†çš„Docker APIæ¥å£ä½œä¸ºå…¶å‰ç«¯è®¿é—®å…¥å£ï¼Œæ¢è¨€ä¹‹ï¼Œå„ç§å½¢å¼çš„Docker Client(dockerclient in go, docker_py, dockerç­‰)å‡å¯ä»¥ç›´æ¥ä¸Swarmé€šä¿¡ã€‚Swarmå‡ ä¹å…¨éƒ¨ç”¨Goè¯­è¨€æ¥å®Œæˆå¼€å‘ï¼Œå¹¶ä¸”è¿˜å¤„äºä¸€ä¸ªAlphaç‰ˆæœ¬ï¼Œç›®å‰åœ¨githubä¸Šå‘å¸ƒçš„ç‰ˆæœ¬ä»…æœ‰v0.1.0-rc1ã€‚ç„¶è€ŒSwarmçš„å‘å±•ååˆ†å¿«é€Ÿï¼ŒåŠŸèƒ½å’Œç‰¹æ€§çš„å˜æ›´è¿­ä»£è¿˜éå¸¸é¢‘ç¹ã€‚å› æ­¤ï¼Œå¯ä»¥è¯´Swarmè¿˜ä¸æ¨èè¢«ç”¨äºç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½†å¯ä»¥è‚¯å®šçš„æ˜¯Swarmæ˜¯ä¸€é¡¹å¾ˆæœ‰å‰é€”çš„æŠ€æœ¯ã€‚<br>
Swarmçš„è®¾è®¡å’Œå…¶ä»–Dockeré¡¹ç›®ä¸€æ ·ï¼Œéµå¾ªâ€œbatteries included but removableâ€åŸåˆ™ã€‚ç¬”è€…å¯¹è¯¥åŸåˆ™çš„ç†è§£æ˜¯ï¼šbatteries includedä»£è¡¨è®¾è®¡Swarmæ—¶ï¼Œä¸ºäº†å®Œå…¨ä½“ç°åˆ†å¸ƒå¼å®¹å™¨é›†ç¾¤éƒ¨ç½²ã€è¿è¡Œä¸ç®¡ç†åŠŸèƒ½çš„å®Œæ•´æ€§ï¼ŒSwarmå’ŒDockerååŒå·¥ä½œï¼ŒSwarmå†…éƒ¨åŒ…å«äº†ä¸€ä¸ªè¾ƒä¸ºç®€æ˜“çš„è°ƒåº¦æ¨¡å—ï¼Œä»¥è¾¾åˆ°å¯¹Dockeré›†ç¾¤è°ƒåº¦ç®¡ç†çš„æ•ˆæœï¼›â€œbut removableâ€æ„å‘³ç€Swarmä¸Dockerå¹¶éç´§è€¦åˆï¼ŒåŒæ—¶Swarmä¸­çš„è°ƒåº¦æ¨¡å—åŒæ ·å¯ä»¥å®šåˆ¶åŒ–ï¼Œç”¨æˆ·å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ï¼Œå°†å…¶æ›¿æ¢ä¸ºæ›´ä¸ºå¼ºå¤§çš„è°ƒåº¦æ¨¡å—ï¼Œå¦‚Mesosç­‰ã€‚å¦å¤–ï¼Œè¿™å¥—ç®¡ç†å¼•æ“å¹¶æœªä¾µå…¥Dockerçš„ä½¿ç”¨ï¼Œè¿™å¥—æœºåˆ¶ä¹Ÿä¸ºå…¶ä»–å®¹å™¨æŠ€æœ¯çš„é›†ç¾¤éƒ¨ç½²ã€è¿è¡Œä¸ç®¡ç†æ–¹å¼æä¾›äº†æ€è·¯ã€‚</p>
<p>æœ¬æ–‡å°†ä»ä»¥ä¸‹ä¸¤ç‚¹åˆ†æSwarmï¼š</p>
<ul>
<li>Swarmæ¶æ„</li>
<li>Swarmå‘½ä»¤</li>
</ul>
<h1 id="2-Swarmæ¶æ„"><a class="header-anchor" href="#2-Swarmæ¶æ„"></a>2.Swarmæ¶æ„</h1>
<p>Swarmä½œä¸ºä¸€ä¸ªç®¡ç†Dockeré›†ç¾¤çš„å·¥å…·ï¼Œé¦–å…ˆéœ€è¦å°†å…¶éƒ¨ç½²èµ·æ¥ï¼Œå¯ä»¥å•ç‹¬å°†Swarméƒ¨ç½²äºä¸€ä¸ªèŠ‚ç‚¹ã€‚å¦å¤–ï¼Œè‡ªç„¶éœ€è¦ä¸€ä¸ªDockeré›†ç¾¤ï¼Œé›†ç¾¤ä¸Šæ¯ä¸€ä¸ªèŠ‚ç‚¹å‡å®‰è£…æœ‰Dockerã€‚å…·ä½“çš„Swarmæ¶æ„å›¾å¯ä»¥å‚ç…§ä¸‹å›¾ï¼š</p>
<p><img src="http://blog.daocloud.io/wp-content/uploads/2015/01/swarmarchitecture.jpg" alt="17"></p>
<p></p>
<p>å›¾2.1 Swarmæ¶æ„å›¾</p>
<p>Swarmæ¶æ„ä¸­æœ€ä¸»è¦çš„å¤„ç†éƒ¨åˆ†è‡ªç„¶æ˜¯SwarmèŠ‚ç‚¹ï¼ŒSwarmç®¡ç†çš„å¯¹è±¡è‡ªç„¶æ˜¯Docker Clusterï¼ŒDocker Clusterç”±å¤šä¸ªDocker Nodeç»„æˆï¼Œè€Œè´Ÿè´£ç»™Swarmå‘é€è¯·æ±‚çš„æ˜¯Docker Clientã€‚</p>
<h1 id="3-Swarmå‘½ä»¤"><a class="header-anchor" href="#3-Swarmå‘½ä»¤"></a>3.Swarmå‘½ä»¤</h1>
<p>Swarmæ¶æ„å›¾å¯ä»¥è®©å¤§å®¶å¯¹Swarmæœ‰ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†ï¼Œæ¯”å¦‚Swarmçš„å…·ä½“å·¥ä½œæµç¨‹ï¼šDocker Clientå‘é€è¯·æ±‚ç»™Swarmï¼›Swarmå¤„ç†è¯·æ±‚å¹¶å‘é€è‡³ç›¸åº”çš„Docker Nodeï¼›Docker Nodeæ‰§è¡Œç›¸åº”çš„æ“ä½œå¹¶è¿”å›å“åº”ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒSwarmçš„å·¥ä½œåŸç†ä¾ç„¶è¿˜ä¸å¤Ÿæ˜äº†ã€‚</p>
<p>æ·±å…¥ç†è§£Swarmçš„å·¥ä½œåŸç†ï¼Œå¯ä»¥å…ˆä»Swarmæä¾›çš„å‘½ä»¤å…¥æ‰‹ã€‚Swarmæ”¯æŒçš„å‘½ä»¤ä¸»è¦æœ‰4ä¸ªï¼šswarm createã€swarm manageã€swarm joinã€swarm listã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªswarm helpå‘½ä»¤ï¼Œè¯¥å‘½ä»¤ç”¨äºæŒ‡å¯¼å¤§å®¶å¦‚ä½•æ­£ç¡®ä½¿ç”¨swarmå‘½ä»¤ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p>
<h2 id="3-1-swarm-create"><a class="header-anchor" href="#3-1-swarm-create"></a>3.1 swarm create</h2>
<p>Swarmä¸­swarm createå‘½ä»¤ç”¨äºåˆ›å»ºä¸€ä¸ªé›†ç¾¤æ ‡å¿—ï¼Œç”¨äºSwarmç®¡ç†Dockeré›†ç¾¤æ—¶ï¼ŒDocker Nodeçš„èŠ‚ç‚¹å‘ç°åŠŸèƒ½ã€‚</p>
<p>å‘èµ·è¯¥å‘½ä»¤ä¹‹åï¼ŒSwarmä¼šå‰å¾€Docker Hubä¸Šå†…å»ºçš„å‘ç°æœåŠ¡ä¸­è·å–ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„tokenï¼Œç”¨ä»¥å”¯ä¸€çš„æ ‡è¯†Swarmç®¡ç†çš„Dockeré›†ç¾¤ã€‚</p>
<p>æ³¨ï¼šSwarmçš„è¿è¡Œéœ€è¦ä½¿ç”¨æœåŠ¡å‘ç°ï¼Œç›®å‰è¯¥æœåŠ¡å†…å»ºä¸Docker Hubï¼Œè¯¥æœåŠ¡å‘ç°æœºåˆ¶ç›®å‰è¿˜åœ¨alphaç‰ˆæœ¬ï¼Œç«™ç‚¹ä¸ºï¼š<a href="http://discovery-stage.hub/docker.com">http://discovery-stage.hub/docker.com</a> ã€‚</p>
<h2 id="3-2-swarm-manage"><a class="header-anchor" href="#3-2-swarm-manage"></a>3.2 swarm manage</h2>
<p>Swarmä¸­swarm manageæ˜¯æœ€ä¸ºé‡è¦çš„ç®¡ç†å‘½ä»¤ã€‚ä¸€æ—¦swarm manageå‘½ä»¤åœ¨SwarmèŠ‚ç‚¹ä¸Šè¢«è§¦å‘ï¼Œåˆ™è¯´æ˜ç”¨æˆ·éœ€è¦swarmå¼€å§‹ç®¡ç†Dockeré›†ç¾¤ã€‚ä»è¿è¡Œæµç¨‹çš„è§’åº¦æ¥è®²ï¼Œswarmç»å†çš„é˜¶æ®µä¸»è¦æœ‰ä¸¤ç‚¹ï¼šå¯åŠ¨swarmã€æ¥æ”¶å¹¶å¤„ç†Dockeré›†ç¾¤ç®¡ç†è¯·æ±‚ã€‚</p>
<p>Swarmå¯åŠ¨çš„è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å‘ç°Dockeré›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ï¼Œæ”¶é›†èŠ‚ç‚¹çŠ¶æ€ã€è§’è‰²ä¿¡æ¯ï¼Œå¹¶ç›‘è§†èŠ‚ç‚¹çŠ¶æ€çš„å˜åŒ–ï¼›</li>
<li>åˆå§‹åŒ–å†…éƒ¨è°ƒåº¦ï¼ˆschedulerï¼‰æ¨¡å—ï¼›</li>
<li>åˆ›å»ºå¹¶å¯åŠ¨APIç›‘å¬æœåŠ¡æ¨¡å—ï¼›</li>
</ol>
<p>ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼ŒSwarmå‘ç°Dockeré›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚å‘ç°ï¼ˆdiscoveryï¼‰æ˜¯Swarmä¸­ç”¨äºç»´æŠ¤Dockeré›†ç¾¤çŠ¶æ€çš„æœºåˆ¶ã€‚æ—¢ç„¶æ¶‰åŠåˆ°å‘ç°ï¼ˆdiscoveryï¼‰ï¼Œé‚£åœ¨è¿™ä¹‹å‰å¿…é¡»å…ˆæœ‰æ³¨å†Œï¼ˆregisterï¼‰ã€‚Swarmä¸­æœ‰ä¸“é—¨è´Ÿè´£å‘ç°ï¼ˆdiscoveryï¼‰çš„æ¨¡å—ï¼Œè€Œå…³äºæ³¨å†Œï¼ˆregisterï¼‰éƒ¨åˆ†ï¼Œä¸åŒçš„discoveryæ¨¡å¼ä¸‹ï¼Œæ³¨å†Œï¼ˆregisterï¼‰ä¹Ÿä¼šæœ‰ä¸åŒçš„å½¢å¼ã€‚</p>
<p>ç›®å‰ï¼ŒSwarmä¸­æä¾›äº†5ç§ä¸åŒçš„å‘ç°ï¼ˆdiscoveryï¼‰æœºåˆ¶ï¼šNode Discoveryã€File Discoveryã€Consul Discoveryã€EtcD Discoveryå’ŒZookeeper Discoveryã€‚</p>
<p>ç¬¬äºŒä¸ªæ­¥éª¤ï¼ŒSwarmå†…éƒ¨çš„è°ƒåº¦ï¼ˆschedulerï¼‰æ¨¡å—è¢«åˆå§‹åŒ–ã€‚swarmé€šè¿‡å‘ç°æœºåˆ¶å‘ç°æ‰€æœ‰æ³¨å†Œçš„Docker Nodeï¼Œå¹¶æ”¶é›†åˆ°æ‰€æœ‰Docker Nodeçš„çŠ¶æ€ä»¥åŠå…·ä½“ä¿¡æ¯ã€‚æ­¤åï¼Œä¸€æ—¦Swarmæ¥æ”¶åˆ°å…·ä½“çš„Dockerç®¡ç†è¯·æ±‚ï¼ŒSwarméœ€è¦å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶é€šè¿‡æ‰€æœ‰Docker Nodeçš„çŠ¶æ€ä»¥åŠå…·ä½“ä¿¡æ¯ï¼Œæ¥ç­›é€‰ï¼ˆfilterï¼‰å†³ç­–åˆ°åº•å“ªäº›Docker Nodeæ»¡è¶³è¦æ±‚ï¼Œå¹¶é€šè¿‡ä¸€å®šçš„ç­–ç•¥ï¼ˆstrategyï¼‰å°†è¯·æ±‚è½¬å‘è‡³å…·ä½“çš„ä¸€ä¸ªDocker Nodeã€‚</p>
<p>ç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼ŒSwarmåˆ›å»ºå¹¶åˆå§‹åŒ–APIç›‘å¬æœåŠ¡æ¨¡å—ã€‚ä»åŠŸèƒ½çš„è§’åº¦æ¥è®²ï¼Œå¯ä»¥å°†è¯¥æ¨¡å—æŠ½è±¡ä¸ºSwarm Serverã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼šè™½ç„¶Swarm Serverå®Œå…¨å…¼å®¹Dockerçš„APIï¼Œä½†æ˜¯æœ‰ä¸å°‘Dockerçš„å‘½ä»¤ç›®å‰æ˜¯ä¸æ”¯æŒçš„ï¼Œæ¯•ç«Ÿç®¡ç†Dockeré›†ç¾¤ä¸ç®¡ç†å•ç‹¬çš„Dockerä¼šæœ‰ä¸€äº›åŒºåˆ«ã€‚å½“Swarm Serverè¢«åˆå§‹åŒ–å¹¶å®Œæˆç›‘å¬ä¹‹åï¼Œç”¨æˆ·å³å¯ä»¥é€šè¿‡Docker Clientå‘Swarmå‘é€Dockeré›†ç¾¤çš„ç®¡ç†è¯·æ±‚ã€‚</p>
<p>Swarmçš„swarm manageæ¥æ”¶å¹¶å¤„ç†Dockeré›†ç¾¤çš„ç®¡ç†è¯·æ±‚ï¼Œå³æ˜¯Swarmå†…éƒ¨å¤šä¸ªæ¨¡å—ååŒåˆä½œçš„ç»“æœã€‚è¯·æ±‚å…¥å£ä¸ºSwarm Serverï¼Œå¤„ç†å¼•æ“ä¸ºSchedulerï¼ŒèŠ‚ç‚¹ä¿¡æ¯ä¾é Disocoveryã€‚</p>
<h2 id="3-3-swarm-join"><a class="header-anchor" href="#3-3-swarm-join"></a>3.3 swarm join</h2>
<p>Swarmçš„swarm joinå‘½ä»¤ç”¨äºå°†Docker Nodeæ·»åŠ è‡³Swarmç®¡ç†çš„Dockeré›†ç¾¤ä¸­ã€‚ä»è¿™ç‚¹ä¹Ÿå¯ä»¥çœ‹å‡ºswarm joinå‘½ä»¤çš„æ‰§è¡Œä½äºDocker Nodeï¼Œå› æ­¤åœ¨Docker Nodeä¸Šè¿è¡Œè¯¥å‘½ä»¤ï¼Œé¦–å…ˆéœ€è¦åœ¨Docker Nodeä¸Šå®‰è£…Swarmï¼Œç”±äºè¯¥Swarmåªä¼šæ‰§è¡Œswarm joinå‘½ä»¤ï¼Œæ•…å¯ä»¥å°†å…¶å½“æˆDocker Nodeä¸Šç”¨äºæ³¨å†Œçš„agentæ¨¡å—ã€‚</p>
<p>åŠŸèƒ½è€Œè¨€ï¼Œswarm joinå¯ä»¥è®¤ä¸ºæ˜¯å®ŒæˆDocker Nodeåœ¨SwarmèŠ‚ç‚¹å¤„çš„æ³¨å†Œï¼ˆregisterï¼‰å·¥ä½œï¼Œä»¥ä¾¿Swarmåœ¨æ‰§è¡Œswarm manageæ—¶å¯ä»¥å‘ç°è¯¥Docker Nodeã€‚ç„¶è€Œï¼Œä¸Šæ–‡æåŠçš„5ç§discoveryæ¨¡å¼ä¸­ï¼Œå¹¶éæ¯ç§æ¨¡å¼éƒ½æ”¯æŒswarm joinå‘½ä»¤ã€‚ä¸æ”¯æŒçš„discoveryçš„æ¨¡å¼æœ‰Node Discoveryä¸File Discoveryã€‚</p>
<p>Docker Nodeä¸Šswarm joinæ‰§è¡Œä¹‹åï¼Œæ ‡å¿—ç€Docker Nodeå‘Swarmæ³¨å†Œï¼Œè¯·æ±‚åŠ å…¥Swarmç®¡ç†çš„Dockeré›†ç¾¤ä¸­ã€‚Swarmé€šè¿‡æ³¨å†Œä¿¡æ¯ï¼Œå‘ç°Docker Nodeï¼Œå¹¶è·å–Docker Nodeçš„çŠ¶æ€ä»¥åŠå…·ä½“ä¿¡æ¯ï¼Œä»¥ä¾¿å¤„ç†Dockerè¯·æ±‚æ—¶ä½œä¸ºè°ƒåº¦ä¾æ®ã€‚</p>
<h2 id="3-4-swarm-list"><a class="header-anchor" href="#3-4-swarm-list"></a>3.4 swarm list</h2>
<p>Swarmä¸­çš„swarm listå‘½ä»¤ç”¨ä»¥åˆ—ä¸¾Dockeré›†ç¾¤ä¸­çš„Docker Nodeã€‚</p>
<p>Docker Nodeçš„ä¿¡æ¯å‡æ¥æºäºSwarmèŠ‚ç‚¹ä¸Šæ³¨å†Œçš„Docker Nodeã€‚è€Œä¸€ä¸ªDocker Nodeåœ¨SwarmèŠ‚ç‚¹ä¸Šæ³¨å†Œï¼Œä»…ä»…æ˜¯æ³¨å†Œäº†Docker Nodeçš„IPåœ°å€ä»¥åŠDockerç›‘å¬çš„ç«¯å£å·ã€‚</p>
<p>ä½¿ç”¨swarm listå‘½ä»¤æ—¶ï¼Œéœ€è¦æŒ‡å®šdiscoveryçš„ç±»å‹ï¼Œç±»å‹åŒ…æ‹¬ï¼štokenã€etcdã€fileã€zkä»¥åŠ<ip>ã€‚è€Œswarm listå¹¶æœªç½—åˆ—Dockeré›†ç¾¤çš„åŠ¨æ€ä¿¡æ¯ï¼Œæ¯”å¦‚Docker NodeçœŸå®çš„è¿è¡ŒçŠ¶æ€ï¼Œæˆ–è€…Docker Nodeåœ¨Dockeré›†ç¾¤ä¸­æ‰®æ¼”çš„è§’è‰²ä¿¡æ¯ã€‚</p>
<h1 id="4-æ€»ç»“"><a class="header-anchor" href="#4-æ€»ç»“"></a>4.æ€»ç»“</h1>
<p>Swarmçš„æ¶æ„ä»¥åŠå‘½ä»¤å¹¶æ²¡æœ‰å¾ˆå¤æ‚ï¼ŒåŒæ—¶ä¹Ÿä¸ºå¸Œæœ›ç®¡ç†Dockeré›†ç¾¤çš„Dockerçˆ±å¥½è€…é™ä½äº†å­¦ä¹ å’Œä½¿ç”¨é—¨æ§›ã€‚</p>
<p>ä¿—è¯è¯´å¾—å¥½ï¼Œæ²¡æœ‰ä¸€ç§ä¸€åŠ³æ°¸é€¸çš„å·¥å…·ï¼Œæœ‰æ•ˆçš„ç®¡ç†Dockeré›†ç¾¤åŒæ ·ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç¼ºä¹åœºæ™¯æ¥è°ˆè®ºSwarmçš„ä»·å€¼ï¼Œæ„ä¹‰å¹¶ä¸ä¼šå¾ˆå¤§ã€‚ç›¸åï¼Œæ¢ç´¢å’ŒæŒ–æ˜Swarmçš„ç‰¹ç‚¹ä¸åŠŸèƒ½ï¼Œå¹¶ä¸ºDockeré›†ç¾¤çš„ç®¡ç†æä¾›ä¸€ç§å¯é€‰çš„æ–¹æ¡ˆï¼Œæ˜¯Dockerçˆ±å¥½è€…æ›´åº”è¯¥å‚ä¸çš„äº‹ã€‚</p>
<p>æœ¬æ–‡åˆæ­¥ä»‹ç»Swarmï¼Œå¹¶æ¶‰åŠæ¶æ„ä¸å‘½ä»¤ï¼Œä¸‹æœŸå°†å¸¦æ¥Swarmçš„å…·ä½“ä½¿ç”¨ï¼Œä»¥åŠSwarmçš„æ¶æ„å‰–æã€‚</p>
<h1 id="5-ä½œè€…ä»‹ç»"><a class="header-anchor" href="#5-ä½œè€…ä»‹ç»"></a>5.ä½œè€…ä»‹ç»</h1>
<p>å­™å®äº®ï¼Œ<strong>DaoCloud</strong>åˆåˆ›å›¢é˜Ÿæˆå‘˜ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæµ™æ±Ÿå¤§å­¦VLISå®éªŒå®¤åº”å±Šç ”ç©¶ç”Ÿã€‚è¯»ç ”æœŸé—´æ´»è·ƒåœ¨PaaSå’ŒDockerå¼€æºç¤¾åŒºï¼Œå¯¹Cloud Foundryæœ‰æ·±å…¥ç ”ç©¶å’Œä¸°å¯Œå®è·µï¼Œæ“…é•¿åº•å±‚å¹³å°ä»£ç åˆ†æï¼Œå¯¹åˆ†å¸ƒå¼å¹³å°çš„æ¶æ„æœ‰ä¸€å®šç»éªŒï¼Œæ’°å†™äº†å¤§é‡æœ‰æ·±åº¦çš„æŠ€æœ¯åšå®¢ã€‚2014å¹´æœ«ä»¥åˆä¼™äººèº«ä»½åŠ å…¥DaoCloudå›¢é˜Ÿï¼Œè‡´åŠ›äºä¼ æ’­ä»¥Dockerä¸ºä¸»çš„å®¹å™¨çš„æŠ€æœ¯ï¼Œæ¨åŠ¨äº’è”ç½‘åº”ç”¨çš„å®¹å™¨åŒ–æ­¥ä¼ã€‚é‚®ç®±ï¼šallen.sun@daocloud.io</p>
<h1 id="6-å‚è€ƒæ–‡çŒ®"><a class="header-anchor" href="#6-å‚è€ƒæ–‡çŒ®"></a>6.å‚è€ƒæ–‡çŒ®</h1>
<p>1.<a href="http://github.com/docker/swarm">http://github.com/docker/swarm</a><br>
2.<a href="http://technolo-g.com/intro-to-docker-swarm-pt1-overview/">http://technolo-g.com/intro-to-docker-swarm-pt1-overview/</a><br>
3.<a href="http://technolo-g.com/intro-to-docker-swarm-pt2-config-options-requirements/">http://technolo-g.com/intro-to-docker-swarm-pt2-config-options-requirements/</a></p>
]]></content>
      <categories>
        <category>ä»–å±±ä¹‹çŸ³</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>swarm</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcaté›†ç¾¤ä½¿ç”¨rediså®ç°sessionå…±äº«</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/tomcat_redis_session_share.html</url>
    <content><![CDATA[<h1 id="å‡†å¤‡"><a class="header-anchor" href="#å‡†å¤‡"></a>å‡†å¤‡</h1>
<p>æœ¬æ–‡å¯¹Redisåšsessionå…±äº«çš„æ–¹æ¡ˆè¿›è¡ŒéªŒè¯ã€‚ä½¿ç”¨ä¸€ä¸ªApacheæœåŠ¡å™¨ä¸ä¸¤ä¸ªtomcatæœåŠ¡å™¨æ­å»ºè´Ÿè½½å‡è¡¡ã€‚</p>
<h2 id="æ‰“åŒ…Tomcat-Redis-Session"><a class="header-anchor" href="#æ‰“åŒ…Tomcat-Redis-Session"></a>æ‰“åŒ…Tomcat-Redis-Session</h2>
<ol>
<li>
<p>ä¸‹è½½æºç  <a href="https://github.com/jcoleman/tomcat-redis-session-manager">https://github.com/jcoleman/tomcat-redis-session-manager</a></p>
</li>
<li>
<p>æ–°å»ºmavenå·¥ç¨‹ã€‚</p>
</li>
<li>
<p>ä¿®æ”¹pom.xmlæ–‡ä»¶ã€‚</p>
<p><strong>æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-catalina<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.0.27<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨JDK1.7</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- compileræ’ä»¶, è®¾å®šJDKç‰ˆæœ¬ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">showWarnings</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">showWarnings</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p>å¯¼å…¥æºç , æ‰“åŒ…å¾—åˆ°<code>tomcat-redis-session.jar</code></p>
<p>å°†ä¸Šé¢ä¸‹è½½ä¸‹æ¥çš„æºç åŒ…ä¸­çš„srcï¼Œæ‹·è´åˆ°å·¥ç¨‹ä¸­çš„ç›¸åº”ä½ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">mvn clean package -Dmaven.test.skip=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="è·å–å…¶å®ƒä¾èµ–åŒ…"><a class="header-anchor" href="#è·å–å…¶å®ƒä¾èµ–åŒ…"></a>è·å–å…¶å®ƒä¾èµ–åŒ…</h2>
<p>ä¸‹è½½<code>jedis-2.7.3.jar</code>Â å’Œ<code>commons-pool2-2.4.1.jar</code></p>
<h1 id="é…ç½®Tomcat"><a class="header-anchor" href="#é…ç½®Tomcat"></a>é…ç½®Tomcat</h1>
<p>å‡†å¤‡nå°tomcatã€‚</p>
<h2 id="æ·»åŠ jaråŒ…"><a class="header-anchor" href="#æ·»åŠ jaråŒ…"></a>æ·»åŠ jaråŒ…</h2>
<p>å°†ä¸Šé¢å¾—åˆ°çš„<code>tomcat-redis-session.jar</code>ï¼Œ <code>jedis-2.7.3.jar</code>å’Œ<code>commons-pool2-2.4.1.jar</code>æ”¾å…¥åˆ°tomcatç›®å½•ä¸‹çš„<code>lib/</code>ç›®å½•ä¸‹ã€‚</p>
<h2 id="é…ç½®ç«¯å£"><a class="header-anchor" href="#é…ç½®ç«¯å£"></a>é…ç½®ç«¯å£</h2>
<p>å¦‚æœnå°tomcatéƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œä¸ºé¿å…ç«¯å£å ç”¨ï¼Œå°±è¦ä¿®æ”¹<code>conf/server.xml</code>ä¸­çš„ç«¯å£ï¼šSHUTDOWNç«¯å£ï¼ŒHTTPç«¯å£ï¼ŒAJPç«¯å£ã€‚</p>
<p>è¿™é‡Œçš„ä¸¤å°tomcatçš„ç«¯å£å¦‚ä¸‹ï¼š</p>
<ul>
<li>HTTP:  8081 â€“ AJP: 8009</li>
<li>HTTP:  8080 â€“ AJP: 8019</li>
</ul>
<h2 id="é…ç½®context-xmlæ–‡ä»¶"><a class="header-anchor" href="#é…ç½®context-xmlæ–‡ä»¶"></a>é…ç½®context.xmlæ–‡ä»¶</h2>
<p>ä¿®æ”¹æ¯å°tomcatçš„<code>conf/context.xml</code>æ–‡ä»¶ï¼Œåœ¨<code>Context</code>èŠ‚ç‚¹ä¸­æŒ‰å®é™…æƒ…å†µæ·»åŠ å¦‚ä¸‹é…ç½®ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Valve</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve&quot;</span> /&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">Manager</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;com.orangefunction.tomcat.redissessions.RedisSessionManager&quot;</span>  </span><br><span class="hljs-tag">     <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;app.coracle.com&quot;</span>   </span><br><span class="hljs-tag">     <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;6379&quot;</span>   </span><br><span class="hljs-tag">     <span class="hljs-attr">database</span>=<span class="hljs-string">&quot;0&quot;</span>   </span><br><span class="hljs-tag">     <span class="hljs-attr">maxInactiveInterval</span>=<span class="hljs-string">&quot;60&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<h1 id="é…ç½®Apache"><a class="header-anchor" href="#é…ç½®Apache"></a>é…ç½®Apache</h1>
<p>è¿™é‡Œä½¿ç”¨çš„Apache2.4.xã€‚</p>
<h2 id="é…ç½®httpd-conf"><a class="header-anchor" href="#é…ç½®httpd-conf"></a>é…ç½®httpd.conf</h2>
<p>ä¿®æ”¹Apacheç›®å½•ä¸‹çš„<code>conf/httpd.conf</code>,</p>
<ol>
<li>
<p>æ‰“å¼€proxy, banlancerç›¸å…³çš„æ¨¡å—</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">LoadModule proxy_module modules/mod_proxy.so<br>LoadModule proxy_ajp_module modules/mod_proxy_ajp.so<br>LoadModule proxy_balancer_module modules/mod_proxy_balancer.so<br>LoadModule proxy_connect_module modules/mod_proxy_connect.so<br>LoadModule proxy_express_module modules/mod_proxy_express.so<br>LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so<br>LoadModule proxy_ftp_module modules/mod_proxy_ftp.so<br>LoadModule proxy_html_module modules/mod_proxy_html.so<br>LoadModule proxy_http_module modules/mod_proxy_http.so<br>LoadModule proxy_http2_module modules/mod_proxy_http2.so<br>LoadModule proxy_scgi_module modules/mod_proxy_scgi.so<br>LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so<br><br>LoadModule lbmethod_byrequests_module modules/mod_lbmethod_byrequests.so<br><br>LoadModule speling_module modules/mod_speling.so<br>LoadModule slotmem_shm_module modules/mod_slotmem_shm.so<br>LoadModule xml2enc_module modules/mod_xml2enc.so<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>é…ç½®VirtualHost</p>
<p>åœ¨<code>httpd.conf</code>æ–‡ä»¶ä¸­å–æ¶ˆä¸‹è¡Œçš„æ³¨é‡Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Include conf/extra/httpd-vhosts.conf<br></code></pre></td></tr></table></figure>
<p>ä¿®æ”¹<code>conf/extra/httpd-vhosts.conf</code></p>
<p>æ ¹æ®å®é™…æƒ…å†µæ·»åŠ ä¸‹é¢çš„VirtualHost</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#è™šæ‹Ÿæœºé…ç½®,è´Ÿè½½å‡è¡¡é…ç½®  æ³¨æ„ç©ºæ ¼</span><br>&lt;VirtualHost *:80&gt;<br>    DocumentRoot <span class="hljs-string">&quot;d:/Apache24/htdocs&quot;</span><br>    ProxyPass / balancer://cluster/ stickysession=JSESSIONID|jsessionid nofailover=On<br>    ProxyPassReverse / balancer://cluster/<br>    ErrorLog <span class="hljs-string">&quot;logs/error-tung.log&quot;</span><br>    CustomLog <span class="hljs-string">&quot;logs/access-tung.log&quot;</span> common<br>&lt;/VirtualHost&gt; <br><br><span class="hljs-comment">#The ProxyRequests directive should usually be set off when using ProxyPass.</span><br>ProxyRequests Off<br>&lt;proxy balancer://cluster&gt;<br>    BalancerMember ajp://localhost:8009 loadfactor=1 smax=5 max=20 ttl=120 retry=300 <span class="hljs-built_in">timeout</span>=15<br>    BalancerMember ajp://localhost:8019 loadfactor=1 smax=5 max=20 ttl=120 retry=300 <span class="hljs-built_in">timeout</span>=15<br>    ProxySet lbmethod=byrequests<br>&lt;/proxy&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>é‡å¯apache</p>
</li>
</ol>
<h1 id="å¯¼å…¥é¡¹ç›®"><a class="header-anchor" href="#å¯¼å…¥é¡¹ç›®"></a>å¯¼å…¥é¡¹ç›®</h1>
<p>ä¸ºäº†éªŒè¯sessionidæ˜¯å¦ç›¸åŒï¼Œåªéœ€æ–°å»ºä¸€ä¸ªæœ€ç®€å•çš„webå·¥ç¨‹ï¼Œç„¶ååœ¨æŸä¸ªjspä¸­è¾“å‡ºå¦‚ä¸‹å†…å®¹å³å¯ã€‚</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><code class="hljs jsp">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> %&gt;<br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span> class=<span class="hljs-string">&quot;no-js&quot;</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;utf-8&quot;</span>/&gt;<br>    &lt;title&gt;xxx&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>This is <span class="hljs-number">8081</span> : &lt;br&gt;<br>&lt;%<br>    <span class="hljs-type">HttpSession</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> request.getSession();<br>    out.print(ss.getId());<br>%&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
  </entry>
  <entry>
    <title>Nginxé…ç½®æµè§ˆå™¨ç¼“å­˜</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/Nginx%E9%85%8D%E7%BD%AE%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98.html</url>
    <content><![CDATA[<p>é€šè¿‡expiresæŒ‡ä»¤ï¼Œå°†æŒ‡å®šåç¼€çš„è¯·æ±‚è®¾ç½®ç¼“å­˜ã€‚</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> localblog &#123;<br>  <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.0.108:4000</span>;<br>&#125;<br><br><br><span class="hljs-section">server</span> &#123;<br>  <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>  <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.0.108</span>;<br>  <span class="hljs-attribute">client_max_body_size</span>    <span class="hljs-number">1000M</span>;<br>  <span class="hljs-attribute">sendfile</span>     <span class="hljs-literal">on</span>;<br><br>  <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-comment">#root /opt/dist;</span><br>        <span class="hljs-attribute">proxy_pass</span>  http://localblog;<br>        <span class="hljs-attribute">index</span> index.html;<br><br>        <span class="hljs-attribute">if</span> (<span class="hljs-variable">$request_filename</span> <span class="hljs-regexp">~* ^.*?\.(ico|jpg|jpeg|gif|png|woff|woff2|bmp|js|css)$)</span> &#123;<br>                <span class="hljs-attribute">expires</span> <span class="hljs-number">1d</span>;<br>        &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="å¯å‚è€ƒçŸ¥è¯†ç‚¹"><a class="header-anchor" href="#å¯å‚è€ƒçŸ¥è¯†ç‚¹"></a>å¯å‚è€ƒçŸ¥è¯†ç‚¹</h2>
<ul>
<li>Last-Modified/If-Modified-Since</li>
<li>Etag/If-None-Match</li>
<li>Cache-Controlï¼š max-ageå’Œexpires</li>
<li>Expires</li>
</ul>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Apacheå¤šåŸŸåå¤šç«™ç‚¹é…ç½®</title>
    <url>/%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/apache_multi-hosts.html</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h1>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ªç«™ç‚¹æ¥å®ç°å¤šä¸ªéœ€æ±‚ã€‚ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬éƒ½ä¼šåœ¨ç«™ç‚¹æ ¹ç›®å½•ï¼ˆå¦‚apache/htdocsï¼‰ä¸‹åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹ï¼š</p>
<table>
<thead>
<tr>
<th>æœåŠ¡å™¨ç›®å½•</th>
<th>è®¿é—®åœ°å€</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>apache/htdocs/a</td>
<td><a href="http://www.xxx.com/a/">www.xxx.com/a/</a>*</td>
<td>a</td>
</tr>
<tr>
<td>apache/htdocs/b</td>
<td><a href="http://www.xxx.com/b/">www.xxx.com/b/</a>*</td>
<td>b</td>
</tr>
<tr>
<td>apache/htdocs/c</td>
<td><a href="http://www.xxx.com/c/">www.xxx.com/c/</a>*</td>
<td>c</td>
</tr>
</tbody>
</table>
<p>ç„¶è€Œè¿™ç§åšæ³•çš„éš”ç¦»æ•ˆæœä¸å¤ªå¥½, åœ¨æˆ‘ä»¬åªæœ‰ä¸€å°æœåŠ¡å™¨ä¸€ä¸ªIPçš„æƒ…å†µä¸‹ï¼Œç†æƒ³çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<table>
<thead>
<tr>
<th>æœåŠ¡å™¨ç›®å½•</th>
<th>è®¿é—®åœ°å€</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>apache/htdocs/a</td>
<td><a href="http://a.xxx.com/*">a.xxx.com/*</a></td>
<td>a</td>
</tr>
<tr>
<td>apache/htdocs/b</td>
<td><a href="http://b.xxx.com/*">b.xxx.com/*</a></td>
<td>b</td>
</tr>
<tr>
<td>apache/htdocs/c</td>
<td><a href="http://c.xxx.com/*">c.xxx.com/*</a></td>
<td>c</td>
</tr>
</tbody>
</table>
<h1 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h1>
<p>æ‰“å¼€appache/conf/http.conf, åœ¨æœ€åé¢åŠ ä¸Šï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">NameVirtualHost</span> *<br><span class="hljs-section">&lt;VirtualHost *<span class="hljs-number">:80</span>&gt;</span><br><span class="hljs-attribute">ServerAdmin</span> admin@xxx.com<br><span class="hljs-attribute">DocumentRoot</span> /usr/local/apache/htdocs/a<br><span class="hljs-attribute">ServerName</span> a.xxx.com<br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br><br><span class="hljs-comment">#</span><br><span class="hljs-attribute">NameVirtualHost</span> *<br><span class="hljs-section">&lt;VirtualHost *<span class="hljs-number">:80</span>&gt;</span><br><span class="hljs-attribute">ServerAdmin</span> admin@xxx.com<br><span class="hljs-attribute">DocumentRoot</span> /usr/local/apache/htdocs/b<br><span class="hljs-attribute">ServerName</span> b.xxx.com<br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br><br><span class="hljs-comment">#</span><br><span class="hljs-attribute">NameVirtualHost</span> *<br><span class="hljs-section">&lt;VirtualHost *<span class="hljs-number">:80</span>&gt;</span><br><span class="hljs-attribute">ServerAdmin</span> admin@xxx.com<br><span class="hljs-attribute">DocumentRoot</span> /usr/local/apache/htdocs/c<br><span class="hljs-attribute">ServerName</span> c.xxx.com<br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br></code></pre></td></tr></table></figure>
<p>ä¿å­˜é‡å¯appacheå³å¯ã€‚</p>
<h1 id="æ‹“å±•"><a class="header-anchor" href="#æ‹“å±•"></a>æ‹“å±•</h1>
<p>åœ¨<a href="http://www.tung7.com/post-91.html">Apacheä¸Tomcatçš„æ•´åˆ</a>ä¸­ï¼Œå·²ç»ç”¨Apacheè¿æ¥äº†Tomcatï¼Œä¸‹é¢å°±ä¸ºJavaç«™ç‚¹å’ŒPHPç«™ç‚¹åˆ†é…ä¸åŒåŸŸåã€‚</p>
<p>blog.tung7.comç”¨äºè®¿é—®JAVAç«™ç‚¹ï¼Œè€Œblog2.tung7.comç”¨äºè®¿é—®PHPç«™ç‚¹ã€‚</p>
<p>åŒæ ·æ‰¾åˆ°apache/conf/http.confã€‚åœ¨æœ€åæ·»åŠ æˆ–ä¿®æ”¹(ä¸‹é¢å…³äºLogçš„é…ç½®è‡ªè¡Œä¿®æ”¹)ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><code class="hljs vim"># è®¾ç½®è™šæ‹Ÿä¸»æœº<br># For Tomcat<br>NameVirtualHost blog.tung7.<span class="hljs-keyword">com</span>:<span class="hljs-number">80</span><br>&lt;VirtualHost blog.tung7.<span class="hljs-keyword">com</span>:<span class="hljs-number">80</span>&gt;<br>     #å®šä¹‰æœåŠ¡åç§°<br>     ServerName blog.tung7.<span class="hljs-keyword">com</span><br>     #å®šä¹‰ç«™ç‚¹é¡¹ç›®æ‰€åœ¨è·¯å¾„ã€‚<br>     DocumentRoot <span class="hljs-comment">&quot;D:/Apache Software Foundation/Tomcat 7.0/webapps</span><br>     DirectoryIndex login.jsp <span class="hljs-built_in">index</span>.html <span class="hljs-built_in">index</span>.htm<br><br>     JkMount /* blog<br>     JkUnMount /*.html blog<br>     JkUnMount /*.htm blog<br><br> &lt;/VirtualHost&gt;<br> &lt;Directory <span class="hljs-string">&quot;D:/Apache Software Foundation/Tomcat 7.0/webapps&quot;</span>&gt;  <br>     Options Indexes FollowSymLinks  <br>     AllowOverride None  <br>     Order allow,deny  <br>     Allow from <span class="hljs-keyword">all</span>  <br> &lt;/Directory&gt; <br><br># For PHP<br>NameVirtualHost blog2.tung7.<span class="hljs-keyword">com</span>:<span class="hljs-number">80</span><br>&lt;VirtualHost blog2.tung7.<span class="hljs-keyword">com</span>:<span class="hljs-number">80</span>&gt;<br>     ServerAdmin zhuyuandong@vip.qq.<span class="hljs-keyword">com</span><br>     ServerName blog2.tung7.<span class="hljs-keyword">com</span><br>     DocumentRoot <span class="hljs-string">&quot;D:\AppServ\www&quot;</span><br><br>     DirectoryIndex <span class="hljs-built_in">index</span>.html <span class="hljs-built_in">index</span>.htm <span class="hljs-built_in">index</span>.php<br>     ErrorLog logs/blog2-error_log.txt<br>     CustomLog logs/blog2-access_log.txt common<br>&lt;/VirtualHost&gt;<br><br></code></pre></td></tr></table></figure>
<p>ä¿å­˜é‡å¯Apache,å³å¯ã€‚</p>
<p><a href="http://xn--blog-pr9l020c.tung7.com">è®¿é—®blog.tung7.com</a>:</p>
<p><img src="https://tximgcdn.tung7.com/apache_multi-hosts/apache_multi-hosts_20210706062821_321473.jpg" alt="Image"></p>
<p><a href="http://xn--blog2-6u8oj48c.tung7.com">è®¿é—®blog2.tung7.com</a>:</p>
<p><img src="https://tximgcdn.tung7.com/apache_multi-hosts/apache_multi-hosts_20210706062826_646753.jpg" alt="Image"></p>
<p>ç„¶è€Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬å¦‚æœç›´æ¥ä½¿ç”¨IPè®¿é—®ç»“æœä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>å®é™…ä¸Šï¼ŒApacheæœ‰ä¸€ä¸ªé»˜è®¤çš„VirtualHostç”¨äºIPè®¿é—®ï¼Œå½“httpconfä¸­NameVirtualHostçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå£°æ˜çš„VirtualHostå°†ç”¨äºIPè®¿é—®ã€‚æ‰€ä»¥ï¼Œç°åœ¨å¦‚æœç›´æ¥ä½¿ç”¨IPè®¿é—®çš„è¯ï¼Œå°†ä¼šè®¿é—®åˆ°JAVAç«™ç‚¹ã€‚BUT, æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç¦æ­¢ä½¿ç”¨IPç›´æ¥è®¿é—®çš„ï¼Œä¸‹é¢æ¥å®ç°ç¦æ­¢IPç›´æ¥è®¿é—®ã€‚</p>
<h1 id="ç¦æ­¢IPç›´æ¥è®¿é—®"><a class="header-anchor" href="#ç¦æ­¢IPç›´æ¥è®¿é—®"></a>ç¦æ­¢IPç›´æ¥è®¿é—®</h1>
<h2 id="ç¬¬ä¸€ç§æ–¹æ³•"><a class="header-anchor" href="#ç¬¬ä¸€ç§æ–¹æ³•"></a>ç¬¬ä¸€ç§æ–¹æ³•</h2>
<p>åŒæ ·åœ¨http.confä¸­æ·»åŠ ä¸€ä¸ªVirtualHost</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># Forbidden IP</span><br><span class="hljs-attribute">NameVirtualHost</span> <span class="hljs-number">121.121.121.121:80</span><br><span class="hljs-section">&lt;VirtualHost <span class="hljs-number">121.121.121.121:80</span>&gt;</span><br>  <span class="hljs-comment">#å¿…éœ€æŒ‡å®šè¿™ä¸ªipåœ°å€</span><br>     <span class="hljs-attribute">ServerName</span> <span class="hljs-number">121.121.121.121</span><br>     <span class="hljs-section">&lt;Location /&gt;</span><br>     <span class="hljs-attribute">Order</span> <span class="hljs-literal">allow</span>,<span class="hljs-literal">deny</span>  <br>     <span class="hljs-attribute">Deny</span> from <span class="hljs-literal">all</span>  <br>     <span class="hljs-section">&lt;/Location&gt;</span><br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>è®¿é—®å°†è¿”å›403é”™è¯¯ã€‚</p>
<p><img src="https://tximgcdn.tung7.com/apache_multi-hosts/apache_multi-hosts_20210706062832_893141.jpg" alt="Image"></p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆé—·éªšåœ°è‡ªå·±è®¾è®¡é”™è¯¯é¡µé¢ã€‚åœ¨&lt;VirtualHost *:80&gt;å’Œ</VirtualHost>åŠ å…¥ä»¥ä¸‹ä»£ç :</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ErrorDocument</span> <span class="hljs-number">500</span> /<span class="hljs-number">500</span>.html<br><span class="hljs-attribute">ErrorDocument</span> <span class="hljs-number">404</span> /<span class="hljs-number">404</span>.html<br><span class="hljs-attribute">ErrorDocument</span> <span class="hljs-number">403</span> /<span class="hljs-number">403</span>.html<br><br></code></pre></td></tr></table></figure>
<h2 id="ç¬¬äºŒç§æ–¹æ³•"><a class="header-anchor" href="#ç¬¬äºŒç§æ–¹æ³•"></a>ç¬¬äºŒç§æ–¹æ³•</h2>
<p>ç¬¬ä¸€ç§æ–¹æ³•åªæ˜¯è¿”å›403ï¼Œå¹¶æ²¡æœ‰ç¡®åˆ‡å‘Šè¯‰è®¿é—®è€…ç¦æ­¢IPè®¿é—®ã€‚</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># Forbidden IP</span><br><span class="hljs-attribute">NameVirtualHost</span> <span class="hljs-number">121.121.121.121:80</span><br><span class="hljs-section">&lt;VirtualHost <span class="hljs-number">121.121.121.121:80</span>&gt;</span><br>     <span class="hljs-attribute">ServerName</span> <span class="hljs-number">121.121.121.121</span><br>     <span class="hljs-attribute">DocumentRoot</span> <span class="hljs-string">&quot;c:\AppServ\www\nosite&quot;</span><br>     <span class="hljs-attribute">DirectoryIndex</span> index.html<br><span class="hljs-section">&lt;/VirtualHost&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>ç›¸å½“äºä¸ºè¯¥IPæ–°å»ºä¸€ä¸ªç«™ç‚¹nositeï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªè®¾è®¡å¥½çš„index.html</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Forbidden View By IP<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>Your Nice Design<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>ç„¶åç›´æ¥è®¿é—®IPå°±ä¼šè®¿é—®åˆ°nositeç«™ç‚¹ä¸‹çš„index.htmläº†ã€‚</p>
]]></content>
      <categories>
        <category>å®è·µå‡ºçœŸçŸ¥</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>apache</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC-Spring-SpringDataJPAç¯å¢ƒæ­å»º</title>
    <url>/%E8%8C%B6%E8%AF%9D%E9%97%B2%E8%B0%88/springmvc_spring_spring-data-jpa_env.html</url>
    <content><![CDATA[<h1 id="ç®€è¿°"><a class="header-anchor" href="#ç®€è¿°"></a>ç®€è¿°</h1>
<p>æœ¬æ¬¡ç¯å¢ƒä½¿ç”¨Maven3åœ¨Intelij IDEAä¸Šæ­å»ºï¼ŒSpringDataJPAçš„å®ç°å•†æ˜¯Hibernate, æ•°æ®åº“Mysql, è¿æ¥æ± Druidã€‚ä¸‹é¢åªæ˜¯æä¾›POMæ–‡ä»¶å’Œç›¸å…³é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œç±»ä¼¼äºä»£ç æ®µçš„é£æ ¼ï¼Œå¹¶ä¸ä¼šå¯¹IDEAçš„ç›¸å…³æ“ä½œè¿›è¡Œè®²è§£ã€‚</p>
<p>æœ¬ä¾‹åªæ˜¯æ­å»ºæœ€åŸºæœ¬çš„è¿è¡Œæ¡ä»¶ï¼Œå¦‚æ–‡ä»¶ä¸Šä¼ ï¼Œè§†å›¾æ•´åˆç­‰ç­‰å…¶å®ƒåŠŸèƒ½éœ€è¦å¦è¡Œå¯¼åŒ…é…ç½®ã€‚</p>
<h1 id="POM-xml"><a class="header-anchor" href="#POM-xml"></a>POM.xml</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>Â </span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.tung7.ex<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>è¿™åº”è¯¥æ˜¯springmvc-spring-springdatajpaæœ€ç®€å•æ•´åˆ<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">spring.version</span>&gt;</span>4.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">spring.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">hibernate.version</span>&gt;</span>4.3.5.Final<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">spring-data-jpa.version</span>&gt;</span>1.7.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">spring-data-jpa.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">slf4j.version</span>&gt;</span>1.7.7<span class="hljs-tag">&lt;/<span class="hljs-name">slf4j.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">aspectj.version</span>&gt;</span>1.8.3<span class="hljs-tag">&lt;/<span class="hljs-name">aspectj.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">jackson.version</span>&gt;</span>2.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">jackson.version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">tiles.version</span>&gt;</span>3.0.5<span class="hljs-tag">&lt;/<span class="hljs-name">tiles.version</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.glassfish.web<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp.jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- Junit --&gt;</span> Â  Â  Â  Â  Â  Â  Â Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- spring4.2.5 --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-beans<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-expression<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-orm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!--springmvc --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- spring data jpa Â === hibernate --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.data<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring-data-jpa.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-entitymanager<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;hibernate.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- Â druid --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.18<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- mysqlé©±åŠ¨åŒ… --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- slf4-log4j --&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.7.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- JackSon ç”¨äº@ResponseBody--&gt;</span> Â  Â  Â  Â  Â  Â  Â <br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-war-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">failOnMissingWebXml</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">failOnMissingWebXml</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<h1 id="WEB-xml"><a class="header-anchor" href="#WEB-xml"></a>WEB.xml</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span>         </span><br><span class="hljs-tag">Â Â Â Â Â Â Â Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>         </span><br><span class="hljs-tag">Â Â Â Â Â Â Â Â <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;3.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>ex_spring_data_jpa<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>index.html<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>index.htm<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>index.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>default.html<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>default.htm<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>default.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">error-code</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">error-code</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/WEB-INF/404.html<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>log4jConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:log4j.properties<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Spring MVC Servlet --&gt;</span>    Â Â Â Â <br>Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span>Â Â <br></code></pre></td></tr></table></figure>
<h1 id="SpringMVCçš„é…ç½®æ–‡ä»¶spring-mvc-xml"><a class="header-anchor" href="#SpringMVCçš„é…ç½®æ–‡ä»¶spring-mvc-xml"></a>SpringMVCçš„é…ç½®æ–‡ä»¶spring-mvc.xml</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span>       </span><br><span class="hljs-tag">Â Â Â Â Â Â Â Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>       </span><br><span class="hljs-tag">Â Â Â Â Â Â Â Â <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span>       </span><br><span class="hljs-tag">Â Â Â Â Â Â Â Â <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span>       </span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc       </span></span><br><span class="hljs-string"><span class="hljs-tag">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd       </span></span><br><span class="hljs-string"><span class="hljs-tag">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â http://www.springframework.org/schema/beans       </span></span><br><span class="hljs-string"><span class="hljs-tag">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â http://www.springframework.org/schema/beans/spring-beans-4.0.xsd       </span></span><br><span class="hljs-string"><span class="hljs-tag">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â http://www.springframework.org/schema/context       </span></span><br><span class="hljs-string"><span class="hljs-tag">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«æä¸”åªæ‰«æ@Controller é˜²æ­¢å’ŒapplicationContext.xmlé‡å¤--&gt;</span>    <br>Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.tung7&quot;</span> <span class="hljs-attr">use-default-filters</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">context:include-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">context:include-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span> /&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- å®šä¹‰InternalResourceViewResolver --&gt;</span>    <br>Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/views/&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;contentType&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceView&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;order&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--============= å¤„ç†é™æ€æ–‡ä»¶ ==================--&gt;</span>    <br>Â Â Â Â <span class="hljs-comment">&lt;!-- å®¹å™¨é»˜è®¤çš„DefaultServletHandlerå¤„ç† æ‰€æœ‰é™æ€å†…å®¹ä¸æ— RequestMappingå¤„ç†çš„URL--&gt;</span>    <br>Â Â Â Â <span class="hljs-comment">&lt;!--&lt;mvc:default-servlet-handler /&gt;--&gt;</span>    <br>Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/content/**&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/content/&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/include/**&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/include/&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:resources</span> <span class="hljs-attr">mapping</span>=<span class="hljs-string">&quot;/WEB-INF/*.html&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;/WEB-INF/&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h1 id="Springå…¬å…±é…ç½®applicationContext-xml"><a class="header-anchor" href="#Springå…¬å…±é…ç½®applicationContext-xml"></a>Springå…¬å…±é…ç½®applicationContext.xml</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xmlns:jpa</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/data/jpa&quot;</span> <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xmlns:task</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/task&quot;</span> <span class="hljs-attr">xmlns:cache</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/cache&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xmlns:util</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/util&quot;</span> <span class="hljs-attr">xmlns:jdbc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/jdbc&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd Â  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd Â  Â  http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd Â  http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â <span class="hljs-attr">default-lazy-init</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Springå…¬å…±é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><br>Â  Â  <span class="hljs-comment">&lt;!-- ä½¿ç”¨annotation è‡ªåŠ¨æ³¨å†Œbean, å¹¶ä¿è¯@Requiredã€@Autowiredçš„å±æ€§è¢«æ³¨å…¥ --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.tung7&quot;</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;annotation&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;</span>/&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br>Â  Â  <span class="hljs-comment">&lt;!-- Jpa Entity Manager é…ç½® --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;entityManagerFactory&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â  Â  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jpaVendorAdapter&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;hibernateJpaVendorAdapter&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;packagesToScan&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.tung7.*.entity&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;persistenceProviderClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;org.hibernate.jpa.HibernatePersistenceProvider&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jpaProperties&quot;</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;hibernate.format_sql&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hibernateJpaVendorAdapter&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;showSql&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;generateDdl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>Â  Â  <span class="hljs-comment">&lt;!-- Jpa äº‹åŠ¡é…ç½® --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;entityManagerFactory&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;entityManagerFactory&quot;</span>/&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>Â  Â  <span class="hljs-comment">&lt;!-- Spring Data Jpaé…ç½® --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">jpa:repositories</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.tung7.*.dao&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">transaction-manager-ref</span>=<span class="hljs-string">&quot;transactionManager&quot;</span></span><br><span class="hljs-tag">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">entity-manager-factory-ref</span>=<span class="hljs-string">&quot;entityManagerFactory&quot;</span> Â /&gt;</span><br><br><br>Â  Â  <span class="hljs-comment">&lt;!-- ä½¿ç”¨annotationå®šä¹‰äº‹åŠ¡ --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">proxy-target-class</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>Â  Â  <span class="hljs-comment">&lt;!-- local developmentç¯å¢ƒ --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">ignore-resource-not-found</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:application.properties&quot;</span>/&gt;</span><br>Â  Â  <span class="hljs-comment">&lt;!-- è¿æ¥æ±  --&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="hljs-attr">init-method</span>=<span class="hljs-string">&quot;init&quot;</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">&quot;close&quot;</span>&gt;</span><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- åŸºæœ¬å±æ€§ urlã€userã€password --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.url&#125;&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.username&#125;&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.password&#125;&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- é…ç½®åˆå§‹åŒ–å¤§å°ã€æœ€å°ã€æœ€å¤§ --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;initialSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;minIdle&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxActive&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´ --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxWait&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;60000&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;60000&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;300000&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;validationQuery&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;SELECT &#x27;x&#x27;&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;testWhileIdle&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;testOnBorrow&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;testOnReturn&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- æ‰“å¼€PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿æ¥ä¸ŠPSCacheçš„å¤§å° --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;poolPreparedStatements&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxPoolPreparedStatementPerConnectionSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span> /&gt;</span><br><br>Â  Â  Â  Â  <span class="hljs-comment">&lt;!-- é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filters --&gt;</span><br>Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;filters&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;stat&quot;</span> /&gt;</span><br>Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h1 id="log4j-properties"><a class="header-anchor" href="#log4j-properties"></a>log4j.properties</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#log4j.rootLogger=warn,appender1</span><br><span class="hljs-comment">#log4j.rootLogger=info,appender1</span><br>log4j.rootLogger=error,appender1<br><br><span class="hljs-comment">#print to console</span><br>log4j.appender.appender1=org.apache.log4j.ConsoleAppender<br><span class="hljs-comment">#style TTCCLayout</span><br>log4j.appender.appender1.layout=org.apache.log4j.TTCCLayout<br><br></code></pre></td></tr></table></figure>
<h1 id="å®ä¾‹"><a class="header-anchor" href="#å®ä¾‹"></a>å®ä¾‹</h1>
<h2 id="Entity"><a class="header-anchor" href="#Entity"></a>Entity</h2>
<p>ä¸¤ä¸ªå®ä½“ä¸€ä¸ªæ˜¯Article, ä¸€ä¸ªæ˜¯Sortã€‚Articleå¯¹Sortæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚</p>
<p>Articleå®ä½“ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Table(name = &quot;tung7_article&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer gid;<br>    <span class="hljs-keyword">private</span> String title;<br>    <span class="hljs-keyword">private</span> Date date;<br>    <span class="hljs-keyword">private</span> String content;<br>    <span class="hljs-keyword">private</span> String excerpt;<br>    <span class="hljs-keyword">private</span> String alias;<br>    <span class="hljs-keyword">private</span> Sort sort;<br>    <span class="hljs-keyword">private</span> Integer views;<br>    <span class="hljs-keyword">private</span> Integer comnum;<br>    <span class="hljs-keyword">private</span> Boolean istop;<br>    <span class="hljs-keyword">private</span> Boolean sorttop;<br>    <span class="hljs-keyword">private</span> Boolean ispost;<br>    <span class="hljs-keyword">private</span> Boolean allowremark;<br><br>    <span class="hljs-keyword">private</span> Boolean ispage;<br>    <span class="hljs-keyword">private</span> String template;<br><br>    <span class="hljs-comment">//Setter Getter       @Id</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getGid</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> gid;<br>    &#125;<br><br>    <span class="hljs-meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;, timezone = &quot;GMT+8&quot;)</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getDate</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@ManyToOne</span><br>    <span class="hljs-meta">@JoinColumn(name = &quot;sortid&quot;, nullable = true)</span><br>    <span class="hljs-keyword">public</span> Sort <span class="hljs-title function_">getSort</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sort;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>Sortå®ä½“ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Table(name = &quot;tung7_sort&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sort</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer sid;<br>    <span class="hljs-keyword">private</span> String sortname;<br>    <span class="hljs-keyword">private</span> String alias; <span class="hljs-comment">// Link alias</span><br>Â Â Â Â <span class="hljs-keyword">private</span> String description;<br>    <span class="hljs-keyword">private</span> String template;<br><br>    <span class="hljs-keyword">private</span> Set&lt;Article&gt; articles;<br><br>    <span class="hljs-meta">@OneToMany(fetch = FetchType.LAZY)</span><br>    <span class="hljs-meta">@JoinColumn(name = &quot;sortid&quot;)</span><br>    <span class="hljs-keyword">public</span> Set&lt;Article&gt; <span class="hljs-title function_">getArticles</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> articles;<br>    &#125;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getSid</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sid;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="DAO"><a class="header-anchor" href="#DAO"></a>DAO</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ArticleDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PagingAndSortingRepository</span>&lt;Article, Integer&gt; &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Service"><a class="header-anchor" href="#Service"></a>Service</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArticleService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span>    Â Â Â Â <br>Â Â Â Â <span class="hljs-keyword">private</span> ArticleDao articleDao;<br><br>    <span class="hljs-keyword">public</span> PageBean&lt;Article&gt; <span class="hljs-title function_">list</span><span class="hljs-params">(PageBean&lt;Article&gt; pageBean)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">curPage</span> <span class="hljs-operator">=</span> pageBean.getCurPage();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">linesize</span> <span class="hljs-operator">=</span> pageBean.getLineSize();<br>        Page&lt;Article&gt; page = articleDao.findAll(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PageRequest</span>(curPage - <span class="hljs-number">1</span>, linesize));<br>        pageBean.setItemSum(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Long</span>(page.getTotalElements()).intValue());<br>        pageBean.setList(page.getContent());<br><br>        <span class="hljs-keyword">return</span> pageBean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Controller"><a class="header-anchor" href="#Controller"></a>Controller</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/article&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArticleController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> ArticleService articleService;<br><br>    <span class="hljs-meta">@RequestMapping(method = RequestMethod.GET)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">list</span><span class="hljs-params">(ModelMap mv, <span class="hljs-meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="hljs-type">int</span> page)</span> &#123;<br>        PageBean&lt;Article&gt; pageBean = articleService.list(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PageBean</span>&lt;Article&gt;(page, <span class="hljs-number">5</span>));<br>        mv.addAttribute(<span class="hljs-string">&quot;pageBean&quot;</span>, pageBean);<br>Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;article&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="JSP"><a class="header-anchor" href="#JSP"></a>JSP</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml">article list pageBean:<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>pageBean.curPage: $&#123;pageBean.curPage&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>pageBean.itemSum: $&#123;pageBean.itemSum&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>pageBean.pageSum: $&#123;pageBean.pageSum&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>pageBean.lineSize: $&#123;pageBean.lineSize&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;pageBean.list&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span><br>    ==================================<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    $&#123;item.gid&#125; : <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    ---------------------------------------<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    $&#123;item.sort.sortname&#125; : $&#123;item.title&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    ---------------------------------------<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    $&#123;item.date&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    ==================================<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>èŒ¶è¯é—²è°ˆ</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
        <tag>Spring</tag>
        <tag>Spring_Data_JPA</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
      </tags>
  </entry>
</search>
