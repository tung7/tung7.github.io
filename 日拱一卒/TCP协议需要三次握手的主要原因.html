

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Tung7">
  <meta name="keywords" content="Tung7 Note">
  
    <meta name="description" content="å»ºç«‹è¿æ¥  ä»€ä¹ˆæ˜¯è¿æ¥ ä¸ºä»€ä¹ˆè¦å»ºç«‹è¿æ¥   ä¸ºä»€ä¹ˆè¦æ¡æ‰‹ä¸‰æ¬¡  è§£å†³old duplicated SYNé—®é¢˜ è§£å†³ISNåå•†é—®é¢˜   åŠè¿æ¥çŠ¶æ€ä¸RST   TCPå»ºç«‹è¿æ¥é˜¶æ®µï¼Œéœ€è¦è¿›è¡Œä¿—ç§°â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼ˆthree-way handshakeï¼‰çš„åå•†è¿‡ç¨‹ã€‚è¿™é‡Œå°±å¼•å‡ºä¸¤ä¸ªé—®é¢˜ã€‚  ä¸ºä»€ä¹ˆTCPéœ€è¦â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Ÿ  éœ€è¦è§£é‡Šâ€œä¸‰æ¬¡æ¡æ‰‹â€è¿™ä¸ªæœºåˆ¶çš„åŸå›    ä¸ºä»€ä¹ˆâ€œä¸‰æ¬¡æ¡æ‰‹â€éœ€è¦ä¸‰æ¬¡ï¼Ÿ  éœ€è¦è§£é‡Š">
<meta property="og:type" content="article">
<meta property="og:title" content="TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› ">
<meta property="og:url" content="http://www.tung7.com/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0.html">
<meta property="og:site_name" content="Tung7 Note">
<meta property="og:description" content="å»ºç«‹è¿æ¥  ä»€ä¹ˆæ˜¯è¿æ¥ ä¸ºä»€ä¹ˆè¦å»ºç«‹è¿æ¥   ä¸ºä»€ä¹ˆè¦æ¡æ‰‹ä¸‰æ¬¡  è§£å†³old duplicated SYNé—®é¢˜ è§£å†³ISNåå•†é—®é¢˜   åŠè¿æ¥çŠ¶æ€ä¸RST   TCPå»ºç«‹è¿æ¥é˜¶æ®µï¼Œéœ€è¦è¿›è¡Œä¿—ç§°â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼ˆthree-way handshakeï¼‰çš„åå•†è¿‡ç¨‹ã€‚è¿™é‡Œå°±å¼•å‡ºä¸¤ä¸ªé—®é¢˜ã€‚  ä¸ºä»€ä¹ˆTCPéœ€è¦â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Ÿ  éœ€è¦è§£é‡Šâ€œä¸‰æ¬¡æ¡æ‰‹â€è¿™ä¸ªæœºåˆ¶çš„åŸå›    ä¸ºä»€ä¹ˆâ€œä¸‰æ¬¡æ¡æ‰‹â€éœ€è¦ä¸‰æ¬¡ï¼Ÿ  éœ€è¦è§£é‡Š">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tximgcdn.tung7.com/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0_20210714224115_154222.png">
<meta property="article:published_time" content="2021-07-14T12:05:21.000Z">
<meta property="article:modified_time" content="2023-05-12T16:15:13.973Z">
<meta property="article:author" content="Tung7">
<meta property="article:tag" content="TCPåè®®">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://tximgcdn.tung7.com/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0_20210714224115_154222.png">
  
  
  
  <title>TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå›  - Tung7 Note</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.tung7.com","root":"/","version":"1.9.4","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.0.0-rc1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 50vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Tung7</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="2iconfont 2icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="2iconfont 2icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="2iconfont 2icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="2iconfont 2icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" false
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Tung7
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-07-14 20:05" pubdate>
          20:05 July 14, 2021
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid post-container nopadding-x">
  <div class="side-col side-col-post-left" style="padding-top:0!important;"></div>
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2 side-col-post-left" style="padding-top:0!important;">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="æ—¥æ‹±ä¸€å’"
        id="heading-341e8375a2508f99f2d1d6e86d6085dd" role="tab" data-toggle="collapse" href="#collapse-341e8375a2508f99f2d1d6e86d6085dd"
        aria-expanded="true"
      >ğŸ“æ—¥æ‹±ä¸€å’
        <span class="list-group-count">(11)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-341e8375a2508f99f2d1d6e86d6085dd"
           role="tabpanel" aria-labelledby="heading-341e8375a2508f99f2d1d6e86d6085dd">
        
        
          
  <div class="category-post-list">

    
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE.html" title="ç½‘ç»œåŸºç¡€-è·¯ç”±é€‰æ‹©åè®®"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ç½‘ç»œåŸºç¡€-è·¯ç”±é€‰æ‹©åè®®</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0.html" title="ç½‘ç»œåŸºç¡€-TCPåè®®"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ç½‘ç»œåŸºç¡€-TCPåè®®</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0.html" title="TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› "
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">ğŸ“„TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E7%9A%84ISN%E9%9C%80%E8%A6%81%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90.html" title="ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆï¼Ÿ"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆï¼Ÿ</span>
        </a>
      
    
      

      

      
        
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MultiPaxos%E6%80%9D%E6%83%B3.html" title="MultiPaxosæ€æƒ³"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„MultiPaxosæ€æƒ³</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MySQL%20XA.html" title="MySQL XA"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„MySQL XA</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/Raft%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95.html" title="Raftå…±è¯†ç®—æ³•"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„Raftå…±è¯†ç®—æ³•</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/BasicPaxos%E7%AE%97%E6%B3%95.html" title="BasicPaxosç®—æ³•"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„BasicPaxosç®—æ³•</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/http_protocol_conclusion.html" title="HTTPåè®®é€Ÿè§ˆ"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„HTTPåè®®é€Ÿè§ˆ</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E5%BA%8F%E5%B9%95.html" title="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåºå¹•"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåºå¹•</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <div id="post-icon">ğŸ“</div>
          <article class="post-content mx-auto">
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
<!--      <i class="iconfont icon-books"></i>-->
        ğŸ—‚ï¸

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/" class="category-chain-item"   >æ—¥æ‹±ä¸€å’</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
<!--      <i class="iconfont icon-tags"></i>-->
        ğŸ·ï¸
        <a href="/tags/TCP%E5%8D%8F%E8%AE%AE/">#TCPåè®®</a>
      
    </div>
  
</div>

            </div>
            <hr style="border-bottom: 2px solid #b18082">
            <!-- SEO header -->
            <h1 style="display: none">TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </h1>
            
            
              <div class="markdown-body">
                
                <hr>
<ul>
<li>å»ºç«‹è¿æ¥
<ul>
<li>ä»€ä¹ˆæ˜¯è¿æ¥</li>
<li>ä¸ºä»€ä¹ˆè¦å»ºç«‹è¿æ¥</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆè¦æ¡æ‰‹ä¸‰æ¬¡
<ul>
<li>è§£å†³old duplicated SYNé—®é¢˜</li>
<li>è§£å†³ISNåå•†é—®é¢˜</li>
</ul>
</li>
<li>åŠè¿æ¥çŠ¶æ€ä¸RST</li>
</ul>
<hr>
<p>TCPå»ºç«‹è¿æ¥é˜¶æ®µï¼Œéœ€è¦è¿›è¡Œä¿—ç§°â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼ˆthree-way handshakeï¼‰çš„åå•†è¿‡ç¨‹ã€‚è¿™é‡Œå°±å¼•å‡ºä¸¤ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆTCPéœ€è¦â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Ÿ
<ul>
<li>éœ€è¦è§£é‡Šâ€œä¸‰æ¬¡æ¡æ‰‹â€è¿™ä¸ªæœºåˆ¶çš„åŸå› </li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆâ€œä¸‰æ¬¡æ¡æ‰‹â€éœ€è¦ä¸‰æ¬¡ï¼Ÿ
<ul>
<li>éœ€è¦è§£é‡Šæ¡æ‰‹æ¬¡æ•°çš„ç»†èŠ‚</li>
</ul>
</li>
</ul>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¾ˆç®€å•ï¼Œä¸ºäº†åœ¨ä¸å¯é çš„IPå±‚ä¸Šå®ç°å¯é æ€§ï¼Œé€šä¿¡åŒæ–¹éœ€è¦å¯¹é€šä¿¡ä¿¡æ¯è¿›è¡Œåˆå§‹åŒ–å’Œç»´æŒç‰¹å®šçš„çŠ¶æ€ã€‚çŠ¶æ€åˆå§‹åŒ–çš„åå•†è¿‡ç¨‹å°±æ˜¯æ¡æ‰‹æœºåˆ¶ã€‚è¿™é‡Œçš„é€šä¿¡ä¿¡æ¯åŒ…å«åºå·ï¼Œçª—å£å¤§å°ï¼Œé€‰é¡¹ä¿¡æ¯ç­‰ç­‰ï¼Œæ­£æ˜¯è¿™äº›ä¿¡æ¯ä¿è¯äº†TCPçš„å¯é å’Œæµé‡æ§åˆ¶çš„å®ç°ã€‚</p>
<p>ç¬¬äºŒé—®é¢˜ç­”æ¡ˆï¼šé€šä¿¡åŒæ–¹è¦äº¤æ¢ä¿¡æ¯ï¼Œå¿…ç„¶æ˜¯è‡³å°‘éœ€è¦ä¸¤æ¬¡æ¡æ‰‹çš„ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹å°±æ˜¯é—®é¢˜çš„æ ¸å¿ƒã€‚ç¬¬ä¸€ï¼Œä¸»è¦æ˜¯éœ€è¦é˜²æ­¢å·²å¤±æ•ˆçš„æ—§çš„SYNè¯·æ±‚ï¼ˆold duplicatedï¼‰å†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ï¼Œå¯¼è‡´è¿æ¥é”™è¯¯å»ºç«‹ï¼ˆå¦‚åˆå§‹åºå·ISNï¼Œçª—å£å¤§å°ç­‰ç­‰ï¼‰çš„å¼‚å¸¸ã€‚å…¶æ¬¡ï¼Œç”±äºåˆå§‹åºå·ISNçš„ç‰¹æ®Šæ€§ï¼ˆå¿…é¡»ç”±å¯¹æ–¹è¿›è¡Œæ ¡éªŒï¼‰ï¼Œå¿…é¡»è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ‰èƒ½ä¿è¯åŒæ–¹ISNäº¤æ¢æˆåŠŸã€‚æœ€åï¼Œä¸‰æ¬¡çš„æ¡æ‰‹é…åˆRSTæ ‡å¿—ä¸åŠè¿æ¥çŠ¶æ€çš„è®¾è®¡ï¼Œæä¾›äº†å¼‚å¸¸å›é€€ï¼ŒçŠ¶æ€é‡ç½®çš„å¯èƒ½ï¼Œæ˜¯ç¨³å®šæ€§çš„ä½“ç°ã€‚</p>
<h1 id="è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶"><a class="header-anchor" href="#è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶"></a>è¿æ¥ä¸æ¡æ‰‹æœºåˆ¶</h1>
<p>è¿™ä¸€å°èŠ‚åªè®¨è®ºæ¡æ‰‹æœºåˆ¶ï¼Œä¸è®¨è®ºå…·ä½“å‡ æ¬¡æ¡æ‰‹ã€‚</p>
<h2 id="è¿æ¥ä¸å»ºç«‹è¿æ¥"><a class="header-anchor" href="#è¿æ¥ä¸å»ºç«‹è¿æ¥"></a>è¿æ¥ä¸å»ºç«‹è¿æ¥</h2>
<p>TCPçš„è®¾è®¡ç›®æ ‡å°±æ˜¯ä¸€æ¬¾å¯é çš„ï¼Œ<strong>é¢å‘è¿æ¥çš„</strong>ä¼ è¾“å±‚åè®®ã€‚</p>
<p>é‚£ä»€ä¹ˆæ˜¯è¿æ¥å‘¢ï¼Ÿ**è¿æ¥(connection)**çš„æ¦‚å¿µåœ¨RFC793æ–‡æ¡£ä¸­æ˜¯è¿™æ ·æš—ç¤ºçš„ï¼š</p>
<blockquote>
<p>The reliability and flow control mechanisms described above require that TCPs initialize and maintain certain status information for each data stream. The combination of this information, including sockets, sequence numbers, and window sizes, is called a connection.</p>
<p>å¯é æ€§å’Œæµæ§æœºåˆ¶éœ€è¦åœ¨TCPé€šä¿¡åŒç«¯åˆå§‹åŒ–å’Œç»´æŒç‰¹å®šçŠ¶æ€ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯çš„ç»„åˆå°±ç§°ä¸º<strong>è¿æ¥</strong>ï¼ŒåŒ…æ‹¬åŒæ–¹socketï¼Œåºå·ï¼Œçª—å£å¤§å°ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¿æ¥çš„å»ºç«‹å°±æ˜¯é€šä¿¡åŒç«¯å¯¹ä¸Šè¿°ä¿¡æ¯ï¼ˆsockets, seq, wndï¼‰çš„åå•†å¹¶è¾¾åˆ°å…±è¯†çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>Since connections must be established between unreliable hosts and over the unreliable internet communication system, a handshake mechanism with clock-based sequence numbers is used to avoid erroneous initialization of connections.</p>
<p>ç”±äºè¿æ¥å¿…é¡»åœ¨ä¸¤ä¸ªä¸å¯é ä¸»æœºï¼Œå¹¶ä¸”åœ¨ä¸å¯é çš„IPä½“ç³»ä¸Šå»ºç«‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªåŸºäºæ—¶é’Ÿåºå·çš„æ¡æ‰‹æœºåˆ¶æ¥é¿å…é”™è¯¯çš„è¿æ¥åˆå§‹åŒ–ã€‚</p>
</blockquote>
<p>ç”±æ­¤çœ‹æ¥ï¼Œæ¡æ‰‹æœºåˆ¶æ˜¯ç”¨æ¥éšè—åº•å±‚çš„ä¸å¯é æ€§è´¨çš„ã€‚å¹¶ä¸”ï¼Œè¿™é‡Œæåˆ°äº†<em>ä¸€ä¸ªç»†èŠ‚</em>ï¼ŒSYNä¸­çš„åºå·æ˜¯åŸºäºæ—¶é’Ÿçš„ã€‚ï¼ˆ<a href="/POST/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E7%9A%84ISN%E9%9C%80%E8%A6%81%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90.html">ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆ | Tung7 Note</a>)</p>
<h1 id="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡"></a>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡</h1>
<ul>
<li>é˜²æ­¢æ—§çš„å·²å¤±æ•ˆçš„SYNè¯·æ±‚ï¼Œå†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ã€‚</li>
<li>ISNåŒæ­¥é—®é¢˜å¿…é¡»éœ€è¦ä¸‰æ¬¡ã€‚</li>
<li>ä¸‰æ¬¡æ¡æ‰‹ç»“åˆåŠè¿æ¥è®¾è®¡ï¼Œèƒ½æä¾›çŠ¶æ€å›é€€çš„èƒ½åŠ›ï¼Œä¹Ÿèƒ½é¿å…æœåŠ¡ç«¯æ¥æ”¶åˆ°SYNè¯·æ±‚åå°±è®¤ä¸ºæ–°è¿æ¥å»ºç«‹äº†ï¼Œç©ºç­‰æ•°æ®è€Œæµªè´¹èµ„æºçš„æƒ…å†µã€‚</li>
</ul>
<h2 id="å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾"><a class="header-anchor" href="#å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾"></a>å·²å¤±æ•ˆçš„SYNå†æ¬¡åˆ°è¾¾</h2>
<p>ä¸ºäº†ä¸¤ç«¯èƒ½å¤ŸåŒæ­¥åºå·ï¼Œçª—å£å¤§å°ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡æ¡æ‰‹æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç¬¬ä¸‰æ¬¡ACKå›åº”å‘¢ï¼Ÿä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æ—§çš„é‡å¤çš„å·²å¤±æ•ˆçš„SYNè¯·æ±‚ï¼ˆå®¢æˆ·ç«¯é‡å‘SYNï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªSYNå°±æ˜¯å·²å¤±æ•ˆçš„è¯·æ±‚ï¼‰å†æ¬¡åˆ°è¾¾æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ï¼ˆåºå·è¿·æƒ‘ï¼Œçª—å£è¿·æƒ‘ï¼Œé€‰é¡¹è¿·æƒ‘ç­‰ç­‰é—®é¢˜ï¼‰ã€‚</p>
<blockquote>
<p>The principle reason for the three-way handshake is to prevent old duplicate connection initiations from causing confusion. To deal with this, a special control message, reset, has been devised.  If the receiving TCP is in a  non-synchronized state (i.e., SYN-SENT, SYN-RECEIVED), it returns to LISTEN on receiving an acceptable reset.</p>
<p>ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦ï¼ˆprincipalï¼‰åŸå› å°±æ˜¯é¿å…æ—§çš„é‡å¤çš„è¿æ¥åˆå§‹åŒ–æ‰€å¼•èµ·çš„æ··æ·†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ··æ·†é—®é¢˜ï¼Œè®¾è®¡å‡ºäº†resetæ§åˆ¶ä¿¡æ¯ï¼ˆRSTæ ‡å¿—ä½ï¼‰ã€‚å¦‚æœæ¥æ”¶æ–¹åœ¨éåŒæ­¥çŠ¶æ€ï¼ˆSYN-SENT, SYN-RECEIVEDï¼‰æ¥æ”¶åˆ°äº†RSTæŠ¥æ–‡ï¼Œæ¥æ”¶æ–¹å°±ä¼šå›é€€åˆ°LISTENçŠ¶æ€ã€‚</p>
</blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹ï¼ˆé…åˆåŠè¿æ¥çŠ¶æ€ä¸RSTï¼‰å¯ä»¥è®©è¿æ¥çŠ¶æ€æœ‰â€œå›é€€â€çš„å¯èƒ½ï¼Œè€Œä¸¤æ¬¡æ¡æ‰‹æ˜¯ä¸èƒ½è¾¾åˆ°è¦æ±‚çš„ã€‚ç”±æ­¤çœ‹æ¥ä¸‰æ¬¡æ¡æ‰‹ä¸åŠè¿æ¥ï¼ˆhalf-openï¼‰çŠ¶æ€æ˜¯å¯†ä¸å¯åˆ†çš„ã€‚</p>
<p>ä¸‹é¢ç›´æ¥ç”¨RFCæ–‡æ¡£ä¸­çš„åŸä¾‹å­è¯´æ˜ï¼š</p>
<p><img src="https://tximgcdn.tung7.com/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0_20210714224115_154222.png" srcset="/img/loading.gif" lazyload alt="image-20210714224054097"></p>
<p>åœ¨ç¬¬3è¡Œï¼Œä¸€ä¸ªæ—§çš„é‡å¤çš„SYNè¯·æ±‚æ¯”ç¬¬äºŒè¡Œçš„SYNå…ˆåˆ°è¾¾TCP Bï¼Œè¿™æ˜¯TCP Bæ˜¯æ— æ³•åŒºåˆ†è¿™ä¸ªSYNè¯·æ±‚æ˜¯ä¸æ˜¯æ—§çš„ï¼Œåªèƒ½å“åº”ACKå¹¶ä¸”çŠ¶æ€ç”±LISTENå˜ä¸ºSYN-RECEIVEDã€‚TCP Aå‘ç°TCP Bå“åº”å›æ¥çš„æŠ¥æ–‡æ®µä¸­çš„ACKå·ä¸åŒ¹é…ï¼Œå°±ç›´æ¥å“åº”RST=1ï¼Œè®©TCP Bå›é€€åˆ°LISTENçŠ¶æ€ã€‚éšååœ¨ç¬¬6è¡Œï¼ŒåŸæœ¬æ­£ç¡®çš„SYNè¯·æ±‚åˆ°è¾¾TCP Båå°±èƒ½æ­£å¸¸å»ºç«‹è¿æ¥ã€‚ä½†æ˜¯å¦‚æœï¼ŒåŸæœ¬çš„SYNè¯·æ±‚æ¯”RSTå…ˆåˆ°è¾¾ï¼ˆä¹Ÿå°±æ˜¯ç¬¬5è¡Œå’Œç¬¬6è¡Œäº’æ¢ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´TCP Bä¹Ÿå“åº”ä¸€ä¸ªRSTã€‚</p>
<h2 id="ISNçš„äº¤æ¢ä¸éªŒè¯"><a class="header-anchor" href="#ISNçš„äº¤æ¢ä¸éªŒè¯"></a>ISNçš„äº¤æ¢ä¸éªŒè¯</h2>
<blockquote>
<p>A three way handshake is necessary because sequence numbers are not tied to a global clock in the network, and TCPs may have different mechanisms for picking the ISNâ€™s.  The receiver of the first SYN has no way of knowing whether the segment was an old delayed one or not, unless it remembers the last sequence number used on the connection (which is not always possible), and so it must ask the sender to verify this SYN.  The three way handshake and the advantages of a clock-driven scheme are discussed in [3].</p>
</blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹çš„å¦ä¸€ä¸ªå¿…è¦åŸå› å°±æ˜¯ä¸ºäº†åŒæ–¹éƒ½èƒ½æ­£ç¡®åŒæ­¥ISNã€‚ç”±äºç½‘ç»œä¸å­˜åœ¨ä¸€ä¸ªå…¨å±€æ—¶é’Ÿï¼Œå¹¶ä¸”é€šä¿¡åŒæ–¹éƒ½æœ‰è‡ªå·±çš„æ–¹å¼å¾—åˆ°ISNã€‚æ¥æ”¶æ–¹æ˜¯æ— æ³•åˆ¤æ–­æŠ¥æ–‡æ®µæ˜¯å¦æ˜¯å»¶è¯¯çš„å¤±æ•ˆçš„æŠ¥æ–‡æ®µï¼Œé™¤éå®ƒè®°ä½ä¸Šä¸€ä¸ªåœ¨è¿æ¥ä¸­ä½¿ç”¨çš„åºå·ï¼ˆè¿™æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼‰ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹å¿…é¡»å‘å‘é€æ–¹éªŒè¯è¿™ä¸ªSYNã€‚</p>
<h1 id="åŠè¿æ¥çŠ¶æ€"><a class="header-anchor" href="#åŠè¿æ¥çŠ¶æ€"></a>åŠè¿æ¥çŠ¶æ€</h1>
<h1 id="RST"><a class="header-anchor" href="#RST"></a>RST</h1>
<p>RSTå¹¶ä¸æ˜¯ä¸€å®šæœ‰æ•ˆçš„ï¼Œé™¤äº†åœ¨æ¡æ‰‹é˜¶æ®µï¼Œå…¶ä»–æƒ…å†µä¸‹RSTåŒ…çš„SEQåºå·å¿…é¡»åœ¨æ¥æ”¶çª—å£ä¸­æ‰æœ‰æ•ˆï¼Œå¦åˆ™ä¼šè¢«å¿½ç•¥æ‰ã€‚</p>
<blockquote>
<p>Reset Processing</p>
<p>In all states except SYN-SENT, all reset (RST) segments are validated<br>
by checking their SEQ-fields.  A reset is valid if its sequence number<br>
is in the window.  In the SYN-SENT state (a RST received in response<br>
to an initial SYN), the RST is acceptable if the ACK field<br>
acknowledges the SYN.</p>
<p>The receiver of a RST first validates it, then changes state.  If the<br>
receiver was in the LISTEN state, it ignores it.  If the receiver was<br>
in SYN-RECEIVED state and had previously been in the LISTEN state,<br>
then the receiver returns to the LISTEN state, otherwise the receiver<br>
aborts the connection and goes to the CLOSED state.  If the receiver<br>
was in any other state, it aborts the connection and advises the user<br>
and goes to the CLOSED state.</p>
</blockquote>
<h1 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ"></a>å‚è€ƒ</h1>
<ol>
<li>
<p><a target="_blank" rel="noopener" href="https://networkengineering.stackexchange.com/questions/24068/why-do-we-need-a-3-way-handshake-why-not-just-2-way">tcp - Why do we need a 3-way handshake? Why not just 2-way? - Network Engineering Stack Exchange</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc793#page-10">rfc793 (ietf.org)</a></p>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>

              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </div>
      <div>http://www.tung7.com/æ—¥æ‹±ä¸€å’/TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› .html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Tung7</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>July 14, 2021</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - Non-commercial">
                    <i class="iconfont icon-nc"></i>
                  </span>
                </a>
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - Share-alike">
                    <i class="iconfont icon-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2 side-col-post-right">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
<!--    <i class="iconfont icon-list"></i>-->
    ğŸ“’<span>TOC</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.events.registerRefreshCallback(function() {
      if ('mermaid' in window) {
        mermaid.init();
      }
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/hexojs/hexo" target="_blank">Hexo</a>ğŸ”¸<a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank">Fluid</a> <br> Â©ï¸ 2015-2023â¤ï¸Tung7 ç‰ˆæƒæ‰€æœ‰ | <a href="http://beian.miit.gov.cn" target="_blank" style="border-bottom:1px solid">ç²¤ICPå¤‡15069283å·</a> 
    </div>
  
  
  
    <!-- å¤‡æ¡ˆä¿¡æ¯ ICP for China -->
    <div class="beian">
  <span>
      
  </span>
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
