

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Tung7">
  <meta name="keywords" content="Tung7 Note">
  
    <meta name="description" content="CFT éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œ æ•…éšœå®¹é”™ç®—æ³•   ç›®çš„  å¤šèŠ‚ç‚¹å°±æŸä¸€ä¸ªå€¼è¾¾æˆå…±è¯† è¾¾æˆäº†å…±è¯†åï¼Œå€¼å°±ä¸ä¼šå†å˜äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜æ•°æ®çš„å€¼ï¼Œå¯ä»¥å®ç°çŠ¶æ€æœºï¼Œå’Œæè®®æ–°çš„æŒ‡ä»¤ã€‚    ä¸‰ä¸ªè§’è‰²  Proposerï¼ŒAcceptorï¼ŒLearner    å•è°ƒé€’å¢çš„ææ¡ˆç¼–å·  è®ºæ–‡æåˆ°äº†æ€è·¯ã€‚ç‹¬ç«‹ã€é€’å¢ã€å­˜å‚¨åœ¨å¯é æ€§è®¾å¤‡ä¸­ã€‚å…·ä½“ç»†èŠ‚å®ç°ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftçš„CurrentTermçš„å®">
<meta property="og:type" content="article">
<meta property="og:title" content="BasicPaxosç®—æ³•">
<meta property="og:url" content="http://www.tung7.com/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/BasicPaxos%E7%AE%97%E6%B3%95.html">
<meta property="og:site_name" content="Tung7 Note">
<meta property="og:description" content="CFT éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œ æ•…éšœå®¹é”™ç®—æ³•   ç›®çš„  å¤šèŠ‚ç‚¹å°±æŸä¸€ä¸ªå€¼è¾¾æˆå…±è¯† è¾¾æˆäº†å…±è¯†åï¼Œå€¼å°±ä¸ä¼šå†å˜äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜æ•°æ®çš„å€¼ï¼Œå¯ä»¥å®ç°çŠ¶æ€æœºï¼Œå’Œæè®®æ–°çš„æŒ‡ä»¤ã€‚    ä¸‰ä¸ªè§’è‰²  Proposerï¼ŒAcceptorï¼ŒLearner    å•è°ƒé€’å¢çš„ææ¡ˆç¼–å·  è®ºæ–‡æåˆ°äº†æ€è·¯ã€‚ç‹¬ç«‹ã€é€’å¢ã€å­˜å‚¨åœ¨å¯é æ€§è®¾å¤‡ä¸­ã€‚å…·ä½“ç»†èŠ‚å®ç°ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftçš„CurrentTermçš„å®">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tximgcdn.tung7.com/BasicPaxos%E7%AE%97%E6%B3%95/BasicPaxos%E7%AE%97%E6%B3%95_20210807005639_357847.png">
<meta property="article:published_time" content="2023-05-12T16:15:13.973Z">
<meta property="article:modified_time" content="2023-05-12T16:15:13.973Z">
<meta property="article:author" content="Tung7">
<meta property="article:tag" content="åˆ†å¸ƒå¼ç†è®º">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://tximgcdn.tung7.com/BasicPaxos%E7%AE%97%E6%B3%95/BasicPaxos%E7%AE%97%E6%B3%95_20210807005639_357847.png">
  
  
  
  <title>BasicPaxosç®—æ³• - Tung7 Note</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.tung7.com","root":"/","version":"1.9.4","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.0.0-rc1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 50vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Tung7</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="2iconfont 2icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="2iconfont 2icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="2iconfont 2icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="2iconfont 2icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" false
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">BasicPaxosç®—æ³•</span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Tung7
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-05-13 00:15" pubdate>
          00:15 May 13, 2023
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid post-container nopadding-x">
  <div class="side-col side-col-post-left" style="padding-top:0!important;"></div>
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2 side-col-post-left" style="padding-top:0!important;">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="æ—¥æ‹±ä¸€å’"
        id="heading-341e8375a2508f99f2d1d6e86d6085dd" role="tab" data-toggle="collapse" href="#collapse-341e8375a2508f99f2d1d6e86d6085dd"
        aria-expanded="true"
      >ğŸ“æ—¥æ‹±ä¸€å’
        <span class="list-group-count">(11)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-341e8375a2508f99f2d1d6e86d6085dd"
           role="tabpanel" aria-labelledby="heading-341e8375a2508f99f2d1d6e86d6085dd">
        
        
          
  <div class="category-post-list">

    
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE.html" title="ç½‘ç»œåŸºç¡€-è·¯ç”±é€‰æ‹©åè®®"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ç½‘ç»œåŸºç¡€-è·¯ç”±é€‰æ‹©åè®®</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0.html" title="ç½‘ç»œåŸºç¡€-TCPåè®®"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ç½‘ç»œåŸºç¡€-TCPåè®®</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/TCP%E5%8D%8F%E8%AE%AE%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0.html" title="TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› "
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„TCPåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦åŸå› </span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E7%9A%84ISN%E9%9C%80%E8%A6%81%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90.html" title="ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆï¼Ÿ"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„ä¸ºä»€ä¹ˆTCPçš„ISNéœ€è¦éšæœºç”Ÿæˆï¼Ÿ</span>
        </a>
      
    
      

      

      
        
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MultiPaxos%E6%80%9D%E6%83%B3.html" title="MultiPaxosæ€æƒ³"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„MultiPaxosæ€æƒ³</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/MySQL%20XA.html" title="MySQL XA"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„MySQL XA</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/Raft%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95.html" title="Raftå…±è¯†ç®—æ³•"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„Raftå…±è¯†ç®—æ³•</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/BasicPaxos%E7%AE%97%E6%B3%95.html" title="BasicPaxosç®—æ³•"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">ğŸ“„BasicPaxosç®—æ³•</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/http_protocol_conclusion.html" title="HTTPåè®®é€Ÿè§ˆ"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„HTTPåè®®é€Ÿè§ˆ</span>
        </a>
      
    
      

      

      

      
        <a href="/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%90%86%E8%AE%BA%E5%BA%8F%E5%B9%95.html" title="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåºå¹•"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">ğŸ“„åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåºå¹•</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <div id="post-icon">ğŸ“</div>
          <article class="post-content mx-auto">
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
<!--      <i class="iconfont icon-books"></i>-->
        ğŸ—‚ï¸

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%97%A5%E6%8B%B1%E4%B8%80%E5%8D%92/" class="category-chain-item"   >æ—¥æ‹±ä¸€å’</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
<!--      <i class="iconfont icon-tags"></i>-->
        ğŸ·ï¸
        <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%90%86%E8%AE%BA/">#åˆ†å¸ƒå¼ç†è®º</a>
      
    </div>
  
</div>

            </div>
            <hr style="border-bottom: 2px solid #b18082">
            <!-- SEO header -->
            <h1 style="display: none">BasicPaxosç®—æ³•</h1>
            
            
              <div class="markdown-body">
                
                <hr>
<ul>
<li>
<p>CFT éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œ æ•…éšœå®¹é”™ç®—æ³•</p>
</li>
<li>
<p>ç›®çš„</p>
<ul>
<li>å¤šèŠ‚ç‚¹å°±æŸä¸€ä¸ªå€¼è¾¾æˆå…±è¯†</li>
<li>è¾¾æˆäº†å…±è¯†åï¼Œå€¼å°±ä¸ä¼šå†å˜äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜æ•°æ®çš„å€¼ï¼Œå¯ä»¥å®ç°çŠ¶æ€æœºï¼Œå’Œæè®®æ–°çš„æŒ‡ä»¤ã€‚</li>
</ul>
</li>
<li>
<p>ä¸‰ä¸ªè§’è‰²</p>
<ul>
<li>Proposerï¼ŒAcceptorï¼ŒLearner</li>
</ul>
</li>
<li>
<p>å•è°ƒé€’å¢çš„ææ¡ˆç¼–å·</p>
<ul>
<li>è®ºæ–‡æåˆ°äº†æ€è·¯ã€‚ç‹¬ç«‹ã€é€’å¢ã€å­˜å‚¨åœ¨å¯é æ€§è®¾å¤‡ä¸­ã€‚å…·ä½“ç»†èŠ‚å®ç°ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftçš„CurrentTermçš„å®ç°ï¼ˆRaft.setCurrentTerm()ã€raftState.getCurrentTerm()ã€raftState.setCurrentTerm()ï¼‰ï¼ŒåŸå­ã€é€’å¢ã€æŒä¹…å­˜å‚¨ã€‚</li>
</ul>
</li>
<li>
<p>äºŒé˜¶æ®µæäº¤æ€æƒ³</p>
<ul>
<li>å‡†å¤‡é˜¶æ®µ
<ul>
<li>å„ä¸ªèŠ‚ç‚¹ä¾æ®è‡ªèº«æƒ…å†µï¼Œå“åº”â€œå‡†å¤‡è¯·æ±‚â€ä¸­çš„ææ¡ˆ</li>
<li>è‹¥æ”¶åˆ°çš„ææ¡ˆç¼–å·å°äºç­‰äº å·²æ”¶åˆ°çš„â€œå‡†å¤‡è¯·æ±‚â€ä¸­æœ€å¤§çš„ææ¡ˆç¼–å·ï¼Œåˆ™ä¸å“åº”</li>
<li>è‹¥ä¹‹å‰å·²ç»æ¥å—äº†æŸä¸ªææ¡ˆï¼Œé‚£ä¹ˆè¿™æ¬¡â€œå‡†å¤‡è¯·æ±‚â€çš„å“åº”ä¸­ï¼Œä¼šåŒ…å«å·²ç»æ¥å—çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä¿¡æ¯ã€‚ï¼ˆProposerä¼šæ ¹æ®å“åº”å¤„ç†æ¥ä¸‹æ¥â€œæ¥å—è¯·æ±‚â€çš„ææ¡ˆå€¼ï¼Œå¦‚æœå¤§å¤šæ•°èŠ‚ç‚¹å·²ç»æ¥å—äº†ä¸€ä¸ªä¸€è‡´çš„å€¼ï¼Œåˆ™ä»¥è¿™ä¸ªå€¼ä¸ºå‡†ã€‚ï¼‰</li>
</ul>
</li>
<li>æ¥å—é˜¶æ®µ
<ul>
<li>å„ä¸ªèŠ‚ç‚¹ä¾æ®è‡ªèº«æƒ…å†µï¼Œæ¥æ”¶â€œæ¥å—è¯·æ±‚â€ä¸­çš„ææ¡ˆ</li>
<li>è‹¥â€œæ¥å—è¯·æ±‚â€ä¸­ææ¡ˆç¼–å·å°äºå·²ç»å“åº”çš„<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œåˆ™ä¼šæ‹’ç»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¤§å¤šæ•°åŸåˆ™ï¼Œè€Œä¸æ˜¯å…¨éƒ¨</p>
<ul>
<li>æä¾›äº†ä¸€å®šçš„å®¹é”™èƒ½åŠ›</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿ
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯å…¶ç»„ä»¶åˆ†å¸ƒåœ¨è¿ç½‘çš„è®¡ç®—æœºä¸Šï¼Œç»„ä»¶ä¹‹é—´é€šè¿‡ä¼ é€’æ¶ˆæ¯è¿›è¡Œé€šä¿¡å’Œåè°ƒçš„ç³»ç»Ÿã€‚</li>
<li>ä¸‰ä¸ªç‰¹ç‚¹ï¼šä¸å…±äº«å†…å­˜ï¼ˆéœ€è¦ç½‘ç»œä¼ è¾“ï¼‰ï¼Œä¸å…±äº«æ—¶é’Ÿï¼Œä¸å…±äº«æ“ä½œç³»ç»Ÿ</li>
<li>ä¸‰ä¸ªé—®é¢˜ï¼šç½‘ç»œé—®é¢˜ï¼Œæ—¶é’Ÿé—®é¢˜ï¼Œéƒ¨åˆ†å¤±æ•ˆpartial failure</li>
<li>è¯·æ±‚ç»“æœå­˜åœ¨ä¸‰æ€ï¼šæˆåŠŸï¼Œå¤±è´¥ï¼Œè¶…æ—¶</li>
<li>ä¸‰å¤§æ–¹å‘ï¼šåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿ
<ul>
<li>å„ä¸ªæ–¹å‘éƒ½æœ‰ä¸€äº›ç‰¹å®šçš„ç®—æ³•ï¼Œä½†æ˜¯åˆ†å¸ƒå¼å…±è¯†é—®é¢˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„é—®é¢˜ï¼šå¦‚ä½•è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¾¾æˆå…±è¯†</li>
</ul>
</li>
</ul>
</li>
<li>å…±è¯†
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†</li>
<li></li>
</ul>
</li>
<li>æ‹œå åº­å°†å†›é—®é¢˜
<ul>
<li>åˆ†å¸ƒå¼å…±è¯†é—®é¢˜
<ul>
<li>ä»€ä¹ˆæ˜¯å…±è¯†
<ul>
<li>ç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹å¯¹æŸä¸ªå€¼è¾¾æˆä¸€è‡´</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆè¦è¾¾æˆå…±è¯†</li>
</ul>
</li>
<li>å®¹é”™ç®—æ³•åˆ†ä¸ºä¸¤ç±»</li>
<li>æœ‰æ— æ¶æ„è¡Œä¸ºåŒºåˆ†ä½¿ç”¨BFTè¿˜æ˜¯CFT</li>
</ul>
</li>
<li>Paxosæ˜¯å±äºCFTçš„ä¸€ç§</li>
<li>Paxosé‡è¦æ€§
<ul>
<li>Chubbyä½œè€…MikeBurrowsè¯´è¿‡ï¼Œè¿™ä¸–ç•Œä¸Šåªæœ‰ä¸€ç§ä¸€è‡´æ€§å…±è¯†ç®—æ³•ï¼Œé‚£å°±æ˜¯Paxos</li>
</ul>
</li>
</ul>
<hr>
<p>Paxosç®—æ³•åŒ…å«ä¸¤éƒ¨åˆ†</p>
<ul>
<li>
<p>ä¸€ä¸ªæ˜¯Basic Paxosç®—æ³•ï¼Œæè¿°å¤šèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±ä¸€ä¸ªå€¼è¾¾æˆå…±è¯†ã€‚</p>
</li>
<li>
<p>ä¸€ä¸ªæ˜¯Multi Paxosæ€æƒ³ï¼Œæè¿°å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚</p>
</li>
</ul>
<p>å…ˆå¤§è‡´äº†è§£ä¸€ä¸‹æ‹œå åº­å°†å†›é—®é¢˜ã€‚</p>
<p>æ‹œå åº­å°†å†›é—®é¢˜ï¼ˆThe Byzantine Generals Problemï¼‰æ˜¯Lamportå€ŸåŠ©ä¸€ä¸ªå°†å†›çš„æ•…äº‹æ¥å±•ç°<strong>åˆ†å¸ƒå¼å…±è¯†é—®é¢˜</strong>ï¼Œå¹¶ä¸”æ¢è®¨å’Œè®ºè¯äº†è§£å†³çš„åŠæ³•ã€‚å¯ä»¥è®¤ä¸ºæ‹œå åº­å°†å†›é—®é¢˜æ˜¯åˆ†å¸ƒå¼é¢†åŸŸæœ€å¤æ‚çš„ä¸€ä¸ªå®¹é”™æ¨¡å‹ï¼Œå®ƒæä¾›äº†åˆ†å¸ƒå¼å…±è¯†é—®é¢˜çš„è§£å†³æ€è·¯ã€‚</p>
<p>ç®€å•è¯´ï¼Œæ‹œå åº­å°†å†›é—®é¢˜æè¿°äº†ä¸€ç§åˆ†å¸ƒå¼æ•…éšœåœºæ™¯ï¼Œé™¤äº†å­˜åœ¨**é€šä¿¡æ•…éšœï¼ˆcrash faultï¼‰<strong>è¡Œä¸ºï¼Œè¿˜å­˜åœ¨</strong>æ¶æ„è¡Œä¸ºï¼ˆcorruptï¼‰**çš„ä¸€ä¸ªåœºæ™¯ã€‚</p>
<ul>
<li>
<p>é€šä¿¡æ•…éšœcrash faultï¼šæ¶ˆæ¯ä¸¢å¤±ï¼Œæ¶ˆæ¯é‡å¤ç­‰</p>
</li>
<li>
<p>æ¶æ„è¡Œä¸ºcorruptï¼šç¯¡æ”¹æ¶ˆæ¯ï¼Œä¼ªé€ æ¶ˆæ¯ç­‰</p>
</li>
</ul>
<p>æˆ‘ä»¬ä¾æ®æ˜¯å¦åœºæ™¯ä¸­æ˜¯å¦å­˜åœ¨æ¶æ„è¡Œä¸ºï¼Œå¯ä»¥å°†å®¹é”™ç®—æ³•</p>
<ul>
<li>å¯¹äºå­˜åœ¨æ¶æ„è¡Œä¸ºçš„åœºæ™¯ï¼ˆå¦‚åŒºå—é“¾ï¼‰ï¼Œè¦è§£å†³å…±è¯†é—®é¢˜ï¼Œå¿…é¡»ä½¿ç”¨æ‹œå åº­å®¹é”™ç®—æ³•ï¼ˆByzantine Fault Toleranceï¼ŒBFTï¼‰</li>
<li>å¯¹äºä¸å­˜åœ¨æ¶æ„è¡Œä¸ºï¼Œåªå­˜åœ¨é€šä¿¡æ•…éšœè¡Œä¸ºçš„åœºæ™¯ï¼Œè¦è§£å†³å…±è¯†é—®é¢˜ï¼Œå°±å¯ä»¥ä½¿ç”¨éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯æ•…éšœå®¹é”™ç®—æ³•ï¼ˆCrash Fault Tolerance, CFTï¼‰</li>
</ul>
<p>Paxosç®—æ³•æ˜¯CFTç®—æ³•çš„ä¸€ç§ï¼Œå®ƒè§£å†³çš„æ˜¯å½“é›†ç¾¤èŠ‚ç‚¹ä¸­ä¸å­˜åœ¨æ¶æ„è¡Œä¸ºï¼ˆç¯¡æ”¹ï¼Œä¼ªé€ ä¿¡æ¯ï¼‰ï¼Œåªå¯èƒ½å‡ºç°é€šä¿¡æ•…éšœï¼ˆæ¶ˆæ¯ä¸¢å¤±ï¼Œé‡å¤ï¼‰æƒ…å†µä¸‹çš„å…±è¯†é—®é¢˜ã€‚</p>
<p>è§’è‰²ï¼šClient, Proposerï¼ŒAcceptorï¼Œ Learner</p>
<p>Proposal, proposal identified number,</p>
<p>Basic Paxosæ˜¯ä¸€ä¸ªç»å…¸çš„ä¸¤é˜¶æ®µæäº¤ã€‚</p>
<blockquote>
<p>Phase 1<br>
Phase 1a: Prepare<br>
A Proposer creates a message, which we call a â€œPrepareâ€, identified with a number n. Note that n is not the value to be proposed and maybe agreed on, but just a number which uniquely identifies this initial message by the proposer (to be sent to the acceptors). The number n must be greater than any number used in any of the previous Prepare messages by this Proposer. Then, it sends the Prepare message containing n to a Quorum of Acceptors. Note that the Prepare message only contains the number n (that is, it does not have to contain e.g. the proposed value, often denoted by v). The Proposer decides who is in the Quorum[how?]. A Proposer should not initiate Paxos if it cannot communicate with at least a Quorum of Acceptors.</p>
<p>ä¸€ä¸ªProposeråˆ›å»ºä¸€ä¸ªPrepareæ¶ˆæ¯ï¼Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„nå”¯ä¸€æ ‡è¯†ï¼Œè®°åšPrepare[n,]ã€‚è¦æ³¨æ„ï¼Œnä¸æ˜¯è¢«æè®®çš„å€¼ï¼Œåªæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¢«proposerç”¨æ¥å”¯ä¸€æ ‡è¯†è¿™æ¡åˆå§‹æ¶ˆæ¯ï¼ˆå‘å¾€å„ä¸ªacceptorï¼‰çš„æ•°å­—è€Œå·²ã€‚æ•°å­—nå¯¹äºè¿™ä¸ªproposerè€Œè¨€ï¼Œå¿…é¡»æ˜¯é€’å¢çš„æœªè¢«ä½¿ç”¨è¿‡çš„ã€‚ç„¶åè¿™ä¸ªPrepare[n]æ¶ˆæ¯ä¼šè¢«å‘å¾€æ³•å®šæ•°é‡çš„acceptorã€‚æ³¨æ„è¿™ä¸ªæ¶ˆæ¯åªæºå¸¦æ•°å­—nï¼Œå¹¶ä¸åŒ…å«æè®®å€¼vã€‚</p>
<p>Phase 1b: Promise<br>
Any of the Acceptors waits for a Prepare message from any of the Proposers. If an Acceptor receives a Prepare message, the Acceptor must look at the identifier number n of the just received Prepare message. There are two cases.<br>
If n is higher than every previous proposal number received, from any of the Proposers, by the Acceptor, then the Acceptor must return a message, which we call a â€œPromiseâ€, to the Proposer, to ignore all future proposals having a number less than n. If the Acceptor accepted a proposal at some point in the past, it must include the previous proposal number, say m, and the corresponding accepted value, say w, in its response to the Proposer.<br>
Otherwise (that is, n is less than or equal to any previous proposal number received from any Proposer by the Acceptor) the Acceptor can ignore the received proposal. It does not have to answer in this case for Paxos to work. However, for the sake of optimization, sending a denial (Nack) response would tell the Proposer that it can stop its attempt to create consensus with proposal n.</p>
<p>è‹¥ä¸€ä¸ªAcceptoræ¥æ”¶åˆ°äº†prepare[n,]æ¶ˆæ¯ï¼Œå®ƒä¼šæŸ¥çœ‹è¿™ä¸ªææ¡ˆå·næ˜¯å¦æ˜¯å®ƒä¹‹å‰æ”¶åˆ°çš„æ‰€æœ‰æ¶ˆæ¯ä¸­æœ€å¤§çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå“åº”ç»™proposerï¼Œè®°åšpromise[]ã€‚å¹¶ä¸”ä¼šå¿½ç•¥ä¹‹åæ”¶åˆ°çš„ææ¡ˆå·å°äºnçš„æ‰€æœ‰ææ¡ˆã€‚å¦‚æœè¿™ä¸ªaceeptoråœ¨ä¹‹å‰æ¥å—äº†(accepted)ä¸€ä¸ªææ¡ˆ[m,w]ï¼Œé‚£ä¹ˆpromiseå“åº”å°±å¿…é¡»å¸¦ä¸Šè¿™ä¸ªææ¡ˆä¿¡æ¯ï¼Œè®°åšpromise[m,w]ã€‚</p>
<p>å¦åˆ™ï¼Œå¦‚æœacceptoræ”¶åˆ°çš„ææ¡ˆå·å°äºæˆ–ç­‰äºä¹‹å‰æ”¶åˆ°çš„ä»»ä½•ææ¡ˆå·ï¼Œacceptorå°±ä¼šå¿½ç•¥æ‰è¿™ä¸ªæ¶ˆæ¯ã€‚å‡ºäºä¼˜åŒ–çš„è€ƒè™‘ï¼Œacceptorä¼šå“åº”ä¸€ä¸ªæ‹’ç»ç»™proposerï¼Œè®©proposerä¸è¦å†ä½¿ç”¨nä½œä¸ºææ¡ˆå·ã€‚</p>
<p>Phase 2<br>
Phase 2a: Accept<br>
If a Proposer receives a majority of Promises from a Quorum of Acceptors, it needs to set a value v to its proposal. If any Acceptors had previously accepted any proposal, then theyâ€™ll have sent their values to the Proposer, who now must set the value of its proposal, v, to the value associated with the highest proposal number reported by the Acceptors, letâ€™s call it z. If none of the Acceptors had accepted a proposal up to this point, then the Proposer may choose the value it originally wanted to propose, say x.[19]<br>
The Proposer sends an Accept message, (n, v), to a Quorum of Acceptors with the chosen value for its proposal, v, and the proposal number n (which is the same as the number contained in the Prepare message previously sent to the Acceptors). So, the Accept message is either (n, v=z) or, in case none of the Acceptors previously accepted a value, (n, v=x).<br>
This Accept message should be interpreted as a â€œrequestâ€, as in â€œAccept this proposal, please!â€.</p>
<p>å¦‚æœä¸€ä¸ªproposeræ”¶åˆ°äº†å¤§éƒ¨åˆ†acceptorçš„promiseæ¶ˆæ¯ï¼Œ</p>
<p>Phase 2b: Accepted<br>
If an Acceptor receives an Accept message, (n, v), from a Proposer, it must accept it if and only if it has not already promised (in Phase 1b of the Paxos protocol) to only consider proposals having an identifier greater than n.<br>
If the Acceptor has not already promised (in Phase 1b) to only consider proposals having an identifier greater than n, it should register the value v (of the just received Accept message) as the accepted value (of the Protocol), and send an Accepted message to the Proposer and every Learner (which can typically be the Proposers themselves).<br>
Else, it can ignore the Accept message or request.<br>
Note that an Acceptor can accept multiple proposals. This can happen when another Proposer, unaware of the new value being decided, starts a new round with a higher identification number n. In that case, the Acceptor can promise and later accept the new proposed value even though it has accepted another one earlier. These proposals may even have different values in the presence of certain failures[example needed]. However, the Paxos protocol will guarantee that the Acceptors will ultimately agree on a single value.</p>
</blockquote>
<p>ç¬¬ä¸€é˜¶æ®µï¼š</p>
<ul>
<li>prepareå‡†å¤‡ï¼šproposerå‘acceptorsæå‡ºä¸€ä¸ªææ¡ˆ</li>
<li>promiseæ‰¿è¯ºï¼šacceptoræ‰¿è¯ºåªæ¥å—æœ€å¤§ææ¡ˆå·çš„ææ¡ˆ</li>
</ul>
<p>ç¬¬äºŒé˜¶æ®µï¼š</p>
<ul>
<li>accept</li>
<li>accepted</li>
</ul>
<ol>
<li>å¦‚æœ<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œå°äºç­‰äºæ¥å—è€…å·²ç»å“åº”çš„å‡†å¤‡è¯·æ±‚çš„ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºä¸å“åº”è¿™ä¸ªå‡†å¤‡è¯·æ±‚ï¼›</li>
<li>å¦‚æœ<strong>æ¥å—è¯·æ±‚</strong>ä¸­çš„ææ¡ˆçš„ææ¡ˆç¼–å·ï¼Œå°äºæ¥å—è€…å·²ç»å“åº”çš„<strong>å‡†å¤‡è¯·æ±‚</strong>çš„ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºä¸é€šè¿‡è¿™ä¸ªææ¡ˆï¼›</li>
<li>å¦‚æœæ¥å—è€…ä¹‹å‰æœ‰é€šè¿‡ææ¡ˆï¼Œé‚£ä¹ˆæ¥å—è€…å°†æ‰¿è¯ºï¼Œä¼šåœ¨<strong>å‡†å¤‡è¯·æ±‚</strong>çš„å“åº”ä¸­ï¼ŒåŒ…å«å·²ç»é€šè¿‡çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä¿¡æ¯ã€‚</li>
</ol>
<p>æ€ä¹ˆä¿éšœææ¡ˆå·ä¸é‡å¤å‘¢ï¼Ÿ</p>
<p>å¯ä»¥é€šè¿‡ç‹¬ç«‹å•è°ƒé€’å¢ã€éšæœºè¶…æ—¶ï¼Œæ¥é¿å…é‡å¤å†²çªï¼Œæ¯”å¦‚ï¼Œå¯ä»¥å‚è€ƒHashicorp Raftå¯¹CurrentTermçš„å®ç°ã€‚</p>
<p>@Tung ç›®å‰çœ‹æ¥ï¼Œæ¯”è¾ƒå…³é”®çš„å°±æ˜¯ææ¡ˆç¼–å·çš„å•è°ƒé€’å¢ï¼Œä»¥åŠå¤§å¤šæ•°åŸåˆ™</p>
<p>Paxosèƒ½ä¿è¯ä¸€æ—¦è¾¾æˆå…±è¯†ï¼Œåé¢é™¤äº†ææ¡ˆç¼–å·å˜å¤§ä¹‹å¤–ï¼Œææ¡ˆçš„å€¼ä¸å˜ï¼Œè€Œä¸”2pcçš„ç¬¬ä¸€é˜¶æ®µå°±èƒ½æ„ŸçŸ¥åˆ°å·²ç»é€šè¿‡çš„ææ¡ˆçš„ä¿¡æ¯ã€‚</p>
<p>æ··æ·†äº†å‰¯æœ¬å’Œå…±è¯†çš„æ¦‚å¿µï¼Ÿï¼Œé›†ç¾¤å°±æŸä¸ªææ¡ˆå½¢æˆå¤§å¤šæ•°åè¾¾æˆäº†å…±è¯†ï¼Œä½†æ˜¯å‰¯æœ¬ä¸ä¿è¯ä¸€è‡´ï¼Œåœ¨2f+1ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é‡Œï¼Œåªè¦f+1ä¸ªèŠ‚ç‚¹æ¥å—æŸä¸ªææ¡ˆkï¼Œåˆ™å°±kè¾¾æˆå…±è¯†ï¼Œä½†æ˜¯å‰¯æœ¬åªä¿è¯è‡³å°‘f+1ä¸ªæ˜¯æ­£ç¡®çš„ææ¡ˆï¼Œå…¶ä½™çš„èŠ‚ç‚¹ä¸Šçš„ææ¡ˆä¸åšä¿è¯ã€‚ç®€å•çš„è¯´æ³•æ˜¯æ­¤æ—¶éœ€è¦è·å–æŸä¸ªææ¡ˆçš„è¯ï¼Œéœ€è¦ä»2f+1ä¸ªèŠ‚ç‚¹ä¸Šéƒ½è·å–ä¸€æ¬¡ï¼Œå†ç¡®è®¤é›†ç¾¤æäº¤çš„ææ¡ˆæ˜¯å“ªä¸ªï¼Œæ‰ç®—æ˜¯ä»é›†ç¾¤çš„ä¸€æ¬¡è¯»å–è¿‡ç¨‹ã€‚</p>
<p><img src="https://tximgcdn.tung7.com/BasicPaxos%E7%AE%97%E6%B3%95/BasicPaxos%E7%AE%97%E6%B3%95_20210807005639_357847.png" srcset="/img/loading.gif" lazyload alt="image-20210807005634094"></p>

                
              </div>
            
            <hr/>
            <div>

              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>BasicPaxosç®—æ³•</div>
      <div>http://www.tung7.com/æ—¥æ‹±ä¸€å’/BasicPaxosç®—æ³•.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Tung7</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>May 13, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - Non-commercial">
                    <i class="iconfont icon-nc"></i>
                  </span>
                </a>
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - Share-alike">
                    <i class="iconfont icon-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2 side-col-post-right">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
<!--    <i class="iconfont icon-list"></i>-->
    ğŸ“’<span>TOC</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.events.registerRefreshCallback(function() {
      if ('mermaid' in window) {
        mermaid.init();
      }
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/hexojs/hexo" target="_blank">Hexo</a>ğŸ”¸<a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank">Fluid</a> <br> Â©ï¸ 2015-2023â¤ï¸Tung7 ç‰ˆæƒæ‰€æœ‰ | <a href="http://beian.miit.gov.cn" target="_blank" style="border-bottom:1px solid">ç²¤ICPå¤‡15069283å·</a> 
    </div>
  
  
  
    <!-- å¤‡æ¡ˆä¿¡æ¯ ICP for China -->
    <div class="beian">
  <span>
      
  </span>
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
